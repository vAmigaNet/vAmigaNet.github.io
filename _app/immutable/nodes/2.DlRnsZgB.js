import"../chunks/NZTpNUN0.js";import{i as Ut}from"../chunks/DHhcLtQ9.js";import{S as Ss,D as jt,E as As,am as ud,an as cd,ao as ld,C as Vo,O as Pl,N as Ua,P as jr,U as fd,a as f,Y as _e,G as dd,I as vd,J as Du,K as Oi,L as Aa,ap as gd,aq as hd,M as kl,ar as Dl,as as Ol,m as yt,a7 as Ou,at as Ci,$ as Gi,au as Ts,av as md,aw as pd,ax as _d,ay as xo,az as Rs,aA as yd,aB as bd,aC as wd,aD as Cu,aE as Ed,aF as Cl,aG as Sd,Q as xs,aH as Ad,aI as Td,t as Ml,aJ as Rd,aK as xd,aL as Pd,aM as kd,j as Dd,aN as Od,aO as Cd,aP as Md,aQ as Tn,aR as Id,aS as $d,aT as Nd,aU as Ld,F as Ud,aV as Fd,aW as Kd,f as Tt,aX as Bd,aY as Vd,aZ as Hd,a_ as Il,aa as Gd,n as Sn,V as jd,p as ot,l as Re,y as W,z as j,q as lt,v as ie,x as it,A as Z,ac as St,o as ze,ak as tt,b as Ve,ai as Ct,a$ as Qt,B as Rt,ad as zn,b0 as rn,b1 as ji,Z as Ho,e as Po,b2 as Wd,ab as sr,b3 as zd,b4 as An,i as Kn,b5 as Lr,ag as Gr,b6 as Ps,b7 as qd,al as Yd,b8 as Xd,b9 as Qd}from"../chunks/CCYfz4d6.js";import{p as he,i as Xe,l as Lt,s as un,b as Kt}from"../chunks/Q-tPc7B_.js";import{b as O,s as vt,a as fe,d as Zd,u as Ue}from"../chunks/B3TMqfdX.js";import{d as En,s as ko,p as sa,L as dt,l as Ht,a as bn,b as wn,c as $l,r as ks,e as Ta,i as Pa,m as Wi,f as Mr,g as Mn,k as Ds,W as Ft,h as ea,O as S,w as on,j as sn,n as Nl,M as zi,I as nn,R as ka,o as Ll,q as Os,t as Cs,u as Ul,v as Fl,x as Kl,y as Bl,z as qi,A as Yi,B as _o,C as yo,D as Xi,E as Jd,F as re,T as Mt,G as Qi,H as kn,J as Vl,K as Hl,N as Ms,P as Gl,Q as Do,S as jl,U as Wl,V as zl,X as Oo,Y as ql,Z as Yl,_ as Xl,$ as Ql,a0 as Zl,a1 as Is,a2 as $s,a3 as ev,a4 as Jl,a5 as ef,a6 as tf,a7 as Zi,a8 as Ji,a9 as nf,aa as es,ab as ts,ac as ns,ad as rf,ae as rs,af as Mu,ag as Iu,ah as $u,ai as Nu,aj as Lu,ak as Uu,al as Fu,am as Ku,an as Bu,ao as Vu,ap as Hu,aq as Gu,ar as ju,as as Wu,at as zu,au as qu,av as Yu,aw as Xu,ax as Qu,ay as Zu,az as Ju,aA as ec,aB as tc,aC as nc,aD as rc,aE as ac,aF as oc,aG as ic,aH as sc,aI as uc,aJ as cc,aK as lc,aL as fc,aM as dc,aN as vc,aO as gc,aP as hc,aQ as mc,aR as pc,aS as _c,aT as yc,aU as bc,aV as wc,aW as Ec,aX as Sc,aY as Ac,aZ as Tc,a_ as Rc,a$ as xc,b0 as Pc,b1 as kc,b2 as Dc,b3 as Oc,b4 as Cc,b5 as Mc,b6 as Ic,b7 as $c,b8 as Nc,b9 as Lc,ba as Uc,bb as Fc,bc as Kc,bd as Bc,be as Vc,bf as Hc,bg as Gc,bh as jc,bi as Wc,bj as zc,bk as qc,bl as Yc,bm as Xc,bn as Qc,bo as Zc,bp as Jc,bq as el,br as tl}from"../chunks/dMIvRkuj.js";import"../chunks/Cj6Et1q-.js";function tv(a,r){if(r){const n=document.body;a.autofocus=!0,Ss(()=>{document.activeElement===n&&a.focus()})}}let nl=!1;function nv(){nl||(nl=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{if(!a.defaultPrevented)for(const r of a.target.elements)r.__on_r?.()})},{capture:!0}))}function Co(a,r,n){jt&&As();var s=a,o=fd,u,l=ud()?cd:ld;Vo(()=>{l(o,o=r())&&(u&&Pl(u),u=Ua(()=>n(s)))}),jt&&(s=jr)}function ta(a,r){return r}function rv(a,r,n,s){for(var o=[],u=r.length,l=0;l<u;l++)md(r[l].e,o,!0);var h=u>0&&o.length===0&&n!==null;if(h){var b=n.parentNode;pd(b),b.append(n),s.clear(),hr(a,r[0].prev,r[u-1].next)}_d(o,()=>{for(var m=0;m<u;m++){var _=r[m];h||(s.delete(_.k),hr(a,_.prev,_.next)),xo(_.e,!h)}})}function na(a,r,n,s,o,u=null){var l=a,h={flags:r,items:new Map,first:null},b=(r&Cl)!==0;if(b){var m=a;l=jt?Oi(bd(m)):m.appendChild(wd())}jt&&As();var _=null,R=!1,p=_e(()=>{var A=n();return Ol(A)?A:A==null?[]:Dl(A)});Vo(()=>{var A=f(p),y=A.length;if(R&&y===0)return;R=y===0;let w=!1;if(jt){var x=dd(l)===vd;x!==(y===0)&&(l=Du(),Oi(l),Aa(!1),w=!0)}if(jt){for(var M=null,P,T=0;T<y;T++){if(jr.nodeType===gd&&jr.data===hd){l=jr,w=!0,Aa(!1);break}var v=A[T],I=s(v,T);P=af(jr,h,M,null,v,I,T,o,r,n),h.items.set(I,P),M=P}y>0&&Oi(Du())}jt||av(A,h,l,o,r,s,n),u!==null&&(y===0?_?kl(_):_=Ua(()=>u(l)):_!==null&&Pl(_,()=>{_=null})),w&&Aa(!0),f(p)}),jt&&(l=jr)}function av(a,r,n,s,o,u,l){var h=(o&Sd)!==0,b=(o&(Rs|Ts))!==0,m=a.length,_=r.items,R=r.first,p=R,A,y=null,w,x=[],M=[],P,T,v,I;if(h)for(I=0;I<m;I+=1)P=a[I],T=u(P,I),v=_.get(T),v!==void 0&&(v.a?.measure(),(w??=new Set).add(v));for(I=0;I<m;I+=1){if(P=a[I],T=u(P,I),v=_.get(T),v===void 0){var G=p?p.e.nodes_start:n;y=af(G,r,y,y===null?r.first:y.next,P,T,I,s,o,l),_.set(T,y),x=[],M=[],p=y.next;continue}if(b&&ov(v,P,I,o),(v.e.f&Ci)!==0&&(kl(v.e),h&&(v.a?.unfix(),(w??=new Set).delete(v))),v!==p){if(A!==void 0&&A.has(v)){if(x.length<M.length){var D=M[0],U;y=D.prev;var Q=x[0],ae=x[x.length-1];for(U=0;U<x.length;U+=1)rl(x[U],D,n);for(U=0;U<M.length;U+=1)A.delete(M[U]);hr(r,Q.prev,ae.next),hr(r,y,Q),hr(r,ae,D),p=D,y=ae,I-=1,x=[],M=[]}else A.delete(v),rl(v,p,n),hr(r,v.prev,v.next),hr(r,v,y===null?r.first:y.next),hr(r,y,v),y=v;continue}for(x=[],M=[];p!==null&&p.k!==T;)(p.e.f&Ci)===0&&(A??=new Set).add(p),M.push(p),p=p.next;if(p===null)continue;v=p}x.push(v),y=v,p=v.next}if(p!==null||A!==void 0){for(var z=A===void 0?[]:Dl(A);p!==null;)(p.e.f&Ci)===0&&z.push(p),p=p.next;var X=z.length;if(X>0){var J=(o&Cl)!==0&&m===0?n:null;if(h){for(I=0;I<X;I+=1)z[I].a?.measure();for(I=0;I<X;I+=1)z[I].a?.fix()}rv(r,z,J,_)}}h&&Ss(()=>{if(w!==void 0)for(v of w)v.a?.apply()}),Gi.first=r.first&&r.first.e,Gi.last=y&&y.e}function ov(a,r,n,s){(s&Rs)!==0&&Cu(a.v,r),(s&Ts)!==0?Cu(a.i,n):a.i=n}function af(a,r,n,s,o,u,l,h,b,m){var _=(b&Rs)!==0,R=(b&yd)===0,p=_?R?yt(o,!1,!1):Ou(o):o,A=(b&Ts)===0?l:Ou(l),y={i:A,v:p,k:u,a:null,e:null,prev:n,next:s};try{return y.e=Ua(()=>h(a,p,A,m),jt),y.e.prev=n&&n.e,y.e.next=s&&s.e,n===null?r.first=y:(n.next=y,n.e.next=y.e),s!==null&&(s.prev=y,s.e.prev=y.e),y}finally{}}function rl(a,r,n){for(var s=a.next?a.next.e.nodes_start:n,o=r?r.e.nodes_start:n,u=a.e.nodes_start;u!==s;){var l=Ed(u);o.before(u),u=l}}function hr(a,r,n){r===null?a.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}function Da(a,r,n,s,o){jt&&As();var u=r.$$slots?.[n],l=!1;u===!0&&(u=r.children,l=!0),u===void 0||u(a,l?()=>s:s)}function iv(a,r){var n=void 0,s;Vo(()=>{n!==(n=r())&&(s&&(xo(s),s=null),n&&(s=Ua(()=>{xs(()=>n(a))})))})}function of(a){var r,n,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(r=0;r<o;r++)a[r]&&(n=of(a[r]))&&(s&&(s+=" "),s+=n)}else for(n in a)a[n]&&(s&&(s+=" "),s+=n);return s}function sv(){for(var a,r,n=0,s="",o=arguments.length;n<o;n++)(a=arguments[n])&&(r=of(a))&&(s&&(s+=" "),s+=r);return s}function _r(a){return typeof a=="object"?sv(a):a??""}const al=[...` 	
\r\fÂ \v\uFEFF`];function uv(a,r,n){var s=a==null?"":""+a;if(r&&(s=s?s+" "+r:r),n){for(var o in n)if(n[o])s=s?s+" "+o:o;else if(s.length)for(var u=o.length,l=0;(l=s.indexOf(o,l))>=0;){var h=l+u;(l===0||al.includes(s[l-1]))&&(h===s.length||al.includes(s[h]))?s=(l===0?"":s.substring(0,l))+s.substring(h+1):l=h}}return s===""?null:s}function ol(a,r=!1){var n=r?" !important;":";",s="";for(var o in a){var u=a[o];u!=null&&u!==""&&(s+=" "+o+": "+u+n)}return s}function Mi(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function cv(a,r){if(r){var n="",s,o;if(Array.isArray(r)?(s=r[0],o=r[1]):s=r,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var u=!1,l=0,h=!1,b=[];s&&b.push(...Object.keys(s).map(Mi)),o&&b.push(...Object.keys(o).map(Mi));var m=0,_=-1;const w=a.length;for(var R=0;R<w;R++){var p=a[R];if(h?p==="/"&&a[R-1]==="*"&&(h=!1):u?u===p&&(u=!1):p==="/"&&a[R+1]==="*"?h=!0:p==='"'||p==="'"?u=p:p==="("?l++:p===")"&&l--,!h&&u===!1&&l===0){if(p===":"&&_===-1)_=R;else if(p===";"||R===w-1){if(_!==-1){var A=Mi(a.substring(m,_).trim());if(!b.includes(A)){p!==";"&&R++;var y=a.substring(m,R).trim();n+=" "+y+";"}}m=R+1,_=-1}}}}return s&&(n+=ol(s)),o&&(n+=ol(o,!0)),n=n.trim(),n===""?null:n}return a==null?null:String(a)}function We(a,r,n,s,o,u){var l=a.__className;if(jt||l!==n||l===void 0){var h=uv(n,s,u);(!jt||h!==a.getAttribute("class"))&&(h==null?a.removeAttribute("class"):r?a.className=h:a.setAttribute("class",h)),a.__className=n}else if(u&&o!==u)for(var b in u){var m=!!u[b];(o==null||m!==!!o[b])&&a.classList.toggle(b,m)}return u}function Ii(a,r={},n,s){for(var o in n){var u=n[o];r[o]!==u&&(n[o]==null?a.style.removeProperty(o):a.style.setProperty(o,u,s))}}function Ns(a,r,n,s){var o=a.__style;if(jt||o!==r){var u=cv(r,s);(!jt||u!==a.getAttribute("style"))&&(u==null?a.removeAttribute("style"):a.style.cssText=u),a.__style=r}else s&&(Array.isArray(s)?(Ii(a,n?.[0],s[0]),Ii(a,n?.[1],s[1],"important")):Ii(a,n,s));return s}function as(a,r,n=!1){if(a.multiple){if(r==null)return;if(!Ol(r))return Ad();for(var s of a.options)s.selected=r.includes(il(s));return}for(s of a.options){var o=il(s);if(Td(o,r)){s.selected=!0;return}}(!n||r!==void 0)&&(a.selectedIndex=-1)}function lv(a){var r=new MutationObserver(()=>{as(a,a.__value)});r.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ml(()=>{r.disconnect()})}function il(a){return"__value"in a?a.__value:a.value}const wa=Symbol("class"),Ea=Symbol("style"),sf=Symbol("is custom element"),uf=Symbol("is html");function fv(a){if(jt){var r=!1,n=()=>{if(!r){if(r=!0,a.hasAttribute("value")){var s=a.value;Nt(a,"value",null),a.value=s}if(a.hasAttribute("checked")){var o=a.checked;Nt(a,"checked",null),a.checked=o}}};a.__on_r=n,$d(n),nv()}}function dv(a,r){var n=Us(a);n.value===(n.value=r??void 0)||a.value===r&&(r!==0||a.nodeName!=="PROGRESS")||(a.value=r??"")}function vv(a,r){r?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}function Nt(a,r,n,s){var o=Us(a);jt&&(o[r]=a.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&a.nodeName==="LINK")||o[r]!==(o[r]=n)&&(r==="loading"&&(a[Pd]=n),n==null?a.removeAttribute(r):typeof n!="string"&&cf(a).includes(r)?a[r]=n:a.setAttribute(r,n))}function gv(a,r,n,s,o=!1){var u=Us(a),l=u[sf],h=!u[uf];let b=jt&&l;b&&Aa(!1);var m=r||{},_=a.tagName==="OPTION";for(var R in r)R in n||(n[R]=null);n.class?n.class=_r(n.class):n[wa]&&(n.class=null),n[Ea]&&(n.style??=null);var p=cf(a);for(const T in n){let v=n[T];if(_&&T==="value"&&v==null){a.value=a.__value="",m[T]=v;continue}if(T==="class"){var A=a.namespaceURI==="http://www.w3.org/1999/xhtml";We(a,A,v,s,r?.[wa],n[wa]),m[T]=v,m[wa]=n[wa];continue}if(T==="style"){Ns(a,v,r?.[Ea],n[Ea]),m[T]=v,m[Ea]=n[Ea];continue}var y=m[T];if(!(v===y&&!(v===void 0&&a.hasAttribute(T)))){m[T]=v;var w=T[0]+T[1];if(w!=="$$")if(w==="on"){const I={},G="$$"+T;let D=T.slice(2);var x=Nd(D);if(Cd(D)&&(D=D.slice(0,-7),I.capture=!0),!x&&y){if(v!=null)continue;a.removeEventListener(D,m[G],I),m[G]=null}if(v!=null)if(x)a[`__${D}`]=v,Tn([D]);else{let U=function(Q){m[T].call(this,Q)};m[G]=Md(D,a,U,I)}else x&&(a[`__${D}`]=void 0)}else if(T==="style")Nt(a,T,v);else if(T==="autofocus")tv(a,!!v);else if(!l&&(T==="__value"||T==="value"&&v!=null))a.value=a.__value=v;else if(T==="selected"&&_)vv(a,v);else{var M=T;h||(M=Id(M));var P=M==="defaultValue"||M==="defaultChecked";if(v==null&&!l&&!P)if(u[T]=null,M==="value"||M==="checked"){let I=a;const G=r===void 0;if(M==="value"){let D=I.defaultValue;I.removeAttribute(M),I.defaultValue=D,I.value=I.__value=G?D:null}else{let D=I.defaultChecked;I.removeAttribute(M),I.defaultChecked=D,I.checked=G?D:!1}}else a.removeAttribute(T);else P||p.includes(M)&&(l||typeof v!="string")?a[M]=v:typeof v!="function"&&Nt(a,M,v)}}}return b&&Aa(!0),m}function Ls(a,r,n=[],s,o=!1,u=Dd){const l=n.map(u);var h=void 0,b={},m=a.nodeName==="SELECT",_=!1;if(Vo(()=>{var p=r(...l.map(f)),A=gv(a,h,p,s,o);_&&m&&"value"in p&&as(a,p.value);for(let w of Object.getOwnPropertySymbols(b))p[w]||xo(b[w]);for(let w of Object.getOwnPropertySymbols(p)){var y=p[w];w.description===Od&&(!h||y!==h[w])&&(b[w]&&xo(b[w]),b[w]=Ua(()=>iv(a,()=>y))),A[w]=y}h=A}),m){var R=a;xs(()=>{as(R,h.value,!0),lv(R)})}_=!0}function Us(a){return a.__attributes??={[sf]:a.nodeName.includes("-"),[uf]:a.namespaceURI===Rd}}var sl=new Map;function cf(a){var r=sl.get(a.nodeName);if(r)return r;sl.set(a.nodeName,r=[]);for(var n,s=a,o=Element.prototype;o!==s;){n=kd(s);for(var u in n)n[u].set&&r.push(u);s=xd(s)}return r}const hv=()=>performance.now(),nr={tick:a=>requestAnimationFrame(a),now:()=>hv(),tasks:new Set};function lf(){const a=nr.now();nr.tasks.forEach(r=>{r.c(a)||(nr.tasks.delete(r),r.f())}),nr.tasks.size!==0&&nr.tick(lf)}function mv(a){let r;return nr.tasks.size===0&&nr.tick(lf),{promise:new Promise(n=>{nr.tasks.add(r={c:a,f:n})}),abort(){nr.tasks.delete(r)}}}function mo(a,r){Il(()=>{a.dispatchEvent(new CustomEvent(r))})}function pv(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const r=a.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ul(a){const r={},n=a.split(";");for(const s of n){const[o,u]=s.split(":");if(!o||u===void 0)break;const l=pv(o.trim());r[l]=u.trim()}return r}const _v=a=>a;function Pt(a,r,n,s){var o=(a&Vd)!==0,u=(a&Hd)!==0,l=o&&u,h=(a&Bd)!==0,b=l?"both":o?"in":"out",m,_=r.inert,R=r.style.overflow,p,A;function y(){return Il(()=>m??=n()(r,s?.()??{},{direction:b}))}var w={is_global:h,in(){if(r.inert=_,!o){A?.abort(),A?.reset?.();return}u||p?.abort(),mo(r,"introstart"),p=os(r,y(),A,1,()=>{mo(r,"introend"),p?.abort(),p=m=void 0,r.style.overflow=R})},out(T){if(!u){T?.(),m=void 0;return}r.inert=!0,mo(r,"outrostart"),A=os(r,y(),p,0,()=>{mo(r,"outroend"),T?.()})},stop:()=>{p?.abort(),A?.abort()}},x=Gi;if((x.transitions??=[]).push(w),o&&Ld){var M=h;if(!M){for(var P=x.parent;P&&(P.f&Ud)!==0;)for(;(P=P.parent)&&(P.f&Fd)===0;);M=!P||(P.f&Kd)!==0}M&&xs(()=>{Tt(()=>w.in())})}}function os(a,r,n,s,o){var u=s===1;if(Gd(r)){var l,h=!1;return Ss(()=>{if(!h){var x=r({direction:u?"in":"out"});l=os(a,x,n,s,o)}}),{abort:()=>{h=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n?.deactivate(),!r?.duration)return o(),{abort:Sn,deactivate:Sn,reset:Sn,t:()=>s};const{delay:b=0,css:m,tick:_,easing:R=_v}=r;var p=[];if(u&&n===void 0&&(_&&_(0,1),m)){var A=ul(m(0,1));p.push(A,A)}var y=()=>1-s,w=a.animate(p,{duration:b,fill:"forwards"});return w.onfinish=()=>{w.cancel();var x=n?.t()??1-s;n?.abort();var M=s-x,P=r.duration*Math.abs(M),T=[];if(P>0){var v=!1;if(m)for(var I=Math.ceil(P/16.666666666666668),G=0;G<=I;G+=1){var D=x+M*R(G/I),U=ul(m(D,1-D));T.push(U),v||=U.overflow==="hidden"}v&&(a.style.overflow="hidden"),y=()=>{var Q=w.currentTime;return x+M*R(Q/P)},_&&mv(()=>{if(w.playState!=="running")return!1;var Q=y();return _(Q,1-Q),!0})}w=a.animate(T,{duration:P,fill:"forwards"}),w.onfinish=()=>{y=()=>s,_?.(s,1-s),o()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Sn)},deactivate:()=>{o=Sn},reset:()=>{s===0&&_?.(1,0)},t:()=>y()}}function Ye(a,r,n){var s=jd(a,r);s&&s.set&&(a[r]=n,Ml(()=>{a[r]=null}))}var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var bo={exports:{}},wv=bo.exports,cl;function Ev(){return cl||(cl=1,function(a,r){(function(n,s){a.exports=s()})(wv,function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,i=1,c=arguments.length;i<c;i++)for(var d in t=arguments[i])Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d]);return e}).apply(this,arguments)};function o(e,t,i){for(var c,d=0,g=t.length;d<g;d++)!c&&d in t||((c=c||Array.prototype.slice.call(t,0,d))[d]=t[d]);return e.concat(c||Array.prototype.slice.call(t))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:yv,l=Object.keys,h=Array.isArray;function b(e,t){return typeof t!="object"||l(t).forEach(function(i){e[i]=t[i]}),e}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var m=Object.getPrototypeOf,_={}.hasOwnProperty;function R(e,t){return _.call(e,t)}function p(e,t){typeof t=="function"&&(t=t(m(e))),(typeof Reflect>"u"?l:Reflect.ownKeys)(t).forEach(function(i){y(e,i,t[i])})}var A=Object.defineProperty;function y(e,t,i,c){A(e,t,b(i&&R(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},c))}function w(e){return{from:function(t){return e.prototype=Object.create(t.prototype),y(e.prototype,"constructor",e),{extend:p.bind(null,e.prototype)}}}}var x=Object.getOwnPropertyDescriptor,M=[].slice;function P(e,t,i){return M.call(e,t,i)}function T(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function I(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function G(e,t){if(typeof t=="string"&&R(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var i=[],c=0,d=t.length;c<d;++c){var g=G(e,t[c]);i.push(g)}return i}var E=t.indexOf(".");if(E!==-1){var k=e[t.substr(0,E)];return k==null?void 0:G(k,t.substr(E+1))}}function D(e,t,i){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){v(typeof i!="string"&&"length"in i);for(var c=0,d=t.length;c<d;++c)D(e,t[c],i[c])}else{var g,E,k=t.indexOf(".");k!==-1?(g=t.substr(0,k),(E=t.substr(k+1))===""?i===void 0?h(e)&&!isNaN(parseInt(g))?e.splice(g,1):delete e[g]:e[g]=i:D(k=!(k=e[g])||!R(e,g)?e[g]={}:k,E,i)):i===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function U(e){var t,i={};for(t in e)R(e,t)&&(i[t]=e[t]);return i}var Q=[].concat;function ae(e){return Q.apply([],e)}var dn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ae([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return u[e]}),z=new Set(dn.map(function(e){return u[e]})),X=null;function J(e){return X=new WeakMap,e=function t(i){if(!i||typeof i!="object")return i;var c=X.get(i);if(c)return c;if(h(i)){c=[],X.set(i,c);for(var d=0,g=i.length;d<g;++d)c.push(t(i[d]))}else if(z.has(i.constructor))c=i;else{var E,k=m(i);for(E in c=k===Object.prototype?{}:Object.create(k),X.set(i,c),i)R(i,E)&&(c[E]=t(i[E]))}return c}(e),X=null,e}var ye={}.toString;function de(e){return ye.call(e).slice(8,-1)}var xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof xe=="symbol"?function(e){var t;return e!=null&&(t=e[xe])&&t.apply(e)}:function(){return null};function ve(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Te={};function ne(e){var t,i,c,d;if(arguments.length===1){if(h(e))return e.slice();if(this===Te&&typeof e=="string")return[e];if(d=we(e)){for(i=[];!(c=d.next()).done;)i.push(c.value);return i}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(i=new Array(t);t--;)i[t]=e[t];return i}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var se=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},fn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(fn),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ee(e,t){this.name=e,this.message=t}function Ie(e,t){return e+". Errors: "+Object.keys(t).map(function(i){return t[i].toString()}).filter(function(i,c,d){return d.indexOf(i)===c}).join(`
`)}function Ne(e,t,i,c){this.failures=t,this.failedKeys=c,this.successCount=i,this.message=Ie(e,t)}function ue(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(i){return t[i]}),this.failuresByPos=t,this.message=Ie(e,this.failures)}w(Ee).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(Ne).from(Ee),w(ue).from(Ee);var Pe=Pn.reduce(function(e,t){return e[t]=t+"Error",e},{}),He=Ee,me=Pn.reduce(function(e,t){var i=t+"Error";function c(d,g){this.name=i,d?typeof d=="string"?(this.message="".concat(d).concat(g?`
 `+g:""),this.inner=g||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=ce[t]||i,this.inner=null)}return w(c).from(He),e[t]=c,e},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var q=fn.reduce(function(e,t){return e[t+"Error"]=me[t],e},{}),ct=Pn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=me[t]),e},{});function De(){}function be(e){return e}function Me(e,t){return e==null||e===be?t:function(i){return t(e(i))}}function et(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function gt(e,t){return e===De?t:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var g=t.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?et(c,this.onsuccess):c),d&&(this.onerror=this.onerror?et(d,this.onerror):d),g!==void 0?g:i}}function Et(e,t){return e===De?t:function(){e.apply(this,arguments);var i=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?et(i,this.onsuccess):i),c&&(this.onerror=this.onerror?et(c,this.onerror):c)}}function nt(e,t){return e===De?t:function(i){var c=e.apply(this,arguments);b(i,c);var d=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,i=t.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?et(d,this.onsuccess):d),g&&(this.onerror=this.onerror?et(g,this.onerror):g),c===void 0?i===void 0?void 0:i:b(c,i)}}function pe(e,t){return e===De?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ge(e,t){return e===De?t:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var c=this,d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];return i.then(function(){return t.apply(c,g)})}return t.apply(this,arguments)}}ct.ModifyError=Ne,ct.DexieError=Ee,ct.BulkError=ue;var ht=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zt(e){ht=e}var ln={},$n=100,dn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,m(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,m(t),e]}(),fn=dn[0],Pn=dn[1],dn=dn[2],Pn=Pn&&Pn.then,Wt=fn&&fn.constructor,Hn=!!dn,Rn=function(e,t){Gt.push([e,t]),tn&&(queueMicrotask(ni),tn=!1)},Zn=!0,tn=!0,vn=[],xn=[],gn=be,Jt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:De,pgp:!1,env:{},finalize:De},Ke=Jt,Gt=[],Nn=0,Le=[];function oe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Ke;if(typeof e!="function"){if(e!==ln)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Bt(this,this._value))}this._state=null,this._value=null,++t.ref,function i(c,d){try{d(function(g){if(c._state===null){if(g===c)throw new TypeError("A promise cannot be resolved with itself.");var E=c._lib&&ur();g&&typeof g.then=="function"?i(c,function(k,$){g instanceof oe?g._then(k,$):g.then(k,$)}):(c._state=!0,c._value=g,za(c)),E&&cr()}},Bt.bind(null,c))}catch(g){Bt(c,g)}}(this,e)}var Ge={get:function(){var e=Ke,t=Gn;function i(c,d){var g=this,E=!e.global&&(e!==Ke||t!==Gn),k=E&&!Ln(),$=new oe(function(L,B){la(g,new mt(Ya(c,e,E,k),Ya(d,e,E,k),L,B,e))});return this._consoleTask&&($._consoleTask=this._consoleTask),$}return i.prototype=ln,i},set:function(e){y(this,"then",e&&e.prototype===ln?Ge:{get:function(){return e},set:Ge.set})}};function mt(e,t,i,c,d){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=i,this.reject=c,this.psd=d}function Bt(e,t){var i,c;xn.push(t),e._state===null&&(i=e._lib&&ur(),t=gn(t),e._state=!1,e._value=t,c=e,vn.some(function(d){return d._value===c._value})||vn.push(c),za(e),i&&cr())}function za(e){var t=e._listeners;e._listeners=[];for(var i=0,c=t.length;i<c;++i)la(e,t[i]);var d=e._PSD;--d.ref||d.finalize(),Nn===0&&(++Nn,Rn(function(){--Nn==0&&fa()},[]))}function la(e,t){if(e._state!==null){var i=e._state?t.onFulfilled:t.onRejected;if(i===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Nn,Rn(ti,[i,e,t])}else e._listeners.push(t)}function ti(e,t,i){try{var c,d=t._value;!t._state&&xn.length&&(xn=[]),c=ht&&t._consoleTask?t._consoleTask.run(function(){return e(d)}):e(d),t._state||xn.indexOf(d)!==-1||function(g){for(var E=vn.length;E;)if(vn[--E]._value===g._value)return vn.splice(E,1)}(t),i.resolve(c)}catch(g){i.reject(g)}finally{--Nn==0&&fa(),--i.psd.ref||i.psd.finalize()}}function ni(){Un(Jt,function(){ur()&&cr()})}function ur(){var e=Zn;return tn=Zn=!1,e}function cr(){var e,t,i;do for(;0<Gt.length;)for(e=Gt,Gt=[],i=e.length,t=0;t<i;++t){var c=e[t];c[0].apply(null,c[1])}while(0<Gt.length);tn=Zn=!0}function fa(){var e=vn;vn=[],e.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var t=Le.slice(0),i=t.length;i;)t[--i]()}function Fr(e){return new oe(ln,!1,e)}function _t(e,t){var i=Ke;return function(){var c=ur(),d=Ke;try{return mn(i,!0),e.apply(this,arguments)}catch(g){t&&t(g)}finally{mn(d,!1),c&&cr()}}}p(oe.prototype,{then:Ge,_then:function(e,t){la(this,new mt(null,null,e,t,Ke))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,i=arguments[1];return typeof t=="function"?this.then(null,function(c){return(c instanceof t?i:Fr)(c)}):this.then(null,function(c){return(c&&c.name===t?i:Fr)(c)})},finally:function(e){return this.then(function(t){return oe.resolve(e()).then(function(){return t})},function(t){return oe.resolve(e()).then(function(){return Fr(t)})})},timeout:function(e,t){var i=this;return e<1/0?new oe(function(c,d){var g=setTimeout(function(){return d(new me.Timeout(t))},e);i.then(c,d).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(oe.prototype,Symbol.toStringTag,"Dexie.Promise"),Jt.env=pt(),p(oe,{all:function(){var e=ne.apply(null,arguments).map(Rr);return new oe(function(t,i){e.length===0&&t([]);var c=e.length;e.forEach(function(d,g){return oe.resolve(d).then(function(E){e[g]=E,--c||t(e)},i)})})},resolve:function(e){return e instanceof oe?e:e&&typeof e.then=="function"?new oe(function(t,i){e.then(t,i)}):new oe(ln,!0,e)},reject:Fr,race:function(){var e=ne.apply(null,arguments).map(Rr);return new oe(function(t,i){e.map(function(c){return oe.resolve(c).then(t,i)})})},PSD:{get:function(){return Ke},set:function(e){return Ke=e}},totalEchoes:{get:function(){return Gn}},newPSD:hn,usePSD:Un,scheduler:{get:function(){return Rn},set:function(e){Rn=e}},rejectionMapper:{get:function(){return gn},set:function(e){gn=e}},follow:function(e,t){return new oe(function(i,c){return hn(function(d,g){var E=Ke;E.unhandleds=[],E.onunhandled=g,E.finalize=et(function(){var k,$=this;k=function(){$.unhandleds.length===0?d():g($.unhandleds[0])},Le.push(function L(){k(),Le.splice(Le.indexOf(L),1)}),++Nn,Rn(function(){--Nn==0&&fa()},[])},E.finalize),e()},t,i,c)})}}),Wt&&(Wt.allSettled&&y(oe,"allSettled",function(){var e=ne.apply(null,arguments).map(Rr);return new oe(function(t){e.length===0&&t([]);var i=e.length,c=new Array(i);e.forEach(function(d,g){return oe.resolve(d).then(function(E){return c[g]={status:"fulfilled",value:E}},function(E){return c[g]={status:"rejected",reason:E}}).then(function(){return--i||t(c)})})})}),Wt.any&&typeof AggregateError<"u"&&y(oe,"any",function(){var e=ne.apply(null,arguments).map(Rr);return new oe(function(t,i){e.length===0&&i(new AggregateError([]));var c=e.length,d=new Array(c);e.forEach(function(g,E){return oe.resolve(g).then(function(k){return t(k)},function(k){d[E]=k,--c||i(new AggregateError(d))})})})}),Wt.withResolvers&&(oe.withResolvers=Wt.withResolvers));var Dt={awaits:0,echoes:0,id:0},ri=0,Ar=[],lr=0,Gn=0,Tr=0;function hn(e,t,i,c){var d=Ke,g=Object.create(d);return g.parent=d,g.ref=0,g.global=!1,g.id=++Tr,Jt.env,g.env=Hn?{Promise:oe,PromiseProp:{value:oe,configurable:!0,writable:!0},all:oe.all,race:oe.race,allSettled:oe.allSettled,any:oe.any,resolve:oe.resolve,reject:oe.reject}:{},t&&b(g,t),++d.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Un(g,e,i,c),g.ref===0&&g.finalize(),c}function Jn(){return Dt.id||(Dt.id=++ri),++Dt.awaits,Dt.echoes+=$n,Dt.id}function Ln(){return!!Dt.awaits&&(--Dt.awaits==0&&(Dt.id=0),Dt.echoes=Dt.awaits*$n,!0)}function Rr(e){return Dt.echoes&&e&&e.constructor===Wt?(Jn(),e.then(function(t){return Ln(),t},function(t){return Ln(),Be(t)})):e}function qa(){var e=Ar[Ar.length-1];Ar.pop(),mn(e,!1)}function mn(e,t){var i,c=Ke;(t?!Dt.echoes||lr++&&e===Ke:!lr||--lr&&e===Ke)||queueMicrotask(t?(function(d){++Gn,Dt.echoes&&--Dt.echoes!=0||(Dt.echoes=Dt.awaits=Dt.id=0),Ar.push(Ke),mn(d,!0)}).bind(null,e):qa),e!==Ke&&(Ke=e,c===Jt&&(Jt.env=pt()),Hn&&(i=Jt.env.Promise,t=e.env,(c.global||e.global)&&(Object.defineProperty(u,"Promise",t.PromiseProp),i.all=t.all,i.race=t.race,i.resolve=t.resolve,i.reject=t.reject,t.allSettled&&(i.allSettled=t.allSettled),t.any&&(i.any=t.any))))}function pt(){var e=u.Promise;return Hn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Un(e,t,i,c,d){var g=Ke;try{return mn(e,!0),t(i,c,d)}finally{mn(g,!1)}}function Ya(e,t,i,c){return typeof e!="function"?e:function(){var d=Ke;i&&Jn(),mn(t,!0);try{return e.apply(this,arguments)}finally{mn(d,!1),c&&queueMicrotask(Ln)}}}function qe(e){Promise===Wt&&Dt.echoes===0?lr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pn).indexOf("[native code]")===-1&&(Jn=Ln=De);var Be=oe.reject,Ot="ï¿¿",pn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xa="String expected.",Kr=[],Qa="__dbnames",ai="readonly",oi="readwrite";function xr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var au={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Za(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=J(t))[e],t}}function ou(){throw me.Type()}function st(e,t){try{var i=iu(e),c=iu(t);if(i!==c)return i==="Array"?1:c==="Array"?-1:i==="binary"?1:c==="binary"?-1:i==="string"?1:c==="string"?-1:i==="Date"?1:c!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(d,g){for(var E=d.length,k=g.length,$=E<k?E:k,L=0;L<$;++L)if(d[L]!==g[L])return d[L]<g[L]?-1:1;return E===k?0:E<k?-1:1}(su(e),su(t));case"Array":return function(d,g){for(var E=d.length,k=g.length,$=E<k?E:k,L=0;L<$;++L){var B=st(d[L],g[L]);if(B!==0)return B}return E===k?0:E<k?-1:1}(e,t)}}catch{}return NaN}function iu(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=de(e),e==="ArrayBuffer"?"binary":e)}function su(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var uu=(wt.prototype._trans=function(e,t,i){var c=this._tx||Ke.trans,d=this.name,g=ht&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function E(L,B,C){if(!C.schema[d])throw new me.NotFound("Table "+d+" not part of transaction");return t(C.idbtrans,C)}var k=ur();try{var $=c&&c.db._novip===this.db._novip?c===Ke.trans?c._promise(e,E,i):hn(function(){return c._promise(e,E,i)},{trans:c,transless:Ke.transless||Ke}):function L(B,C,H,N){if(B.idbdb&&(B._state.openComplete||Ke.letThrough||B._vip)){var K=B._createTransaction(C,H,B._dbSchema);try{K.create(),B._state.PR1398_maxLoop=3}catch(V){return V.name===Pe.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return L(B,C,H,N)})):Be(V)}return K._promise(C,function(V,F){return hn(function(){return Ke.trans=K,N(V,F,K)})}).then(function(V){if(C==="readwrite")try{K.idbtrans.commit()}catch{}return C==="readonly"?V:K._completion.then(function(){return V})})}if(B._state.openComplete)return Be(new me.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return Be(new me.DatabaseClosed);B.open().catch(De)}return B._state.dbReadyPromise.then(function(){return L(B,C,H,N)})}(this.db,e,[this.name],E);return g&&($._consoleTask=g,$=$.catch(function(L){return console.trace(L),Be(L)})),$}finally{k&&cr()}},wt.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Be(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return i.core.get({trans:c,key:e}).then(function(d){return i.hook.reading.fire(d)})}).then(t)},wt.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=l(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&t.every(function(L){return 0<=k.keyPath.indexOf(L)})){for(var $=0;$<t.length;++$)if(t.indexOf(k.keyPath[$])===-1)return!1;return!0}return!1}).sort(function(k,$){return k.keyPath.length-$.keyPath.length})[0];if(i&&this.db._maxKey!==Ot){var g=i.keyPath.slice(0,t.length);return this.where(g).equals(g.map(function($){return e[$]}))}!i&&ht&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var c=this.schema.idxByName;function d(k,$){return st(k,$)===0}var E=t.reduce(function(C,$){var L=C[0],B=C[1],C=c[$],H=e[$];return[L||C,L||!C?xr(B,C&&C.multi?function(N){return N=G(N,$),h(N)&&N.some(function(K){return d(H,K)})}:function(N){return d(H,G(N,$))}):B]},[null,null]),g=E[0],E=E[1];return g?this.where(g.name).equals(e[g.keyPath]).filter(E):i?this.filter(E):this.where(t).equals("")},wt.prototype.filter=function(e){return this.toCollection().and(e)},wt.prototype.count=function(e){return this.toCollection().count(e)},wt.prototype.offset=function(e){return this.toCollection().offset(e)},wt.prototype.limit=function(e){return this.toCollection().limit(e)},wt.prototype.each=function(e){return this.toCollection().each(e)},wt.prototype.toArray=function(e){return this.toCollection().toArray(e)},wt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},wt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},wt.prototype.reverse=function(){return this.toCollection().reverse()},wt.prototype.mapToClass=function(e){var t,i=this.db,c=this.name;function d(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof ou&&(function($,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function B(){this.constructor=$}n($,L),$.prototype=L===null?Object.create(L):(B.prototype=L.prototype,new B)}(d,t=e),Object.defineProperty(d.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),d.prototype.table=function(){return c},e=d);for(var g=new Set,E=e.prototype;E;E=m(E))Object.getOwnPropertyNames(E).forEach(function($){return g.add($)});function k($){if(!$)return $;var L,B=Object.create(e.prototype);for(L in $)if(!g.has(L))try{B[L]=$[L]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),e},wt.prototype.defineClass=function(){return this.mapToClass(function(e){b(this,e)})},wt.prototype.add=function(e,t){var i=this,c=this.schema.primKey,d=c.auto,g=c.keyPath,E=e;return g&&d&&(E=Za(g)(e)),this._trans("readwrite",function(k){return i.core.mutate({trans:k,type:"add",keys:t!=null?[t]:null,values:[E]})}).then(function(k){return k.numFailures?oe.reject(k.failures[0]):k.lastResult}).then(function(k){if(g)try{D(e,g,k)}catch{}return k})},wt.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=G(e,this.schema.primKey.keyPath),e===void 0?Be(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},wt.prototype.put=function(e,t){var i=this,c=this.schema.primKey,d=c.auto,g=c.keyPath,E=e;return g&&d&&(E=Za(g)(e)),this._trans("readwrite",function(k){return i.core.mutate({trans:k,type:"put",values:[E],keys:t!=null?[t]:null})}).then(function(k){return k.numFailures?oe.reject(k.failures[0]):k.lastResult}).then(function(k){if(g)try{D(e,g,k)}catch{}return k})},wt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?oe.reject(i.failures[0]):void 0})},wt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:au})}).then(function(t){return t.numFailures?oe.reject(t.failures[0]):void 0})},wt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(i){return t.core.getMany({keys:e,trans:i}).then(function(c){return c.map(function(d){return t.hook.reading.fire(d)})})})},wt.prototype.bulkAdd=function(e,t,i){var c=this,d=Array.isArray(t)?t:void 0,g=(i=i||(d?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(E){var L=c.schema.primKey,k=L.auto,L=L.keyPath;if(L&&d)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==e.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var $=e.length,L=L&&k?e.map(Za(L)):e;return c.core.mutate({trans:E,type:"add",keys:d,values:L,wantResults:g}).then(function(K){var C=K.numFailures,H=K.results,N=K.lastResult,K=K.failures;if(C===0)return g?H:N;throw new ue("".concat(c.name,".bulkAdd(): ").concat(C," of ").concat($," operations failed"),K)})})},wt.prototype.bulkPut=function(e,t,i){var c=this,d=Array.isArray(t)?t:void 0,g=(i=i||(d?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(E){var L=c.schema.primKey,k=L.auto,L=L.keyPath;if(L&&d)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==e.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var $=e.length,L=L&&k?e.map(Za(L)):e;return c.core.mutate({trans:E,type:"put",keys:d,values:L,wantResults:g}).then(function(K){var C=K.numFailures,H=K.results,N=K.lastResult,K=K.failures;if(C===0)return g?H:N;throw new ue("".concat(c.name,".bulkPut(): ").concat(C," of ").concat($," operations failed"),K)})})},wt.prototype.bulkUpdate=function(e){var t=this,i=this.core,c=e.map(function(E){return E.key}),d=e.map(function(E){return E.changes}),g=[];return this._trans("readwrite",function(E){return i.getMany({trans:E,keys:c,cache:"clone"}).then(function(k){var $=[],L=[];e.forEach(function(C,H){var N=C.key,K=C.changes,V=k[H];if(V){for(var F=0,Y=Object.keys(K);F<Y.length;F++){var ee=Y[F],te=K[ee];if(ee===t.schema.primKey.keyPath){if(st(te,N)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else D(V,ee,te)}g.push(H),$.push(N),L.push(V)}});var B=$.length;return i.mutate({trans:E,type:"put",keys:$,values:L,updates:{keys:c,changeSpecs:d}}).then(function(C){var H=C.numFailures,N=C.failures;if(H===0)return B;for(var K=0,V=Object.keys(N);K<V.length;K++){var F,Y=V[K],ee=g[Number(Y)];ee!=null&&(F=N[Y],delete N[Y],N[ee]=F)}throw new ue("".concat(t.name,".bulkUpdate(): ").concat(H," of ").concat(B," operations failed"),N)})})})},wt.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",function(c){return t.core.mutate({trans:c,type:"delete",keys:e})}).then(function(E){var d=E.numFailures,g=E.lastResult,E=E.failures;if(d===0)return g;throw new ue("".concat(t.name,".bulkDelete(): ").concat(d," of ").concat(i," operations failed"),E)})},wt);function wt(){}function da(e){function t(E,k){if(k){for(var $=arguments.length,L=new Array($-1);--$;)L[$-1]=arguments[$];return i[E].subscribe.apply(null,L),e}if(typeof E=="string")return i[E]}var i={};t.addEventType=g;for(var c=1,d=arguments.length;c<d;++c)g(arguments[c]);return t;function g(E,k,$){if(typeof E!="object"){var L;k=k||pe;var B={subscribers:[],fire:$=$||De,subscribe:function(C){B.subscribers.indexOf(C)===-1&&(B.subscribers.push(C),B.fire=k(B.fire,C))},unsubscribe:function(C){B.subscribers=B.subscribers.filter(function(H){return H!==C}),B.fire=B.subscribers.reduce(k,$)}};return i[E]=t[E]=B}l(L=E).forEach(function(C){var H=L[C];if(h(H))g(C,L[C][0],L[C][1]);else{if(H!=="asap")throw new me.InvalidArgument("Invalid event config");var N=g(C,be,function(){for(var K=arguments.length,V=new Array(K);K--;)V[K]=arguments[K];N.subscribers.forEach(function(F){I(function(){F.apply(null,V)})})})}})}}function va(e,t){return w(t).from({prototype:e}),t}function Br(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ii(e,t){e.filter=xr(e.filter,t)}function si(e,t,i){var c=e.replayFilter;e.replayFilter=c?function(){return xr(c(),t())}:t,e.justLimit=i&&!c}function Ja(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new me.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function cu(e,t,i){var c=Ja(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:c,range:e.range}})}function eo(e,t,i,c){var d=e.replayFilter?xr(e.filter,e.replayFilter()):e.filter;if(e.or){var g={},E=function(k,$,L){var B,C;d&&!d($,L,function(H){return $.stop(H)},function(H){return $.fail(H)})||((C=""+(B=$.primaryKey))=="[object ArrayBuffer]"&&(C=""+new Uint8Array(B)),R(g,C)||(g[C]=!0,t(k,$,L)))};return Promise.all([e.or._iterate(E,i),lu(cu(e,c,i),e.algorithm,E,!e.keysOnly&&e.valueMapper)])}return lu(cu(e,c,i),xr(e.algorithm,d),t,!e.keysOnly&&e.valueMapper)}function lu(e,t,i,c){var d=_t(c?function(g,E,k){return i(c(g),E,k)}:i);return e.then(function(g){if(g)return g.start(function(){var E=function(){return g.continue()};t&&!t(g,function(k){return E=k},function(k){g.stop(k),E=De},function(k){g.fail(k),E=De})||d(g.value,g,function(k){return E=k}),E()})})}var ga=(fu.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var i=t.add;if(h(i))return o(o([],h(e)?e:[],!0),i).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(t.remove!==void 0){var c=t.remove;if(h(c))return h(e)?e.filter(function(d){return!c.includes(d)}).sort():[];if(typeof c=="number")return Number(e)-c;if(typeof c=="bigint")try{return BigInt(e)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return i=(i=t.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof e=="string"&&e.startsWith(i)?t.replacePrefix[1]+e.substring(i.length):e},fu);function fu(e){this["@@propmod"]=e}var Vf=(ut.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,Be.bind(null,i.error)):i.table._trans("readonly",e).then(t)},ut.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Be.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ut.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=xr(t.algorithm,e)},ut.prototype._iterate=function(e,t){return eo(this._ctx,e,t,this._ctx.table.core)},ut.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&b(i,e),t._ctx=i,t},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(e){var t=this._ctx;return this._read(function(i){return eo(t,e,i,t.table.core)})},ut.prototype.count=function(e){var t=this;return this._read(function(i){var c=t._ctx,d=c.table.core;if(Br(c,!0))return d.count({trans:i,query:{index:Ja(c,d.schema),range:c.range}}).then(function(E){return Math.min(E,c.limit)});var g=0;return eo(c,function(){return++g,!1},i,d).then(function(){return g})}).then(e)},ut.prototype.sortBy=function(e,t){var i=e.split(".").reverse(),c=i[0],d=i.length-1;function g($,L){return L?g($[i[L]],L-1):$[c]}var E=this._ctx.dir==="next"?1:-1;function k($,L){return st(g($,d),g(L,d))*E}return this.toArray(function($){return $.sort(k)}).then(t)},ut.prototype.toArray=function(e){var t=this;return this._read(function(i){var c=t._ctx;if(c.dir==="next"&&Br(c,!0)&&0<c.limit){var d=c.valueMapper,g=Ja(c,c.table.core.schema);return c.table.core.query({trans:i,limit:c.limit,values:!0,query:{index:g,range:c.range}}).then(function(k){return k=k.result,d?k.map(d):k})}var E=[];return eo(c,function(k){return E.push(k)},i,c.table.core).then(function(){return E})},e)},ut.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Br(t)?si(t,function(){var i=e;return function(c,d){return i===0||(i===1?--i:d(function(){c.advance(i),i=0}),!1)}}):si(t,function(){var i=e;return function(){return--i<0}})),this},ut.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),si(this._ctx,function(){var t=e;return function(i,c,d){return--t<=0&&c(d),0<=t}},!0),this},ut.prototype.until=function(e,t){return ii(this._ctx,function(i,c,d){return!e(i.value)||(c(d),t)}),this},ut.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ut.prototype.last=function(e){return this.reverse().first(e)},ut.prototype.filter=function(e){var t;return ii(this._ctx,function(i){return e(i.value)}),(t=this._ctx).isMatch=xr(t.isMatch,e),this},ut.prototype.and=function(e){return this.filter(e)},ut.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,c){e(c.key,c)})},ut.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ut.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,c){e(c.primaryKey,c)})},ut.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each(function(c,d){i.push(d.key)}).then(function(){return i}).then(e)},ut.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Br(t,!0)&&0<t.limit)return this._read(function(c){var d=Ja(t,t.table.core.schema);return t.table.core.query({trans:c,values:!1,limit:t.limit,query:{index:d,range:t.range}})}).then(function(c){return c.result}).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each(function(c,d){i.push(d.primaryKey)}).then(function(){return i}).then(e)},ut.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ut.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ut.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ut.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return ii(this._ctx,function(d){var c=d.primaryKey.toString(),d=R(t,c);return t[c]=!0,!d}),this},ut.prototype.modify=function(e){var t=this,i=this._ctx;return this._write(function(c){var d,g,E;E=typeof e=="function"?e:(d=l(e),g=d.length,function(F){for(var Y=!1,ee=0;ee<g;++ee){var te=d[ee],le=e[te],Se=G(F,te);le instanceof ga?(D(F,te,le.execute(Se)),Y=!0):Se!==le&&(D(F,te,le),Y=!0)}return Y});var k=i.table.core,C=k.schema.primaryKey,$=C.outbound,L=C.extractKey,B=200,C=t.db._options.modifyChunkSize;C&&(B=typeof C=="object"?C[k.name]||C["*"]||200:C);function H(F,te){var ee=te.failures,te=te.numFailures;K+=F-te;for(var le=0,Se=l(ee);le<Se.length;le++){var Ce=Se[le];N.push(ee[Ce])}}var N=[],K=0,V=[];return t.clone().primaryKeys().then(function(F){function Y(te){var le=Math.min(B,F.length-te);return k.getMany({trans:c,keys:F.slice(te,te+le),cache:"immutable"}).then(function(Se){for(var Ce=[],Ae=[],ke=$?[]:null,$e=[],Oe=0;Oe<le;++Oe){var Fe=Se[Oe],Ze={value:J(Fe),primKey:F[te+Oe]};E.call(Ze,Ze.value,Ze)!==!1&&(Ze.value==null?$e.push(F[te+Oe]):$||st(L(Fe),L(Ze.value))===0?(Ae.push(Ze.value),$&&ke.push(F[te+Oe])):($e.push(F[te+Oe]),Ce.push(Ze.value)))}return Promise.resolve(0<Ce.length&&k.mutate({trans:c,type:"add",values:Ce}).then(function(rt){for(var at in rt.failures)$e.splice(parseInt(at),1);H(Ce.length,rt)})).then(function(){return(0<Ae.length||ee&&typeof e=="object")&&k.mutate({trans:c,type:"put",keys:ke,values:Ae,criteria:ee,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<te}).then(function(rt){return H(Ae.length,rt)})}).then(function(){return(0<$e.length||ee&&e===ui)&&k.mutate({trans:c,type:"delete",keys:$e,criteria:ee,isAdditionalChunk:0<te}).then(function(rt){return H($e.length,rt)})}).then(function(){return F.length>te+le&&Y(te+B)})})}var ee=Br(i)&&i.limit===1/0&&(typeof e!="function"||e===ui)&&{index:i.index,range:i.range};return Y(0).then(function(){if(0<N.length)throw new Ne("Error modifying one or more objects",N,K,V);return F.length})})})},ut.prototype.delete=function(){var e=this._ctx,t=e.range;return Br(e)&&(e.isPrimKey||t.type===3)?this._write(function(i){var c=e.table.core.schema.primaryKey,d=t;return e.table.core.count({trans:i,query:{index:c,range:d}}).then(function(g){return e.table.core.mutate({trans:i,type:"deleteRange",range:d}).then(function(E){var k=E.failures;if(E.lastResult,E.results,E=E.numFailures,E)throw new Ne("Could not delete some values",Object.keys(k).map(function($){return k[$]}),g-E);return g-E})})}):this.modify(ui)},ut);function ut(){}var ui=function(e,t){return t.value=null};function Hf(e,t){return e<t?-1:e===t?0:1}function Gf(e,t){return t<e?-1:e===t?0:1}function _n(e,t,i){return e=e instanceof vu?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(t),e}function Vr(e){return new e.Collection(e,function(){return du("")}).limit(0)}function to(e,t,i,c){var d,g,E,k,$,L,B,C=i.length;if(!i.every(function(K){return typeof K=="string"}))return _n(e,Xa);function H(K){d=K==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},g=K==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},E=K==="next"?Hf:Gf;var V=i.map(function(F){return{lower:g(F),upper:d(F)}}).sort(function(F,Y){return E(F.lower,Y.lower)});k=V.map(function(F){return F.upper}),$=V.map(function(F){return F.lower}),B=(L=K)==="next"?"":c}H("next"),e=new e.Collection(e,function(){return fr(k[0],$[C-1]+c)}),e._ondirectionchange=function(K){H(K)};var N=0;return e._addAlgorithm(function(K,V,F){var Y=K.key;if(typeof Y!="string")return!1;var ee=g(Y);if(t(ee,$,N))return!0;for(var te=null,le=N;le<C;++le){var Se=function(Ce,Ae,ke,$e,Oe,Fe){for(var Ze=Math.min(Ce.length,$e.length),rt=-1,at=0;at<Ze;++at){var yn=Ae[at];if(yn!==$e[at])return Oe(Ce[at],ke[at])<0?Ce.substr(0,at)+ke[at]+ke.substr(at+1):Oe(Ce[at],$e[at])<0?Ce.substr(0,at)+$e[at]+ke.substr(at+1):0<=rt?Ce.substr(0,rt)+Ae[rt]+ke.substr(rt+1):null;Oe(Ce[at],yn)<0&&(rt=at)}return Ze<$e.length&&Fe==="next"?Ce+ke.substr(Ce.length):Ze<Ce.length&&Fe==="prev"?Ce.substr(0,ke.length):rt<0?null:Ce.substr(0,rt)+$e[rt]+ke.substr(rt+1)}(Y,ee,k[le],$[le],E,L);Se===null&&te===null?N=le+1:(te===null||0<E(te,Se))&&(te=Se)}return V(te!==null?function(){K.continue(te+B)}:F),!1}),e}function fr(e,t,i,c){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:c}}function du(e){return{type:1,lower:e,upper:e}}var vu=(Object.defineProperty(Vt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Vt.prototype.between=function(e,t,i,c){i=i!==!1,c=c===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(i||c)&&(!i||!c)?Vr(this):new this.Collection(this,function(){return fr(e,t,!i,!c)})}catch{return _n(this,pn)}},Vt.prototype.equals=function(e){return e==null?_n(this,pn):new this.Collection(this,function(){return du(e)})},Vt.prototype.above=function(e){return e==null?_n(this,pn):new this.Collection(this,function(){return fr(e,void 0,!0)})},Vt.prototype.aboveOrEqual=function(e){return e==null?_n(this,pn):new this.Collection(this,function(){return fr(e,void 0,!1)})},Vt.prototype.below=function(e){return e==null?_n(this,pn):new this.Collection(this,function(){return fr(void 0,e,!1,!0)})},Vt.prototype.belowOrEqual=function(e){return e==null?_n(this,pn):new this.Collection(this,function(){return fr(void 0,e)})},Vt.prototype.startsWith=function(e){return typeof e!="string"?_n(this,Xa):this.between(e,e+Ot,!0,!0)},Vt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):to(this,function(t,i){return t.indexOf(i[0])===0},[e],Ot)},Vt.prototype.equalsIgnoreCase=function(e){return to(this,function(t,i){return t===i[0]},[e],"")},Vt.prototype.anyOfIgnoreCase=function(){var e=ne.apply(Te,arguments);return e.length===0?Vr(this):to(this,function(t,i){return i.indexOf(t)!==-1},e,"")},Vt.prototype.startsWithAnyOfIgnoreCase=function(){var e=ne.apply(Te,arguments);return e.length===0?Vr(this):to(this,function(t,i){return i.some(function(c){return t.indexOf(c)===0})},e,Ot)},Vt.prototype.anyOf=function(){var e=this,t=ne.apply(Te,arguments),i=this._cmp;try{t.sort(i)}catch{return _n(this,pn)}if(t.length===0)return Vr(this);var c=new this.Collection(this,function(){return fr(t[0],t[t.length-1])});c._ondirectionchange=function(g){i=g==="next"?e._ascending:e._descending,t.sort(i)};var d=0;return c._addAlgorithm(function(g,E,k){for(var $=g.key;0<i($,t[d]);)if(++d===t.length)return E(k),!1;return i($,t[d])===0||(E(function(){g.continue(t[d])}),!1)}),c},Vt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Vt.prototype.noneOf=function(){var e=ne.apply(Te,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return _n(this,pn)}var t=e.reduce(function(i,c){return i?i.concat([[i[i.length-1][1],c]]):[[-1/0,c]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Vt.prototype.inAnyRange=function(Y,t){var i=this,c=this._cmp,d=this._ascending,g=this._descending,E=this._min,k=this._max;if(Y.length===0)return Vr(this);if(!Y.every(function(ee){return ee[0]!==void 0&&ee[1]!==void 0&&d(ee[0],ee[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var $=!t||t.includeLowers!==!1,L=t&&t.includeUppers===!0,B,C=d;function H(ee,te){return C(ee[0],te[0])}try{(B=Y.reduce(function(ee,te){for(var le=0,Se=ee.length;le<Se;++le){var Ce=ee[le];if(c(te[0],Ce[1])<0&&0<c(te[1],Ce[0])){Ce[0]=E(Ce[0],te[0]),Ce[1]=k(Ce[1],te[1]);break}}return le===Se&&ee.push(te),ee},[])).sort(H)}catch{return _n(this,pn)}var N=0,K=L?function(ee){return 0<d(ee,B[N][1])}:function(ee){return 0<=d(ee,B[N][1])},V=$?function(ee){return 0<g(ee,B[N][0])}:function(ee){return 0<=g(ee,B[N][0])},F=K,Y=new this.Collection(this,function(){return fr(B[0][0],B[B.length-1][1],!$,!L)});return Y._ondirectionchange=function(ee){C=ee==="next"?(F=K,d):(F=V,g),B.sort(H)},Y._addAlgorithm(function(ee,te,le){for(var Se,Ce=ee.key;F(Ce);)if(++N===B.length)return te(le),!1;return!K(Se=Ce)&&!V(Se)||(i._cmp(Ce,B[N][1])===0||i._cmp(Ce,B[N][0])===0||te(function(){C===d?ee.continue(B[N][0]):ee.continue(B[N][1])}),!1)}),Y},Vt.prototype.startsWithAnyOf=function(){var e=ne.apply(Te,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Vr(this):this.inAnyRange(e.map(function(t){return[t,t+Ot]})):_n(this,"startsWithAnyOf() only works with strings")},Vt);function Vt(){}function jn(e){return _t(function(t){return ha(t),e(t.target.error),!1})}function ha(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ma="storagemutated",ci="x-storagemutated-1",dr=da(null,ma),jf=(Wn.prototype._lock=function(){return v(!Ke.global),++this._reculock,this._reculock!==1||Ke.global||(Ke.lockOwnerFor=this),this},Wn.prototype._unlock=function(){if(v(!Ke.global),--this._reculock==0)for(Ke.global||(Ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Un(e[1],e[0])}catch{}}return this},Wn.prototype._locked=function(){return this._reculock&&Ke.lockOwnerFor!==this},Wn.prototype.create=function(e){var t=this;if(!this.mode)return this;var i=this.db.idbdb,c=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!i)switch(c&&c.name){case"DatabaseClosedError":throw new me.DatabaseClosed(c);case"MissingAPIError":throw new me.MissingAPI(c.message,c);default:throw new me.OpenFailed(c)}if(!this.active)throw new me.TransactionInactive;return v(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_t(function(d){ha(d),t._reject(e.error)}),e.onabort=_t(function(d){ha(d),t.active&&t._reject(new me.Abort(e.error)),t.active=!1,t.on("abort").fire(d)}),e.oncomplete=_t(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&dr.storagemutated.fire(e.mutatedParts)}),this},Wn.prototype._promise=function(e,t,i){var c=this;if(e==="readwrite"&&this.mode!=="readwrite")return Be(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Be(new me.TransactionInactive);if(this._locked())return new oe(function(g,E){c._blockedFuncs.push([function(){c._promise(e,t,i).then(g,E)},Ke])});if(i)return hn(function(){var g=new oe(function(E,k){c._lock();var $=t(E,k,c);$&&$.then&&$.then(E,k)});return g.finally(function(){return c._unlock()}),g._lib=!0,g});var d=new oe(function(g,E){var k=t(g,E,c);k&&k.then&&k.then(g,E)});return d._lib=!0,d},Wn.prototype._root=function(){return this.parent?this.parent._root():this},Wn.prototype.waitFor=function(e){var t,i=this._root(),c=oe.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return c}):(i._waitingFor=c,i._waitingQueue=[],t=i.idbtrans.objectStore(i.storeNames[0]),function g(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(t.get(-1/0).onsuccess=g)}());var d=i._waitingFor;return new oe(function(g,E){c.then(function(k){return i._waitingQueue.push(_t(g.bind(null,k)))},function(k){return i._waitingQueue.push(_t(E.bind(null,k)))}).finally(function(){i._waitingFor===d&&(i._waitingFor=null)})})},Wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},Wn.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(R(t,e))return t[e];var i=this.schema[e];if(!i)throw new me.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),t[e]=i},Wn);function Wn(){}function li(e,t,i,c,d,g,E){return{name:e,keyPath:t,unique:i,multi:c,auto:d,compound:g,src:(i&&!E?"&":"")+(c?"*":"")+(d?"++":"")+gu(t)}}function gu(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function fi(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:(c=function(d){return[d.name,d]},i.reduce(function(d,g,E){return E=c(g,E),E&&(d[E[0]]=E[1]),d},{}))};var c}var pa=function(e){try{return e.only([[]]),pa=function(){return[[]]},[[]]}catch{return pa=function(){return Ot},Ot}};function di(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(i){return i[t]}:function(i){return G(i,t)}:function(i){return G(i,e)};var t}function hu(e){return[].slice.call(e)}var Wf=0;function _a(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function zf(e,t,$){function c(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=F.lower,K=F.upper,V=F.lowerOpen,F=F.upperOpen;return N===void 0?K===void 0?null:t.upperBound(K,!!F):K===void 0?t.lowerBound(N,!!V):t.bound(N,K,!!V,!!F)}function d(H){var N,K=H.name;return{name:K,schema:H,mutate:function(V){var F=V.trans,Y=V.type,ee=V.keys,te=V.values,le=V.range;return new Promise(function(Se,Ce){Se=_t(Se);var Ae=F.objectStore(K),ke=Ae.keyPath==null,$e=Y==="put"||Y==="add";if(!$e&&Y!=="delete"&&Y!=="deleteRange")throw new Error("Invalid operation type: "+Y);var Oe,Fe=(ee||te||{length:1}).length;if(ee&&te&&ee.length!==te.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Se({numFailures:0,failures:{},results:[],lastResult:void 0});function Ze(en){++yn,ha(en)}var rt=[],at=[],yn=0;if(Y==="deleteRange"){if(le.type===4)return Se({numFailures:yn,failures:at,results:[],lastResult:void 0});le.type===3?rt.push(Oe=Ae.clear()):rt.push(Oe=Ae.delete(c(le)))}else{var ke=$e?ke?[te,ee]:[te,null]:[ee,null],Qe=ke[0],qt=ke[1];if($e)for(var Yt=0;Yt<Fe;++Yt)rt.push(Oe=qt&&qt[Yt]!==void 0?Ae[Y](Qe[Yt],qt[Yt]):Ae[Y](Qe[Yt])),Oe.onerror=Ze;else for(Yt=0;Yt<Fe;++Yt)rt.push(Oe=Ae[Y](Qe[Yt])),Oe.onerror=Ze}function ho(en){en=en.target.result,rt.forEach(function(Dr,Di){return Dr.error!=null&&(at[Di]=Dr.error)}),Se({numFailures:yn,failures:at,results:Y==="delete"?ee:rt.map(function(Dr){return Dr.result}),lastResult:en})}Oe.onerror=function(en){Ze(en),ho(en)},Oe.onsuccess=ho})},getMany:function(V){var F=V.trans,Y=V.keys;return new Promise(function(ee,te){ee=_t(ee);for(var le,Se=F.objectStore(K),Ce=Y.length,Ae=new Array(Ce),ke=0,$e=0,Oe=function(rt){rt=rt.target,Ae[rt._pos]=rt.result,++$e===ke&&ee(Ae)},Fe=jn(te),Ze=0;Ze<Ce;++Ze)Y[Ze]!=null&&((le=Se.get(Y[Ze]))._pos=Ze,le.onsuccess=Oe,le.onerror=Fe,++ke);ke===0&&ee(Ae)})},get:function(V){var F=V.trans,Y=V.key;return new Promise(function(ee,te){ee=_t(ee);var le=F.objectStore(K).get(Y);le.onsuccess=function(Se){return ee(Se.target.result)},le.onerror=jn(te)})},query:(N=L,function(V){return new Promise(function(F,Y){F=_t(F);var ee,te,le,ke=V.trans,Se=V.values,Ce=V.limit,Oe=V.query,Ae=Ce===1/0?void 0:Ce,$e=Oe.index,Oe=Oe.range,ke=ke.objectStore(K),$e=$e.isPrimaryKey?ke:ke.index($e.name),Oe=c(Oe);if(Ce===0)return F({result:[]});N?((Ae=Se?$e.getAll(Oe,Ae):$e.getAllKeys(Oe,Ae)).onsuccess=function(Fe){return F({result:Fe.target.result})},Ae.onerror=jn(Y)):(ee=0,te=!Se&&"openKeyCursor"in $e?$e.openKeyCursor(Oe):$e.openCursor(Oe),le=[],te.onsuccess=function(Fe){var Ze=te.result;return Ze?(le.push(Se?Ze.value:Ze.primaryKey),++ee===Ce?F({result:le}):void Ze.continue()):F({result:le})},te.onerror=jn(Y))})}),openCursor:function(V){var F=V.trans,Y=V.values,ee=V.query,te=V.reverse,le=V.unique;return new Promise(function(Se,Ce){Se=_t(Se);var $e=ee.index,Ae=ee.range,ke=F.objectStore(K),ke=$e.isPrimaryKey?ke:ke.index($e.name),$e=te?le?"prevunique":"prev":le?"nextunique":"next",Oe=!Y&&"openKeyCursor"in ke?ke.openKeyCursor(c(Ae),$e):ke.openCursor(c(Ae),$e);Oe.onerror=jn(Ce),Oe.onsuccess=_t(function(Fe){var Ze,rt,at,yn,Qe=Oe.result;Qe?(Qe.___id=++Wf,Qe.done=!1,Ze=Qe.continue.bind(Qe),rt=(rt=Qe.continuePrimaryKey)&&rt.bind(Qe),at=Qe.advance.bind(Qe),yn=function(){throw new Error("Cursor not stopped")},Qe.trans=F,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=_t(Ce),Qe.next=function(){var qt=this,Yt=1;return this.start(function(){return Yt--?qt.continue():qt.stop()}).then(function(){return qt})},Qe.start=function(qt){function Yt(){if(Oe.result)try{qt()}catch(en){Qe.fail(en)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var ho=new Promise(function(en,Dr){en=_t(en),Oe.onerror=jn(Dr),Qe.fail=Dr,Qe.stop=function(Di){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=yn,en(Di)}});return Oe.onsuccess=_t(function(en){Oe.onsuccess=Yt,Yt()}),Qe.continue=Ze,Qe.continuePrimaryKey=rt,Qe.advance=at,Yt(),ho},Se(Qe)):Se(null)},Ce)})},count:function(V){var F=V.query,Y=V.trans,ee=F.index,te=F.range;return new Promise(function(le,Se){var Ce=Y.objectStore(K),Ae=ee.isPrimaryKey?Ce:Ce.index(ee.name),Ce=c(te),Ae=Ce?Ae.count(Ce):Ae.count();Ae.onsuccess=_t(function(ke){return le(ke.target.result)}),Ae.onerror=jn(Se)})}}}var g,E,k,B=(E=$,k=hu((g=e).objectStoreNames),{schema:{name:g.name,tables:k.map(function(H){return E.objectStore(H)}).map(function(H){var N=H.keyPath,F=H.autoIncrement,K=h(N),V={},F={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:K,keyPath:N,autoIncrement:F,unique:!0,extractKey:di(N)},indexes:hu(H.indexNames).map(function(Y){return H.index(Y)}).map(function(le){var ee=le.name,te=le.unique,Se=le.multiEntry,le=le.keyPath,Se={name:ee,compound:h(le),keyPath:le,unique:te,multiEntry:Se,extractKey:di(le)};return V[_a(le)]=Se}),getIndexByKeyPath:function(Y){return V[_a(Y)]}};return V[":id"]=F.primaryKey,N!=null&&(V[_a(N)]=F.primaryKey),F})},hasGetAll:0<k.length&&"getAll"in E.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),$=B.schema,L=B.hasGetAll,B=$.tables.map(d),C={};return B.forEach(function(H){return C[H.name]=H}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(H){if(!C[H])throw new Error("Table '".concat(H,"' not found"));return C[H]},MIN_KEY:-1/0,MAX_KEY:pa(t),schema:$}}function qf(e,t,i,c){var d=i.IDBKeyRange;return i.indexedDB,{dbcore:(c=zf(t,d,c),e.dbcore.reduce(function(g,E){return E=E.create,s(s({},g),E(g))},c))}}function no(e,c){var i=c.db,c=qf(e._middlewares,i,e._deps,c);e.core=c.dbcore,e.tables.forEach(function(d){var g=d.name;e.core.schema.tables.some(function(E){return E.name===g})&&(d.core=e.core.table(g),e[g]instanceof e.Table&&(e[g].core=d.core))})}function ro(e,t,i,c){i.forEach(function(d){var g=c[d];t.forEach(function(E){var k=function $(L,B){return x(L,B)||(L=m(L))&&$(L,B)}(E,d);(!k||"value"in k&&k.value===void 0)&&(E===e.Transaction.prototype||E instanceof e.Transaction?y(E,d,{get:function(){return this.table(d)},set:function($){A(this,d,{value:$,writable:!0,configurable:!0,enumerable:!0})}}):E[d]=new e.Table(d,g))})})}function vi(e,t){t.forEach(function(i){for(var c in i)i[c]instanceof e.Table&&delete i[c]})}function Yf(e,t){return e._cfg.version-t._cfg.version}function Xf(e,t,i,c){var d=e._dbSchema;i.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=fi("$meta",pu("")[0],[]),e._storeNames.push("$meta"));var g=e._createTransaction("readwrite",e._storeNames,d);g.create(i),g._completion.catch(c);var E=g._reject.bind(g),k=Ke.transless||Ke;hn(function(){return Ke.trans=g,Ke.transless=k,t!==0?(no(e,i),L=t,(($=g).storeNames.includes("$meta")?$.table("$meta").get("version").then(function(B){return B??L}):oe.resolve(L)).then(function(B){return H=B,N=g,K=i,V=[],B=(C=e)._versions,F=C._dbSchema=oo(0,C.idbdb,K),(B=B.filter(function(Y){return Y._cfg.version>=H})).length!==0?(B.forEach(function(Y){V.push(function(){var ee=F,te=Y._cfg.dbschema;io(C,ee,K),io(C,te,K),F=C._dbSchema=te;var le=gi(ee,te);le.add.forEach(function($e){hi(K,$e[0],$e[1].primKey,$e[1].indexes)}),le.change.forEach(function($e){if($e.recreate)throw new me.Upgrade("Not yet support for changing primary key");var Oe=K.objectStore($e.name);$e.add.forEach(function(Fe){return ao(Oe,Fe)}),$e.change.forEach(function(Fe){Oe.deleteIndex(Fe.name),ao(Oe,Fe)}),$e.del.forEach(function(Fe){return Oe.deleteIndex(Fe)})});var Se=Y._cfg.contentUpgrade;if(Se&&Y._cfg.version>H){no(C,K),N._memoizedTables={};var Ce=U(te);le.del.forEach(function($e){Ce[$e]=ee[$e]}),vi(C,[C.Transaction.prototype]),ro(C,[C.Transaction.prototype],l(Ce),Ce),N.schema=Ce;var Ae,ke=se(Se);return ke&&Jn(),le=oe.follow(function(){var $e;(Ae=Se(N))&&ke&&($e=Ln.bind(null,null),Ae.then($e,$e))}),Ae&&typeof Ae.then=="function"?oe.resolve(Ae):le.then(function(){return Ae})}}),V.push(function(ee){var te,le,Se=Y._cfg.dbschema;te=Se,le=ee,[].slice.call(le.db.objectStoreNames).forEach(function(Ce){return te[Ce]==null&&le.db.deleteObjectStore(Ce)}),vi(C,[C.Transaction.prototype]),ro(C,[C.Transaction.prototype],C._storeNames,C._dbSchema),N.schema=C._dbSchema}),V.push(function(ee){C.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(C.idbdb.version/10)===Y._cfg.version?(C.idbdb.deleteObjectStore("$meta"),delete C._dbSchema.$meta,C._storeNames=C._storeNames.filter(function(te){return te!=="$meta"})):ee.objectStore("$meta").put(Y._cfg.version,"version"))})}),function Y(){return V.length?oe.resolve(V.shift()(N.idbtrans)).then(Y):oe.resolve()}().then(function(){mu(F,K)})):oe.resolve();var C,H,N,K,V,F}).catch(E)):(l(d).forEach(function(B){hi(i,B,d[B].primKey,d[B].indexes)}),no(e,i),void oe.follow(function(){return e.on.populate.fire(g)}).catch(E));var $,L})}function Qf(e,t){mu(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=oo(0,e.idbdb,t);io(e,e._dbSchema,t);for(var c=0,d=gi(i,e._dbSchema).change;c<d.length;c++){var g=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=t.objectStore(E.name);E.add.forEach(function($){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat($.src)),ao(k,$)})}(d[c]);if(typeof g=="object")return g.value}}function gi(e,t){var i,c={del:[],add:[],change:[]};for(i in e)t[i]||c.del.push(i);for(i in t){var d=e[i],g=t[i];if(d){var E={name:i,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||d.primKey.auto!==g.primKey.auto)E.recreate=!0,c.change.push(E);else{var k=d.idxByName,$=g.idxByName,L=void 0;for(L in k)$[L]||E.del.push(L);for(L in $){var B=k[L],C=$[L];B?B.src!==C.src&&E.change.push(C):E.add.push(C)}(0<E.del.length||0<E.add.length||0<E.change.length)&&c.change.push(E)}}else c.add.push([i,g])}return c}function hi(e,t,i,c){var d=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return c.forEach(function(g){return ao(d,g)}),d}function mu(e,t){l(e).forEach(function(i){t.db.objectStoreNames.contains(i)||(ht&&console.debug("Dexie: Creating missing table",i),hi(t,i,e[i].primKey,e[i].indexes))})}function ao(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function oo(e,t,i){var c={};return P(t.objectStoreNames,0).forEach(function(d){for(var g=i.objectStore(d),E=li(gu(L=g.keyPath),L||"",!0,!1,!!g.autoIncrement,L&&typeof L!="string",!0),k=[],$=0;$<g.indexNames.length;++$){var B=g.index(g.indexNames[$]),L=B.keyPath,B=li(B.name,L,!!B.unique,!!B.multiEntry,!1,L&&typeof L!="string",!1);k.push(B)}c[d]=fi(d,E,k)}),c}function io(e,t,i){for(var c=i.db.objectStoreNames,d=0;d<c.length;++d){var g=c[d],E=i.objectStore(g);e._hasGetAll="getAll"in E;for(var k=0;k<E.indexNames.length;++k){var $=E.indexNames[k],L=E.index($).keyPath,B=typeof L=="string"?L:"["+P(L).join("+")+"]";!t[g]||(L=t[g].idxByName[B])&&(L.name=$,delete t[g].idxByName[B],t[g].idxByName[$]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function pu(e){return e.split(",").map(function(t,i){var c=(t=t.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return li(c,d||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(d),i===0)})}var Zf=(so.prototype._parseStoresSpec=function(e,t){l(e).forEach(function(i){if(e[i]!==null){var c=pu(e[i]),d=c.shift();if(d.unique=!0,d.multi)throw new me.Schema("Primary key cannot be multi-valued");c.forEach(function(g){if(g.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),t[i]=fi(i,d,c)}})},so.prototype.stores=function(i){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,i):i;var i=t._versions,c={},d={};return i.forEach(function(g){b(c,g._cfg.storesSource),d=g._cfg.dbschema={},g._parseStoresSpec(c,d)}),t._dbSchema=d,vi(t,[t._allTables,t,t.Transaction.prototype]),ro(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],l(d),d),t._storeNames=l(d),this},so.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ge(this._cfg.contentUpgrade||De,e),this},so);function so(){}function mi(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new er(Qa,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function pi(e){return e&&typeof e.databases=="function"}function _i(e){return hn(function(){return Ke.letThrough=!0,e()})}function yi(e){return!("from"in e)}var zt=function(e,t){if(!this){var i=new zt;return e&&"d"in e&&b(i,e),i}b(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function ya(e,t,i){var c=st(t,i);if(!isNaN(c)){if(0<c)throw RangeError();if(yi(e))return b(e,{from:t,to:i,d:1});var d=e.l,c=e.r;if(st(i,e.from)<0)return d?ya(d,t,i):e.l={from:t,to:i,d:1,l:null,r:null},yu(e);if(0<st(t,e.to))return c?ya(c,t,i):e.r={from:t,to:i,d:1,l:null,r:null},yu(e);st(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),0<st(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,d&&!e.l&&ba(e,d),c&&i&&ba(e,c)}}function ba(e,t){yi(t)||function i(c,$){var g=$.from,E=$.to,k=$.l,$=$.r;ya(c,g,E),k&&i(c,k),$&&i(c,$)}(e,t)}function _u(e,t){var i=uo(t),c=i.next();if(c.done)return!1;for(var d=c.value,g=uo(e),E=g.next(d.from),k=E.value;!c.done&&!E.done;){if(st(k.from,d.to)<=0&&0<=st(k.to,d.from))return!0;st(d.from,k.from)<0?d=(c=i.next(k.from)).value:k=(E=g.next(d.from)).value}return!1}function uo(e){var t=yi(e)?null:{s:0,n:e};return{next:function(i){for(var c=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,c)for(;t.n.l&&st(i,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!c||st(i,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function yu(e){var t,i,c=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),d=1<c?"r":c<-1?"l":"";d&&(t=d=="r"?"l":"r",i=s({},e),c=e[d],e.from=c.from,e.to=c.to,e[d]=c[d],i[d]=c[t],(e[t]=i).d=bu(i)),e.d=bu(e)}function bu(i){var t=i.r,i=i.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}function co(e,t){return l(t).forEach(function(i){e[i]?ba(e[i],t[i]):e[i]=function c(d){var g,E,k={};for(g in d)R(d,g)&&(E=d[g],k[g]=!E||typeof E!="object"||z.has(E.constructor)?E:c(E));return k}(t[i])}),e}function bi(e,t){return e.all||t.all||Object.keys(e).some(function(i){return t[i]&&_u(t[i],e[i])})}p(zt.prototype,((Pn={add:function(e){return ba(this,e),this},addKey:function(e){return ya(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(i){return ya(t,i,i)}),this},hasKey:function(e){var t=uo(this).next(e).value;return t&&st(t.from,e)<=0&&0<=st(t.to,e)}})[xe]=function(){return uo(this)},Pn));var Pr={},wi={},Ei=!1;function lo(e){co(wi,e),Ei||(Ei=!0,setTimeout(function(){Ei=!1,Si(wi,!(wi={}))},0))}function Si(e,t){t===void 0&&(t=!1);var i=new Set;if(e.all)for(var c=0,d=Object.values(Pr);c<d.length;c++)wu(E=d[c],e,i,t);else for(var g in e){var E,k=/^idb\:\/\/(.*)\/(.*)\//.exec(g);k&&(g=k[1],k=k[2],(E=Pr["idb://".concat(g,"/").concat(k)])&&wu(E,e,i,t))}i.forEach(function($){return $()})}function wu(e,t,i,c){for(var d=[],g=0,E=Object.entries(e.queries.query);g<E.length;g++){for(var k=E[g],$=k[0],L=[],B=0,C=k[1];B<C.length;B++){var H=C[B];bi(t,H.obsSet)?H.subscribers.forEach(function(F){return i.add(F)}):c&&L.push(H)}c&&d.push([$,L])}if(c)for(var N=0,K=d;N<K.length;N++){var V=K[N],$=V[0],L=V[1];e.queries.query[$]=L}}function Jf(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Be(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var c=t.openCanceller,d=Math.round(10*e.verno),g=!1;function E(){if(t.openCanceller!==c)throw new me.DatabaseClosed("db.open() was cancelled")}function k(){return new oe(function(H,N){if(E(),!i)throw new me.MissingAPI;var K=e.name,V=t.autoSchema||!d?i.open(K):i.open(K,d);if(!V)throw new me.MissingAPI;V.onerror=jn(N),V.onblocked=_t(e._fireOnBlocked),V.onupgradeneeded=_t(function(F){var Y;B=V.transaction,t.autoSchema&&!e._options.allowEmptyDB?(V.onerror=ha,B.abort(),V.result.close(),(Y=i.deleteDatabase(K)).onsuccess=Y.onerror=_t(function(){N(new me.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(B.onerror=jn(N),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,C=F<1,e.idbdb=V.result,g&&Qf(e,B),Xf(e,F/10,B,N))},N),V.onsuccess=_t(function(){B=null;var F,Y,ee,te,le,Se=e.idbdb=V.result,Ce=P(Se.objectStoreNames);if(0<Ce.length)try{var Ae=Se.transaction((te=Ce).length===1?te[0]:te,"readonly");if(t.autoSchema)Y=Se,ee=Ae,(F=e).verno=Y.version/10,ee=F._dbSchema=oo(0,Y,ee),F._storeNames=P(Y.objectStoreNames,0),ro(F,[F._allTables],l(ee),ee);else if(io(e,e._dbSchema,Ae),((le=gi(oo(0,(le=e).idbdb,Ae),le._dbSchema)).add.length||le.change.some(function(ke){return ke.add.length||ke.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),d=Se.version+1,g=!0,H(k());no(e,Ae)}catch{}Kr.push(e),Se.onversionchange=_t(function(ke){t.vcFired=!0,e.on("versionchange").fire(ke)}),Se.onclose=_t(function(ke){e.on("close").fire(ke)}),C&&(le=e._deps,Ae=K,Se=le.indexedDB,le=le.IDBKeyRange,pi(Se)||Ae===Qa||mi(Se,le).put({name:Ae}).catch(De)),H()},N)}).catch(function(H){switch(H?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<d)return d=0,k()}return oe.reject(H)})}var $,L=t.dbReadyResolve,B=null,C=!1;return oe.race([c,(typeof navigator>"u"?oe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(H){function N(){return indexedDB.databases().finally(H)}$=setInterval(N,100),N()}).finally(function(){return clearInterval($)}):Promise.resolve()).then(k)]).then(function(){return E(),t.onReadyBeingFired=[],oe.resolve(_i(function(){return e.on.ready.fire(e.vip)})).then(function H(){if(0<t.onReadyBeingFired.length){var N=t.onReadyBeingFired.reduce(ge,De);return t.onReadyBeingFired=[],oe.resolve(_i(function(){return N(e.vip)})).then(H)}})}).finally(function(){t.openCanceller===c&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(H){t.dbOpenError=H;try{B&&B.abort()}catch{}return c===t.openCanceller&&e._close(),Be(H)}).finally(function(){t.openComplete=!0,L()}).then(function(){var H;return C&&(H={},e.tables.forEach(function(N){N.schema.indexes.forEach(function(K){K.name&&(H["idb://".concat(e.name,"/").concat(N.name,"/").concat(K.name)]=new zt(-1/0,[[[]]]))}),H["idb://".concat(e.name,"/").concat(N.name,"/")]=H["idb://".concat(e.name,"/").concat(N.name,"/:dels")]=new zt(-1/0,[[[]]])}),dr(ma).fire(H),Si(H,!0)),e})}function Ai(e){function t(g){return e.next(g)}var i=d(t),c=d(function(g){return e.throw(g)});function d(g){return function($){var k=g($),$=k.value;return k.done?$:$&&typeof $.then=="function"?$.then(i,c):h($)?Promise.all($).then(i,c):i($)}}return d(t)()}function fo(e,t,i){for(var c=h(e)?e.slice():[e],d=0;d<i;++d)c.push(t);return c}var ed={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var i=e.table(t),c=i.schema,d={},g=[];function E(C,H,N){var K=_a(C),V=d[K]=d[K]||[],F=C==null?0:typeof C=="string"?1:C.length,Y=0<H,Y=s(s({},N),{name:Y?"".concat(K,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:Y,keyTail:H,keyLength:F,extractKey:di(C),unique:!Y&&N.unique});return V.push(Y),Y.isPrimaryKey||g.push(Y),1<F&&E(F===2?C[0]:C.slice(0,F-1),H+1,N),V.sort(function(ee,te){return ee.keyTail-te.keyTail}),Y}t=E(c.primaryKey.keyPath,0,c.primaryKey),d[":id"]=[t];for(var k=0,$=c.indexes;k<$.length;k++){var L=$[k];E(L.keyPath,0,L)}function B(C){var H,N=C.query.index;return N.isVirtual?s(s({},C),{query:{index:N.lowLevelIndex,range:(H=C.query.range,N=N.keyTail,{type:H.type===1?2:H.type,lower:fo(H.lower,H.lowerOpen?e.MAX_KEY:e.MIN_KEY,N),lowerOpen:!0,upper:fo(H.upper,H.upperOpen?e.MIN_KEY:e.MAX_KEY,N),upperOpen:!0})}}):C}return s(s({},i),{schema:s(s({},c),{primaryKey:t,indexes:g,getIndexByKeyPath:function(C){return(C=d[_a(C)])&&C[0]}}),count:function(C){return i.count(B(C))},query:function(C){return i.query(B(C))},openCursor:function(C){var H=C.query.index,N=H.keyTail,K=H.isVirtual,V=H.keyLength;return K?i.openCursor(B(C)).then(function(Y){return Y&&F(Y)}):i.openCursor(C);function F(Y){return Object.create(Y,{continue:{value:function(ee){ee!=null?Y.continue(fo(ee,C.reverse?e.MAX_KEY:e.MIN_KEY,N)):C.unique?Y.continue(Y.key.slice(0,V).concat(C.reverse?e.MIN_KEY:e.MAX_KEY,N)):Y.continue()}},continuePrimaryKey:{value:function(ee,te){Y.continuePrimaryKey(fo(ee,e.MAX_KEY,N),te)}},primaryKey:{get:function(){return Y.primaryKey}},key:{get:function(){var ee=Y.key;return V===1?ee[0]:ee.slice(0,V)}},value:{get:function(){return Y.value}}})}}})}})}};function Ti(e,t,i,c){return i=i||{},c=c||"",l(e).forEach(function(d){var g,E,k;R(t,d)?(g=e[d],E=t[d],typeof g=="object"&&typeof E=="object"&&g&&E?(k=de(g))!==de(E)?i[c+d]=t[d]:k==="Object"?Ti(g,E,i,c+d+"."):g!==E&&(i[c+d]=t[d]):g!==E&&(i[c+d]=t[d])):i[c+d]=void 0}),l(t).forEach(function(d){R(e,d)||(i[c+d]=t[d])}),i}function Ri(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var td={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var i=e.table(t),c=i.schema.primaryKey;return s(s({},i),{mutate:function(d){var g=Ke.trans,E=g.table(t).hook,k=E.deleting,$=E.creating,L=E.updating;switch(d.type){case"add":if($.fire===De)break;return g._promise("readwrite",function(){return B(d)},!0);case"put":if($.fire===De&&L.fire===De)break;return g._promise("readwrite",function(){return B(d)},!0);case"delete":if(k.fire===De)break;return g._promise("readwrite",function(){return B(d)},!0);case"deleteRange":if(k.fire===De)break;return g._promise("readwrite",function(){return function C(H,N,K){return i.query({trans:H,values:!1,query:{index:c,range:N},limit:K}).then(function(V){var F=V.result;return B({type:"delete",keys:F,trans:H}).then(function(Y){return 0<Y.numFailures?Promise.reject(Y.failures[0]):F.length<K?{failures:[],numFailures:0,lastResult:void 0}:C(H,s(s({},N),{lower:F[F.length-1],lowerOpen:!0}),K)})})}(d.trans,d.range,1e4)},!0)}return i.mutate(d);function B(C){var H,N,K,V=Ke.trans,F=C.keys||Ri(c,C);if(!F)throw new Error("Keys missing");return(C=C.type==="add"||C.type==="put"?s(s({},C),{keys:F}):s({},C)).type!=="delete"&&(C.values=o([],C.values)),C.keys&&(C.keys=o([],C.keys)),H=i,K=F,((N=C).type==="add"?Promise.resolve([]):H.getMany({trans:N.trans,keys:K,cache:"immutable"})).then(function(Y){var ee=F.map(function(te,le){var Se,Ce,Ae,ke=Y[le],$e={onerror:null,onsuccess:null};return C.type==="delete"?k.fire.call($e,te,ke,V):C.type==="add"||ke===void 0?(Se=$.fire.call($e,te,C.values[le],V),te==null&&Se!=null&&(C.keys[le]=te=Se,c.outbound||D(C.values[le],c.keyPath,te))):(Se=Ti(ke,C.values[le]),(Ce=L.fire.call($e,Se,te,ke,V))&&(Ae=C.values[le],Object.keys(Ce).forEach(function(Oe){R(Ae,Oe)?Ae[Oe]=Ce[Oe]:D(Ae,Oe,Ce[Oe])}))),$e});return i.mutate(C).then(function(te){for(var le=te.failures,Se=te.results,Ce=te.numFailures,te=te.lastResult,Ae=0;Ae<F.length;++Ae){var ke=(Se||F)[Ae],$e=ee[Ae];ke==null?$e.onerror&&$e.onerror(le[Ae]):$e.onsuccess&&$e.onsuccess(C.type==="put"&&Y[Ae]?C.values[Ae]:ke)}return{failures:le,results:Se,numFailures:Ce,lastResult:te}}).catch(function(te){return ee.forEach(function(le){return le.onerror&&le.onerror(te)}),Promise.reject(te)})})}}})}})}};function Eu(e,t,i){try{if(!t||t.keys.length<e.length)return null;for(var c=[],d=0,g=0;d<t.keys.length&&g<e.length;++d)st(t.keys[d],e[g])===0&&(c.push(i?J(t.values[d]):t.values[d]),++g);return c.length===e.length?c:null}catch{return null}}var nd={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return s(s({},i),{getMany:function(c){if(!c.cache)return i.getMany(c);var d=Eu(c.keys,c.trans._cache,c.cache==="clone");return d?oe.resolve(d):i.getMany(c).then(function(g){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?J(g):g},g})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),i.mutate(c)}})}}}};function Su(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Au(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rd={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,i=new zt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(c,d,g){if(Ke.subscr&&d!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ke.querier));return e.transaction(c,d,g)},table:function(c){var d=e.table(c),g=d.schema,E=g.primaryKey,C=g.indexes,k=E.extractKey,$=E.outbound,L=E.autoIncrement&&C.filter(function(N){return N.compound&&N.keyPath.includes(E.keyPath)}),B=s(s({},d),{mutate:function(N){function K(Oe){return Oe="idb://".concat(t,"/").concat(c,"/").concat(Oe),te[Oe]||(te[Oe]=new zt)}var V,F,Y,ee=N.trans,te=N.mutatedParts||(N.mutatedParts={}),le=K(""),Se=K(":dels"),Ce=N.type,$e=N.type==="deleteRange"?[N.range]:N.type==="delete"?[N.keys]:N.values.length<50?[Ri(E,N).filter(function(Oe){return Oe}),N.values]:[],Ae=$e[0],ke=$e[1],$e=N.trans._cache;return h(Ae)?(le.addKeys(Ae),($e=Ce==="delete"||Ae.length===ke.length?Eu(Ae,$e):null)||Se.addKeys(Ae),($e||ke)&&(V=K,F=$e,Y=ke,g.indexes.forEach(function(Oe){var Fe=V(Oe.name||"");function Ze(at){return at!=null?Oe.extractKey(at):null}function rt(at){return Oe.multiEntry&&h(at)?at.forEach(function(yn){return Fe.addKey(yn)}):Fe.addKey(at)}(F||Y).forEach(function(at,qt){var Qe=F&&Ze(F[qt]),qt=Y&&Ze(Y[qt]);st(Qe,qt)!==0&&(Qe!=null&&rt(Qe),qt!=null&&rt(qt))})}))):Ae?(ke={from:(ke=Ae.lower)!==null&&ke!==void 0?ke:e.MIN_KEY,to:(ke=Ae.upper)!==null&&ke!==void 0?ke:e.MAX_KEY},Se.add(ke),le.add(ke)):(le.add(i),Se.add(i),g.indexes.forEach(function(Oe){return K(Oe.name).add(i)})),d.mutate(N).then(function(Oe){return!Ae||N.type!=="add"&&N.type!=="put"||(le.addKeys(Oe.results),L&&L.forEach(function(Fe){for(var Ze=N.values.map(function(Qe){return Fe.extractKey(Qe)}),rt=Fe.keyPath.findIndex(function(Qe){return Qe===E.keyPath}),at=0,yn=Oe.results.length;at<yn;++at)Ze[at][rt]=Oe.results[at];K(Fe.name).addKeys(Ze)})),ee.mutatedParts=co(ee.mutatedParts||{},te),Oe})}}),C=function(K){var V=K.query,K=V.index,V=V.range;return[K,new zt((K=V.lower)!==null&&K!==void 0?K:e.MIN_KEY,(V=V.upper)!==null&&V!==void 0?V:e.MAX_KEY)]},H={get:function(N){return[E,new zt(N.key)]},getMany:function(N){return[E,new zt().addKeys(N.keys)]},count:C,query:C,openCursor:C};return l(H).forEach(function(N){B[N]=function(K){var V=Ke.subscr,F=!!V,Y=Su(Ke,d)&&Au(N,K)?K.obsSet={}:V;if(F){var ee=function(ke){return ke="idb://".concat(t,"/").concat(c,"/").concat(ke),Y[ke]||(Y[ke]=new zt)},te=ee(""),le=ee(":dels"),V=H[N](K),F=V[0],V=V[1];if((N==="query"&&F.isPrimaryKey&&!K.values?le:ee(F.name||"")).add(V),!F.isPrimaryKey){if(N!=="count"){var Se=N==="query"&&$&&K.values&&d.query(s(s({},K),{values:!1}));return d[N].apply(this,arguments).then(function(ke){if(N==="query"){if($&&K.values)return Se.then(function(Ze){return Ze=Ze.result,te.addKeys(Ze),ke});var $e=K.values?ke.result.map(k):ke.result;(K.values?te:le).addKeys($e)}else if(N==="openCursor"){var Oe=ke,Fe=K.values;return Oe&&Object.create(Oe,{key:{get:function(){return le.addKey(Oe.primaryKey),Oe.key}},primaryKey:{get:function(){var Ze=Oe.primaryKey;return le.addKey(Ze),Ze}},value:{get:function(){return Fe&&te.addKey(Oe.primaryKey),Oe.value}}})}return ke})}le.add(i)}}return d[N].apply(this,arguments)}}),B}})}};function Tu(e,t,i){if(i.numFailures===0)return t;if(t.type==="deleteRange")return null;var c=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return i.numFailures===c?null:(t=s({},t),h(t.keys)&&(t.keys=t.keys.filter(function(d,g){return!(g in i.failures)})),"values"in t&&h(t.values)&&(t.values=t.values.filter(function(d,g){return!(g in i.failures)})),t)}function xi(e,t){return i=e,((c=t).lower===void 0||(c.lowerOpen?0<st(i,c.lower):0<=st(i,c.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?st(e,t.upper)<0:st(e,t.upper)<=0));var i,c}function Ru(e,t,H,c,d,g){if(!H||H.length===0)return e;var E=t.query.index,k=E.multiEntry,$=t.query.range,L=c.schema.primaryKey.extractKey,B=E.extractKey,C=(E.lowLevelIndex||E).extractKey,H=H.reduce(function(N,K){var V=N,F=[];if(K.type==="add"||K.type==="put")for(var Y=new zt,ee=K.values.length-1;0<=ee;--ee){var te,le=K.values[ee],Se=L(le);Y.hasKey(Se)||(te=B(le),(k&&h(te)?te.some(function(Oe){return xi(Oe,$)}):xi(te,$))&&(Y.addKey(Se),F.push(le)))}switch(K.type){case"add":var Ce=new zt().addKeys(t.values?N.map(function(Fe){return L(Fe)}):N),V=N.concat(t.values?F.filter(function(Fe){return Fe=L(Fe),!Ce.hasKey(Fe)&&(Ce.addKey(Fe),!0)}):F.map(function(Fe){return L(Fe)}).filter(function(Fe){return!Ce.hasKey(Fe)&&(Ce.addKey(Fe),!0)}));break;case"put":var Ae=new zt().addKeys(K.values.map(function(Fe){return L(Fe)}));V=N.filter(function(Fe){return!Ae.hasKey(t.values?L(Fe):Fe)}).concat(t.values?F:F.map(function(Fe){return L(Fe)}));break;case"delete":var ke=new zt().addKeys(K.keys);V=N.filter(function(Fe){return!ke.hasKey(t.values?L(Fe):Fe)});break;case"deleteRange":var $e=K.range;V=N.filter(function(Fe){return!xi(L(Fe),$e)})}return V},e);return H===e?e:(H.sort(function(N,K){return st(C(N),C(K))||st(L(N),L(K))}),t.limit&&t.limit<1/0&&(H.length>t.limit?H.length=t.limit:e.length===t.limit&&H.length<t.limit&&(d.dirty=!0)),g?Object.freeze(H):H)}function xu(e,t){return st(e.lower,t.lower)===0&&st(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ad(e,t){return function(i,c,d,g){if(i===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=st(i,c))===0){if(d&&g)return 0;if(d)return 1;if(g)return-1}return c}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(i,c,d,g){if(i===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=st(i,c))===0){if(d&&g)return 0;if(d)return-1;if(g)return 1}return c}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function od(e,t,i,c){e.subscribers.add(i),c.addEventListener("abort",function(){var d,g;e.subscribers.delete(i),e.subscribers.size===0&&(d=e,g=t,setTimeout(function(){d.subscribers.size===0&&ve(g,d)},3e3))})}var id={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(i,c,d){var g,E,k=e.transaction(i,c,d);return c==="readwrite"&&(E=(g=new AbortController).signal,d=function($){return function(){if(g.abort(),c==="readwrite"){for(var L=new Set,B=0,C=i;B<C.length;B++){var H=C[B],N=Pr["idb://".concat(t,"/").concat(H)];if(N){var K=e.table(H),V=N.optimisticOps.filter(function(Fe){return Fe.trans===k});if(k._explicit&&$&&k.mutatedParts)for(var F=0,Y=Object.values(N.queries.query);F<Y.length;F++)for(var ee=0,te=(Ce=Y[F]).slice();ee<te.length;ee++)bi((Ae=te[ee]).obsSet,k.mutatedParts)&&(ve(Ce,Ae),Ae.subscribers.forEach(function(Fe){return L.add(Fe)}));else if(0<V.length){N.optimisticOps=N.optimisticOps.filter(function(Fe){return Fe.trans!==k});for(var le=0,Se=Object.values(N.queries.query);le<Se.length;le++)for(var Ce,Ae,ke,$e=0,Oe=(Ce=Se[le]).slice();$e<Oe.length;$e++)(Ae=Oe[$e]).res!=null&&k.mutatedParts&&($&&!Ae.dirty?(ke=Object.isFrozen(Ae.res),ke=Ru(Ae.res,Ae.req,V,K,Ae,ke),Ae.dirty?(ve(Ce,Ae),Ae.subscribers.forEach(function(Fe){return L.add(Fe)})):ke!==Ae.res&&(Ae.res=ke,Ae.promise=oe.resolve({result:ke}))):(Ae.dirty&&ve(Ce,Ae),Ae.subscribers.forEach(function(Fe){return L.add(Fe)})))}}}L.forEach(function(Fe){return Fe()})}}},k.addEventListener("abort",d(!1),{signal:E}),k.addEventListener("error",d(!1),{signal:E}),k.addEventListener("complete",d(!0),{signal:E})),k},table:function(i){var c=e.table(i),d=c.schema.primaryKey;return s(s({},c),{mutate:function(g){var E=Ke.trans;if(d.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return c.mutate(g);var k=Pr["idb://".concat(t,"/").concat(i)];return k?(E=c.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Ri(d,g).some(function($){return $==null}))?(k.optimisticOps.push(g),g.mutatedParts&&lo(g.mutatedParts),E.then(function($){0<$.numFailures&&(ve(k.optimisticOps,g),($=Tu(0,g,$))&&k.optimisticOps.push($),g.mutatedParts&&lo(g.mutatedParts))}),E.catch(function(){ve(k.optimisticOps,g),g.mutatedParts&&lo(g.mutatedParts)})):E.then(function($){var L=Tu(0,s(s({},g),{values:g.values.map(function(B,C){var H;return $.failures[C]?B:(B=(H=d.keyPath)!==null&&H!==void 0&&H.includes(".")?J(B):s({},B),D(B,d.keyPath,$.results[C]),B)})}),$);k.optimisticOps.push(L),queueMicrotask(function(){return g.mutatedParts&&lo(g.mutatedParts)})}),E):c.mutate(g)},query:function(g){if(!Su(Ke,c)||!Au("query",g))return c.query(g);var E=((L=Ke.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",C=Ke,k=C.requery,$=C.signal,L=function(K,V,F,Y){var ee=Pr["idb://".concat(K,"/").concat(V)];if(!ee)return[];if(!(V=ee.queries[F]))return[null,!1,ee,null];var te=V[(Y.query?Y.query.index.name:null)||""];if(!te)return[null,!1,ee,null];switch(F){case"query":var le=te.find(function(Se){return Se.req.limit===Y.limit&&Se.req.values===Y.values&&xu(Se.req.query.range,Y.query.range)});return le?[le,!0,ee,te]:[te.find(function(Se){return("limit"in Se.req?Se.req.limit:1/0)>=Y.limit&&(!Y.values||Se.req.values)&&ad(Se.req.query.range,Y.query.range)}),!1,ee,te];case"count":return le=te.find(function(Se){return xu(Se.req.query.range,Y.query.range)}),[le,!!le,ee,te]}}(t,i,"query",g),B=L[0],C=L[1],H=L[2],N=L[3];return B&&C?B.obsSet=g.obsSet:(C=c.query(g).then(function(K){var V=K.result;if(B&&(B.res=V),E){for(var F=0,Y=V.length;F<Y;++F)Object.freeze(V[F]);Object.freeze(V)}else K.result=J(V);return K}).catch(function(K){return N&&B&&ve(N,B),Promise.reject(K)}),B={obsSet:g.obsSet,promise:C,subscribers:new Set,type:"query",req:g,dirty:!1},N?N.push(B):(N=[B],(H=H||(Pr["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=N)),od(B,N,k,$),B.promise.then(function(K){return{result:Ru(K.result,g,H?.optimisticOps,c,B,E)}})}})}})}};function vo(e,t){return new Proxy(e,{get:function(i,c,d){return c==="db"?t:Reflect.get(i,c,d)}})}var er=(xt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new me.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter(function(c){return c._cfg.version===e})[0];return i||(i=new this.Version(e),t.push(i),t.sort(Yf),i.stores({}),this._state.autoSchema=!1,i)},xt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?e():new oe(function(i,c){if(t._state.openComplete)return c(new me.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void c(new me.DatabaseClosed);t.open().catch(De)}t._state.dbReadyPromise.then(i,c)}).then(e)},xt.prototype.use=function(e){var t=e.stack,i=e.create,c=e.level,d=e.name;return d&&this.unuse({stack:t,name:d}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:i,level:c??10,name:d}),e.sort(function(g,E){return g.level-E.level}),this},xt.prototype.unuse=function(e){var t=e.stack,i=e.name,c=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(d){return c?d.create!==c:!!i&&d.name!==i})),this},xt.prototype.open=function(){var e=this;return Un(Jt,function(){return Jf(e)})},xt.prototype._close=function(){var e=this._state,t=Kr.indexOf(this);if(0<=t&&Kr.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new oe(function(i){e.dbReadyResolve=i}),e.openCanceller=new oe(function(i,c){e.cancelOpen=c}))},xt.prototype.close=function(i){var t=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;t?(i.isBeingOpened&&i.cancelOpen(new me.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new me.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},xt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new oe(function(d,g){function E(){t.close(e);var k=t._deps.indexedDB.deleteDatabase(t.name);k.onsuccess=_t(function(){var $,L,B;$=t._deps,L=t.name,B=$.indexedDB,$=$.IDBKeyRange,pi(B)||L===Qa||mi(B,$).delete(L).catch(De),d()}),k.onerror=jn(g),k.onblocked=t._fireOnBlocked}if(i)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(E):E()})},xt.prototype.backendDB=function(){return this.idbdb},xt.prototype.isOpen=function(){return this.idbdb!==null},xt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(xt.prototype,"tables",{get:function(){var e=this;return l(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),xt.prototype.transaction=function(){var e=(function(t,i,c){var d=arguments.length;if(d<2)throw new me.InvalidArgument("Too few arguments");for(var g=new Array(d-1);--d;)g[d-1]=arguments[d];return c=g.pop(),[t,ae(g),c]}).apply(this,arguments);return this._transaction.apply(this,e)},xt.prototype._transaction=function(e,t,i){var c=this,d=Ke.trans;d&&d.db===this&&e.indexOf("!")===-1||(d=null);var g,E,k=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(E=t.map(function(L){if(L=L instanceof c.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),e=="r"||e===ai)g=ai;else{if(e!="rw"&&e!=oi)throw new me.InvalidArgument("Invalid transaction mode: "+e);g=oi}if(d){if(d.mode===ai&&g===oi){if(!k)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&E.forEach(function(L){if(d&&d.storeNames.indexOf(L)===-1){if(!k)throw new me.SubTransaction("Table "+L+" not included in parent transaction.");d=null}}),k&&d&&!d.active&&(d=null)}}catch(L){return d?d._promise(null,function(B,C){C(L)}):Be(L)}var $=(function L(B,C,H,N,K){return oe.resolve().then(function(){var V=Ke.transless||Ke,F=B._createTransaction(C,H,B._dbSchema,N);if(F.explicit=!0,V={trans:F,transless:V},N)F.idbtrans=N.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(te){return te.name===Pe.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return L(B,C,H,null,K)})):Be(te)}var Y,ee=se(K);return ee&&Jn(),V=oe.follow(function(){var te;(Y=K.call(F,F))&&(ee?(te=Ln.bind(null,null),Y.then(te,te)):typeof Y.next=="function"&&typeof Y.throw=="function"&&(Y=Ai(Y)))},V),(Y&&typeof Y.then=="function"?oe.resolve(Y).then(function(te){return F.active?te:Be(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):V.then(function(){return Y})).then(function(te){return N&&F._resolve(),F._completion.then(function(){return te})}).catch(function(te){return F._reject(te),Be(te)})})}).bind(null,this,g,E,d,i);return d?d._promise(g,$,"lock"):Ke.trans?Un(Ke.transless,function(){return c._whenReady($)}):this._whenReady($)},xt.prototype.table=function(e){if(!R(this._allTables,e))throw new me.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},xt);function xt(e,t){var i=this;this._middlewares={},this.verno=0;var c=xt.dependencies;this._options=t=s({addons:xt.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},c=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,g,E,k,$,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:De,dbReadyPromise:null,cancelOpen:De,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};L.dbReadyPromise=new oe(function(C){L.dbReadyResolve=C}),L.openCanceller=new oe(function(C,H){L.cancelOpen=H}),this._state=L,this.name=e,this.on=da(this,"populate","blocked","versionchange","close",{ready:[ge,De]}),this.on.ready.subscribe=T(this.on.ready.subscribe,function(C){return function(H,N){xt.vip(function(){var K,V=i._state;V.openComplete?(V.dbOpenError||oe.resolve().then(H),N&&C(H)):V.onReadyBeingFired?(V.onReadyBeingFired.push(H),N&&C(H)):(C(H),K=i,N||C(function F(){K.on.ready.unsubscribe(H),K.on.ready.unsubscribe(F)}))})}}),this.Collection=(d=this,va(Vf.prototype,function(Y,F){this.db=d;var N=au,K=null;if(F)try{N=F()}catch(ee){K=ee}var V=Y._ctx,F=V.table,Y=F.hook.reading.fire;this._ctx={table:F,index:V.index,isPrimKey:!V.index||F.schema.primKey.keyPath&&V.index===F.schema.primKey.name,range:N,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:V.or,valueMapper:Y!==be?Y:null}})),this.Table=(g=this,va(uu.prototype,function(C,H,N){this.db=g,this._tx=N,this.name=C,this.schema=H,this.hook=g._allTables[C]?g._allTables[C].hook:da(null,{creating:[gt,De],reading:[Me,be],updating:[nt,De],deleting:[Et,De]})})),this.Transaction=(E=this,va(jf.prototype,function(C,H,N,K,V){var F=this;this.db=E,this.mode=C,this.storeNames=H,this.schema=N,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=da(this,"complete","error","abort"),this.parent=V||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new oe(function(Y,ee){F._resolve=Y,F._reject=ee}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(Y){var ee=F.active;return F.active=!1,F.on.error.fire(Y),F.parent?F.parent._reject(Y):ee&&F.idbtrans&&F.idbtrans.abort(),Be(Y)})})),this.Version=(k=this,va(Zf.prototype,function(C){this.db=k,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=($=this,va(vu.prototype,function(C,H,N){if(this.db=$,this._ctx={table:C,index:H===":id"?null:H,or:N},this._cmp=this._ascending=st,this._descending=function(K,V){return st(V,K)},this._max=function(K,V){return 0<st(K,V)?K:V},this._min=function(K,V){return st(K,V)<0?K:V},this._IDBKeyRange=$._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(C){0<C.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(C){!C.newVersion||C.newVersion<C.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(C.oldVersion/10))}),this._maxKey=pa(t.IDBKeyRange),this._createTransaction=function(C,H,N,K){return new i.Transaction(C,H,N,i._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(C){i.on("blocked").fire(C),Kr.filter(function(H){return H.name===i.name&&H!==i&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(C)})},this.use(nd),this.use(id),this.use(rd),this.use(ed),this.use(td);var B=new Proxy(this,{get:function(C,H,N){if(H==="_vip")return!0;if(H==="table")return function(V){return vo(i.table(V),B)};var K=Reflect.get(C,H,N);return K instanceof uu?vo(K,B):H==="tables"?K.map(function(V){return vo(V,B)}):H==="_createTransaction"?function(){return vo(K.apply(this,arguments),B)}:K}});this.vip=B,c.forEach(function(C){return C(i)})}var go,Pn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",sd=(Pi.prototype.subscribe=function(e,t,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:i})},Pi.prototype[Pn]=function(){return this},Pi);function Pi(e){this._subscribe=e}try{go={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{go={indexedDB:null,IDBKeyRange:null}}function Pu(e){var t,i=!1,c=new sd(function(d){var g=se(e),E,k=!1,$={},L={},B={get closed(){return k},unsubscribe:function(){k||(k=!0,E&&E.abort(),C&&dr.storagemutated.unsubscribe(N))}};d.start&&d.start(B);var C=!1,H=function(){return qe(K)},N=function(V){co($,V),bi(L,$)&&H()},K=function(){var V,F,Y;!k&&go.indexedDB&&($={},V={},E&&E.abort(),E=new AbortController,Y=function(ee){var te=ur();try{g&&Jn();var le=hn(e,ee);return le=g?le.finally(Ln):le}finally{te&&cr()}}(F={subscr:V,signal:E.signal,requery:H,querier:e,trans:null}),Promise.resolve(Y).then(function(ee){i=!0,t=ee,k||F.signal.aborted||($={},function(te){for(var le in te)if(R(te,le))return;return 1}(L=V)||C||(dr(ma,N),C=!0),qe(function(){return!k&&d.next&&d.next(ee)}))},function(ee){i=!1,["DatabaseClosedError","AbortError"].includes(ee?.name)||k||qe(function(){k||d.error&&d.error(ee)})}))};return setTimeout(H,0),B});return c.hasValue=function(){return i},c.getValue=function(){return t},c}var kr=er;function ki(e){var t=vr;try{vr=!0,dr.storagemutated.fire(e),Si(e,!0)}finally{vr=t}}p(kr,s(s({},ct),{delete:function(e){return new kr(e,{addons:[]}).delete()},exists:function(e){return new kr(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=kr.dependencies,i=t.indexedDB,t=t.IDBKeyRange,(pi(i)?Promise.resolve(i.databases()).then(function(c){return c.map(function(d){return d.name}).filter(function(d){return d!==Qa})}):mi(i,t).toCollection().primaryKeys()).then(e)}catch{return Be(new me.MissingAPI)}var t,i},defineClass:function(){return function(e){b(this,e)}},ignoreTransaction:function(e){return Ke.trans?Un(Ke.transless,e):e()},vip:_i,async:function(e){return function(){try{var t=Ai(e.apply(this,arguments));return t&&typeof t.then=="function"?t:oe.resolve(t)}catch(i){return Be(i)}}},spawn:function(e,t,i){try{var c=Ai(e.apply(i,t||[]));return c&&typeof c.then=="function"?c:oe.resolve(c)}catch(d){return Be(d)}},currentTransaction:{get:function(){return Ke.trans||null}},waitFor:function(e,t){return t=oe.resolve(typeof e=="function"?kr.ignoreTransaction(e):e).timeout(t||6e4),Ke.trans?Ke.trans.waitFor(t):t},Promise:oe,debug:{get:function(){return ht},set:function(e){Zt(e)}},derive:w,extend:b,props:p,override:T,Events:da,on:dr,liveQuery:Pu,extendObservabilitySet:co,getByKeyPath:G,setByKeyPath:D,delByKeyPath:function(e,t){typeof t=="string"?D(e,t,void 0):"length"in t&&[].map.call(t,function(i){D(e,i,void 0)})},shallowClone:U,deepClone:J,getObjectDiff:Ti,cmp:st,asap:I,minKey:-1/0,addons:[],connections:Kr,errnames:Pe,dependencies:go,cache:Pr,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,i){return e+t/Math.pow(10,2*i)})})),kr.maxKey=pa(kr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(dr(ma,function(e){vr||(e=new CustomEvent(ci,{detail:e}),vr=!0,dispatchEvent(e),vr=!1)}),addEventListener(ci,function(e){e=e.detail,vr||ki(e)}));var Hr,vr=!1,ku=function(){};return typeof BroadcastChannel<"u"&&((ku=function(){(Hr=new BroadcastChannel(ci)).onmessage=function(e){return e.data&&ki(e.data)}})(),typeof Hr.unref=="function"&&Hr.unref(),dr(ma,function(e){vr||Hr.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!er.disableBfCache&&e.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),Hr?.close();for(var t=0,i=Kr;t<i.length;t++)i[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!er.disableBfCache&&e.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),ku(),ki({all:new zt(-1/0,[[]])}))})),oe.rejectionMapper=function(e,t){return!e||e instanceof Ee||e instanceof TypeError||e instanceof SyntaxError||!e.name||!q[e.name]?e:(t=new q[e.name](t||e.message,e),"stack"in e&&y(t,"stack",{get:function(){return this.inner.stack}}),t)},Zt(ht),s(er,Object.freeze({__proto__:null,Dexie:er,liveQuery:Pu,Entity:ou,cmp:st,PropModification:ga,replacePrefix:function(e,t){return new ga({replacePrefix:[e,t]})},add:function(e){return new ga({add:e})},remove:function(e){return new ga({remove:e})},default:er,RangeSet:zt,mergeRanges:ba,rangesOverlap:_u}),{default:er}),er})}(bo)),bo.exports}var Sv=Ev();const is=bv(Sv),ll=Symbol.for("Dexie"),Mo=globalThis[ll]||(globalThis[ll]=is);if(is.semVer!==Mo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${is.semVer} and ${Mo.semVer}`);const{liveQuery:Fs,mergeRanges:r0,rangesOverlap:a0,RangeSet:o0,cmp:i0,Entity:s0,PropModification:u0,replacePrefix:c0,add:l0,remove:f0}=Mo;class Av extends Mo{roms;opts;constructor(){super("myDatabase"),this.version(3).stores({roms:"crc32, title",opts:"key"})}}const On=new Av;var Tv=Re('<button type="button"><img/></button>');function mr(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(En,"$darkTheme",n);let u=he(r,"item",19,()=>({id:"",icon:""})),l=he(r,"alt",3,"Icon"),h=he(r,"toggle",3,!1),b=he(r,"active",3,!1),m=he(r,"select",3,()=>{}),_=!1;function R(y){y.preventDefault(),_=h()?!_:!0,m()(y.target.id,_)}var p=Tv();p.__click=R;var A=W(p);j(p),lt(()=>{We(p,1,`btn btn-lg btn-primary btn-square p-1.5 ${b()?"btn-active":""}`),We(A,1,_r(o()?"invert":"")),Nt(A,"id",u().id),Nt(A,"src",u().icon),Nt(A,"alt",l())}),ie(a,p),it(),s()}Tn(["click"]);const Rv=a=>a;function kt(a,{delay:r=0,duration:n=400,easing:s=Rv}={}){const o=+getComputedStyle(a).opacity;return{delay:r,duration:n,easing:s,css:u=>`opacity: ${u*o}`}}var xv=Re('<div><div class="mx-1 flex space-x-1"></div></div>'),Pv=Re('<div class="flex border-0"><div><div class="border-0"><!></div></div> <!></div>');function $i(a,r){let n=he(r,"expanded",3,!1),s=he(r,"item",19,()=>({id:"",icon:""})),o=he(r,"subitems",19,()=>[{id:"",icon:""}]),u=he(r,"select",3,()=>{});var l=Pv(),h=W(l),b=W(h),m=W(b);mr(m,{select:u(),get active(){return n()},get item(){return s()}}),j(b),j(h);var _=Z(h,2);{var R=p=>{var A=xv(),y=W(A);na(y,21,o,ta,(w,x,M,P)=>{mr(w,{select:u(),get item(){return f(x)}})}),j(y),j(A),Pt(3,A,()=>kt,()=>({duration:200})),ie(p,A)};Xe(_,p=>{n()&&p(R)})}j(l),ie(a,l)}var kv=Re('<div class="h-2"></div>');function Ni(a){var r=kv();ie(a,r)}var Dv=Re("<!> <!>",1),Ov=Re("<!> <!>",1),Cv=Re('<div><div class="bg-base-100/75 absolute top-0 left-0 z-40 flex w-16 flex-col pl-2"><div class="mt-1.5 mb-2 flex flex-col space-y-1.5 border-0"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function Mv(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(ks,"$running",n),u=()=>O(bn,"$port1",n),l=()=>O(wn,"$port2",n),h=()=>O(Ta,"$layout",n),b=()=>O(ko,"$showSidebar",n),m=()=>O(sa,"$poweredOn",n),_=()=>O(Ht,"$layer",n),R=()=>O($l,"$debugDma",n);let p=he(r,"action",3,()=>{}),A=Ct(""),y=200;function w(xe,we){Ve(A,xe==f(A)?"":xe,!0),p()(xe,we)}const x=["icons/device-none.png","icons/device-mouse.png","icons/device-keyset-1.png","icons/device-keyset-2.png","icons/device-usb-1.png","icons/device-usb-2.png"];let M="icons/powerIcon.png",P="icons/resetIcon.png",T="icons/settingsIcon.png",v="icons/retroShellIcon.png",I="icons/monitorIcon.png",G=tt(()=>o()?"icons/pauseIcon.png":"icons/runIcon.png"),D=tt(()=>x[u()]),U=tt(()=>x[l()]),Q=tt(()=>h()=="full"?"icons/layoutFullIcon.png":h()=="aspect"?"icons/layoutAspectIcon.png":"icons/layoutFitIcon.png");const ae=[{id:"empty1",icon:x[0]},{id:"mouse1",icon:x[1]},{id:"keyset11",icon:x[2]},{id:"keyset12",icon:x[3]},{id:"gamepad11",icon:x[4]}],z=[{id:"empty2",icon:x[0]},{id:"mouse2",icon:x[1]},{id:"keyset21",icon:x[2]},{id:"keyset22",icon:x[3]},{id:"gamepad21",icon:x[4]}],X=[{id:"aspect",icon:"icons/layoutAspectIcon.png"},{id:"fit",icon:"icons/layoutFitIcon.png"},{id:"full",icon:"icons/layoutFullIcon.png"}];var J=St(),ye=ze(J);{var de=xe=>{var we=Cv(),ve=W(we),Te=W(ve),ne=W(Te);mr(ne,{select:w,item:{id:"power",icon:M}});var se=Z(ne,2);{var ce=nt=>{var pe=Dv(),ge=ze(pe);const ht=tt(()=>({id:"pause",icon:f(G)}));mr(ge,{select:w,get item(){return f(ht)}});var Zt=Z(ge,2);mr(Zt,{select:w,item:{id:"reset",icon:P}}),ie(nt,pe)};Xe(se,nt=>{m()&&nt(ce)})}var Ee=Z(se,2);Ni(Ee);var Ie=Z(Ee,2);const Ne=tt(()=>f(A)==="port1"),ue=tt(()=>({id:"port1",icon:f(D)}));$i(Ie,{select:w,get expanded(){return f(Ne)},get item(){return f(ue)},get subitems(){return ae}});var Pe=Z(Ie,2);const He=tt(()=>f(A)==="port2"),me=tt(()=>({id:"port2",icon:f(U)}));$i(Pe,{select:w,get expanded(){return f(He)},get item(){return f(me)},get subitems(){return z}});var q=Z(Pe,2);Ni(q);var ct=Z(q,2);const De=tt(()=>_()===dt.settings);mr(ct,{select:w,item:{id:"settings",icon:T},get active(){return f(De)}});var be=Z(ct,2);const Me=tt(()=>_()===dt.shell);mr(be,{select:w,item:{id:"shell",icon:v},get active(){return f(Me)}});var et=Z(be,2);Ni(et);var gt=Z(et,2);{var Et=nt=>{var pe=Ov(),ge=ze(pe);const ht=tt(()=>f(A)==="layout"),Zt=tt(()=>({id:"layout",icon:f(Q)}));$i(ge,{select:w,get expanded(){return f(ht)},get item(){return f(Zt)},get subitems(){return X}});var ln=Z(ge,2);mr(ln,{select:w,item:{id:"monitor",icon:I},get active(){return R()}}),ie(nt,pe)};Xe(gt,nt=>{m()&&nt(Et)})}j(Te),j(ve),j(we),Pt(3,we,()=>kt,()=>({duration:y})),ie(xe,we)};Xe(ye,xe=>{b()&&xe(de)})}ie(a,J),it(),s()}var Iv=Qt("<title> </title>"),$v=Qt('<svg xmlns="http://www.w3.org/2000/svg" class="svelte-c8tyih"><!><!></svg>');function cn(a,r){let n=he(r,"title",8,null),s=he(r,"viewBox",8);var o=$v(),u=W(o);{var l=b=>{var m=Iv(),_=W(m,!0);j(m),lt(()=>Rt(_,n())),ie(b,m)};Xe(u,b=>{n()&&b(l)})}var h=Z(u);Da(h,r,"default",{}),j(o),lt(()=>Nt(o,"viewBox",s())),ie(a,o)}var Nv=Qt('<path d="M16.922 2.029c-7.716 0-13.971 6.255-13.971 13.971s6.255 13.971 13.971 13.971c7.716 0 13.971-6.255 13.971-13.971s-6.255-13.971-13.971-13.971zM13.224 17.246c-0.178 0.106-0.35 0.178-0.568 0.238-0.172 0.047-0.344 0.106-0.382 0.13-0.107 0.068-0.289 0.377-0.391 0.66-0.127 0.354-0.172 0.721-0.131 1.061 0.038 0.314 0.168 0.915 0.252 1.172 0.070 0.213 0.387 0.889 0.543 1.158 0.13 0.224 0.136 0.299 0.030 0.426-0.17 0.204-0.53 0.356-1.030 0.435-0.43 0.068-0.788 0.079-1.134 0.035-0.639-0.082-1.090-0.234-1.243-0.418-0.141-0.169-0.136-0.193 0.193-0.857 0.321-0.649 0.408-0.879 0.535-1.414 0.066-0.279 0.079-0.4 0.079-0.755-0.001-0.497-0.046-0.706-0.222-1.034-0.219-0.41-0.313-0.484-0.79-0.617-0.574-0.161-1.346-0.682-2.049-1.383-0.353-0.353-0.701-0.895-0.918-1.432-0.18-0.446-0.341-1.379-0.248-1.439 0.024-0.015 0.807-0.024 1.594-0.026s1.579 0.004 1.618 0.019c0.028 0.011 0.077 0.081 0.109 0.158 0.114 0.268 0.827 1.233 1.161 1.569 0.644 0.649 1.003 0.929 1.793 1.405 0.397 0.239 0.823 0.432 1.287 0.584 0.242 0.079 0.227 0.136-0.091 0.325zM18.266 19.632c0.002 0.639 0.009 0.721 0.080 1.026 0.080 0.342 0.401 1.328 0.546 1.675 0.147 0.353 0.633 1.369 0.744 1.555 0.131 0.219 0.135 0.294 0.023 0.472-0.231 0.367-1.026 0.654-2.126 0.765-0.539 0.055-0.84 0.054-1.343-0.002-0.515-0.057-0.838-0.122-1.186-0.238-0.164-0.055-0.334-0.108-0.377-0.118-0.127-0.031-0.43-0.251-0.515-0.374-0.157-0.229-0.162-0.213 0.329-1.205 0.446-0.902 0.499-1.033 0.723-1.791 0.189-0.64 0.244-0.886 0.278-1.263 0.043-0.474 0.018-1.226-0.049-1.514-0.116-0.492-0.405-1.018-0.778-1.415-0.253-0.27-0.493-0.436-0.793-0.548-0.851-0.32-1.748-0.824-2.393-1.348-0.333-0.27-0.967-0.893-1.217-1.196-0.674-0.816-1.265-1.984-1.475-2.914-0.107-0.473-0.185-1.038-0.173-1.249l0.008-0.159v0.001h16.568l0.010 0.136c0.025 0.344-0.182 1.371-0.374 1.855-0.059 0.149-0.145 0.384-0.191 0.522s-0.109 0.288-0.14 0.333c-0.031 0.045-0.115 0.192-0.186 0.324-0.585 1.092-1.713 2.248-2.903 2.974-0.404 0.247-1.073 0.571-1.433 0.694-0.156 0.053-0.324 0.133-0.374 0.176-0.247 0.217-0.587 0.583-0.704 0.758-0.072 0.108-0.146 0.206-0.166 0.218-0.064 0.040-0.304 0.635-0.362 0.899-0.046 0.211-0.056 0.38-0.054 0.951zM26.404 16.568c-0.493 0.432-0.947 0.692-1.574 0.905-0.391 0.132-0.406 0.141-0.511 0.282-0.159 0.213-0.353 0.615-0.387 0.802-0.051 0.279-0.036 0.824 0.032 1.161 0.135 0.673 0.285 1.093 0.626 1.758 0.21 0.41 0.217 0.428 0.182 0.533-0.079 0.242-0.524 0.448-1.154 0.534-0.75 0.103-1.525 0.016-2.012-0.226-0.209-0.104-0.395-0.288-0.395-0.391 0-0.020 0.135-0.303 0.299-0.629 0.43-0.856 0.63-1.556 0.636-2.224 0.003-0.378-0.048-0.6-0.221-0.972-0.184-0.392-0.306-0.485-0.868-0.658-0.178-0.055-0.291-0.111-0.644-0.32-0.201-0.119-0.171-0.153 0.291-0.311 0.536-0.184 1.214-0.563 1.851-1.037 0.339-0.252 1.16-1.058 1.437-1.411 0.242-0.307 0.532-0.741 0.641-0.957 0.043-0.087 0.105-0.171 0.136-0.189 0.039-0.021 1.287-0.034 2.238-0.032 0.57 0.002 1.034 0.006 1.066 0.019 0.037 0.014 0.047 0.066 0.047 0.245 0 0.294-0.225 1.175-0.364 1.424-0.462 0.829-0.69 1.115-1.351 1.693z"></path>');function Lv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 34 32"},()=>n,{children:(s,o)=>{var u=Nv();ie(s,u)},$$slots:{default:!0}}))}var Uv=Qt('<path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>');function Fv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 496 512"},()=>n,{children:(s,o)=>{var u=Uv();ie(s,u)},$$slots:{default:!0}}))}var Kv=Qt('<path d="M416 48v416c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h224c26.51 0 48 21.49 48 48zm96 58v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42V88h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zM30 376h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6z"></path>');function Bv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 512 512"},()=>n,{children:(s,o)=>{var u=Kv();ie(s,u)},$$slots:{default:!0}}))}var Vv=Qt('<path d="M384 16c48 32 64 80 64 112 0 128 0 256-32 368l-16-112c-48 32-112 64-144 64s-96-32-144-64L96 496C64 384 64 256 64 128c0-32 16-80 64-112-16 48-16 96 0 128 64-32 192-32 256 0 16-32 16-80 0-128zm0 256c-33.7 46.8-52 57.2-112 80 33.5 32 95.5 21.5 128-16 14.1-16.3 6.8-44.6-16-64zm-256 0c-22.8 19.4-30.1 47.7-16 64 32.5 37.5 94.5 48 128 16-60-22.8-78.3-33.2-112-80z"></path>');function Hv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 512 512"},()=>n,{children:(s,o)=>{var u=Vv();ie(s,u)},$$slots:{default:!0}}))}var Gv=Qt('<path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path>');function jv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 24 24"},()=>n,{children:(s,o)=>{var u=Gv();ie(s,u)},$$slots:{default:!0}}))}var Wv=Qt('<path d="M7 4c-.83 0-1.5-.67-1.5-1.5S6.17 1 7 1s1.5.67 1.5 1.5S7.83 4 7 4zm7 6c0 1.11-.89 2-2 2h-1c-1.11 0-2-.89-2-2l2-4h-1c-.55 0-1-.45-1-1H8v8c.42 0 1 .45 1 1h1c.42 0 1 .45 1 1H3c0-.55.58-1 1-1h1c0-.55.58-1 1-1h.03L6 5H5c0 .55-.45 1-1 1H3l2 4c0 1.11-.89 2-2 2H2c-1.11 0-2-.89-2-2l2-4H1V5h3c0-.55.45-1 1-1h4c.55 0 1 .45 1 1h3v1h-1l2 4zM2.5 7L1 10h3L2.5 7zM13 10l-1.5-3-1.5 3h3z"></path>');function zv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 14 16"},()=>n,{children:(s,o)=>{var u=Wv();ie(s,u)},$$slots:{default:!0}}))}var qv=Re('<div class="my-4 flex w-28 flex-col items-center justify-center border-0"><button class="flex h-16 w-16 flex-col items-center justify-center text-gray-300"><!></button> <div class="font-josefin flex border-none text-xl text-gray-300"><!></div></div>');function Li(a,r){let n=he(r,"onclick",3,()=>{});var s=qv(),o=W(s);o.__click=function(...b){n()?.apply(this,b)};var u=W(o);zn(u,()=>r.icon),j(o);var l=Z(o,2),h=W(l);zn(h,()=>r.description),j(l),j(s),ie(a,s)}Tn(["click"]);function Yv(a,r){console.log("close"),r(!1)}var Xv=Re(`<div><div class="font-josefin flex h-[500px] flex-col"><div class="w-full text-center text-3xl font-semibold text-white">Impressum</div> <hr class="my-4 h-px border-0 bg-gray-200 dark:bg-gray-700"/> <div class="grow overflow-auto border-blue-500 px-4"><div><article class="prose mx-1"><h2>Kontakt</h2> <address>Prof. Dr. Dirk W. Hoffmann<br/> Hochschule Karlsruhe<br/> MoltkestraÃe 30<br/> D - 76133 Karlsruhe<br/> Germany</address> <h2>Datenschutz</h2> <p>Durch die Nutzung unserer Website erklÃ¤ren Sie sich mit der Erhebung, Verarbeitung und
						Nutzung von Daten gemÃ¤Ã der nachfolgenden Beschreibung einverstanden. Unsere Website
						kann grundsÃ¤tzlich ohne Registrierung besucht werden. Dabei werden Daten wie
						beispielsweise aufgerufene Seiten bzw. Namen der abgerufenen Datei, Datum und Uhrzeit zu
						statistischen Zwecken auf dem Server gespeichert, ohne dass diese Daten unmittelbar auf
						Ihre Person bezogen werden. Personenbezogene Daten, insbesondere Name, Adresse oder
						E-Mail-Adresse werden soweit mÃ¶glich auf freiwilliger Basis erhoben. Ohne Ihre
						Einwilligung erfolgt keine Weitergabe der Daten an Dritte.</p> <h2>Hosting</h2> <p>Diese Webseite wird gehostet auf Servern der Github Inc., 88 Colin P Kelly Jr. Street,
						San Francisco, CA 94107, USA. GitHub kann beim Aufruf dieser Webseiten technische
						Informationen inklusive ihrer IP Adresse aufzeichnen. Weitere Informationen zum Umgang
						mit Nutzerdaten finden Sie in der <a href="https://help.github.com/articles/github-privacy-policy">DatenschutzerklÃ¤rung von GitHub</a>.</p></article></div></div> <hr class="my-4 h-px border-0 bg-gray-200 dark:bg-gray-700"/> <div class="flex w-full justify-center"><button class="btn btn-primary">Close</button></div></div></div>`);function Qv(a,r){ot(r,!0);let n=he(r,"show",15,!1);var s=Xv(),o=W(s),u=Z(W(o),4),l=W(u),h=W(l);j(l),j(u);var b=Z(u,4),m=W(b);m.__click=[Yv,n],j(b),j(o),j(s),Pt(1,h,()=>kt),Pt(3,s,()=>kt),ie(a,s),it()}Tn(["click"]);var Zv=Qt('<path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path>');function Jv(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 448 512"},()=>n,{children:(s,o)=>{var u=Zv();ie(s,u)},$$slots:{default:!0}}))}var eg=Qt('<path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path>');function tg(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 448 512"},()=>n,{children:(s,o)=>{var u=eg();ie(s,u)},$$slots:{default:!0}}))}var ng=Qt('<path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path>');function ff(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 512 512"},()=>n,{children:(s,o)=>{var u=ng();ie(s,u)},$$slots:{default:!0}}))}var rg=Re('<input type="file" class="hidden"/>');function df(a,r){ot(r,!1);let n=yt(),s,o;function u(){return f(n).click(),new Promise(function(m,_){s=m,o=_})}async function l(){if(f(n).files&&f(n).files.length>0){let m=f(n).files[0],_=await h(m);s(_)}else o();ji(n,f(n).value="")}function h(m){return new Promise(async(_,R)=>{try{let p=new FileReader;p.onload=function(A){_(new Uint8Array(this.result))},p.readAsArrayBuffer(m)}catch(p){R(p)}})}Ut();var b=rg();return Kt(b,m=>Ve(n,m),()=>f(n)),rn("change",b,l),ie(a,b),Ye(r,"open",u),it({open:u})}function ag(a,r,n){console.log("close"),r(!1),fe(Ht,dt.none)}var og=(a,r)=>Ve(r,0),ig=(a,r)=>Ve(r,1),sg=(a,r,n)=>r(a,f(n).crc32),ug=(a,r,n)=>r(a,f(n).crc32),cg=Re('<tr><td><div class="flex h-[5.5rem] space-x-4"><div><img class="h-full w-full" alt="Rom Chip Icon"/></div> <div><div class="font-bold"> </div> <div class="opacity-60"> </div> <div class="opacity-60"> </div></div> <div><button class="btn btn-primary btn-outline btn-sm">Install</button></div> <div><button class="btn btn-primary btn-outline btn-sm w-8 p-1.5"><!></button></div></div></td></tr>'),lg=(a,r)=>r(),fg=Re(`<table class="table-compact table-zebra table w-full"><tbody><!><tr><td><div class="flex h-[5.5rem] space-x-4"><div><p>Use drag-and-drop or press the 'Plus' button</p> <p>to add additional ROMs.</p></div> <div><button class="btn btn-primary btn-outline btn-sm w-8 p-1.5"><!></button></div></div></td></tr></tbody></table>`),dg=Re(`<article><h3>Kickstart</h3> <p>To run the emulator, a Kickstart ROM is required. The original Amiga ROMs are the
					intellectual property of Cloantoâ¢ and cannot be freely distributed. If you own a legal
					Kickstart ROM, you can add the ROM image to vAmiga.net via drag and drop. Once a supported
					image is detected, it becomes available in the ROM database. The ROMs are stored in the
					browser's memory and will remain available in future sessions.</p> <h3>Encrypted ROMs</h3> <p>If you have purchased an older version of Amiga Foreverâ¢, you may possess encrypted ROM
					files. These are accompanied by a <code>.key</code> file required to decrypt the ROM. Encrypted
					ROMs are not yet supported by the emulator. They must be decrypted manually before they can
					be used in vAmiga.net.</p> <h3>AROS</h3> <p>If you donât have access to an original Kickstart ROM, you may use the Amiga Research
					Operating System ROM (AROS) instead. AROS is an open-source Kickstart replacement and can
					be freely redistributed. However, not all Amiga programs are compatible with AROS, so we
					strongly recommend using vAmiga.net with original ROMs whenever possible.</p></article>`),vg=Re('<!> <div><div class="mx-2 flex items-center space-x-2"><div><button>Installed Roms</button> <button>Legal Information</button> <div class="flex grow items-center justify-end"><button class="btn btn-sm btn-primary flex w-8 p-0"><!></button></div></div></div> <div><!></div></div>',1);function gg(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(Wi,"$memory",n),u=()=>O(Pa,"$initialized",n),l=()=>O(Ht,"$layer",n),h=()=>O(Mn,"$amiga",n),b=()=>O(Mr,"$proxy",n);let m=Ct(Ho([]));Fs(()=>On.roms.orderBy("title").toArray()).subscribe(ce=>{Ve(m,ce,!0)});let R=he(r,"show",15,!0);async function p(ce,Ee=null,Ie=0){let Ne=o().analyzeRom(ce,ce.length);if(Ne.crc32)try{const ue=Ne.title,Pe=await On.roms.where("crc32").equals(Ne.crc32).first();if(Pe){console.log(`ROM with CRC32 ${Ne.crc32} already exists: ${Pe.title}`);return}const He=await On.roms.add({crc32:Ne.crc32,title:Ne.title,version:Ne.version,released:Ne.released,model:Ne.model,isAros:Ne.isAros,isDiag:Ne.isDiag,isCommodore:Ne.isCommodore,isHyperion:Ne.isHyperion,isPatched:Ne.isPatched,isUnknown:Ne.isUnknown,rom:ce,ext:Ee,extStart:Ie});console.log(`${ue} successfully added with id ${He}`)}catch(ue){console.warn("Failed to add Kickstart",ue)}}async function A(){try{let ce=await fetch("roms/aros-svn55696-rom.bin"),Ee=await ce.arrayBuffer(),Ie=new Uint8Array(Ee);ce=await fetch("roms/aros-svn55696-ext.bin"),Ee=await ce.arrayBuffer();let Ne=new Uint8Array(Ee);await p(Ie,Ne),ce=await fetch("roms/diagrom-121.bin"),Ee=await ce.arrayBuffer();let ue=new Uint8Array(Ee);await p(ue)}catch{console.error("Cannot install default Roms")}}function y(ce){return ce.isUnknown?"CRC "+ce.crc32.toString():ce.version}Po(()=>{u()&&A()});function w(ce){return ce.isHyperion?"rom-hyperion.png":ce.isAros?"rom-aros.png":ce.isDiag?"rom-diag.png":ce.isCommodore?"rom-commodore.png":"rom-unknown.png"}async function x(ce,Ee){try{await On.roms.delete(Ee),console.log("Kickstart {id} deleted")}catch(Ie){console.log("Failed to delete Kickstart",Ie)}}async function M(ce,Ee){console.log("Installing ROM ",Ee,"..."),h().powerOff(),await b().installRom(Ee),h().hardReset(),h().run()}const P="";let T=Ct(0),v=Ct(void 0);function I(){f(v)?.open().then(function(ce){console.log("open file dialog",ce),b().addRom(ce)},function(ce){console.log("error",ce)})}var G=vg(),D=ze(G);Kt(df(D,{}),ce=>Ve(v,ce,!0),()=>f(v));var U=Z(D,2);We(U,1," flex h-full flex-col border-green-500");var Q=W(U),ae=W(Q);We(ae,1," tabs tabs-box flex grow");var z=W(ae);let X;z.__click=[og,T];var J=Z(z,2);let ye;J.__click=[ig,T];var de=Z(J,2),xe=W(de);xe.__click=[ag,R,l];var we=W(xe);ff(we,{}),j(xe),j(de),j(ae),j(Q);var ve=Z(Q,2);We(ve,1,"mt-4 flex overflow-auto  text-base-content p-1");var Te=W(ve);{var ne=ce=>{var Ee=fg(),Ie=W(Ee);We(Ie,1,_r(P));var Ne=W(Ie);{var ue=Me=>{var et=St(),gt=ze(et);na(gt,17,()=>f(m),ta,(Et,nt)=>{var pe=cg();We(pe,1,"h-8  border-0 border-purple-400");var ge=W(pe),ht=W(ge),Zt=W(ht);We(Zt,1," h-full w-[4.5rem]");var ln=W(Zt);j(Zt);var $n=Z(Zt,2);We($n,1," flex h-full grow flex-col overflow-hidden");var fn=W($n),dn=W(fn,!0);j(fn);var Wt=Z(fn,2),Hn=W(Wt,!0);j(Wt);var Rn=Z(Wt,2),Zn=W(Rn,!0);j(Rn),j($n);var tn=Z($n,2);We(tn,1," flex h-full items-center");var vn=W(tn);vn.__click=[sg,M,nt],j(tn);var xn=Z(tn,2);We(xn,1," flex h-full items-center");var gn=W(xn);gn.__click=[ug,x,nt];var Jt=W(gn);tg(Jt,{}),j(gn),j(xn),j(ht),j(ge),j(pe),lt((Ke,Gt)=>{Nt(ln,"src",Ke),Rt(dn,f(nt).title),Rt(Hn,Gt),Rt(Zn,f(nt).model)},[()=>"icons/"+w(f(nt)),()=>y(f(nt))]),ie(Et,pe)}),ie(Me,et)};Xe(Ne,Me=>{f(m)&&Me(ue)})}var Pe=Z(Ne);We(Pe,1,"h-8  border-0 border-purple-400");var He=W(Pe),me=W(He),q=W(me);We(q,1," text-base-content font-josefin flex h-full grow flex-col justify-center overflow-hidden border-0 text-center text-base");var ct=Z(q,2);We(ct,1," flex h-full items-center");var De=W(ct);De.__click=[lg,I];var be=W(De);Jv(be,{}),j(De),j(ct),j(me),j(He),j(Pe),j(Ie),j(Ee),Pt(1,Ee,()=>kt),ie(ce,Ee)},se=ce=>{var Ee=dg();We(Ee,1,"prose mx-1 "),Pt(1,Ee,()=>kt),ie(ce,Ee)};Xe(Te,ce=>{f(T)===0?ce(ne):ce(se,!1)})}j(ve),j(U),lt((ce,Ee)=>{X=We(z,1,"tab",null,X,ce),ye=We(J,1,"tab",null,ye,Ee)},[()=>({"tab-active":f(T)===0}),()=>({"tab-active":f(T)===1})]),ie(a,G),it(),s()}Tn(["click"]);function ra(...a){return a.filter(Boolean).join(" ")}function hg(a,r){if(a){const n=Object.keys(a);for(let s=0;s<n.length;s++){const o=n[s];if(o!=="__proto__"&&r(a[o],o)===!1)break}}return a}function fl(a){const r=a.Components.Elements?.list.children;return r&&Array.prototype.slice.call(r)||[]}function Io(a){return a!==null&&typeof a=="object"}function ss(a,r){if(Array.isArray(a)&&Array.isArray(r))return a.length===r.length&&!a.some((n,s)=>!ss(n,r[s]));if(Io(a)&&Io(r)){const n=Object.keys(a),s=Object.keys(r);return n.length===s.length&&!n.some(o=>!Object.prototype.hasOwnProperty.call(r,o)||!ss(a[o],r[o]))}return a===r}function mg(a,r){return a.length===r.length&&!a.some((n,s)=>n!==r[s])}function wo(a,r){const n=a;return hg(r,(s,o)=>{Array.isArray(s)?n[o]=s.slice():Io(s)?n[o]=wo(Io(n[o])?n[o]:{},s):n[o]=s}),n}function pg(a,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,s.key,s)}}function _g(a,r,n){return r&&pg(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var dl="(prefers-reduced-motion: reduce)",Xr=1,yg=2,aa=3,ua=4,Fa=5,Eo=6,$o=7,bg={CREATED:Xr,MOUNTED:yg,IDLE:aa,MOVING:ua,SCROLLING:Fa,DRAGGING:Eo,DESTROYED:$o};function ir(a){a.length=0}function wr(a,r,n){return Array.prototype.slice.call(a,r,n)}function bt(a){return a.bind.apply(a,[null].concat(wr(arguments,1)))}var vf=setTimeout,us=function(){};function vl(a){return requestAnimationFrame(a)}function Go(a,r){return typeof r===a}function Oa(a){return!Bs(a)&&Go("object",a)}var Ks=Array.isArray,gf=bt(Go,"function"),yr=bt(Go,"string"),Ka=bt(Go,"undefined");function Bs(a){return a===null}function hf(a){try{return a instanceof(a.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function Ba(a){return Ks(a)?a:[a]}function In(a,r){Ba(a).forEach(r)}function Vs(a,r){return a.indexOf(r)>-1}function So(a,r){return a.push.apply(a,Ba(r)),a}function rr(a,r,n){a&&In(r,function(s){s&&a.classList[n?"add":"remove"](s)})}function qn(a,r){rr(a,yr(r)?r.split(" "):r,!0)}function Va(a,r){In(r,a.appendChild.bind(a))}function Hs(a,r){In(a,function(n){var s=(r||n).parentNode;s&&s.insertBefore(n,r)})}function Ca(a,r){return hf(a)&&(a.msMatchesSelector||a.matches).call(a,r)}function mf(a,r){var n=a?wr(a.children):[];return r?n.filter(function(s){return Ca(s,r)}):n}function Ha(a,r){return r?mf(a,r)[0]:a.firstElementChild}var Ma=Object.keys;function Cr(a,r,n){return a&&(n?Ma(a).reverse():Ma(a)).forEach(function(s){s!=="__proto__"&&r(a[s],s)}),a}function Ia(a){return wr(arguments,1).forEach(function(r){Cr(r,function(n,s){a[s]=r[s]})}),a}function pr(a){return wr(arguments,1).forEach(function(r){Cr(r,function(n,s){Ks(n)?a[s]=n.slice():Oa(n)?a[s]=pr({},Oa(a[s])?a[s]:{},n):a[s]=n})}),a}function gl(a,r){In(r||Ma(a),function(n){delete a[n]})}function Yn(a,r){In(a,function(n){In(r,function(s){n&&n.removeAttribute(s)})})}function Je(a,r,n){Oa(r)?Cr(r,function(s,o){Je(a,o,s)}):In(a,function(s){Bs(n)||n===""?Yn(s,r):s.setAttribute(r,String(n))})}function Zr(a,r,n){var s=document.createElement(a);return r&&(yr(r)?qn(s,r):Je(s,r)),n&&Va(n,s),s}function Fn(a,r,n){if(Ka(n))return getComputedStyle(a)[r];Bs(n)||(a.style[r]=""+n)}function $a(a,r){Fn(a,"display",r)}function pf(a){a.setActive&&a.setActive()||a.focus({preventScroll:!0})}function Bn(a,r){return a.getAttribute(r)}function hl(a,r){return a&&a.classList.contains(r)}function Dn(a){return a.getBoundingClientRect()}function Ir(a){In(a,function(r){r&&r.parentNode&&r.parentNode.removeChild(r)})}function _f(a){return Ha(new DOMParser().parseFromString(a,"text/html").body)}function tr(a,r){a.preventDefault(),r&&(a.stopPropagation(),a.stopImmediatePropagation())}function yf(a,r){return a&&a.querySelector(r)}function Gs(a,r){return r?wr(a.querySelectorAll(r)):[]}function ar(a,r){rr(a,r,!1)}function cs(a){return a.timeStamp}function Or(a){return yr(a)?a:a?a+"px":""}var Ga="splide",js="data-"+Ga;function Ra(a,r){if(!a)throw new Error("["+Ga+"] "+(r||""))}var br=Math.min,No=Math.max,Lo=Math.floor,Na=Math.ceil,an=Math.abs;function bf(a,r,n){return an(a-r)<n}function Ao(a,r,n,s){var o=br(r,n),u=No(r,n);return s?o<a&&a<u:o<=a&&a<=u}function Wr(a,r,n){var s=br(r,n),o=No(r,n);return br(No(s,a),o)}function ls(a){return+(a>0)-+(a<0)}function fs(a,r){return In(r,function(n){a=a.replace("%s",""+n)}),a}function Ws(a){return a<10?"0"+a:""+a}var ml={};function wg(a){return""+a+Ws(ml[a]=(ml[a]||0)+1)}function wf(){var a=[];function r(l,h,b,m){o(l,h,function(_,R,p){var A="addEventListener"in _,y=A?_.removeEventListener.bind(_,R,b,m):_.removeListener.bind(_,b);A?_.addEventListener(R,b,m):_.addListener(b),a.push([_,R,p,b,y])})}function n(l,h,b){o(l,h,function(m,_,R){a=a.filter(function(p){return p[0]===m&&p[1]===_&&p[2]===R&&(!b||p[3]===b)?(p[4](),!1):!0})})}function s(l,h,b){var m,_=!0;return typeof CustomEvent=="function"?m=new CustomEvent(h,{bubbles:_,detail:b}):(m=document.createEvent("CustomEvent"),m.initCustomEvent(h,_,!1,b)),l.dispatchEvent(m),m}function o(l,h,b){In(l,function(m){m&&In(h,function(_){_.split(" ").forEach(function(R){var p=R.split(".");b(m,p[0],p[1])})})})}function u(){a.forEach(function(l){l[4]()}),ir(a)}return{bind:r,unbind:n,dispatch:s,destroy:u}}var Er="mounted",pl="ready",Xn="move",$r="moved",Uo="click",ds="active",vs="inactive",gs="visible",hs="hidden",$t="refresh",Xt="updated",oa="resize",jo="resized",Ef="drag",Sf="dragging",Af="dragged",Wo="scroll",Ur="scrolled",Eg="overflow",zs="destroy",ms="arrows:mounted",ps="arrows:updated",_s="pagination:mounted",ys="pagination:updated",Fo="navigation:mounted",qs="autoplay:play",bs="autoplay:playing",Ys="autoplay:pause",Ko="lazyload:loaded",Tf="sk",Rf="sh",Bo="ei";function At(a){var r=a?a.event.bus:document.createDocumentFragment(),n=wf();function s(u,l){n.bind(r,Ba(u).join(" "),function(h){l.apply(l,Ks(h.detail)?h.detail:[])})}function o(u){n.dispatch(r,u,wr(arguments,1))}return a&&a.event.on(zs,n.destroy),Ia(n,{bus:r,on:s,off:bt(n.unbind,r),emit:o})}function zo(a,r,n,s){var o=Date.now,u,l=0,h,b=!0,m=0;function _(){if(!b){if(l=a?br((o()-u)/a,1):1,n&&n(l),l>=1&&(r(),u=o(),s&&++m>=s))return p();h=vl(_)}}function R(M){M||y(),u=o()-(M?l*a:0),b=!1,h=vl(_)}function p(){b=!0}function A(){u=o(),l=0,n&&n(l)}function y(){h&&cancelAnimationFrame(h),l=0,h=0,b=!0}function w(M){a=M}function x(){return b}return{start:R,rewind:A,pause:p,cancel:y,set:w,isPaused:x}}function Sg(a){var r=a;function n(o){r=o}function s(o){return Vs(Ba(o),r)}return{set:n,is:s}}function Ag(a,r){var n=zo(0,a,null,1);return function(){n.isPaused()&&n.start()}}function Tg(a,r,n){var s=a.state,o=n.breakpoints||{},u=n.reducedMotion||{},l=wf(),h=[];function b(){var y=n.mediaQuery==="min";Ma(o).sort(function(w,x){return y?+w-+x:+x-+w}).forEach(function(w){_(o[w],"("+(y?"min":"max")+"-width:"+w+"px)")}),_(u,dl),R()}function m(y){y&&l.destroy()}function _(y,w){var x=matchMedia(w);l.bind(x,"change",R),h.push([y,x])}function R(){var y=s.is($o),w=n.direction,x=h.reduce(function(M,P){return pr(M,P[1].matches?P[0]:{})},{});gl(n),A(x),n.destroy?a.destroy(n.destroy==="completely"):y?(m(!0),a.mount()):w!==n.direction&&a.refresh()}function p(y){matchMedia(dl).matches&&(y?pr(n,u):gl(n,Ma(u)))}function A(y,w,x){pr(n,y),w&&pr(Object.getPrototypeOf(n),y),(x||!s.is(Xr))&&a.emit(Xt,n)}return{setup:b,destroy:m,reduce:p,set:A}}var qo="Arrow",Yo=qo+"Left",Xo=qo+"Right",xf=qo+"Up",Pf=qo+"Down",_l="rtl",Qo="ttb",Ui={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[xf,Xo],ArrowRight:[Pf,Yo]};function Rg(a,r,n){function s(u,l,h){h=h||n.direction;var b=h===_l&&!l?1:h===Qo?0:-1;return Ui[u]&&Ui[u][b]||u.replace(/width|left|right/i,function(m,_){var R=Ui[m.toLowerCase()][b]||m;return _>0?R.charAt(0).toUpperCase()+R.slice(1):R})}function o(u){return u*(n.direction===_l?1:-1)}return{resolve:s,orient:o}}var or="role",Jr="tabindex",xg="disabled",Vn="aria-",ja=Vn+"controls",kf=Vn+"current",yl=Vn+"selected",Cn=Vn+"label",Xs=Vn+"labelledby",Df=Vn+"hidden",Qs=Vn+"orientation",La=Vn+"roledescription",bl=Vn+"live",wl=Vn+"busy",El=Vn+"atomic",Zs=[or,Jr,xg,ja,kf,Cn,Xs,Df,Qs,La],Qn=Ga+"__",Sr="is-",Fi=Ga,Sl=Qn+"track",Pg=Qn+"list",Zo=Qn+"slide",Of=Zo+"--clone",kg=Zo+"__container",Js=Qn+"arrows",Jo=Qn+"arrow",Cf=Jo+"--prev",Mf=Jo+"--next",ei=Qn+"pagination",If=ei+"__page",Dg=Qn+"progress",Og=Dg+"__bar",Cg=Qn+"toggle",Mg=Qn+"spinner",Ig=Qn+"sr",$g=Sr+"initialized",Nr=Sr+"active",$f=Sr+"prev",Nf=Sr+"next",ws=Sr+"visible",Es=Sr+"loading",Lf=Sr+"focus-in",Uf=Sr+"overflow",Ng=[Nr,ws,$f,Nf,Es,Lf,Uf],Lg={slide:Zo,clone:Of,arrows:Js,arrow:Jo,prev:Cf,next:Mf,pagination:ei,page:If,spinner:Mg};function Ug(a,r){if(gf(a.closest))return a.closest(r);for(var n=a;n&&n.nodeType===1&&!Ca(n,r);)n=n.parentElement;return n}var Fg=5,Al=200,Ff="touchstart mousedown",Ki="touchmove mousemove",Bi="touchend touchcancel mouseup click";function Kg(a,r,n){var s=At(a),o=s.on,u=s.bind,l=a.root,h=n.i18n,b={},m=[],_=[],R=[],p,A,y;function w(){T(),v(),P()}function x(){o($t,M),o($t,w),o(Xt,P),u(document,Ff+" keydown",function(D){y=D.type==="keydown"},{capture:!0}),u(l,"focusin",function(){rr(l,Lf,!!y)})}function M(D){var U=Zs.concat("style");ir(m),ar(l,_),ar(p,R),Yn([p,A],U),Yn(l,D?U:["style",La])}function P(){ar(l,_),ar(p,R),_=G(Fi),R=G(Sl),qn(l,_),qn(p,R),Je(l,Cn,n.label),Je(l,Xs,n.labelledby)}function T(){p=I("."+Sl),A=Ha(p,"."+Pg),Ra(p&&A,"A track/list element is missing."),So(m,mf(A,"."+Zo+":not(."+Of+")")),Cr({arrows:Js,pagination:ei,prev:Cf,next:Mf,bar:Og,toggle:Cg},function(D,U){b[U]=I("."+D)}),Ia(b,{root:l,track:p,list:A,slides:m})}function v(){var D=l.id||wg(Ga),U=n.role;l.id=D,p.id=p.id||D+"-track",A.id=A.id||D+"-list",!Bn(l,or)&&l.tagName!=="SECTION"&&U&&Je(l,or,U),Je(l,La,h.carousel),Je(A,or,"presentation")}function I(D){var U=yf(l,D);return U&&Ug(U,"."+Fi)===l?U:void 0}function G(D){return[D+"--"+n.type,D+"--"+n.direction,n.drag&&D+"--draggable",n.isNavigation&&D+"--nav",D===Fi&&Nr]}return Ia(b,{setup:w,mount:x,destroy:M})}var ia="slide",ca="loop",Wa="fade";function Bg(a,r,n,s){var o=At(a),u=o.on,l=o.emit,h=o.bind,b=a.Components,m=a.root,_=a.options,R=_.isNavigation,p=_.updateOnMove,A=_.i18n,y=_.pagination,w=_.slideFocus,x=b.Direction.resolve,M=Bn(s,"style"),P=Bn(s,Cn),T=n>-1,v=Ha(s,"."+kg),I;function G(){T||(s.id=m.id+"-slide"+Ws(r+1),Je(s,or,y?"tabpanel":"group"),Je(s,La,A.slide),Je(s,Cn,P||fs(A.slideLabel,[r+1,a.length]))),D()}function D(){h(s,"click",bt(l,Uo,ve)),h(s,"keydown",bt(l,Tf,ve)),u([$r,Rf,Ur],z),u(Fo,Q),p&&u(Xn,ae)}function U(){I=!0,o.destroy(),ar(s,Ng),Yn(s,Zs),Je(s,"style",M),Je(s,Cn,P||"")}function Q(){var Te=a.splides.map(function(ne){var se=ne.splide.Components.Slides.getAt(r);return se?se.slide.id:""}).join(" ");Je(s,Cn,fs(A.slideX,(T?n:r)+1)),Je(s,ja,Te),Je(s,or,w?"button":""),w&&Yn(s,La)}function ae(){I||z()}function z(){if(!I){var Te=a.index;X(),J(),rr(s,$f,r===Te-1),rr(s,Nf,r===Te+1)}}function X(){var Te=de();Te!==hl(s,Nr)&&(rr(s,Nr,Te),Je(s,kf,R&&Te||""),l(Te?ds:vs,ve))}function J(){var Te=xe(),ne=!Te&&(!de()||T);if(a.state.is([ua,Fa])||Je(s,Df,ne||""),Je(Gs(s,_.focusableNodes||""),Jr,ne?-1:""),w&&Je(s,Jr,ne?-1:0),Te!==hl(s,ws)&&(rr(s,ws,Te),l(Te?gs:hs,ve)),!Te&&document.activeElement===s){var se=b.Slides.getAt(a.index);se&&pf(se.slide)}}function ye(Te,ne,se){Fn(se&&v||s,Te,ne)}function de(){var Te=a.index;return Te===r||_.cloneStatus&&Te===n}function xe(){if(a.is(Wa))return de();var Te=Dn(b.Elements.track),ne=Dn(s),se=x("left",!0),ce=x("right",!0);return Lo(Te[se])<=Na(ne[se])&&Lo(ne[ce])<=Na(Te[ce])}function we(Te,ne){var se=an(Te-r);return!T&&(_.rewind||a.is(ca))&&(se=br(se,a.length-se)),se<=ne}var ve={index:r,slideIndex:n,slide:s,container:v,isClone:T,mount:G,destroy:U,update:z,style:ye,isWithin:we};return ve}function Vg(a,r,n){var s=At(a),o=s.on,u=s.emit,l=s.bind,h=r.Elements,b=h.slides,m=h.list,_=[];function R(){p(),o($t,A),o($t,p)}function p(){b.forEach(function(z,X){w(z,X,-1)})}function A(){I(function(z){z.destroy()}),ir(_)}function y(){I(function(z){z.update()})}function w(z,X,J){var ye=Bg(a,X,J,z);ye.mount(),_.push(ye),_.sort(function(de,xe){return de.index-xe.index})}function x(z){return z?G(function(X){return!X.isClone}):_}function M(z){var X=r.Controller,J=X.toIndex(z),ye=X.hasFocus()?1:n.perPage;return G(function(de){return Ao(de.index,J,J+ye-1)})}function P(z){return G(z)[0]}function T(z,X){In(z,function(J){if(yr(J)&&(J=_f(J)),hf(J)){var ye=b[X];ye?Hs(J,ye):Va(m,J),qn(J,n.classes.slide),U(J,bt(u,oa))}}),u($t)}function v(z){Ir(G(z).map(function(X){return X.slide})),u($t)}function I(z,X){x(X).forEach(z)}function G(z){return _.filter(gf(z)?z:function(X){return yr(z)?Ca(X.slide,z):Vs(Ba(z),X.index)})}function D(z,X,J){I(function(ye){ye.style(z,X,J)})}function U(z,X){var J=Gs(z,"img"),ye=J.length;ye?J.forEach(function(de){l(de,"load error",function(){--ye||X()})}):X()}function Q(z){return z?b.length:_.length}function ae(){return _.length>n.perPage}return{mount:R,destroy:A,update:y,register:w,get:x,getIn:M,getAt:P,add:T,remove:v,forEach:I,filter:G,style:D,getLength:Q,isEnough:ae}}function Hg(a,r,n){var s=At(a),o=s.on,u=s.bind,l=s.emit,h=r.Slides,b=r.Direction.resolve,m=r.Elements,_=m.root,R=m.track,p=m.list,A=h.getAt,y=h.style,w,x,M;function P(){T(),u(window,"resize load",Ag(bt(l,oa))),o([Xt,$t],T),o(oa,v)}function T(){w=n.direction===Qo,Fn(_,"maxWidth",Or(n.width)),Fn(R,b("paddingLeft"),I(!1)),Fn(R,b("paddingRight"),I(!0)),v(!0)}function v(ve){var Te=Dn(_);(ve||x.width!==Te.width||x.height!==Te.height)&&(Fn(R,"height",G()),y(b("marginRight"),Or(n.gap)),y("width",U()),y("height",Q(),!0),x=Te,l(jo),M!==(M=we())&&(rr(_,Uf,M),l(Eg,M)))}function I(ve){var Te=n.padding,ne=b(ve?"right":"left");return Te&&Or(Te[ne]||(Oa(Te)?0:Te))||"0px"}function G(){var ve="";return w&&(ve=D(),Ra(ve,"height or heightRatio is missing."),ve="calc("+ve+" - "+I(!1)+" - "+I(!0)+")"),ve}function D(){return Or(n.height||Dn(p).width*n.heightRatio)}function U(){return n.autoWidth?null:Or(n.fixedWidth)||(w?"":ae())}function Q(){return Or(n.fixedHeight)||(w?n.autoHeight?null:ae():D())}function ae(){var ve=Or(n.gap);return"calc((100%"+(ve&&" + "+ve)+")/"+(n.perPage||1)+(ve&&" - "+ve)+")"}function z(){return Dn(p)[b("width")]}function X(ve,Te){var ne=A(ve||0);return ne?Dn(ne.slide)[b("width")]+(Te?0:de()):0}function J(ve,Te){var ne=A(ve);if(ne){var se=Dn(ne.slide)[b("right")],ce=Dn(p)[b("left")];return an(se-ce)+(Te?0:de())}return 0}function ye(ve){return J(a.length-1)-J(0)+X(0,ve)}function de(){var ve=A(0);return ve&&parseFloat(Fn(ve.slide,b("marginRight")))||0}function xe(ve){return parseFloat(Fn(R,b("padding"+(ve?"Right":"Left"))))||0}function we(){return a.is(Wa)||ye(!0)>z()}return{mount:P,resize:v,listSize:z,slideSize:X,sliderSize:ye,totalSize:J,getPadding:xe,isOverflow:we}}var Gg=2;function jg(a,r,n){var s=At(a),o=s.on,u=r.Elements,l=r.Slides,h=r.Direction.resolve,b=[],m;function _(){o($t,R),o([Xt,oa],A),(m=x())&&(y(m),r.Layout.resize(!0))}function R(){p(),_()}function p(){Ir(b),ir(b),s.destroy()}function A(){var M=x();m!==M&&(m<M||!M)&&s.emit($t)}function y(M){var P=l.get().slice(),T=P.length;if(T){for(;P.length<M;)So(P,P);So(P.slice(-M),P.slice(0,M)).forEach(function(v,I){var G=I<M,D=w(v.slide,I);G?Hs(D,P[0].slide):Va(u.list,D),So(b,D),l.register(D,I-M+(G?0:T),v.index)})}}function w(M,P){var T=M.cloneNode(!0);return qn(T,n.classes.clone),T.id=a.root.id+"-clone"+Ws(P+1),T}function x(){var M=n.clones;if(!a.is(ca))M=0;else if(Ka(M)){var P=n[h("fixedWidth")]&&r.Layout.slideSize(0),T=P&&Na(Dn(u.track)[h("width")]/P);M=T||n[h("autoWidth")]&&a.length||n.perPage*Gg}return M}return{mount:_,destroy:p}}function Wg(a,r,n){var s=At(a),o=s.on,u=s.emit,l=a.state.set,h=r.Layout,b=h.slideSize,m=h.getPadding,_=h.totalSize,R=h.listSize,p=h.sliderSize,A=r.Direction,y=A.resolve,w=A.orient,x=r.Elements,M=x.list,P=x.track,T;function v(){T=r.Transition,o([Er,jo,Xt,$t],I)}function I(){r.Controller.isBusy()||(r.Scroll.cancel(),D(a.index),r.Slides.update())}function G(ne,se,ce,Ee){ne!==se&&ve(ne>ce)&&(z(),U(ae(ye(),ne>ce),!0)),l(ua),u(Xn,se,ce,ne),T.start(se,function(){l(aa),u($r,se,ce,ne),Ee&&Ee()})}function D(ne){U(J(ne,!0))}function U(ne,se){if(!a.is(Wa)){var ce=se?ne:Q(ne);Fn(M,"transform","translate"+y("X")+"("+ce+"px)"),ne!==ce&&u(Rf)}}function Q(ne){if(a.is(ca)){var se=X(ne),ce=se>r.Controller.getEnd(),Ee=se<0;(Ee||ce)&&(ne=ae(ne,ce))}return ne}function ae(ne,se){var ce=ne-we(se),Ee=p();return ne-=w(Ee*(Na(an(ce)/Ee)||1))*(se?1:-1),ne}function z(){U(ye(),!0),T.cancel()}function X(ne){for(var se=r.Slides.get(),ce=0,Ee=1/0,Ie=0;Ie<se.length;Ie++){var Ne=se[Ie].index,ue=an(J(Ne,!0)-ne);if(ue<=Ee)Ee=ue,ce=Ne;else break}return ce}function J(ne,se){var ce=w(_(ne-1)-xe(ne));return se?de(ce):ce}function ye(){var ne=y("left");return Dn(M)[ne]-Dn(P)[ne]+w(m(!1))}function de(ne){return n.trimSpace&&a.is(ia)&&(ne=Wr(ne,0,w(p(!0)-R()))),ne}function xe(ne){var se=n.focus;return se==="center"?(R()-b(ne,!0))/2:+se*b(ne)||0}function we(ne){return J(ne?r.Controller.getEnd():0,!!n.trimSpace)}function ve(ne){var se=w(ae(ye(),ne));return ne?se>=0:se<=M[y("scrollWidth")]-Dn(P)[y("width")]}function Te(ne,se){se=Ka(se)?ye():se;var ce=ne!==!0&&w(se)<w(we(!1)),Ee=ne!==!1&&w(se)>w(we(!0));return ce||Ee}return{mount:v,move:G,jump:D,translate:U,shift:ae,cancel:z,toIndex:X,toPosition:J,getPosition:ye,getLimit:we,exceededLimit:Te,reposition:I}}function zg(a,r,n){var s=At(a),o=s.on,u=s.emit,l=r.Move,h=l.getPosition,b=l.getLimit,m=l.toPosition,_=r.Slides,R=_.isEnough,p=_.getLength,A=n.omitEnd,y=a.is(ca),w=a.is(ia),x=bt(ye,!1),M=bt(ye,!0),P=n.start||0,T,v=P,I,G,D;function U(){Q(),o([Xt,$t,Bo],Q),o(jo,ae)}function Q(){I=p(!0),G=n.perMove,D=n.perPage,T=ve();var ue=Wr(P,0,A?T:I-1);ue!==P&&(P=ue,l.reposition())}function ae(){T!==ve()&&u(Bo)}function z(ue,Pe,He){if(!Ne()){var me=J(ue),q=we(me);q>-1&&(Pe||q!==P)&&(ce(q),l.move(me,q,v,He))}}function X(ue,Pe,He,me){r.Scroll.scroll(ue,Pe,He,function(){var q=we(l.toIndex(h()));ce(A?br(q,T):q),me&&me()})}function J(ue){var Pe=P;if(yr(ue)){var He=ue.match(/([+\-<>])(\d+)?/)||[],me=He[1],q=He[2];me==="+"||me==="-"?Pe=de(P+ +(""+me+(+q||1)),P):me===">"?Pe=q?Te(+q):x(!0):me==="<"&&(Pe=M(!0))}else Pe=y?ue:Wr(ue,0,T);return Pe}function ye(ue,Pe){var He=G||(Ie()?1:D),me=de(P+He*(ue?-1:1),P,!(G||Ie()));return me===-1&&w&&!bf(h(),b(!ue),1)?ue?0:T:Pe?me:we(me)}function de(ue,Pe,He){if(R()||Ie()){var me=xe(ue);me!==ue&&(Pe=ue,ue=me,He=!1),ue<0||ue>T?!G&&(Ao(0,ue,Pe,!0)||Ao(T,Pe,ue,!0))?ue=Te(ne(ue)):y?ue=He?ue<0?-(I%D||D):I:ue:n.rewind?ue=ue<0?T:0:ue=-1:He&&ue!==Pe&&(ue=Te(ne(Pe)+(ue<Pe?-1:1)))}else ue=-1;return ue}function xe(ue){if(w&&n.trimSpace==="move"&&ue!==P)for(var Pe=h();Pe===m(ue,!0)&&Ao(ue,0,a.length-1,!n.rewind);)ue<P?--ue:++ue;return ue}function we(ue){return y?(ue+I)%I||0:ue}function ve(){for(var ue=I-(Ie()||y&&G?1:D);A&&ue-- >0;)if(m(I-1,!0)!==m(ue,!0)){ue++;break}return Wr(ue,0,I-1)}function Te(ue){return Wr(Ie()?ue:D*ue,0,T)}function ne(ue){return Ie()?br(ue,T):Lo((ue>=T?I-1:ue)/D)}function se(ue){var Pe=l.toIndex(ue);return w?Wr(Pe,0,T):Pe}function ce(ue){ue!==P&&(v=P,P=ue)}function Ee(ue){return ue?v:P}function Ie(){return!Ka(n.focus)||n.isNavigation}function Ne(){return a.state.is([ua,Fa])&&!!n.waitForTransition}return{mount:U,go:z,scroll:X,getNext:x,getPrev:M,getAdjacent:ye,getEnd:ve,setIndex:ce,getIndex:Ee,toIndex:Te,toPage:ne,toDest:se,hasFocus:Ie,isBusy:Ne}}var qg="http://www.w3.org/2000/svg",Yg="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",po=40;function Xg(a,r,n){var s=At(a),o=s.on,u=s.bind,l=s.emit,h=n.classes,b=n.i18n,m=r.Elements,_=r.Controller,R=m.arrows,p=m.track,A=R,y=m.prev,w=m.next,x,M,P={};function T(){I(),o(Xt,v)}function v(){G(),T()}function I(){var X=n.arrows;X&&!(y&&w)&&Q(),y&&w&&(Ia(P,{prev:y,next:w}),$a(A,X?"":"none"),qn(A,M=Js+"--"+n.direction),X&&(D(),z(),Je([y,w],ja,p.id),l(ms,y,w)))}function G(){s.destroy(),ar(A,M),x?(Ir(R?[y,w]:A),y=w=null):Yn([y,w],Zs)}function D(){o([Er,$r,$t,Ur,Bo],z),u(w,"click",bt(U,">")),u(y,"click",bt(U,"<"))}function U(X){_.go(X,!0)}function Q(){A=R||Zr("div",h.arrows),y=ae(!0),w=ae(!1),x=!0,Va(A,[y,w]),!R&&Hs(A,p)}function ae(X){var J='<button class="'+h.arrow+" "+(X?h.prev:h.next)+'" type="button"><svg xmlns="'+qg+'" viewBox="0 0 '+po+" "+po+'" width="'+po+'" height="'+po+'" focusable="false"><path d="'+(n.arrowPath||Yg)+'" />';return _f(J)}function z(){if(y&&w){var X=a.index,J=_.getPrev(),ye=_.getNext(),de=J>-1&&X<J?b.last:b.prev,xe=ye>-1&&X>ye?b.first:b.next;y.disabled=J<0,w.disabled=ye<0,Je(y,Cn,de),Je(w,Cn,xe),l(ps,y,w,J,ye)}}return{arrows:P,mount:T,destroy:G,update:z}}var Qg=js+"-interval";function Zg(a,r,n){var s=At(a),o=s.on,u=s.bind,l=s.emit,h=zo(n.interval,a.go.bind(a,">"),D),b=h.isPaused,m=r.Elements,_=r.Elements,R=_.root,p=_.toggle,A=n.autoplay,y,w,x=A==="pause";function M(){A&&(P(),p&&Je(p,ja,m.track.id),x||T(),G())}function P(){n.pauseOnHover&&u(R,"mouseenter mouseleave",function(Q){y=Q.type==="mouseenter",I()}),n.pauseOnFocus&&u(R,"focusin focusout",function(Q){w=Q.type==="focusin",I()}),p&&u(p,"click",function(){x?T():v(!0)}),o([Xn,Wo,$t],h.rewind),o(Xn,U)}function T(){b()&&r.Slides.isEnough()&&(h.start(!n.resetProgress),w=y=x=!1,G(),l(qs))}function v(Q){Q===void 0&&(Q=!0),x=!!Q,G(),b()||(h.pause(),l(Ys))}function I(){x||(y||w?v(!1):T())}function G(){p&&(rr(p,Nr,!x),Je(p,Cn,n.i18n[x?"play":"pause"]))}function D(Q){var ae=m.bar;ae&&Fn(ae,"width",Q*100+"%"),l(bs,Q)}function U(Q){var ae=r.Slides.getAt(Q);h.set(ae&&+Bn(ae.slide,Qg)||n.interval)}return{mount:M,destroy:h.cancel,play:T,pause:v,isPaused:b}}function Jg(a,r,n){var s=At(a),o=s.on;function u(){n.cover&&(o(Ko,bt(h,!0)),o([Er,Xt,$t],bt(l,!0)))}function l(b){r.Slides.forEach(function(m){var _=Ha(m.container||m.slide,"img");_&&_.src&&h(b,_,m)})}function h(b,m,_){_.style("background",b?'center/cover no-repeat url("'+m.src+'")':"",!0),$a(m,b?"none":"")}return{mount:u,destroy:bt(l,!1)}}var eh=10,th=600,nh=.6,rh=1.5,ah=800;function oh(a,r,n){var s=At(a),o=s.on,u=s.emit,l=a.state.set,h=r.Move,b=h.getPosition,m=h.getLimit,_=h.exceededLimit,R=h.translate,p=a.is(ia),A,y,w=1;function x(){o(Xn,v),o([Xt,$t],I)}function M(D,U,Q,ae,z){var X=b();if(v(),Q&&(!p||!_())){var J=r.Layout.sliderSize(),ye=ls(D)*J*Lo(an(D)/J)||0;D=h.toPosition(r.Controller.toDest(D%J))+ye}var de=bf(X,D,1);w=1,U=de?0:U||No(an(D-X)/rh,ah),y=ae,A=zo(U,P,bt(T,X,D,z),1),l(Fa),u(Wo),A.start()}function P(){l(aa),y&&y(),u(Ur)}function T(D,U,Q,ae){var z=b(),X=D+(U-D)*G(ae),J=(X-z)*w;R(z+J),p&&!Q&&_()&&(w*=nh,an(J)<eh&&M(m(_(!0)),th,!1,y,!0))}function v(){A&&A.cancel()}function I(){A&&!A.isPaused()&&(v(),P())}function G(D){var U=n.easingFunc;return U?U(D):1-Math.pow(1-D,4)}return{mount:x,destroy:v,scroll:M,cancel:I}}var zr={passive:!1,capture:!0};function ih(a,r,n){var s=At(a),o=s.on,u=s.emit,l=s.bind,h=s.unbind,b=a.state,m=r.Move,_=r.Scroll,R=r.Controller,p=r.Elements.track,A=r.Media.reduce,y=r.Direction,w=y.resolve,x=y.orient,M=m.getPosition,P=m.exceededLimit,T,v,I,G,D,U=!1,Q,ae,z;function X(){l(p,Ki,us,zr),l(p,Bi,us,zr),l(p,Ff,ye,zr),l(p,"click",we,{capture:!0}),l(p,"dragstart",tr),o([Er,Xt],J)}function J(){var be=n.drag;De(!be),G=be==="free"}function ye(be){if(Q=!1,!ae){var Me=q(be);me(be.target)&&(Me||!be.button)&&(R.isBusy()?tr(be,!0):(z=Me?p:window,D=b.is([ua,Fa]),I=null,l(z,Ki,de,zr),l(z,Bi,xe,zr),m.cancel(),_.cancel(),ve(be)))}}function de(be){if(b.is(Eo)||(b.set(Eo),u(Ef)),be.cancelable)if(D){m.translate(T+He(Ie(be)));var Me=Ne(be)>Al,et=U!==(U=P());(Me||et)&&ve(be),Q=!0,u(Sf),tr(be)}else se(be)&&(D=ne(be),tr(be))}function xe(be){b.is(Eo)&&(b.set(aa),u(Af)),D&&(Te(be),tr(be)),h(z,Ki,de),h(z,Bi,xe),D=!1}function we(be){!ae&&Q&&tr(be,!0)}function ve(be){I=v,v=be,T=M()}function Te(be){var Me=ce(be),et=Ee(Me),gt=n.rewind&&n.rewindByDrag;A(!1),G?R.scroll(et,0,n.snap):a.is(Wa)?R.go(x(ls(Me))<0?gt?"<":"-":gt?">":"+"):a.is(ia)&&U&&gt?R.go(P(!0)?">":"<"):R.go(R.toDest(et),!0),A(!0)}function ne(be){var Me=n.dragMinThreshold,et=Oa(Me),gt=et&&Me.mouse||0,Et=(et?Me.touch:+Me)||10;return an(Ie(be))>(q(be)?Et:gt)}function se(be){return an(Ie(be))>an(Ie(be,!0))}function ce(be){if(a.is(ca)||!U){var Me=Ne(be);if(Me&&Me<Al)return Ie(be)/Me}return 0}function Ee(be){return M()+ls(be)*br(an(be)*(n.flickPower||600),G?1/0:r.Layout.listSize()*(n.flickMaxPages||1))}function Ie(be,Me){return Pe(be,Me)-Pe(ue(be),Me)}function Ne(be){return cs(be)-cs(ue(be))}function ue(be){return v===be&&I||v}function Pe(be,Me){return(q(be)?be.changedTouches[0]:be)["page"+w(Me?"Y":"X")]}function He(be){return be/(U&&a.is(ia)?Fg:1)}function me(be){var Me=n.noDrag;return!Ca(be,"."+If+", ."+Jo)&&(!Me||!Ca(be,Me))}function q(be){return typeof TouchEvent<"u"&&be instanceof TouchEvent}function ct(){return D}function De(be){ae=be}return{mount:X,disable:De,isDragging:ct}}var sh={Spacebar:" ",Right:Xo,Left:Yo,Up:xf,Down:Pf};function eu(a){return a=yr(a)?a:a.key,sh[a]||a}var Tl="keydown";function uh(a,r,n){var s=At(a),o=s.on,u=s.bind,l=s.unbind,h=a.root,b=r.Direction.resolve,m,_;function R(){p(),o(Xt,A),o(Xt,p),o(Xn,w)}function p(){var M=n.keyboard;M&&(m=M==="global"?window:h,u(m,Tl,x))}function A(){l(m,Tl)}function y(M){_=M}function w(){var M=_;_=!0,vf(function(){_=M})}function x(M){if(!_){var P=eu(M);P===b(Yo)?a.go("<"):P===b(Xo)&&a.go(">")}}return{mount:R,destroy:A,disable:y}}var xa=js+"-lazy",To=xa+"-srcset",ch="["+xa+"], ["+To+"]";function lh(a,r,n){var s=At(a),o=s.on,u=s.off,l=s.bind,h=s.emit,b=n.lazyLoad==="sequential",m=[$r,Ur],_=[];function R(){n.lazyLoad&&(p(),o($t,p))}function p(){ir(_),A(),b?M():(u(m),o(m,y),y())}function A(){r.Slides.forEach(function(P){Gs(P.slide,ch).forEach(function(T){var v=Bn(T,xa),I=Bn(T,To);if(v!==T.src||I!==T.srcset){var G=n.classes.spinner,D=T.parentElement,U=Ha(D,"."+G)||Zr("span",G,D);_.push([T,P,U]),T.src||$a(T,"none")}})})}function y(){_=_.filter(function(P){var T=n.perPage*((n.preloadPages||1)+1)-1;return P[1].isWithin(a.index,T)?w(P):!0}),_.length||u(m)}function w(P){var T=P[0];qn(P[1].slide,Es),l(T,"load error",bt(x,P)),Je(T,"src",Bn(T,xa)),Je(T,"srcset",Bn(T,To)),Yn(T,xa),Yn(T,To)}function x(P,T){var v=P[0],I=P[1];ar(I.slide,Es),T.type!=="error"&&(Ir(P[2]),$a(v,""),h(Ko,v,I),h(oa)),b&&M()}function M(){_.length&&w(_.shift())}return{mount:R,destroy:bt(ir,_),check:y}}function fh(a,r,n){var s=At(a),o=s.on,u=s.emit,l=s.bind,h=r.Slides,b=r.Elements,m=r.Controller,_=m.hasFocus,R=m.getIndex,p=m.go,A=r.Direction.resolve,y=b.pagination,w=[],x,M;function P(){T(),o([Xt,$t,Bo],P);var ae=n.pagination;y&&$a(y,ae?"":"none"),ae&&(o([Xn,Wo,Ur],Q),v(),Q(),u(_s,{list:x,items:w},U(a.index)))}function T(){x&&(Ir(y?wr(x.children):x),ar(x,M),ir(w),x=null),s.destroy()}function v(){var ae=a.length,z=n.classes,X=n.i18n,J=n.perPage,ye=_()?m.getEnd()+1:Na(ae/J);x=y||Zr("ul",z.pagination,b.track.parentElement),qn(x,M=ei+"--"+D()),Je(x,or,"tablist"),Je(x,Cn,X.select),Je(x,Qs,D()===Qo?"vertical":"");for(var de=0;de<ye;de++){var xe=Zr("li",null,x),we=Zr("button",{class:z.page,type:"button"},xe),ve=h.getIn(de).map(function(ne){return ne.slide.id}),Te=!_()&&J>1?X.pageX:X.slideX;l(we,"click",bt(I,de)),n.paginationKeyboard&&l(we,"keydown",bt(G,de)),Je(xe,or,"presentation"),Je(we,or,"tab"),Je(we,ja,ve.join(" ")),Je(we,Cn,fs(Te,de+1)),Je(we,Jr,-1),w.push({li:xe,button:we,page:de})}}function I(ae){p(">"+ae,!0)}function G(ae,z){var X=w.length,J=eu(z),ye=D(),de=-1;J===A(Xo,!1,ye)?de=++ae%X:J===A(Yo,!1,ye)?de=(--ae+X)%X:J==="Home"?de=0:J==="End"&&(de=X-1);var xe=w[de];xe&&(pf(xe.button),p(">"+de),tr(z,!0))}function D(){return n.paginationDirection||n.direction}function U(ae){return w[m.toPage(ae)]}function Q(){var ae=U(R(!0)),z=U(R());if(ae){var X=ae.button;ar(X,Nr),Yn(X,yl),Je(X,Jr,-1)}if(z){var J=z.button;qn(J,Nr),Je(J,yl,!0),Je(J,Jr,"")}u(ys,{list:x,items:w},ae,z)}return{items:w,mount:P,destroy:T,getAt:U,update:Q}}var dh=[" ","Enter"];function vh(a,r,n){var s=n.isNavigation,o=n.slideFocus,u=[];function l(){a.splides.forEach(function(y){y.isParent||(m(a,y.splide),m(y.splide,a))}),s&&_()}function h(){u.forEach(function(y){y.destroy()}),ir(u)}function b(){h(),l()}function m(y,w){var x=At(y);x.on(Xn,function(M,P,T){w.go(w.is(ca)?T:M)}),u.push(x)}function _(){var y=At(a),w=y.on;w(Uo,p),w(Tf,A),w([Er,Xt],R),u.push(y),y.emit(Fo,a.splides)}function R(){Je(r.Elements.list,Qs,n.direction===Qo?"vertical":"")}function p(y){a.go(y.index)}function A(y,w){Vs(dh,eu(w))&&(p(y),tr(w))}return{setup:bt(r.Media.set,{slideFocus:Ka(o)?s:o},!0),mount:l,destroy:h,remount:b}}function gh(a,r,n){var s=At(a),o=s.bind,u=0;function l(){n.wheel&&o(r.Elements.track,"wheel",h,zr)}function h(m){if(m.cancelable){var _=m.deltaY,R=_<0,p=cs(m),A=n.wheelMinThreshold||0,y=n.wheelSleep||0;an(_)>A&&p-u>y&&(a.go(R?"<":">"),u=p),b(R)&&tr(m)}}function b(m){return!n.releaseWheel||a.state.is(ua)||r.Controller.getAdjacent(m)!==-1}return{mount:l}}var hh=90;function mh(a,r,n){var s=At(a),o=s.on,u=r.Elements.track,l=n.live&&!n.isNavigation,h=Zr("span",Ig),b=zo(hh,bt(_,!1));function m(){l&&(p(!r.Autoplay.isPaused()),Je(u,El,!0),h.textContent="â¦",o(qs,bt(p,!0)),o(Ys,bt(p,!1)),o([$r,Ur],bt(_,!0)))}function _(A){Je(u,wl,A),A?(Va(u,h),b.start()):(Ir(h),b.cancel())}function R(){Yn(u,[bl,El,wl]),Ir(h)}function p(A){l&&Je(u,bl,A?"off":"polite")}return{mount:m,disable:p,destroy:R}}var ph=Object.freeze({__proto__:null,Media:Tg,Direction:Rg,Elements:Kg,Slides:Vg,Layout:Hg,Clones:jg,Move:Wg,Controller:zg,Arrows:Xg,Autoplay:Zg,Cover:Jg,Scroll:oh,Drag:ih,Keyboard:uh,LazyLoad:lh,Pagination:fh,Sync:vh,Wheel:gh,Live:mh}),_h={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},yh={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Lg,i18n:_h,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function bh(a,r,n){var s=r.Slides;function o(){At(a).on([Er,$t],u)}function u(){s.forEach(function(h){h.style("transform","translateX(-"+100*h.index+"%)")})}function l(h,b){s.style("transition","opacity "+n.speed+"ms "+n.easing),vf(b)}return{mount:o,start:l,cancel:us}}function wh(a,r,n){var s=r.Move,o=r.Controller,u=r.Scroll,l=r.Elements.list,h=bt(Fn,l,"transition"),b;function m(){At(a).bind(l,"transitionend",function(A){A.target===l&&b&&(R(),b())})}function _(A,y){var w=s.toPosition(A,!0),x=s.getPosition(),M=p(A);an(w-x)>=1&&M>=1?n.useScroll?u.scroll(w,M,!1,y):(h("transform "+M+"ms "+n.easing),s.translate(w,!0),b=y):(s.jump(A),y())}function R(){h(""),u.cancel()}function p(A){var y=n.rewindSpeed;if(a.is(ia)&&y){var w=o.getIndex(!0),x=o.getEnd();if(w===0&&A>=x||w>=x&&A===0)return y}return n.speed}return{mount:m,start:_,cancel:R}}var Eh=function(){function a(n,s){this.event=At(),this.Components={},this.state=Sg(Xr),this.splides=[],this._o={},this._E={};var o=yr(n)?yf(document,n):n;Ra(o,o+" is invalid."),this.root=o,s=pr({label:Bn(o,Cn)||"",labelledby:Bn(o,Xs)||""},yh,a.defaults,s||{});try{pr(s,JSON.parse(Bn(o,js)))}catch{Ra(!1,"Invalid JSON")}this._o=Object.create(pr({},s))}var r=a.prototype;return r.mount=function(s,o){var u=this,l=this.state,h=this.Components;Ra(l.is([Xr,$o]),"Already mounted!"),l.set(Xr),this._C=h,this._T=o||this._T||(this.is(Wa)?bh:wh),this._E=s||this._E;var b=Ia({},ph,this._E,{Transition:this._T});return Cr(b,function(m,_){var R=m(u,h,u._o);h[_]=R,R.setup&&R.setup()}),Cr(h,function(m){m.mount&&m.mount()}),this.emit(Er),qn(this.root,$g),l.set(aa),this.emit(pl),this},r.sync=function(s){return this.splides.push({splide:s}),s.splides.push({splide:this,isParent:!0}),this.state.is(aa)&&(this._C.Sync.remount(),s.Components.Sync.remount()),this},r.go=function(s){return this._C.Controller.go(s),this},r.on=function(s,o){return this.event.on(s,o),this},r.off=function(s){return this.event.off(s),this},r.emit=function(s){var o;return(o=this.event).emit.apply(o,[s].concat(wr(arguments,1))),this},r.add=function(s,o){return this._C.Slides.add(s,o),this},r.remove=function(s){return this._C.Slides.remove(s),this},r.is=function(s){return this._o.type===s},r.refresh=function(){return this.emit($t),this},r.destroy=function(s){s===void 0&&(s=!0);var o=this.event,u=this.state;return u.is(Xr)?At(this).on(pl,this.destroy.bind(this,s)):(Cr(this._C,function(l){l.destroy&&l.destroy(s)},!0),o.emit(zs),o.destroy(),s&&ir(this.splides),u.set($o)),this},_g(a,[{key:"options",get:function(){return this._o},set:function(s){this._C.Media.set(s,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),a}(),tu=Eh;tu.defaults={};tu.STATES=bg;const Sh=[Er,$t,oa,jo,Ef,Sf,Af,Wo,Ur,zs,qs,Ys];function Ah(a,r){const n=(s,o={})=>{r(Th(s),{splide:a,...o})};a.on(Uo,(s,o)=>{n(Uo,{Slide:s,e:o})}),a.on(Xn,(s,o,u)=>{n(Xn,{index:s,prev:o,dest:u})}),a.on($r,(s,o,u)=>{n($r,{index:s,prev:o,dest:u})}),a.on(ds,s=>{n(ds,{Slide:s})}),a.on(vs,s=>{n(vs,{Slide:s})}),a.on(gs,s=>{n(gs,{Slide:s})}),a.on(hs,s=>{n(hs,{Slide:s})}),a.on(Xt,s=>{n(Xt,s)}),a.on(ms,(s,o)=>{n(ms,{prev:s,next:o})}),a.on(ps,(s,o)=>{n(ps,{prev:s,next:o})}),a.on(_s,(s,o)=>{n(_s,{data:s,item:o})}),a.on(ys,(s,o,u)=>{n(ys,{data:s,prev:o,curr:u})}),a.on(Fo,s=>{n(Fo,{splides:s})}),a.on(bs,s=>{n(bs,{rate:s})}),a.on(Ko,(s,o)=>{n(Ko,{img:s,Slide:o})}),Sh.forEach(s=>{a.on(s,()=>{n(s)})})}function Th(a){return a.split(":").map((r,n)=>n>0?r.charAt(0).toUpperCase()+r.slice(1):r).join("").replace("Lazyload","LazyLoad")}var Rh=Re("<div><!></div>");function xh(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]),s=Lt(n,["go","sync","class","options","splide","extensions","transition","hasTrack"]);ot(r,!1);let o=he(r,"class",12,void 0),u=he(r,"options",28,()=>({})),l=he(r,"splide",12,void 0),h=he(r,"extensions",12,void 0),b=he(r,"transition",12,void 0),m=he(r,"hasTrack",12,!0);const _=Wd();let R=yt(),p,A=yt(wo({},u()));sr(()=>(l(new tu(f(R),u())),Ah(l(),_),l().mount(h(),b()),p=fl(l()),()=>l().destroy())),zd(()=>{if(l()){const v=fl(l());mg(p,v)||(l().refresh(),p=v.slice())}});function y(v){l()?.go(v)}function w(v){l()?.sync(v)}An(()=>(Kn(l()),f(A),Kn(u()),wo),()=>{l()&&!ss(f(A),u())&&(l(l().options=u(),!0),Ve(A,wo({},f(A))))}),Lr(),Ut();var x=Rh();Ls(x,v=>({class:v,...s}),[()=>(Kn(ra),Kn(o()),Tt(()=>ra("splide",o())))]);var M=W(x);{var P=v=>{kh(v,{children:(I,G)=>{var D=St(),U=ze(D);Da(U,r,"default",{}),ie(I,D)},$$slots:{default:!0}})},T=v=>{var I=St(),G=ze(I);Da(G,r,"default",{}),ie(v,I)};Xe(M,v=>{m()?v(P):v(T,!1)})}return j(x),Kt(x,v=>Ve(R,v),()=>f(R)),ie(a,x),Ye(r,"go",y),Ye(r,"sync",w),it({go:y,sync:w,get class(){return o()},set class(v){o(v),Gr()},get options(){return u()},set options(v){u(v),Gr()},get splide(){return l()},set splide(v){l(v),Gr()},get extensions(){return h()},set extensions(v){h(v),Gr()},get transition(){return b()},set transition(v){b(v),Gr()},get hasTrack(){return m()},set hasTrack(v){m(v),Gr()}})}var Ph=Re('<div><ul class="splide__list"><!></ul></div>');function kh(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]),s=Lt(n,["class"]);ot(r,!1);let o=he(r,"class",8,void 0);Ut();var u=Ph();Ls(u,b=>({class:b,...s}),[()=>(Kn(ra),Kn(o()),Tt(()=>ra("splide__track",o())))]);var l=W(u),h=W(l);Da(h,r,"default",{}),j(l),j(u),ie(a,u),it()}var Dh=Re("<li><!></li>");function Oh(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]),s=Lt(n,["class"]);ot(r,!1);let o=he(r,"class",8,void 0);Ut();var u=Dh();Ls(u,h=>({class:h,...s}),[()=>(Kn(ra),Kn(o()),Tt(()=>ra("splide__slide",o())))]);var l=W(u);Da(l,r,"default",{}),j(u),ie(a,u),it()}var Ch=Qt('<path d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path>');function Mh(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 448 512"},()=>n,{children:(s,o)=>{var u=Ch();ie(s,u)},$$slots:{default:!0}}))}var Ih=Re('<div class="absolute top-0 left-0 flex h-full w-full items-center justify-center"><div class="h-12 w-12 text-gray-200 opacity-70"><!></div></div>'),$h=Re('<div><div class="relative p-1"><img/> <!></div> <div class="p-1"><div class="font-josefin justify-center text-xl"><div> </div></div></div></div>');function Nh(a,r){ot(r,!0);let n=he(r,"title",7,"???"),s=he(r,"src",7,""),o=he(r,"active",7,!1),u=he(r,"locked",7,!1),l=tt(()=>o()?"text-white":"text-gray-400"),h=tt(()=>o()?"border-white border-2":"border-gray-700 border-2"),b=tt(()=>o()?"brightness-125":""),m=tt(()=>(o(),"opacity-100"));var _=$h(),R=W(_),p=W(R),A=Z(p,2);{var y=T=>{var v=Ih(),I=W(v),G=W(I);Mh(G,{}),j(I),j(v),ie(T,v)};Xe(A,T=>{u()&&T(y)})}j(R);var w=Z(R,2),x=W(w),M=W(x),P=W(M,!0);return j(M),j(x),j(w),j(_),lt(()=>{We(p,1,`rounded border-solid ${f(h)??""} ${f(b)??""} ${f(m)??""}`),Nt(p,"src",s()),Nt(p,"alt",n()),We(M,1,`flex justify-center ${f(l)??""}`),Rt(P,n())}),ie(a,_),it({get title(){return n()},set title(T){n(T)},get src(){return s()},set src(T){s(T)},get active(){return o()},set active(T){o(T)},get locked(){return u()},set locked(T){u(T)}})}var Lh=Re('<div class="p-4"><!> <div class="py-2"></div></div>');function Vi(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(Ds,"$kickstarts",n);let u=he(r,"category",3,""),l=he(r,"items",19,()=>[]),h=he(r,"select",3,()=>{});const b={type:"slide",perPage:5,perMove:1,pagination:!1,gap:"1rem"};let m=Ho([]);function _(y){console.log("setActive: "+u()),m.forEach(w=>{console.log(w.title),w.active=w.title==y})}var R=Lh(),p=W(R);xh(p,{get options(){return b},$$events:{click:y=>{y&&(console.log("Carousel clicked",y,l()[y.detail.Slide.index]),h()(l()[y.detail.Slide.index]))}},children:(y,w)=>{var x=St(),M=ze(x);na(M,17,l,ta,(P,T,v)=>{Oh(P,{children:(I,G)=>{const D=tt(()=>!o().map(U=>U.crc32).some(U=>f(T).roms.includes(U)));Kt(Nh(I,{get src(){return`footage/${f(T).url??""}-small.jpg`},get title(){return f(T).title},get locked(){return f(D)}}),(U,Q)=>m[Q]=U,U=>m?.[U],()=>[v])},$$slots:{default:!0}})}),ie(y,x)},$$slots:{default:!0}}),Ps(2),j(R),Pt(1,R,()=>kt),ie(a,R);var A=it({setActive:_});return s(),A}const Hi=1,Uh=313,Fh=Uh,Kh=227,qr=313,Yr=912,Bh=18,Vh=26,Rl={Escape:69,F1:80,F2:81,F3:82,F4:83,F5:84,F6:85,F7:86,F8:87,F9:88,F10:89,F11:102,F12:103,Backquote:0,Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6,Digit7:7,Digit8:8,Digit9:9,Digit0:10,Minus:11,Equal:12,Backspace:65,Tab:66,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Backslash:13,CapsLock:98,KeyA:32,KeyS:33,KeyD:34,KeyF:35,KeyG:36,KeyH:37,KeyJ:38,KeyK:39,KeyL:40,Semicolon:41,Quote:42,Enter:68,ShiftLeft:96,KeyZ:49,KeyX:50,KeyC:51,KeyV:52,KeyB:53,KeyN:54,KeyM:55,Comma:56,Period:57,Slash:58,ShiftRight:97,ControlLeft:99,AltLeft:100,MetaLeft:102,Space:64,AltRight:101,MetaRight:103,ControlRight:99,Delete:70,End:95,PageDown:69,ArrowUp:76,ArrowDown:77,ArrowRight:78,ArrowLeft:79,NumpadDivide:92,NumpadMultiply:93,NumpadSubtract:74,Numpad7:61,Numpad8:62,Numpad9:63,NumpadAdd:94,Numpad4:45,Numpad5:46,Numpad6:47,Numpad1:29,Numpad2:30,Numpad3:31,NumpadEnter:67,Numpad0:15,NumpadDecimal:60},ft={Aros:1062194186,Kick12:2798523958,Kick13:3304125791,DiagROM:2231503309},Kf=[{url:"batmanrises",title:"Batman Rises",subtitle:"The Batman Group",description:"Batman Rises is a demo released in December 2022 at the Posadas Party Autumn Edition. It quickly gained public attention and is widely regarded as one of the finest demos ever created for the Commodore Amiga.",adf:["BatmanRises1.adf","BatmanRises2.adf"],memory:[1024,512,0],roms:[ft.Aros],warp:Ft.never},{url:"stateart",title:"State of the Art",subtitle:"Spaceballs",description:"This demo was released in December 1992 and took 1st place in the Amiga Demo Competition at The Party 1992.",adf:["StateArt.adf"],memory:[512,512,0],roms:[ft.Aros],warp:Ft.never},{url:"rinkadink",title:"Rink a Dink - Redux",subtitle:"Lemon",description:"This demo was released by Lemon at Revision 2013 and has gained widespread popularity over time. We have used it extensively since the early days of vAmiga to test and validate the emulator.",adf:["RinkADink.adf"],memory:[512,512,0],roms:[ft.Aros],warp:Ft.never},{url:"desertdreams",title:"Desert Dreams",subtitle:"Kefrens",description:"This demo was released in April 1993 and won 1st place in the Amiga Demo Competition at The Gathering 1993.",adf:["DesertDream1.adf","DesertDream2.adf"],memory:[1024,512,0],roms:[ft.Aros],warp:Ft.never},{url:"inebriation",title:"Absolute Inebriation",subtitle:"Virtual Dreams & Fairlight",description:"This demo was released in December 1992 as the debut production of Virtual Dreams, a Finnish-based Amiga demo group. The group later rose to prominence during their time as the demo division of Fairlight.",adf:["AbsoluteInebriation1.adf"],memory:[512,512,0],roms:[ft.Aros],warp:Ft.never},{url:"eon",title:"Eon",subtitle:"The Black Lotus",description:"This demo is widely regarded as one of the finest ever created for the Commodore Amiga. It showcases the machineâs full potential through masterful use of its hardware capabilities.",adf:["Eon1.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"3ddemo",title:"3D Demo II",subtitle:"Anarchy",description:"This demo was released in December 1992 and placed 2nd in the Amiga Demo Competition at The Party 1992.",adf:["3Ddemo2.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"hamazing",title:"HAMazing",subtitle:"Desire",description:"This demo won the 16-bit demo competition at SIGGRAPH Asia 2023 and was nominated for Outstanding Technical Achievement at The Meteoriks 2024. It showcases the impressive HAM (Hold-And-Modify) graphics capabilities of the Amiga.",adf:["Hamazing.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"sushiboyz",title:"Sushi Boyz",subtitle:"Ghostown",description:"This demo was released in April 2015 and won 1st place in the Amiga Demo Competition at Revision 2015.",adf:["Sushiboyz.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"kyrios",title:"Mental Scrollover",subtitle:"Kyrios",description:"This demo was released in August 1990. Iâve used it many times to test vAmiga and have grown fond of it over time.",adf:["Kyrios.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never}],Hh=[{url:"traprunner",title:"Trap Runner",subtitle:"Night Owl Design",description:"Trap Runner is a classic platform game with a few clever twists. Navigate mind traps, dodge obstacles, and battle monsters as you collect items to boost your score, gain extra lives, or complete special missions. The game runs on any OCS/ECS Amiga with at least 1MB of RAM, starting from Kickstart 1.2.",adf:["TrapRunner.adf"],memory:[512,512,8192],roms:[ft.Aros],warp:Ft.never},{url:"celtic",title:"Celtic Heart",subtitle:"Night Owl Design",description:"This game was developed in early 2019, largely built on the Trap Runner engine. Set in a medieval world, you play as the Celtic knight Eric on a quest to save the kingdom from an evil force.",adf:["CelticHeart.adf"],memory:[512,512,8192],roms:[ft.Aros],warp:Ft.never},{url:"paccer",title:"Paccer",subtitle:"Dirk W. Hoffmann",description:"This game is a Pac-Man clone originally released on Fish Disk 223. I developed it myself many years ago on my Amiga 500 using the Aztec C compiler and DPaint. Unfortunately, I lost the source code when my parents cleaned out their attic, but fortunately, the game has survived and is still available on the Internet.",adf:["Paccer.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"china",title:"China Challenge II",subtitle:"Dirk W. Hoffmann",description:"This game is a Mahjong clone that I developed myself many years ago. The original version was released on Fish Disk 312, and this slightly improved sequel was later published on Fish Disk 444.",adf:["ChinaChallengeII.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"defender",title:"Defender of the Crown",subtitle:"Cinemaware",description:"Defender of the Crown is a strategy game designed by Kellyn Beck and was Cinemawareâs very first release. Originally launched for the Commodore Amiga in 1986, it set a new benchmark for graphic quality in home computer games.",adf:["DefenderOfTheCrown1.adf","DefenderOfTheCrown2.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never}],Gh=[{url:"sysinfo",title:"Sysinfo 4.4",subtitle:"Nic Wilson, Tobias Geijersson",description:"Sysinfo is a shareware program written entirely in Assembly for Motorola 68k-equipped Amiga computers to benchmark system performance. It displays the version of system software in ROM, the hardware present, and the current operating mode of the hardware.",adf:["SysInfo.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"testkit",title:"Amiga Test Kit",subtitle:"Keir Fraser",description:"The Amiga Test Kit is a software-based tool designed to test and diagnose various components of a Commodore Amiga.",adf:["AmigaTestKit.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Ft.never},{url:"diagrom",title:"Amiga DiagROM",subtitle:"John Hertell",description:"The Amiga Diagnostic ROM is a hardware-based testing solution for Amiga computers. Installed as a replacement for the Kickstart ROM on the motherboard, it boots the system into a diagnostic menu upon power-up. The ROM provides a range of test routines to check various hardware components.",adf:[],memory:[512,512,0],roms:[ft.DiagROM],warp:Ft.never}];function jh(a,r){r(!1)}async function xl(a,r,n){r().runShowcase(n.selected)}var Wh=Re('<div class="text-error font-josefin">Please install Kickstart 1.2 or Kickstart 1.3 to unlock this title.</div> <div class="mt-4 relative"><button class="btn btn-disabled bg-gray-500 text-white opacity-20">Start</button></div>',1),zh=Re('<div class="mt-4 relative"><button class="btn btn-primary">Start</button></div>'),qh=Re('<div><div class="absolute top-0 left-0 px-0 py-0 w-full h-full"><img class="w-full h-full object-cover brightness-90 blur-[2px]" alt="Bg"/></div> <div class="absolute top-0 left-0 px-0 py-0 w-full h-full"><img class="w-full h-full object-cover brightness-90 blur-[2px]" src="footage/blank-large.png" alt="Alt"/></div> <div class="relative border-0"><div class="absolute top-0 right-0"><button class="btn btn-sm btn-square flex p-0 border-2 border-white"><!></button></div> <div><div class="font-sofia-extra text-8xl"> </div> <div class="flex pb-10 items-center"><div class="text-xs p-0.5 mr-2 border-2 h-fit rounded-md font-azaret">PAL</div> <div class="font-sofia-semi text-2xl flex"> </div></div> <div class="flex font-josefin text-lg w-2/3 pb-5"> </div></div> <!></div></div>');function Yh(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(Ds,"$kickstarts",n),u=()=>O(Mr,"$proxy",n);let l=he(r,"show",15,!0),h=tt(()=>"footage/"+(r.selected?.url??"")+"-large.jpg"),b=tt(()=>o().map(A=>A.crc32).some(A=>r.selected?.roms.includes(A))),m=tt(()=>!f(b));var _=St(),R=ze(_);{var p=A=>{var y=qh(),w=W(y),x=W(w);j(w);var M=Z(w,4),P=W(M),T=W(P);T.__click=[jh,l];var v=W(T);ff(v,{}),j(T),j(P);var I=Z(P,2),G=W(I),D=W(G,!0);j(G);var U=Z(G,2),Q=Z(W(U),2),ae=W(Q,!0);j(Q),j(U);var z=Z(U,2),X=W(z,!0);j(z),j(I);var J=Z(I,2);{var ye=xe=>{var we=Wh(),ve=Z(ze(we),2),Te=W(ve);Te.__click=[xl,u,r],j(ve),ie(xe,we)},de=xe=>{var we=zh(),ve=W(we);ve.__click=[xl,u,r],j(we),ie(xe,we)};Xe(J,xe=>{f(m)?xe(ye):xe(de,!1)})}j(M),j(y),lt(()=>{Nt(x,"src",f(h)),Rt(D,r.selected.title),Rt(ae,r.selected.subtitle),Rt(X,r.selected.description)}),Pt(1,y,()=>kt),ie(A,y)};Xe(R,A=>{r.selected&&A(p)})}ie(a,_),it(),s()}Tn(["click"]);var Xh=Re('<dialog><div class="modal-box w-11/12 max-w-6xl bg-black"><!></div></dialog> <div class="grow h-full flex flex-col justify-center overflow-auto"><div class="relative h-full"><div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Demos</div> <!> <div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Games</div> <!> <div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Tools</div> <!></div></div>',1);function Qh(a){let r=yt(null),n=yt(!1),s=yt(),o=yt(),u=yt();function l(P){f(s).setActive(P.title),Ve(r,P)}function h(P){l(P),Ve(n,!0)}var b=Xh(),m=ze(b);let _;var R=W(m),p=W(R);Yh(p,{get selected(){return f(r)},get show(){return f(n)},set show(P){Ve(n,P)},$$legacy:!0}),j(R),j(m);var A=Z(m,2),y=W(A),w=Z(W(y),2);Kt(Vi(w,{category:"Demos",get items(){return Kf},select:h,$$legacy:!0}),P=>Ve(s,P),()=>f(s));var x=Z(w,4);Kt(Vi(x,{category:"Games",get items(){return Hh},select:h,$$legacy:!0}),P=>Ve(o,P),()=>f(o));var M=Z(x,4);Kt(Vi(M,{category:"Tools",get items(){return Gh},select:h,$$legacy:!0}),P=>Ve(u,P),()=>f(u)),j(y),j(A),lt(P=>_=We(m,1,"modal border-0",null,_,P),[()=>({"modal-open":f(n)})],_e),Pt(1,A,()=>kt),ie(a,b)}var Zh=Re('<div><div class="flex justify-center rounded"><img class="mt-3 h-24 p-2" src="va-icon.png" alt="vAmiga Icon"/> <div class="p-6 text-white"><div class="flex"><div class="font-sofia-extra mr-2 text-7xl">vAmiga<span class="opacity-75">.net</span></div></div> <div class="font-sofia-semi pb-10 pl-2 text-xl">Version 2.0 beta 1</div> <div class="flex space-x-5"><div class="tooltip tooltip-primary" data-tip="Power On"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div> <div class="tooltip tooltip-primary" data-tip="Run Demo"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div> <div class="tooltip tooltip-primary" data-tip="Visit GitHub"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div></div></div></div></div>'),Jh=Re("<div><!></div>"),em=Re('<div class="p-1.5"><!></div>'),tm=Re("<div>Kickstart</div>"),nm=Re("<div><!></div>"),rm=Re("<div>Showcases</div>"),am=Re("<div><!></div>"),om=Re("<div>Impressum</div>"),im=Re('<div><div class="modal-box h-2/3 w-2/3 max-w-none"><!></div></div> <div><div class="modal-box"><!></div></div> <div><div><div class="absolute h-full"><div class="h-full w-screen bg-gradient-to-t from-indigo-400 to-indigo-800"></div></div> <div class="absolute h-full blur-xs"><img class="h-full w-screen object-fill opacity-60" src="matrix.jpg" alt="Background"/></div></div> <!> <div><!> <!> <!></div></div>',1);function sm(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Ht,"$layer",n),u=()=>O(ea,"$audio",n),l=()=>O(Mn,"$amiga",n),h=()=>O(Mr,"$proxy",n),b=()=>O(sa,"$poweredOn",n);let m="",_=yt(!1),R=yt(!1);sr(()=>{console.log("TitleScreen::onMount()"),new Image().src="footage/3ddemo-small.jpg",new Image().src="footage/batmanrises-small.jpg",new Image().src="footage/celtic-small.jpg",new Image().src="footage/china-small.jpg",new Image().src="footage/defender-small.jpg",new Image().src="footage/desertdreams-small.jpg",new Image().src="footage/diagrom-small.jpg",new Image().src="footage/eon-small.jpg",new Image().src="footage/inebriation-small.jpg",new Image().src="footage/kyrios-small.jpg",new Image().src="footage/paccer-small.jpg",new Image().src="footage/rinkadink-small.jpg",new Image().src="footage/sdi-small.jpg",new Image().src="footage/stateart-small.jpg",new Image().src="footage/sysinfo-small.jpg",new Image().src="footage/testkit-small.jpg",new Image().src="footage/traprunner-small.jpg"});async function p(){await u().setup(),l().run()}async function A(){await u().setup(),h().runShowcase(Kf[0])}function y(){window.location.href="https://github.com/dirkwhoffmann/vAmigaNet"}async function w(){console.log("openShowcases"),await u().setup(),fe(Ht,o()===dt.showcases?dt.none:dt.showcases),fe(ko,!1)}async function x(){await u().setup(),Ve(_,!0)}function M(){Ve(R,!0)}An(()=>(o(),dt),()=>{o()===dt.kickstart&&Ve(_,!0)}),Lr(),Ut();var P=St(),T=ze(P);{var v=I=>{var G=im(),D=ze(G);let U;var Q=W(D),ae=W(Q);gg(ae,{get show(){return f(_)},set show(Ie){Ve(_,Ie)},$$legacy:!0}),j(Q),j(D);var z=Z(D,2);let X;var J=W(z),ye=W(J);Qv(ye,{get show(){return f(R)},set show(Ie){Ve(R,Ie)},$$legacy:!0}),j(J),j(z);var de=Z(z,2);We(de,1,"flex h-full flex-col ");var xe=W(de),we=Z(xe,2);{var ve=Ie=>{Qh(Ie)},Te=Ie=>{var Ne=Jh();We(Ne,1,"relative flex grow flex-col items-center justify-center bg-transparent ");var ue=W(Ne);{var Pe=He=>{var me=Zh();We(me,1,_r(m));var q=W(me),ct=Z(W(q),2),De=Z(W(ct),4),be=W(De),Me=W(be),et=W(Me);jv(et,{}),j(Me),j(be);var gt=Z(be,2),Et=W(gt),nt=W(Et);Hv(nt,{}),j(Et),j(gt);var pe=Z(gt,2),ge=W(pe),ht=W(ge);Fv(ht,{}),j(ge),j(pe),j(De),j(ct),j(q),j(me),rn("click",Me,p),rn("click",Et,A),rn("click",ge,y),ie(He,me)};Xe(ue,He=>{o(),Kn(dt),Tt(()=>o()===dt.none)&&He(Pe)})}j(Ne),Pt(1,Ne,()=>kt),ie(Ie,Ne)};Xe(we,Ie=>{o(),Kn(dt),Tt(()=>o()===dt.showcases)?Ie(ve):Ie(Te,!1)})}var ne=Z(we,2);We(ne,1,"relative flex justify-center space-x-8 bg-gray-900/50 align-middle ");var se=W(ne);Li(se,{onclick:x,icon:ue=>{var Pe=em(),He=W(Pe);Bv(He,{}),j(Pe),ie(ue,Pe)},description:ue=>{var Pe=tm();ie(ue,Pe)},$$slots:{icon:!0,description:!0}});var ce=Z(se,2);Li(ce,{onclick:w,icon:ue=>{var Pe=nm(),He=W(Pe);Lv(He,{}),j(Pe),ie(ue,Pe)},description:ue=>{var Pe=rm();ie(ue,Pe)},$$slots:{icon:!0,description:!0}});var Ee=Z(ce,2);Li(Ee,{onclick:M,icon:ue=>{var Pe=am(),He=W(Pe);zv(He,{}),j(Pe),ie(ue,Pe)},description:ue=>{var Pe=om();ie(ue,Pe)},$$slots:{icon:!0,description:!0}}),j(ne),j(de),lt((Ie,Ne)=>{U=We(D,1,"modal",null,U,Ie),X=We(z,1,"modal",null,X,Ne)},[()=>({"modal-open":f(_)}),()=>({"modal-open":f(R)})],_e),Pt(1,xe,()=>kt,()=>({duration:2e3})),Pt(3,de,()=>kt),ie(I,G)};Xe(T,I=>{b()||I(v)})}ie(a,P),it(),s()}class Qr{current=0;target=0;deltaStep=.005;constructor(r=0){this.current=r,this.target=r}animates(){return this.current!=this.target}clamped(){return this.current<0?0:this.current>1?1:this.current}set(r,n=25){this.target=r,this.deltaStep=Math.abs(this.target-this.current)/n}move(){this.current+this.deltaStep<=this.target?this.current+=this.deltaStep:this.current-this.deltaStep>=this.target?this.current-=this.deltaStep:this.current=this.target}}class um{x1=new Qr(.1);y1=new Qr(.1);x2=new Qr(.9);y2=new Qr(.9);texW=Hi*Yr;texH=qr;normalize(r){return{x:r.x/this.texW,y:r.y/this.texH,w:r.w/this.texW,h:r.h/this.texH}}entire(){return{x:0,y:0,w:this.texW,h:this.texH}}entireNormalized(){return this.normalize(this.entire())}largestVisible(){const r=4*Hi*Bh,n=4*Hi*Kh,s=Vh,o=Fh;return{x:r,y:s,w:n-r,h:o-s}}largestVisibleNormalized(){return this.normalize(this.largestVisible())}visible(r,n,s,o){const u=this.largestVisible(),l=1-.2*r,h=1-.2*n,b=l*u.w,m=h*u.h,_=u.x+s*(u.w-b),R=u.y+o*(u.h-m);return{x:_,y:R,w:b,h:m}}visibleNormalized(r,n,s,o){return this.normalize(this.visible(r,n,s,o))}animates(){return this.x1.animates()||this.y1.animates()||this.x2.animates()||this.y2.animates()}zoomIn(){this.x1.set(.188),this.y1.set(.106),this.x2.set(.188+.733),this.y2.set(.106+.867)}zoomOut(){this.x1.set(0),this.y1.set(0),this.x2.set(1),this.y2.set(1)}move(){this.x1.move(),this.y1.move(),this.x2.move(),this.y2.move()}}async function cm(a,r,n,s,o){if(!r())await n();else switch(a.button){case 0:s()?.trigger(o().PRESS_LEFT);break;case 1:s()?.trigger(o().PRESS_MIDDLE);break;case 2:s()?.trigger(o().PRESS_RIGHT);break}}function lm(a,r,n){switch(a.button){case 0:r()?.trigger(n().RELEASE_LEFT);break;case 1:r()?.trigger(n().RELEASE_MIDDLE);break;case 2:r()?.trigger(n().RELEASE_RIGHT);break}}var fm=Re('<canvas class="h-full w-full focus:ring-0 focus:outline-none" tabindex="-1"></canvas>');function dm(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(Mn,"$amiga",n),u=()=>O(Ll,"$denise",n),l=()=>O(on,"$wasm",n),h=()=>O(sn,"$config",n),b=()=>O(ks,"$running",n),m=()=>O(bn,"$port1",n),_=()=>O(Kl,"$keyset1",n),R=()=>O(Bl,"$keyset2",n),p=()=>O(wn,"$port2",n),A=()=>O(Os,"$joystick1",n),y=()=>O(Cs,"$joystick2",n),w=()=>O(Ul,"$keyboard",n),x=()=>O(Nl,"$mouse1",n),M=()=>O(Fl,"$mouse2",n),P=()=>O(zi,"$MsgShaking",n);let T=Ct(void 0),v=Ct(void 0);he(r,"x1",3,0),he(r,"y1",3,0),he(r,"x2",3,0),he(r,"y2",3,0);let I=he(r,"tx1",7,0),G=he(r,"ty1",7,0),D=he(r,"tx2",7,0),U=he(r,"ty2",7,0),Q=he(r,"needsDisplay",15,!1),ae=!0,z=!0,X=0,J=()=>document.pointerLockElement===f(T),ye=!1,de=!1,xe=!1,we=!1,ve=0,Te,ne,se,ce,Ee,Ie,Ne,ue,Pe,He,me;const q=`
    	attribute vec4 aVertexPosition;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
			vTextureCoord = gl_Position.xy * .5 + .5;
    	}
   	`,ct=`
		precision mediump float;

		varying highp vec2 vTextureCoord;
	   	uniform sampler2D u_lfSampler;
	   	uniform sampler2D u_sfSampler;

		void main()
		{
			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));

			vec4 color;
		    if (mod(coord.y, 2.0) == 0.0) {
		        // color = vec4(1.0, 0.0, 0.0, 1.0);
				color = texture2D(u_sfSampler, vTextureCoord);
		    } else {
		        // color = vec4(1.0, 1.0, 0.0, 1.0);
				color = texture2D(u_lfSampler, vTextureCoord);
		    }

		    gl_FragColor = color;
		}
   `,De=`
    	attribute vec4 aVertexPosition;
    	attribute vec2 aTextureCoord;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
    		vTextureCoord = aTextureCoord;
    	}
   	`,be=`
		precision mediump float;
    
		varying highp vec2 vTextureCoord;
    	uniform sampler2D sampler;
    	uniform float u_lweight;
		uniform float u_sweight;

    	void main()
    	{
    	    float w;

			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));
		    if (mod(coord.y, 2.0) == 0.0) {
		        w = u_lweight;
		        // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * vec4(w, w, w, 1.0);
		    } else {
		        w = u_sweight;
		        // gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0) * vec4(w, w, w, 1.0);
		    }

            gl_FragColor = texture2D(sampler, vTextureCoord) * vec4(w, w, w, 1.0);
    	}
   `;function Me(){const Le={alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1};if(!(f(T).getContext("webgl2",Le)instanceof WebGL2RenderingContext))throw new Error("vAmiga.net needs WebGL2 to run.");Ve(v,f(T).getContext("webgl2",Le),!0),f(v).disable(f(v).BLEND),f(v).disable(f(v).DEPTH_TEST),f(v).disable(f(v).SCISSOR_TEST),f(v).disable(f(v).STENCIL_TEST),f(v).clearColor(0,0,0,1),f(v).clear(f(v).COLOR_BUFFER_BIT),Ee=Et(q,ct),Pe=f(v).getUniformLocation(Ee,"u_lfSampler"),ue=f(v).getUniformLocation(Ee,"u_sfSampler"),He=Et(De,be),Ie=f(v).getUniformLocation(He,"u_lweight"),Ne=f(v).getUniformLocation(He,"u_sweight"),me=f(v).getUniformLocation(He,"sampler"),f(v).uniform1i(me,0);const oe=new Float32Array([-1,1,1,1,-1,-1,1,-1]);ge(oe),ht(He,"aVertexPosition");const Ge=new Float32Array([0,1,1,1,0,0,1,0]);Te=ge(Ge),ht(He,"aTextureCoord"),ne=pe(Yr,qr),se=pe(Yr,qr),ce=pe(Yr,2*qr)}function et(Le,oe,Ge,mt){const Bt=new Float32Array([Le,oe,Ge,oe,Le,mt,Ge,mt]);f(v).bindBuffer(f(v).ARRAY_BUFFER,Te),f(v).bufferSubData(f(v).ARRAY_BUFFER,0,Bt)}function gt(){const Le=f(T).clientWidth,oe=f(T).clientHeight;(f(T).width!==Le||f(T).height!==oe)&&(f(T).width=Le,f(T).height=oe)}function Et(Le,oe){const Ge=nt(f(v).VERTEX_SHADER,Le),mt=nt(f(v).FRAGMENT_SHADER,oe),Bt=f(v).createProgram();if(f(v).attachShader(Bt,Ge),f(v).attachShader(Bt,mt),f(v).linkProgram(Bt),!f(v).getProgramParameter(Bt,f(v).LINK_STATUS))throw new Error(`Shader link error: ${f(v).getProgramInfoLog(Bt)}`);return f(v).useProgram(Bt),Bt}function nt(Le,oe){const Ge=f(v).createShader(Le);if(!Ge)throw new Error("Failed to create shader.");if(f(v).shaderSource(Ge,oe),f(v).compileShader(Ge),!f(v).getShaderParameter(Ge,f(v).COMPILE_STATUS))throw new Error(`Shader compile error: ${f(v).getShaderInfoLog(Ge)}`);return Ge}function pe(Le,oe,Ge=0){const mt=f(v).createTexture();if(!mt)throw new Error("Failed to create texture.");const Bt=Ge==0?f(v).NEAREST:f(v).LINEAR;return f(v).bindTexture(f(v).TEXTURE_2D,mt),f(v).texParameteri(f(v).TEXTURE_2D,f(v).TEXTURE_WRAP_S,f(v).CLAMP_TO_EDGE),f(v).texParameteri(f(v).TEXTURE_2D,f(v).TEXTURE_WRAP_T,f(v).CLAMP_TO_EDGE),f(v).texParameteri(f(v).TEXTURE_2D,f(v).TEXTURE_MIN_FILTER,Bt),f(v).texParameteri(f(v).TEXTURE_2D,f(v).TEXTURE_MAG_FILTER,Bt),f(v).texImage2D(f(v).TEXTURE_2D,0,f(v).RGBA,Le,oe,0,f(v).RGBA,f(v).UNSIGNED_BYTE,null),mt}function ge(Le){const oe=f(v).createBuffer();return f(v).bindBuffer(f(v).ARRAY_BUFFER,oe),f(v).bufferData(f(v).ARRAY_BUFFER,Le,f(v).STATIC_DRAW),oe}function ht(Le,oe){const Ge=f(v).getAttribLocation(Le,oe);f(v).enableVertexAttribArray(Ge),f(v).vertexAttribPointer(Ge,2,f(v).FLOAT,!1,0,0)}function Zt(){gt(),ln(),o().wakeUp()}function ln(){const Le=Yr,oe=qr;if(o().poweredOff()){const Ge=u().noise();z=ae,ae=!z;const mt=new Uint8Array(l().HEAPU8.buffer,Ge,Le*oe*4);ae?(f(v).activeTexture(f(v).TEXTURE0),f(v).bindTexture(f(v).TEXTURE_2D,ne),f(v).texSubImage2D(f(v).TEXTURE_2D,0,0,0,Le,oe,f(v).RGBA,f(v).UNSIGNED_BYTE,mt)):(f(v).activeTexture(f(v).TEXTURE1),f(v).bindTexture(f(v).TEXTURE_2D,se),f(v).texSubImage2D(f(v).TEXTURE_2D,0,0,0,Le,oe,f(v).RGBA,f(v).UNSIGNED_BYTE,mt))}else{const Ge=u().getEmulatorTexture();if(z=Ge.prevLof,ae=Ge.currLof,Ge.frameNr!=X+1&&Ge.frameNr==X)return;X=Ge.frameNr;const mt=new Uint8Array(l().HEAPU8.buffer,Ge.data,Le*oe*4);ae?(f(v).activeTexture(f(v).TEXTURE0),f(v).bindTexture(f(v).TEXTURE_2D,ne),f(v).texSubImage2D(f(v).TEXTURE_2D,0,0,0,Le,oe,f(v).RGBA,f(v).UNSIGNED_BYTE,mt)):(f(v).activeTexture(f(v).TEXTURE1),f(v).bindTexture(f(v).TEXTURE_2D,se),f(v).texSubImage2D(f(v).TEXTURE_2D,0,0,0,Le,oe,f(v).RGBA,f(v).UNSIGNED_BYTE,mt))}Q(!0)}function $n(){Q()&&(fn(),dn(),Q(!1))}function fn(){ae==z?ae?(f(v).useProgram(Ee),f(v).uniform1i(Pe,0),f(v).uniform1i(ue,0)):(f(v).useProgram(Ee),f(v).uniform1i(Pe,1),f(v).uniform1i(ue,1)):(f(v).useProgram(Ee),f(v).uniform1i(Pe,1),f(v).uniform1i(ue,0));const Le=f(v).createFramebuffer();f(v).activeTexture(f(v).TEXTURE0),f(v).bindTexture(f(v).TEXTURE_2D,ne),f(v).activeTexture(f(v).TEXTURE1),f(v).bindTexture(f(v).TEXTURE_2D,se),f(v).bindFramebuffer(f(v).FRAMEBUFFER,Le),f(v).viewport(0,0,Yr,2*qr),f(v).framebufferTexture2D(f(v).FRAMEBUFFER,f(v).COLOR_ATTACHMENT0,f(v).TEXTURE_2D,ce,0),f(v).drawArrays(f(v).TRIANGLE_STRIP,0,4)}function dn(){if(f(v).bindFramebuffer(f(v).FRAMEBUFFER,null),f(v).viewport(0,0,f(v).canvas.width,f(v).canvas.height),f(v).activeTexture(f(v).TEXTURE0),f(v).bindTexture(f(v).TEXTURE_2D,ce),f(v).useProgram(He),f(v).uniform1f(Ie,1),f(v).uniform1f(Ne,1),ae!=z){let Le=h().getNum(S.FLICKER_WEIGHT);if(Le>0&&b()){const oe=1-Le/100;f(v).uniform1f(Ie,ve%4>=2?1:oe),f(v).uniform1f(Ne,ve%4>=2?oe:1),ve+=1}}f(v).drawArrays(f(v).TRIANGLE_STRIP,0,4)}sr(()=>{console.log("GLCanvas::onMount()"),document.addEventListener("pointerlockchange",tn,!1),Me(),et(I(),G(),D(),U())}),qd(()=>{document.removeEventListener("pointerlockchange",tn)});function Wt(Le,oe){let Ge;switch(oe==1&&m()==nn.keyset1&&(Ge=_()[Le]),oe==1&&m()==nn.keyset2&&(Ge=R()[Le]),oe==2&&p()==nn.keyset1&&(Ge=_()[Le]),oe==2&&p()==nn.keyset2&&(Ge=R()[Le]),Ge){case void 0:return[];case l().PULL_UP:return ye=!0,[l().PULL_UP];case l().PULL_DOWN:return de=!0,[l().PULL_DOWN];case l().PULL_LEFT:return xe=!0,[l().PULL_LEFT];case l().PULL_RIGHT:return we=!0,[l().PULL_RIGHT];case l().PRESS_FIRE:return[l().PRESS_FIRE];case l().PRESS_FIRE2:return[l().PRESS_FIRE2];case l().PRESS_FIRE3:return[l().PRESS_FIRE3]}}function Hn(Le,oe){let Ge;switch(oe==1&&m()==nn.keyset1&&(Ge=_()[Le]),oe==1&&m()==nn.keyset2&&(Ge=R()[Le]),oe==2&&p()==nn.keyset1&&(Ge=_()[Le]),oe==2&&p()==nn.keyset2&&(Ge=R()[Le]),Ge){case void 0:return[];case l().PULL_UP:return ye=!1,de?[l().PULL_DOWN]:[l().RELEASE_Y];case l().PULL_DOWN:return de=!1,ye?[l().PULL_UP]:[l().RELEASE_Y];case l().PULL_LEFT:return xe=!1,we?[l().PULL_RIGHT]:[l().RELEASE_X];case l().PULL_RIGHT:return we=!1,xe?[l().PULL_LEFT]:[l().RELEASE_X];case l().PRESS_FIRE:return[l().RELEASE_FIRE];case l().PRESS_FIRE2:return[l().RELEASE_FIRE2];case l().PRESS_FIRE3:return[l().RELEASE_FIRE3]}}function Rn(Le){if(Le.repeat)return;let oe=Wt(Le.code,1);if(oe?.length){oe?.forEach(mt=>A().trigger(mt));return}if(oe=Wt(Le.code,2),oe?.length){oe?.forEach(mt=>y().trigger(mt));return}const Ge=Rl[Le.code];Ge!==void 0&&(w().pressKey(Ge),Le.preventDefault(),Le.stopPropagation())}function Zn(Le){let oe=Hn(Le.code,1);if(oe?.length){oe?.forEach(mt=>A().trigger(mt));return}if(oe=Hn(Le.code,2),oe?.length){oe?.forEach(mt=>y().trigger(mt));return}const Ge=Rl[Le.code];Ge!==void 0&&w().releaseKey(Ge)}function tn(){document.pointerLockElement===f(T)?document.addEventListener("mousemove",Jt,!1):document.removeEventListener("mousemove",Jt)}async function vn(){J()||(console.log("lockMouse"),await f(T).requestPointerLock())}function xn(){J()&&(console.log("unlockMouse"),document.exitPointerLock())}function gn(){return m()==nn.mouse?x():p()==nn.mouse?M():null}function Jt(Le){const oe=Le.movementX/2,Ge=Le.movementY/2;x().detectShakeRel(oe,Ge),gn()?.setDxDy(oe,Ge)}let Ke=tt(()=>h().getNum(S.RENDER_MODE)==ka.smooth?"image-rendering: auto":"image-rendering: pixelated");Po(()=>{f(v)&&et(I(),G(),D(),U())}),Po(()=>{P()&&h().getBool(S.SHAKING)&&xn()});var Gt=fm();Gt.__keydown=Rn,Gt.__keyup=Zn,Gt.__mousedown=[cm,J,vn,gn,l],Gt.__mouseup=[lm,gn,l],Kt(Gt,Le=>Ve(T,Le),()=>f(T)),lt(()=>Ns(Gt,f(Ke))),ie(a,Gt);var Nn=it({update:Zt,render:$n,get tx1(){return I()},set tx1(Le){I(Le)},get tx2(){return D()},set tx2(Le){D(Le)},get ty1(){return G()},set ty1(Le){G(Le)},get ty2(){return U()},set ty2(Le){U(Le)},get needsDisplay(){return Q()},set needsDisplay(Le){Q(Le)}});return s(),Nn}Tn(["keydown","keyup","mousedown","mouseup"]);var vm=Re('<div class="relative flex h-full grow flex-col justify-center"><div class="flex h-full items-center justify-center"><div><!></div></div></div>');function gm(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(qi,"$canvasWidth",n),u=()=>O(Yi,"$canvasHeight",n),l=()=>O(_o,"$aspectWidth",n),h=()=>O(yo,"$aspectHeight",n),b=()=>O(Mn,"$amiga",n),m=()=>O(on,"$wasm",n),_=()=>O(sa,"$poweredOn",n),R=()=>O(Xi,"$gamepadManager",n),p=()=>O(Ta,"$layout",n),A=()=>O(sn,"$config",n);let y=Ct(void 0),w=Ct(0),x=Ct(0),M=Ct(0),P=Ct(0),T=Ct(0),v=Ct(0),I=Ct(0),G=Ct(0),D=he(r,"textureRect",23,()=>new um),U=new Qr(0),Q=new Qr(0),ae=Ct(0),z=Ct(0);sr(()=>{console.log("Emulator::onMount()"),D().zoomIn()});function X(ne){if(ne=="full")U.set(o()),Q.set(u());else if(ne=="aspect")U.set(l()),Q.set(h());else if(ne=="fit"){const se=D().x1.current*D().texW,ce=D().y1.current*D().texH,Ee=D().x2.current*D().texW,Ie=D().y2.current*D().texH;U.set(Ee-se+2),Q.set(2*(Ie-ce+2))}}function J(ne,se){for(;;){let ce=b().readMessage();if(ce.type==m().Msg.NONE)break;m().processMsg(ce)}_()&&(ye(),f(y)?.render())}function ye(ne){let se=D().animates(),ce=U.animates()||Q.animates();R().pollState(),se&&(D().move(),Ve(T,D().x1.current,!0),Ve(v,D().y1.current,!0),Ve(I,D().x2.current,!0),Ve(G,D().y2.current,!0),Ve(w,D().x1.current*D().texW),Ve(x,D().y1.current*D().texH),Ve(M,D().x2.current*D().texW),Ve(P,D().y2.current*D().texH),p()=="fit"&&(Ve(ae,U.current=U.target=f(M)-f(w)+2,!0),Ve(z,Q.current=Q.target=2*(f(P)-f(x)+2),!0)),f(y)&&(f(y).needsDisplay=!0)),ce&&(U.move(),Q.move(),Ve(ae,U.current,!0),Ve(z,Q.current,!0),f(y)&&(f(y).needsDisplay=!0)),f(y)?.update()}let de=tt(()=>A()?.getBool(S.CANVAS_BORDER)?"border-2 border-primary border-opacity-100":"");Po(()=>{const ne=p();if(ne==="full")U.set(o()),Q.set(u());else if(ne==="aspect")U.set(l()),Q.set(h());else if(ne==="fit"){const se=D().x1.current*D().texW,ce=D().y1.current*D().texH,Ee=D().x2.current*D().texW,Ie=D().y2.current*D().texH;U.set(Ee-se+2),Q.set(2*(Ie-ce+2))}});var xe=St(),we=ze(xe);{var ve=ne=>{var se=vm(),ce=W(se),Ee=W(ce),Ie=W(Ee);Kt(dm(Ie,{get x1(){return f(w)},get x2(){return f(M)},get y1(){return f(x)},get y2(){return f(P)},get tx1(){return f(T)},get tx2(){return f(I)},get ty1(){return f(v)},get ty2(){return f(G)}}),Ne=>Ve(y,Ne,!0),()=>f(y)),j(Ee),j(ce),j(se),lt(()=>{We(Ee,1,_r(f(de))),Ns(Ee,`height:${f(z)??""}px; width:${f(ae)??""}px`)}),Pt(3,se,()=>kt),ie(ne,se)};Xe(we,ne=>{_()&&ne(ve)})}ie(a,xe);var Te=it({updateRect:X,doAnimationFrame:J,get textureRect(){return D()},set textureRect(ne){D(ne)}});return s(),Te}var hm=Re("<button> </button>");function Sa(a,r){let n=he(r,"name",3,""),s=he(r,"active",3,""),o=he(r,"style",3,"text-3xl");var u=hm();u.__click=function(...h){r.onclick?.apply(this,h)};var l=W(u,!0);j(u),lt(()=>{We(u,1,`btn btn-ghost p-0 font-thin ${s()===n()?"btn-active":""} ${o()??""}`),Rt(l,n())}),ie(a,u)}Tn(["click"]);var mm=Re('<div class="px-0 py-0.5"><div class="w-full flex"><div class="text-xl text-base-content"> </div></div> <!></div>');function It(a,r){let n=he(r,"name",3,"");var s=mm(),o=W(s),u=W(o),l=W(u,!0);j(u),j(o);var h=Z(o,2);zn(h,()=>r.children??Sn),j(s),lt(()=>Rt(l,n())),ie(a,s)}var pm=Qt('<path d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path>');function _m(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 14 16"},()=>n,{children:(s,o)=>{var u=pm();ie(s,u)},$$slots:{default:!0}}))}var ym=Qt('<path d="M254.28 17.313c-81.048 0-146.624 65.484-146.624 146.406V236h49.594v-69.094c0-53.658 43.47-97.187 97.03-97.187 53.563 0 97.032 44.744 97.032 97.186V236h49.594v-72.28c0-78.856-65.717-146.407-146.625-146.407zM85.157 254.688c-14.61 22.827-22.844 49.148-22.844 76.78 0 88.358 84.97 161.5 191.97 161.5 106.998 0 191.968-73.142 191.968-161.5 0-27.635-8.26-53.95-22.875-76.78H85.155zM254 278.625c22.34 0 40.875 17.94 40.875 40.28 0 16.756-10.6 31.23-25.125 37.376l32.72 98.126h-96.376l32.125-98.125c-14.526-6.145-24.532-20.62-24.532-37.374 0-22.338 17.972-40.28 40.312-40.28z"></path>');function bm(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 512 512"},()=>n,{children:(s,o)=>{var u=ym();ie(s,u)},$$slots:{default:!0}}))}var wm=(a,r)=>r(!0),Em=(a,r)=>r(a),Sm=Re('<ul tabindex="0" class="dropdown-content menu bg-base-100 text-base-content mt-1 w-full"><input type="range" class="range range-accent h-12 rounded-none px-4"/></ul>'),Am=Re('<div class="dropdown dropdown-bottom"><button type="button" tabindex="0"><!></button> <!></div>');function Tm(a,r){ot(r,!0);let n=he(r,"tag",3,0),s=he(r,"value",7,0),o=he(r,"locked",3,!1),u=he(r,"min",3,0),l=he(r,"max",3,0),h=he(r,"open",7,!0),b=he(r,"select",3,()=>{});function m(w){w.preventDefault(),s(Number(w.target.value)),console.log("tag",n(),"value",s()),b()(s())}var _=Am(),R=W(_);R.__click=[wm,h];var p=W(R);zn(p,()=>r.children??Sn),j(R);var A=Z(R,2);{var y=w=>{var x=Sm(),M=W(x);fv(M),M.__input=[Em,m],j(x),lt(()=>{Nt(M,"min",u()),Nt(M,"max",l()),dv(M,s())}),ie(w,x)};Xe(A,w=>{h()&&w(y)})}j(_),lt(()=>We(R,1,_r(o()?"pointer-events-none":""))),ie(a,_),it()}Tn(["click","input"]);var Rm=Re('<div class="w-4">&#10003</div>'),xm=Re('<div class="w-4"></div>');function Pm(a,r){var n=St(),s=ze(n);{var o=u=>{var l=St(),h=ze(l);{var b=_=>{var R=Rm();ie(_,R)},m=_=>{var R=xm();ie(_,R)};Xe(h,_=>{r.visible?_(b):_(m,!1)})}ie(u,l)};Xe(s,u=>{u(o)})}ie(a,n)}var km=Re('<li class="divider"></li>'),Dm=(a,r,n)=>r(a,f(n).tag),Om=Re("<li><button><!> </button></li>"),Cm=Re('<div><label tabindex="0"><!></label>  <ul tabindex="0"><!></ul></div>');function nu(a,r){ot(r,!0);let n=he(r,"tag",3,0),s=he(r,"items",19,()=>[]),o=he(r,"isEnabled",3,!0),u=he(r,"checkmarks",3,!1),l=he(r,"dropdownStyle",3,""),h=he(r,"listStyle",3,""),b=he(r,"select",3,()=>{});const m=(w,x)=>{w.preventDefault(),document.activeElement&&document.activeElement.blur(),console.log(`Menu action: ${n()} - ${x}`),b()(x)};var _=Cm(),R=W(_),p=W(R);zn(p,()=>r.children??Sn),j(R);var A=Z(R,2),y=W(A);Co(y,s,w=>{var x=St(),M=ze(x);na(M,17,s,ta,(P,T)=>{var v=St(),I=ze(v);{var G=U=>{var Q=km();ie(U,Q)},D=(U,Q)=>{{var ae=z=>{var X=Om(),J=W(X);J.__click=[Dm,m,T];var ye=W(J);{var de=we=>{Pm(we,{get visible(){return f(T).isSelected}})};Xe(ye,we=>{u()&&we(de)})}var xe=Z(ye);j(J),j(X),lt(we=>{Nt(X,"id",we),J.disabled=!f(T).isEnabled,We(J,1,_r(f(T).isEnabled?"":"hover:bg-base-100 opacity-40")),Rt(xe,` ${f(T).title??""}`)},[()=>n().toString()]),ie(z,X)};Xe(U,z=>{f(T).isHidden||z(ae)},Q)}};Xe(I,U=>{f(T)instanceof Jd?U(G):U(D,!1)})}ie(P,v)}),ie(w,x)}),j(A),j(_),lt(()=>{We(_,1,`dropdown ${l()??""}`),We(R,1,_r(o()?"":"pointer-events-none")),We(A,1,`dropdown-content menu bg-base-100 ${h()??""}`)}),ie(a,_),it()}Tn(["click"]);function Bf(a,r){let n=he(r,"tag",3,0),s=he(r,"items",19,()=>[]),o=he(r,"isEnabled",3,!0),u=he(r,"dropdownStyle",3,""),l=he(r,"listStyle",3,""),h=he(r,"selectedTag",3,0),b=he(r,"select",3,()=>{}),m=tt(()=>{let p=s(),A=h();for(const y of p)y.isSelected=y.tag==A;return p});var _=St(),R=ze(_);Co(R,s,p=>{var A=St(),y=ze(A);Co(y,h,w=>{nu(w,{get tag(){return n()},get items(){return f(m)},get isEnabled(){return o()},checkmarks:!0,get dropdownStyle(){return u()},get listStyle(){return l()},select:b(),children:(x,M)=>{var P=St(),T=ze(P);zn(T,()=>r.children??Sn),ie(x,P)},$$slots:{default:!0}})}),ie(p,A)}),ie(a,_)}var Mm=Qt('<path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"></path>');function Im(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 448 512"},()=>n,{children:(s,o)=>{var u=Mm();ie(s,u)},$$slots:{default:!0}}))}var $m=Re('<div class="flex w-full items-center justify-between"><div class="flex grow justify-center"><!></div> <div class="h-4 w-4"><!></div></div>');function Nm(a,r){var n=$m(),s=W(n),o=W(s);zn(o,()=>r.children??Sn),j(s);var u=Z(s,2),l=W(u);Im(l,{}),j(u),j(n),ie(a,n)}const Lm=a=>{console.log("infoAction",a),a.preventDefault()};var Um=Re("<button> </button>"),Fm=Re('<button class="btn btn-primary w-[18rem] rounded-none border-0 text-xl font-normal"><!></button>'),Km=Re("<button> </button>"),Bm=Re('<div class="px-0 py-0.5"><div class="flex w-full items-center justify-between space-x-1 text-xl"><div class="bg-primary flex h-12 w-full grow overflow-hidden border-0"><div><div class="mx-2 flex grow overflow-hidden border-0 whitespace-nowrap"> </div></div></div> <div><button><!></button></div> <div><button><!></button></div> <div class="bg-primary h-12 border-0"><!></div></div></div>');function je(a,r){ot(r,!0);let n=he(r,"name",3,""),s=he(r,"min",3,0),o=he(r,"max",3,0),u=he(r,"locked",3,!1),l=he(r,"tag",3,0),h=he(r,"selectedTag",7,0),b=he(r,"items",19,()=>[]),m=he(r,"select",3,()=>{}),_=he(r,"info",3,void 0);const R=tt(()=>u()?"opacity-50":""),p=tt(()=>{for(const J of b())if(J.tag==h())return J.title;return"???"});var A=Bm(),y=W(A),w=W(y),x=W(w),M=W(x),P=W(M,!0);j(M),j(x),j(w);var T=Z(w,2),v=W(T),I=W(v);bm(I,{}),j(v),j(T);var G=Z(T,2),D=W(G);D.__click=[Lm];var U=W(D);_m(U,{}),j(D),j(G);var Q=Z(G,2),ae=W(Q);{var z=J=>{const ye=tt(()=>!u());Bf(J,{get isEnabled(){return f(ye)},get items(){return b()},select:de=>{h(de),m()(h())},get tag(){return l()},get selectedTag(){return h()},listStyle:"w-[18rem] mt-2 text-xl bg-accent text-accent-content",children:(de,xe)=>{var we=St(),ve=ze(we);{var Te=se=>{var ce=Um(),Ee=W(ce,!0);j(ce),lt(()=>{We(ce,1,`btn btn-primary ${f(R)??""} w-[18rem] rounded-none border-0 text-xl font-normal`),Rt(Ee,f(p))}),ie(se,ce)},ne=se=>{var ce=Fm(),Ee=W(ce);Nm(Ee,{children:(Ie,Ne)=>{Ps();var ue=Yd();lt(()=>Rt(ue,f(p))),ie(Ie,ue)}}),j(ce),ie(se,ce)};Xe(ve,se=>{u()?se(Te):se(ne,!1)})}ie(de,we)},$$slots:{default:!0}})},X=J=>{Tm(J,{get min(){return s()},get max(){return o()},get locked(){return u()},get tag(){return l()},select:m(),children:(ye,de)=>{var xe=Km(),we=W(xe,!0);j(xe),lt(()=>{We(xe,1,`btn btn-primary ${f(R)??""} w-[18rem] rounded-none border-0 text-xl font-normal`),Rt(we,h())}),ie(ye,xe)},$$slots:{default:!0}})};Xe(ae,J=>{s()===o()?J(z):J(X,!1)})}j(Q),j(y),j(A),lt(()=>{We(x,1,`w-full border-0 text-xl ${f(R)??""} text-primary-content flex items-center justify-between`),Rt(P,n()),We(T,1,`bg-primary flex h-12 w-20 items-center justify-center border-0 ${u()?"":"hidden"}`),We(v,1,`text-primary-content h-7 w-7 ${f(R)??""}`),We(G,1,`bg-primary flex h-12 w-20 items-center justify-center border-0 ${_()?"":"hidden"}`),We(D,1,`text-primary-content h-7 w-7 ${f(R)??""}`)}),ie(a,A),it()}Tn(["click"]);var Vm=Re("<!> <!>",1),Hm=Re("<div><!> <!> <!></div>");function Gm(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(sn,"$config",n);Ut();var u=Hm(),l=W(u);It(l,{name:"Warp mode",children:(m,_)=>{const R=_e(()=>[new re("During Disk Accesses",0),new re("Never",1),new re("Always",2)]),p=_e(()=>o().getNum(S.WARP_MODE));je(m,{get items(){return f(R)},name:"Enable warp mode",select:A=>o().setNum(S.WARP_MODE,A),get selectedTag(){return f(p)}})},$$slots:{default:!0}});var h=Z(l,2);It(h,{name:"Appearance",children:(m,_)=>{var R=Vm(),p=ze(R);const A=_e(()=>[new re("Default",Mt.default),new re("Light",Mt.light),new re("Dark",Mt.dark),new re("Coffee",Mt.coffee),new re("Cupcake",Mt.cupcake),new re("Forest",Mt.forest),new re("Aqua",Mt.aqua),new re("Garden",Mt.garden),new re("Pastel",Mt.pastel)]),y=_e(()=>o().getNum(S.THEME));je(p,{get items(){return f(A)},name:"Color theme",select:P=>o().setNum(S.THEME,P),get selectedTag(){return f(y)}});var w=Z(p,2);const x=_e(()=>[new re("Yes",1),new re("No",0)]),M=_e(()=>o().getNum(S.CANVAS_BORDER));je(w,{get items(){return f(x)},name:"Draw Canvas Border",select:P=>o().setNum(S.CANVAS_BORDER,P),get selectedTag(){return f(M)}}),ie(m,R)},$$slots:{default:!0}});var b=Z(h,2);It(b,{name:"Peripherals",children:(m,_)=>{const R=_e(()=>[new re("Yes",1),new re("No",0)]),p=_e(()=>o().getNum(S.SHAKING));je(m,{get items(){return f(R)},name:"Release Mouse by Shaking",select:A=>o().setNum(S.SHAKING,A),get selectedTag(){return f(p)}})},$$slots:{default:!0}}),j(u),Pt(1,u,()=>kt),ie(a,u),it(),s()}var jm=Re("<!> <!>",1),Wm=Re("<!> <!> <!>",1),zm=Re("<!> <!> <!> <!> <!> <!> <!> <!>",1),qm=Re("<!> <!> <!> <!>",1),Ym=Re("<!> <!> <!> <!>",1),Xm=Re("<div> </div> <!> <!> <!> <!> <!>",1),Qm=Re("<div><!></div>");function Zm(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Qi,"$MsgConfig",n),u=()=>O(on,"$wasm",n),l=()=>O(sn,"$config",n),h=()=>O(sa,"$poweredOn",n);Ut();var b=Qm(),m=W(b);Co(m,o,_=>{var R=Xm(),p=ze(R),A=W(p);j(p);var y=Z(p,2);It(y,{name:"CPU",children:(T,v)=>{var I=jm(),G=ze(I);const D=_e(()=>[new re("68000",u().CPU_68000),new re("68010",u().CPU_68010),new re("68020",u().CPU_68EC020)]),U=_e(()=>l().getNum(S.CPU_REVISION));je(G,{name:"CPU",get items(){return f(D)},get selectedTag(){return f(U)},select:X=>l().setNum(S.CPU_REVISION,X)});var Q=Z(G,2);const ae=_e(()=>[new re("7 Mhz",0),new re("14 Mhz",2),new re("21 Mhz",3),new re("28 Mhz",4),new re("35 Mhz",5),new re("42 Mhz",6),new re("84 Mhz",12)]),z=_e(()=>l().getNum(S.CPU_SPEED));je(Q,{name:"Frequency",get items(){return f(ae)},get selectedTag(){return f(z)},select:X=>l().setNum(S.CPU_SPEED,X)}),ie(T,I)},$$slots:{default:!0}});var w=Z(y,2);It(w,{name:"Custom Chipset",children:(T,v)=>{var I=Wm(),G=ze(I);const D=_e(()=>[new re("Early OCS",u().AGNUS_OCS_OLD),new re("OCS",u().AGNUS_OCS),new re("ECS (1MB)",u().AGNUS_ECS_1MB),new re("ECS (2MB)",u().AGNUS_ECS_2MB)]),U=_e(()=>l().getNum(S.AGNUS_REVISION));je(G,{name:"Agnus Revision",get items(){return f(D)},get selectedTag(){return f(U)},select:de=>l().setNum(S.AGNUS_REVISION,de),get locked(){return h()}});var Q=Z(G,2);const ae=_e(()=>[new re("OCS",u().DENISE_OCS),new re("ECS",u().DENISE_ECS)]),z=_e(()=>l().getNum(S.DENISE_REVISION));je(Q,{name:"Denise Revision",get items(){return f(ae)},get selectedTag(){return f(z)},select:de=>l().setNum(S.DENISE_REVISION,de),get locked(){return h()}});var X=Z(Q,2);const J=_e(()=>[new re("NONE",u().RTC_NONE),new re("OKI",u().RTC_OKI),new re("RICOH",u().RTC_RICOH)]),ye=_e(()=>l().getNum(S.RTC_MODEL));je(X,{name:"Real-time Clock",get items(){return f(J)},get selectedTag(){return f(ye)},select:de=>l().setNum(S.RTC_MODEL,de),get locked(){return h()}}),ie(T,I)},$$slots:{default:!0}});var x=Z(w,2);It(x,{name:"Memory",children:(T,v)=>{var I=zm(),G=ze(I);const D=_e(()=>[new re("256 KB",256),new re("512 KB",512),new re("1024 KB",1024),new re("2048 KB",2048)]),U=_e(()=>l().getNum(S.CHIP_RAM));je(G,{name:"Chip RAM",get items(){return f(D)},get selectedTag(){return f(U)},select:q=>l().setNum(S.CHIP_RAM,q),get locked(){return h()}});var Q=Z(G,2);const ae=_e(()=>[new re("0 KB",0),new re("512 KB",512),new re("1 MB",1024),new re("1.5 MB",1536)]),z=_e(()=>l().getNum(S.SLOW_RAM));je(Q,{name:"Slow RAM",get items(){return f(ae)},get selectedTag(){return f(z)},select:q=>l().setNum(S.SLOW_RAM,q),get locked(){return h()}});var X=Z(Q,2);const J=_e(()=>[new re("0 KB",0),new re("64 KB",64),new re("128 KB",128),new re("256 KB",256),new re("512 KB",512),new re("1 MB",1024),new re("2 MB",2048),new re("4 MB",4096),new re("8 MB",8192)]),ye=_e(()=>l().getNum(S.FAST_RAM));je(X,{name:"Fast RAM",get items(){return f(J)},get selectedTag(){return f(ye)},select:q=>l().setNum(S.FAST_RAM,q),get locked(){return h()}});var de=Z(X,2);const xe=_e(()=>[new re("Amiga 500",u().BANK_MAP_A500),new re("Amiga 1000",u().BANK_MAP_A1000),new re("Amiga 2000A",u().BANK_MAP_A2000A),new re("Amiga 2000B",u().BANK_MAP_A2000B)]),we=_e(()=>l().getNum(S.BANK_MAP));je(de,{name:"Memory Layout",get items(){return f(xe)},get selectedTag(){return f(we)},select:q=>l().setNum(S.BANK_MAP,q),get locked(){return h()}});var ve=Z(de,2);const Te=_e(()=>[new re("All Zeroes",u().RAM_INIT_ALL_ZEROES),new re("All Ones",u().RAM_INIT_ALL_ONES),new re("Random",u().RAM_INIT_RANDOMIZED)]),ne=_e(()=>l().getNum(S.INIT_PATTERN));je(ve,{name:"Memory Startup Pattern",get items(){return f(Te)},get selectedTag(){return f(ne)},select:q=>l().setNum(S.INIT_PATTERN,q),get locked(){return h()}});var se=Z(ve,2);const ce=_e(()=>[new re("Floating",u().UNMAPPED_FLOATING),new re("All Zeroes",u().UNMAPPED_ALL_ZEROES),new re("All Ones",u().UNMAPPED_ALL_ONES)]),Ee=_e(()=>l().getNum(S.UNMAPPED));je(se,{name:"Unmapped Memory Area",get items(){return f(ce)},get selectedTag(){return f(Ee)},select:q=>l().setNum(S.UNMAPPED,q),get locked(){return h()}});var Ie=Z(se,2);const Ne=_e(()=>[new re("Yes",1),new re("No",0)]),ue=_e(()=>l().getNum(S.SLOW_RAM_MIRROR));je(Ie,{name:"Emulate Slow RAM Mirror",get items(){return f(Ne)},get selectedTag(){return f(ue)},select:q=>l().setNum(S.SLOW_RAM_MIRROR,q)});var Pe=Z(Ie,2);const He=_e(()=>[new re("Yes",1),new re("No",0)]),me=_e(()=>l().getNum(S.SLOW_RAM_DELAY));je(Pe,{name:"Emulate Slow RAM Bus Delays",get items(){return f(He)},get selectedTag(){return f(me)},select:q=>l().setNum(S.SLOW_RAM_DELAY,q)}),ie(T,I)},$$slots:{default:!0}});var M=Z(x,2);It(M,{name:"Floppy Drives",children:(T,v)=>{var I=qm(),G=ze(I);const D=_e(()=>[new re("Internal Drive",1)]),U=_e(()=>l().getNum(S.DF0));je(G,{name:"DF0",get items(){return f(D)},tag:0,get selectedTag(){return f(U)},select:ne=>l().setNum(S.DF0,ne),get locked(){return h()}});var Q=Z(G,2);const ae=_e(()=>[new re("None",0),new re("A1010",1)]),z=_e(()=>l().getNum(S.DF1));je(Q,{name:"DF1",get items(){return f(ae)},tag:1,get selectedTag(){return f(z)},select:ne=>l().setNum(S.DF1,ne),get locked(){return h()}});var X=Z(Q,2);const J=_e(()=>[new re("None",0),new re("A1010",1)]),ye=_e(()=>l().getNum(S.DF2)),de=_e(()=>h()||!l().getBool(S.DF1));je(X,{name:"DF2",get items(){return f(J)},tag:2,get selectedTag(){return f(ye)},select:ne=>l().setNum(S.DF2,ne),get locked(){return f(de)}});var xe=Z(X,2);const we=_e(()=>[new re("None",0),new re("A1010",1)]),ve=_e(()=>l().getNum(S.DF3)),Te=_e(()=>h()||!l().getBool(S.DF2));je(xe,{name:"DF3",get items(){return f(we)},tag:3,get selectedTag(){return f(ve)},select:ne=>l().setNum(S.DF3,ne),get locked(){return f(Te)}}),ie(T,I)},$$slots:{default:!0}});var P=Z(M,2);It(P,{name:"Hard Drives",children:(T,v)=>{var I=Ym(),G=ze(I);const D=_e(()=>[new re("None",0),new re("Zorro Board",1)]),U=_e(()=>l().getNum(S.HD0));je(G,{name:"HD0",get items(){return f(D)},tag:0,get selectedTag(){return f(U)},select:ve=>l().setNum(S.HD0,ve),get locked(){return h()}});var Q=Z(G,2);const ae=_e(()=>[new re("None",0),new re("Zorro Board",1)]),z=_e(()=>l().getNum(S.HD1));je(Q,{name:"HD1",get items(){return f(ae)},tag:1,get selectedTag(){return f(z)},select:ve=>l().setNum(S.HD1,ve),get locked(){return h()}});var X=Z(Q,2);const J=_e(()=>[new re("None",0),new re("Zorro Board",1)]),ye=_e(()=>l().getNum(S.HD2));je(X,{name:"HD2",get items(){return f(J)},tag:2,get selectedTag(){return f(ye)},select:ve=>l().setNum(S.HD2,ve),get locked(){return h()}});var de=Z(X,2);const xe=_e(()=>[new re("None",0),new re("Zorro Board",1)]),we=_e(()=>l().getNum(S.HD3));je(de,{name:"HD3",get items(){return f(xe)},tag:3,get selectedTag(){return f(we)},select:ve=>l().setNum(S.HD3,ve),get locked(){return h()}}),ie(T,I)},$$slots:{default:!0}}),lt(()=>Rt(A,`Huhu ${o()??""}`)),ie(_,R)}),j(b),Pt(1,b,()=>kt),ie(a,b),it(),s()}var Jm=Re("<!> <!>",1),ep=Re("<!> <!> <!>",1),tp=Re("<div><!> <!> <!> <!> <!> <!></div>");function np(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(sn,"$config",n);Ut();var u=tp(),l=W(u);It(l,{name:"Blitter",children:(p,A)=>{const y=_e(()=>[new re("Low",0),new re("Medium",1),new re("High",2)]),w=_e(()=>o().getNum(S.BLITTER_ACCURACY));je(p,{name:"Accuracy",get items(){return f(y)},select:x=>o().setNum(S.BLITTER_ACCURACY,x),get selectedTag(){return f(w)}})},$$slots:{default:!0}});var h=Z(l,2);It(h,{name:"Chipset Features",children:(p,A)=>{var y=Jm(),w=ze(y);const x=_e(()=>[new re("Yes",1),new re("No",0)]),M=_e(()=>o().getNum(S.TODBUG));je(w,{name:"Emulate TOD Bug",get items(){return f(x)},select:I=>o().setNum(S.TODBUG,I),get selectedTag(){return f(M)}});var P=Z(w,2);const T=_e(()=>[new re("Yes",1),new re("No",0)]),v=_e(()=>o().getNum(S.PTR_DROPS));je(P,{name:"Emulate Dropped Register Writes",get items(){return f(T)},select:I=>o().setNum(S.PTR_DROPS,I),get selectedTag(){return f(v)}}),ie(p,y)},$$slots:{default:!0}});var b=Z(h,2);It(b,{name:"Timing",children:(p,A)=>{const y=_e(()=>[new re("Yes",1),new re("No",0)]),w=_e(()=>o().getNum(S.ECLOCK_SYNCING));je(p,{name:"Sync CIA Accesses With E-Clock",get items(){return f(y)},select:x=>o().setNum(S.ECLOCK_SYNCING,x),get selectedTag(){return f(w)}})},$$slots:{default:!0}});var m=Z(b,2);It(m,{name:"Floppy Drives",children:(p,A)=>{const y=_e(()=>[new re("Original",1),new re("Accelerated (2 x)",2),new re("Accelerated (4 x)",4),new re("Accelerated (8 x)",8),new re("Infinite",-1)]),w=_e(()=>o().getNum(S.DRIVE_SPEED));je(p,{name:"Drive Speed",get items(){return f(y)},select:x=>o().setNum(S.DRIVE_SPEED,x),get selectedTag(){return f(w)}})},$$slots:{default:!0}});var _=Z(m,2);It(_,{name:"Sprites",children:(p,A)=>{var y=ep(),w=ze(y);const x=_e(()=>[new re("Yes",1),new re("No",0)]),M=_e(()=>o().getNum(S.CLX_SPR_SPR));je(w,{name:"Sprite-Sprite Collision Detection",get items(){return f(x)},select:U=>o().setNum(S.CLX_SPR_SPR,U),get selectedTag(){return f(M)}});var P=Z(w,2);const T=_e(()=>[new re("Yes",1),new re("No",0)]),v=_e(()=>o().getNum(S.CLX_SPR_PLF));je(P,{name:"Sprite-Playfield Collision Detection",get items(){return f(T)},select:U=>o().setNum(S.CLX_SPR_PLF,U),get selectedTag(){return f(v)}});var I=Z(P,2);const G=_e(()=>[new re("Yes",1),new re("No",0)]),D=_e(()=>o().getNum(S.CLX_PLF_PLF));je(I,{name:"Playfield-Playfield Collision Detection",get items(){return f(G)},select:U=>o().setNum(S.CLX_PLF_PLF,U),get selectedTag(){return f(D)}}),ie(p,y)},$$slots:{default:!0}});var R=Z(_,2);It(R,{name:"Keyboard",children:(p,A)=>{const y=_e(()=>[new re("Yes",1),new re("No",0)]),w=_e(()=>o().getNum(S.ACCURATE_KEYBOARD));je(p,{name:"Transmit Keycodes Bit by Bit",get items(){return f(y)},select:x=>o().setNum(S.ACCURATE_KEYBOARD,x),get selectedTag(){return f(w)},tag:1})},$$slots:{default:!0}}),j(u),Pt(1,u,()=>kt),ie(a,u),it(),s()}var rp=Re("<!> <!> <!> <!>",1),ap=Re("<div><!> <!> <!></div>");function op(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(sn,"$config",n),u=()=>O(on,"$wasm",n);function l(x){o().set(S.RENDER_MODE,x),update()}function h(x){o().set(S.PALETTE,x),update()}function b(x){o().set(S.BRIGHTNESS,x),update()}function m(x){o().set(S.CONTRAST,x),update()}function _(x){o().set(S.SATURATION,x),update()}function R(x){o().set(S.FLICKER_WEIGHT,x),update()}Ut();var p=ap(),A=W(p);It(A,{name:"WebGL",children:(x,M)=>{const P=_e(()=>[new re("Smooth",ka.smooth),new re("Pixelated",ka.pixelated)]),T=_e(()=>o().getNum(S.RENDER_MODE));je(x,{name:"Render Mode",get items(){return f(P)},get selectedTag(){return f(T)},select:l})},$$slots:{default:!0}});var y=Z(A,2);It(y,{name:"Colors",children:(x,M)=>{var P=rp(),T=ze(P);const v=_e(()=>[new re("Color",u().PALETTE_COLOR),new re("Black and White",u().PALETTE_BLACK_WHITE),new re("Paper White",u().PALETTE_PAPER_WHITE),new re("Green",u().PALETTE_GREEN),new re("Amber",u().PALETTE_AMBER),new re("Sepia",u().PALETTE_SEPIA)]),I=_e(()=>o().getNum(S.PALETTE));je(T,{name:"Palette",get items(){return f(v)},get selectedTag(){return f(I)},select:h});var G=Z(T,2);const D=_e(()=>o().getNum(S.BRIGHTNESS));je(G,{name:"Brightness",min:0,max:100,get tag(){return u().OPT_BRIGHTNESS},get selectedTag(){return f(D)},select:b});var U=Z(G,2);const Q=_e(()=>o().getNum(S.CONTRAST));je(U,{name:"Contrast",min:0,max:100,get tag(){return u().OPT_CONTRAST},get selectedTag(){return f(Q)},select:m});var ae=Z(U,2);const z=_e(()=>o().getNum(S.SATURATION));je(ae,{name:"Saturation",min:0,max:100,get tag(){return u().OPT_SATURATION},get selectedTag(){return f(z)},select:_}),ie(x,P)},$$slots:{default:!0}});var w=Z(y,2);It(w,{name:"Interlace",children:(x,M)=>{const P=_e(()=>o().getNum(S.FLICKER_WEIGHT));je(x,{name:"Flicker Weight",min:0,max:100,tag:1e3,get selectedTag(){return f(P)},select:R})},$$slots:{default:!0}}),j(p),Pt(1,p,()=>kt),ie(a,p),it(),s()}var ip=Re("<!> <!>",1),sp=Re("<!> <!> <!> <!> <!> <!>",1),up=Re("<!> <!> <!> <!>",1),cp=Re("<div><!> <!> <!></div>");function lp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(sn,"$config",n),u=()=>O(on,"$wasm",n);Ut();var l=cp(),h=W(l);It(h,{name:"Sound Synthesis",children:(_,R)=>{var p=ip(),A=ze(p);const y=_e(()=>[new re("None",0),new re("Nearest",1),new re("Linear",2)]),w=_e(()=>o().getNum(S.SAMPLING_METHOD));je(A,{name:"Interpolation Method",get items(){return f(y)},select:T=>o().setNum(S.SAMPLING_METHOD,T),get selectedTag(){return f(w)}});var x=Z(A,2);const M=_e(()=>[new re("None",0),new re("A500",1),new re("A1000",2),new re("A1200",3),new re("Legacy Filter",4),new re("Low-pass only",5),new re("LED filter only",6),new re("High-pass only",7)]),P=_e(()=>o().get(S.FILTER_TYPE));je(x,{name:"Audio Filter",get items(){return f(M)},select:T=>o().set(S.FILTER_TYPE,T),get selectedTag(){return f(P)}}),ie(_,p)},$$slots:{default:!0}});var b=Z(h,2);It(b,{name:"Speakers",children:(_,R)=>{var p=sp(),A=ze(p);const y=_e(()=>o().get(S.AUDVOLL));je(A,{name:"Left Speaker Volume",get tag(){return u().OPT_AUDVOLL},get selectedTag(){return f(y)},select:Q=>o().set(S.AUDVOLL,Q),min:0,max:100});var w=Z(A,2);const x=_e(()=>o().get(S.AUDVOLR));je(w,{name:"Right Speaker Volume",get tag(){return u().OPT_AUDVOLR},get selectedTag(){return f(x)},select:Q=>o().set(S.AUDVOLR,Q),min:0,max:100});var M=Z(w,2);const P=_e(()=>o().get(S.AUDVOL0));je(M,{name:"Paula Channel 0 Volume",tag:0,get selectedTag(){return f(P)},select:Q=>o().set(S.AUDVOL0,Q),min:0,max:100});var T=Z(M,2);const v=_e(()=>o().get(S.AUDVOL1));je(T,{name:"Paula Channel 1 Volume",tag:1,get selectedTag(){return f(v)},select:Q=>o().set(S.AUDVOL1,Q),min:0,max:100});var I=Z(T,2);const G=_e(()=>o().get(S.AUDVOL2));je(I,{name:"Paula Channel 2 Volume",tag:2,get selectedTag(){return f(G)},select:Q=>o().set(S.AUDVOL2,Q),min:0,max:100});var D=Z(I,2);const U=_e(()=>o().get(S.AUDVOL3));je(D,{name:"Paula Channel 3 Volume",tag:3,get selectedTag(){return f(U)},select:Q=>o().set(S.AUDVOL3,Q),min:0,max:100}),ie(_,p)},$$slots:{default:!0}});var m=Z(b,2);It(m,{name:"Drive Sounds",children:(_,R)=>{var p=up(),A=ze(p);const y=_e(()=>o().get(S.STEP_VOLUME));je(A,{name:"Head Step Volume",get tag(){return u().OPT_STEP_VOLUME},get selectedTag(){return f(y)},select:I=>o().set(S.STEP_VOLUME,I),min:0,max:100});var w=Z(A,2);const x=_e(()=>o().get(S.POLL_VOLUME));je(w,{name:"Poll Disk Volume",get tag(){return u().OPT_POLL_VOLUME},get selectedTag(){return f(x)},select:I=>o().set(S.POLL_VOLUME,I),min:0,max:100});var M=Z(w,2);const P=_e(()=>o().get(S.INSERT_VOLUME));je(M,{name:"Insert Disk Volume",get tag(){return u().OPT_INSERT_VOLUME},get selectedTag(){return f(P)},select:I=>o().set(S.INSERT_VOLUME,I),min:0,max:100});var T=Z(M,2);const v=_e(()=>o().get(S.EJECT_VOLUME));je(T,{name:"Eject Disk Volume",get tag(){return u().OPT_EJECT_VOLUME},get selectedTag(){return f(v)},select:I=>o().set(S.EJECT_VOLUME,I),min:0,max:100}),ie(_,p)},$$slots:{default:!0}}),j(l),Pt(1,l,()=>kt),ie(a,l),it(),s()}var fp=Re('<div class="absolute top-0 left-0 w-full h-full flex overflow-auto text-base-content"><div class="w-16 mr-1"></div> <div class="bg-base-100/75 opacity-100 mt-0 p-4 grow h-full overflow-auto"><div class="font-sofia-extra"><div class="flex border-0 border-red-500 justify-between"><div class="text-5xl">SETTINGS</div></div> <div class="flex border-0 border-red-500 justify-between"><div class="float space-x-4 mb-6 border-0"><!> <!> <!> <!> <!></div> <div class="flex justify-between mb-6 border-0 w-[18rem]"><button class="btn btn-outline text-2xl font-normal w-[8.5rem]">Save</button> <button class="btn btn-outline text-2xl font-normal w-[8.5rem]">Reset</button></div></div></div> <!></div></div>');function dp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(sn,"$config",n),u=()=>O(Ht,"$layer",n);let l=yt("GENERAL");function h(){switch(f(l)){case"GENERAL":o().saveGeneralSettings();break;case"MACHINE":o().saveMachineSettings();break;case"COMPATIBILITY":o().saveCompatibilitySettings();break;case"AUDIO":o().saveAudioSettings();break;case"VIDEO":o().saveVideoSettings();break}}function b(){switch(f(l)){case"GENERAL":o().restoreGeneralDefaults();break;case"MACHINE":o().restoreMachineDefaults();break;case"COMPATIBILITY":o().restoreCompatibilityDefaults();break;case"AUDIO":o().restoreAudioDefaults();break;case"VIDEO":o().restoreVideoDefaults();break}}Ut();var m=St(),_=ze(m);{var R=p=>{var A=fp(),y=Z(W(A),2),w=W(y),x=Z(W(w),2),M=W(x),P=W(M);Sa(P,{name:"GENERAL",get active(){return f(l)},onclick:()=>Ve(l,"GENERAL")});var T=Z(P,2);Sa(T,{name:"MACHINE",get active(){return f(l)},onclick:()=>Ve(l,"MACHINE")});var v=Z(T,2);Sa(v,{name:"COMPATIBILITY",get active(){return f(l)},onclick:()=>Ve(l,"COMPATIBILITY")});var I=Z(v,2);Sa(I,{name:"VIDEO",get active(){return f(l)},onclick:()=>Ve(l,"VIDEO")});var G=Z(I,2);Sa(G,{name:"AUDIO",get active(){return f(l)},onclick:()=>Ve(l,"AUDIO")}),j(M);var D=Z(M,2),U=W(D),Q=Z(U,2);j(D),j(x),j(w);var ae=Z(w,2);{var z=J=>{Gm(J,{})},X=(J,ye)=>{{var de=we=>{Zm(we,{})},xe=(we,ve)=>{{var Te=se=>{np(se,{})},ne=(se,ce)=>{{var Ee=Ne=>{op(Ne,{})},Ie=(Ne,ue)=>{{var Pe=He=>{lp(He,{})};Xe(Ne,He=>{f(l)==="AUDIO"&&He(Pe)},ue)}};Xe(se,Ne=>{f(l)==="VIDEO"?Ne(Ee):Ne(Ie,!1)},ce)}};Xe(we,se=>{f(l)==="COMPATIBILITY"?se(Te):se(ne,!1)},ve)}};Xe(J,we=>{f(l)==="MACHINE"?we(de):we(xe,!1)},ye)}};Xe(ae,J=>{f(l)==="GENERAL"?J(z):J(X,!1)})}j(y),j(A),rn("click",U,h),rn("click",Q,b),Pt(3,A,()=>kt),ie(p,A)};Xe(_,p=>{u()===dt.settings&&p(R)})}ie(a,m),it(),s()}var vp=Re('<div class="flex h-8"><div><!></div> <div class="h-full w-1 bg-black"></div></div>');function ru(a,r){let n=he(r,"bg",3,"");var s=vp(),o=W(s),u=W(o);zn(u,()=>r.children??Sn),j(o),Ps(2),j(s),lt(()=>We(o,1,`flex h-full w-16 items-center justify-center ${n()??""}`)),ie(a,s)}var gp=Re('<img alt="Floppy icon"/> <div> </div>',1);function hp(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(En,"$darkTheme",n),u=()=>O(kn,"$invert",n);let l=he(r,"tag",3,0),h=he(r,"cyl",3,0),b=he(r,"disk",3,!0),m=he(r,"motor",3,!1),_=he(r,"writing",3,!1),R=he(r,"unsaved",3,!1),p=he(r,"wp",3,!1),A=he(r,"select",3,()=>{});const y="",w="bg-gradient-to-b from-green-700 to-green-500",x="bg-gradient-to-b from-red-700 to-red-500",M=tt(()=>p()?"icons/disk-protected.png":"icons/disk.png"),P="icons/floppy-drive.png",T=tt(()=>b()?f(M):P),v=tt(()=>m()?_()?x:w:y),I=tt(()=>R()?"opacity-40":"opacity-70"),G=tt(()=>o()?"text-gray-300":"text-black"),D=tt(()=>{let U=[new re("Insert",0),new re("Eject",1)];return U[0].isEnabled=!0,U[0]=U[0],U[1].isEnabled=b(),U[1]=U[1],U});nu(a,{get items(){return f(D)},get tag(){return l()},select:A(),listStyle:"menu menu-compact rounded p-0 text-sm w-32",children:(U,Q)=>{ru(U,{get bg(){return f(v)},children:(ae,z)=>{var X=gp(),J=ze(X),ye=Z(J,2),de=W(ye,!0);j(ye),lt(()=>{We(J,1,`h-full border-0 object-scale-down py-1.5 pr-1 ${u()??""} ${f(I)??""}`),Nt(J,"src",f(T)),We(ye,1,`w-6 items-center border-0 pl-1 text-left text-sm leading-none ${f(G)??""}`),Rt(de,h())}),ie(ae,X)},$$slots:{default:!0}})},$$slots:{default:!0}}),it(),s()}var mp=Re('<img alt="Floppy icon"/> <div> </div>',1);function pp(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(En,"$darkTheme",n),u=()=>O(sa,"$poweredOn",n),l=()=>O(kn,"$invert",n);let h=he(r,"tag",3,0),b=he(r,"cyl",3,0),m=he(r,"reading",3,!1),_=he(r,"writing",3,!1),R=he(r,"unsaved",3,!1),p=he(r,"select",3,()=>{});const A="",y="bg-gradient-to-b from-green-700 to-green-500",w="bg-gradient-to-b from-red-700 to-red-500",x="icons/hard-drive.png",M=tt(()=>x),P=tt(()=>m()?y:_()?w:A),T=tt(()=>R()?"opacity-40":"opacity-70"),v=tt(()=>o()?"text-gray-300":"text-black"),I=tt(()=>{let G=[new re("Attach",0)];return G[0].isEnabled=!u(),G[0]=G[0],G});nu(a,{get items(){return f(I)},get tag(){return h()},select:p(),listStyle:"menu menu-compact rounded p-0 text-sm w-32",children:(G,D)=>{ru(G,{get bg(){return f(P)},children:(U,Q)=>{var ae=mp(),z=ze(ae);Nt(z,"src",f(M));var X=Z(z,2),J=W(X,!0);j(X),lt(()=>{We(z,1,`h-full border-0 object-scale-down py-1.5 pr-1 ${l()??""} ${f(T)??""}`),We(X,1,`w-6 items-center border-0 pl-1 text-left text-sm leading-none ${f(v)??""}`),Rt(J,b())}),ie(U,ae)},$$slots:{default:!0}})},$$slots:{default:!0}}),it(),s()}var _p=Re('<div class="text-primary-content flex h-full w-20 items-center justify-center text-xs"> </div>'),yp=Re('<div class="flex h-8"><div class="h-full w-1 bg-black"></div> <!></div>');function bp(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(Vl,"$cpu",n),u=()=>O(Hl,"$agnus",n),l=()=>O(Mn,"$amiga",n),h=()=>O(on,"$wasm",n),b=()=>O(Ms,"$audioPort",n);let m=he(r,"acceleration",15,1),_=he(r,"mhz",15,0),R=he(r,"emuFps",15,0),p=he(r,"gpuFps",15,0),A=he(r,"latchedTimestamp",15,0),y=he(r,"latchedCycle",15,0),w=he(r,"latchedEmuFrame",15,0),x=he(r,"latchedGpuFrame",15,0),M=Ct(0),P=Ct(""),T=Ct(Ho([new re("Amiga Frequency",0),new re("Amiga Refresh Rate",1),new re("Host CPU Load",2),new re("Host GPU Refresh Rate",3),new re("Audio Buffer Fill Level",4)]));sr(()=>{A(Date.now()),f(T)[0].isSelected=!0});function v(ae,z){if(ae%10!=0)return;let X=Date.now(),J=(X-A())/1e3,ye=o().getClock(),de=u().frameCount(),xe=ae;if(ye>=y()){const we=(ye-y())/1e6,ve=.5;_(ve*(we/J)+(1-ve)*_())}if(ae%25==0&&de>=w()){const we=de-w(),ve=.9;R(ve*(we/J)+(1-ve)*R())}if(ae%25==0&&xe>=x()){const we=xe-x(),ve=.9;p(ve*(we/J)+(1-ve)*p())}ae%25==0&&I(),A(X),y(ye),w(de),x(xe)}function I(){switch(f(M)){case 0:m(l().getConfig(h().OPT_CPU_OVERCLOCKING)),m()==0&&m(1),Ve(P,(_()*m()).toFixed(2)+" MHz");break;case 1:Ve(P,R().toFixed(0)+" Hz");break;case 2:Ve(P,l().cpuLoad()+"%");break;case 3:Ve(P,p().toFixed(0)+" Hz");break;case 4:Ve(P,b().audioFillLevel()+"%");break;default:Ve(P,"---");break}}function G(ae){Ve(M,ae,!0),f(T).forEach(function(z){z.isSelected=z.tag==f(M)}),Ve(T,f(T),!0),I()}var D=yp(),U=Z(W(D),2);Bf(U,{get items(){return f(T)},get selectedTag(){return f(M)},select:G,dropdownStyle:"dropdown-end",listStyle:"menu menu-compact rounded text-sm w-64",children:(ae,z)=>{var X=_p(),J=W(X,!0);j(X),lt(()=>Rt(J,f(P))),ie(ae,X)},$$slots:{default:!0}}),j(D),ie(a,D);var Q=it({update:v});return s(),Q}var wp=Re('<button type="button"><img alt="Status bar icon"/></button> <!>',1);function Ro(a,r){const[n,s]=vt(),o=()=>O(En,"$darkTheme",n);let u=he(r,"src",3,"");var l=wp(),h=ze(l);h.__click=function(..._){r.onclick?.apply(this,_)};var b=W(h);j(h);var m=Z(h,2);zn(m,()=>r.children??Sn),lt(()=>{We(b,1,`h-8 w-8 border-0 object-scale-down p-1.5 ${o()?"invert":""} opacity-70`),Nt(b,"src",u())}),ie(a,l),s()}Tn(["click"]);function Ep(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Gl,"$warpMode",n),u=()=>O(Do,"$warp",n),l=()=>O(sn,"$config",n),h=()=>O(Mr,"$proxy",n),b=yt();function m(R,p){switch(R){case 0:return p?"icons/warp-auto-on.png":"icons/warp-auto-off.png";case 1:return"icons/warp-never.png";case 2:return"icons/warp-always.png";default:return""}}function _(){let R=l().get(S.WARP_MODE);l().set(S.WARP_MODE,(R+1)%3),h().updateStateVariables()}An(()=>(o(),u()),()=>{Ve(b,m(o(),u()))}),Lr(),Ut(),Ro(a,{get src(){return f(b)},onclick:_}),it(),s()}var Sp=Re('<button type="button" class="flex h-full w-16 justify-center" id="vamigaButton"><img class="h-full" src="icons/vamigaIcon.png" alt="vAmiga Icon"/></button>'),Ap=Re('<!> <div><!> <div class="flex grow border-0 border-red-500"><!> <!></div> <!> <!> <!> <!> <!></div>',1);function Tp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(jl,"$muted",n),u=()=>O(Do,"$warp",n),l=()=>O(Wl,"$track",n),h=()=>O(zl,"$halted",n),b=()=>O(ea,"$audio",n),m=()=>O(ko,"$showSidebar",n),_=()=>O(Mn,"$amiga",n),R=()=>O(Oo,"$dfConnected",n),p=()=>O(Is,"$dfHasDisk",n),A=()=>O(Zl,"$dfCylinder",n),y=()=>O(Ql,"$dfMotor",n),w=()=>O(Xl,"$dfWriting",n),x=()=>O(Yl,"$dfUnsaved",n),M=()=>O(ql,"$dfProtected",n),P=()=>O($s,"$hdConnected",n),T=()=>O(tf,"$hdCylinder",n),v=()=>O(ef,"$hdReading",n),I=()=>O(Jl,"$hdWriting",n),G=()=>O(ev,"$hdUnsaved",n),D=yt(),U=yt(),Q=yt();let ae=yt(),z=yt();function X(De,be){f(ae)?.update(De,be)}function J(De){De.preventDefault(),b().setup(),fe(ko,!m()),m()||fe(Ht,dt.none)}function ye(De,be){switch(console.log("dfMenuAction",De,be),be){case 0:f(z).open().then(function(Me){_().insertDisk(Me,De),_().running||_().run()},function(Me){console.log("error",Me)});break;case 1:_().ejectDisk(De);break;default:console.warn("Invalid menu item",be)}}function de(De,be){switch(be){case 0:f(z).open().then(function(Me){console.log("Attaching hard drive",Me),_().attachHardDrive(Me,De)},function(Me){console.log("error",Me)});break;default:console.warn("Invalid menu item",be)}}An(()=>(o(),u()),()=>{Ve(D,o()||u())}),An(()=>l(),()=>{Ve(U,l())}),An(()=>h(),()=>{Ve(Q,h())}),Lr(),Ut();var xe=Ap(),we=ze(xe);Kt(df(we,{$$legacy:!0}),De=>Ve(z,De),()=>f(z));var ve=Z(we,2);We(ve,1,"relative z-50 mb-1 flex h-8 bg-gradient-to-t from-primary to-primary/80");var Te=W(ve);ru(Te,{children:(De,be)=>{var Me=Sp();rn("click",Me,J),ie(De,Me)},$$slots:{default:!0}});var ne=Z(Te,2),se=W(ne);na(se,0,()=>Array(4),ta,(De,be,Me)=>{var et=St(),gt=ze(et);{var Et=nt=>{hp(nt,{tag:Me,get disk(){return p(),Tt(()=>p()[Me])},get cyl(){return A(),Tt(()=>A()[Me])},get motor(){return y(),Tt(()=>y()[Me])},get writing(){return w(),Tt(()=>w()[Me])},get unsaved(){return x(),Tt(()=>x()[Me])},get wp(){return M(),Tt(()=>M()[Me])},select:pe=>ye(Me,pe)})};Xe(gt,nt=>{R(),Tt(()=>R()[Me])&&nt(Et)})}ie(De,et)});var ce=Z(se,2);na(ce,0,()=>Array(4),ta,(De,be,Me)=>{var et=St(),gt=ze(et);{var Et=nt=>{pp(nt,{tag:Me,get cyl(){return T(),Tt(()=>T()[Me])},get reading(){return v(),Tt(()=>v()[Me])},get writing(){return I(),Tt(()=>I()[Me])},get unsaved(){return G(),Tt(()=>G()[Me])},select:pe=>de(Me,pe)})};Xe(gt,nt=>{P(),Tt(()=>P()[Me])&&nt(Et)})}ie(De,et)}),j(ne);var Ee=Z(ne,2);{var Ie=De=>{Ro(De,{src:"icons/halt.png"})};Xe(Ee,De=>{f(Q)&&De(Ie)})}var Ne=Z(Ee,2);{var ue=De=>{Ro(De,{src:"icons/debug.png"})};Xe(Ne,De=>{f(U)&&De(ue)})}var Pe=Z(Ne,2);{var He=De=>{Ro(De,{src:"icons/mute.png"})};Xe(Pe,De=>{f(D)&&De(He)})}var me=Z(Pe,2);Ep(me,{});var q=Z(me,2);Kt(bp(q,{$$legacy:!0}),De=>Ve(ae,De),()=>f(ae)),j(ve),ie(a,xe),Ye(r,"update",X);var ct=it({update:X});return s(),ct}var Rp=Re('<div class="absolute top-0 left-0 w-full h-full flex overflow-auto"><div class="w-16 mr-1"></div> <div class="bg-gray-500/75 grow h-full overflow-auto"><textarea readonly="" style="resize: none; font-variant-ligatures: none" class="font-azeret text-base focus:border-transparent focus:outline-none focus:ring-0 text-white bg-transparent w-full h-full p-2"></textarea></div></div>');function xp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Zi,"$MsgConsoleClose",n),u=()=>O(Ht,"$layer",n),l=()=>O(Ji,"$MsgConsoleUpdate",n),h=()=>O(nf,"$retroShell",n);let b=yt();function m(A){if(A.preventDefault(),A.ctrlKey){switch(A.key){case"k":h().pressCut();break;case"a":h().pressHome();break}return}switch(A.key){case"ArrowUp":h().pressUp();break;case"ArrowDown":h().pressDown();break;case"ArrowLeft":h().pressLeft();break;case"ArrowRight":h().pressRight();break;case"Home":h().pressHome();break;case"End":h().pressEnd();break;case"Backspace":h().pressBackspace();break;case"Delete":h().pressDelete();break;case"Enter":A.shiftKey?h().pressShiftReturn():h().pressReturn();break;case"Tab":h().pressTab();break;default:A.key.length==1&&h().pressKey(A.key.charCodeAt(0))}}An(()=>(o(),dt),()=>{o()&&fe(Ht,dt.none)}),An(()=>(l(),h(),f(b)),()=>{if(l()){let A=h().getCursorRel();f(b)&&(ji(b,f(b).value=h().getText()),f(b).focus(),f(b).setSelectionRange(f(b).value.length+A-1,f(b).value.length+A),ji(b,f(b).scrollTop=f(b).scrollHeight))}}),Lr(),Ut();var _=St(),R=ze(_);{var p=A=>{var y=Rp(),w=Z(W(y),2),x=W(w);Kt(x,M=>Ve(b,M),()=>f(b)),j(w),j(y),rn("keydown",x,m),Pt(3,y,()=>kt),ie(A,y)};Xe(R,A=>{u(),Kn(dt),Tt(()=>u()===dt.shell)&&A(p)})}ie(a,_),it(),s()}var Pp=Re('<div class="flex h-screen w-screen flex-grow flex-col overflow-clip" role="region"><!></div>');function kp(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(on,"$wasm",n),u=()=>O(Mn,"$amiga",n),l=()=>O(Mr,"$proxy",n),h=()=>O(Pa,"$initialized",n);function b(P){P.preventDefault(),P.dataTransfer}function m(P){P.preventDefault()}function _(P){}async function R(P){if(P.preventDefault(),!P.dataTransfer||!P.dataTransfer.items||P.dataTransfer.items.length!==1)return;let T=P.dataTransfer.items[0];if(T.kind!=="file")return;const v=T.getAsFile();if(!v)return;const I=v.name;console.log("Dropped file:",I);let G=await v.arrayBuffer(),D=new Uint8Array(G);await v.arrayBuffer();let U=I;switch(console.log("tmp name:",U),console.log("WASM.FS",o().FS),o().FS.writeFile(U,D),console.log("Checking type..."),u().getFileType(U)){case o().FILETYPE_ROM:await p(D);return;case o().FILETYPE_ADF:case o().FILETYPE_EADF:case o().FILETYPE_DMS:case o().FILETYPE_EXE:A(D);return;case o().FILETYPE_HDF:y(D);return;default:console.warn("Unsupported file format");return}}async function p(P){l().addRom(P)}function A(P){fe(es,P),fe(ts,"floppy"),fe(Ht,dt.dropzone)}function y(P){fe(es,P),fe(ts,"harddrive"),fe(Ht,dt.dropzone)}var w=Pp(),x=W(w);{var M=P=>{var T=St(),v=ze(T);zn(v,()=>r.children??Sn),ie(P,T)};Xe(x,P=>{h()&&P(M)})}j(w),rn("dragenter",w,b),rn("dragleave",w,_),rn("dragover",w,m),rn("drop",w,R),ie(a,w),it(),s()}var Dp=Qt('<path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path>');function Op(a,r){const n=Lt(r,["children","$$slots","$$events","$$legacy"]);cn(a,un({viewBox:"0 0 352 512"},()=>n,{children:(s,o)=>{var u=Dp();ie(s,u)},$$slots:{default:!0}}))}async function Cp(a,r,n,s){a.preventDefault(),await r().setup(),n()(s.name)}var Mp=Re('<div class="text-primary-content h-full w-full opacity-50"><!></div>'),Ip=Re('<img alt="Icon"/>'),$p=Re('<img alt="Icon"/>'),Np=Re('<div class="bg-primary/90 rounded-xl p-4"><div class="flex flex-col items-center"><div role="button" tabindex="0"><!></div> <div class="font-azaret text-primary-content text-xl"> </div></div></div>');function gr(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(ea,"$audio",n),u=()=>O(kn,"$invert",n);let l=he(r,"enabled",3,!1),h=he(r,"selected",7,!1),b=he(r,"icon1",3,"icons/disk.png"),m=he(r,"icon2",3,"icons/disk.png");he(r,"opacity",3,"opacity-50");let _=he(r,"select",3,()=>{}),R=tt(()=>h()?"opacity-100":"opacity-50"),p=tt(()=>l()?"opacity-100":"opacity-50");function A(D){D.preventDefault(),l()&&h(!0)}function y(D){D.preventDefault(),h(!1)}var w=Np(),x=W(w),M=W(x);M.__mousedown=[Cp,o,_,r];var P=W(M);{var T=D=>{var U=Mp(),Q=W(U);Op(Q,{}),j(U),ie(D,U)},v=(D,U)=>{{var Q=z=>{var X=Ip();lt(()=>{We(X,1,`${u()??""} ${f(R)??""}`),Nt(X,"src",b())}),ie(z,X)},ae=(z,X)=>{{var J=ye=>{var de=$p();lt(()=>{We(de,1,`${u()??""} ${f(R)??""}`),Nt(de,"src",m())}),ie(ye,de)};Xe(z,ye=>{m()!==""&&ye(J)},X)}};Xe(D,z=>{h()?z(Q):z(ae,!1)},U)}};Xe(P,D=>{l()?D(v,!1):D(T)})}j(M);var I=Z(M,2),G=W(I,!0);j(I),j(x),j(w),lt(()=>{We(M,1,`border-primary-content h-32 w-32 rounded-xl border-2 p-5 ${f(p)??""}`),Rt(G,r.name)}),rn("mouseenter",M,A),rn("mouseleave",M,y),ie(a,w),it(),s()}Tn(["mousedown"]);var Lp=Re("<!> <!> <!> <!>",1),Up=Re("<!> <!> <!> <!>",1),Fp=Re('<div class="absolute top-10 left-0 flex w-screen justify-center"><div class="relative flex items-center justify-center space-x-4 rounded-xl p-4"><!></div></div>');function Kp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(es,"$dragItem",n),u=()=>O(Mn,"$amiga",n),l=()=>O(Ht,"$layer",n),h=()=>O(ts,"$dragType",n),b=()=>O(Is,"$dfHasDisk",n),m=()=>O(Oo,"$dfConnected",n),_=()=>O($s,"$hdConnected",n);function R(x){o()&&(u().insertDisk(o(),x),u().running||u().run()),fe(Ht,dt.none)}function p(x){o()&&(u().attachHardDrive(o(),x),u().running||u().run()),fe(Ht,dt.none)}Ut();var A=St(),y=ze(A);{var w=x=>{var M=Fp(),P=W(M),T=W(P);{var v=G=>{var D=Lp(),U=ze(D);const Q=_e(()=>b()[0]?"icons/disk.png":"");gr(U,{id:0,icon1:"icons/disk.png",get icon2(){return f(Q)},name:"DF0",get enabled(){return m()[0]},select:()=>R(0)});var ae=Z(U,2);const z=_e(()=>b()[1]?"icons/disk.png":"");gr(ae,{id:1,icon1:"icons/disk.png",get icon2(){return f(z)},name:"DF1",get enabled(){return m()[1]},select:()=>R(1)});var X=Z(ae,2);const J=_e(()=>b()[1]?"icons/disk.png":"");gr(X,{id:2,icon1:"icons/disk.png",get icon2(){return f(J)},name:"DF2",get enabled(){return m()[2]},select:()=>R(2)});var ye=Z(X,2);const de=_e(()=>b()[1]?"icons/disk.png":"");gr(ye,{id:3,icon1:"icons/disk.png",get icon2(){return f(de)},name:"DF3",get enabled(){return m()[3]},select:()=>R(3)}),ie(G,D)},I=G=>{var D=Up(),U=ze(D);gr(U,{id:0,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD0",get enabled(){return _()[0]},select:()=>p(0)});var Q=Z(U,2);gr(Q,{id:1,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD1",get enabled(){return _()[1]},select:()=>p(1)});var ae=Z(Q,2);gr(ae,{id:2,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD2",get enabled(){return _()[2]},select:()=>p(2)});var z=Z(ae,2);gr(z,{id:3,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD3",get enabled(){return _()[3]},select:()=>p(3)}),ie(G,D)};Xe(T,G=>{h()==="floppy"?G(v):G(I,!1)})}j(P),j(M),Pt(3,M,()=>kt),ie(x,M)};Xe(y,x=>{l()===dt.dropzone&&x(w)})}ie(a,A),it(),s()}var Bp=Re('<div><div class="h-24 w-full border-none flex flex-col justify-center text-lg font-azeret text-center"><p class="p-1"> </p> <p class="p-1"> </p></div></div>');function Vp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(on,"$wasm",n),u=()=>O(ns,"$errno",n),l=()=>O(rf,"$enums",n),h=()=>O(rs,"$what",n),b=yt(),m=yt();let _=yt(!1),R=yt(!0);An(()=>o(),()=>{Ve(b,o()!=null)}),An(()=>(u(),f(b),f(_),f(R)),()=>{u()&&f(b)&&!f(_)&&(Ve(_,!0),setInterval(()=>{Ve(R,!f(R))},800))}),An(()=>f(R),()=>{Ve(m,f(R)?"border-red-600":"border-black")}),Lr(),Ut();var p=St(),A=ze(p);{var y=w=>{var x=Bp(),M=W(x),P=W(M),T=W(P);j(P);var v=Z(P,2),I=W(v,!0);j(v),j(M),j(x),lt(G=>{We(x,1,`relative flex justify-center bg-black text-red-600 border-[10px] ${f(m)??""}`),Rt(T,`Emulator failure. Uncaught exception ${u()??""} (${G??""})`),Rt(I,h())},[()=>(l(),u(),Tt(()=>l().ErrorCodeKey(u())))],_e),ie(w,x)};Xe(A,w=>{f(_)&&w(y)})}ie(a,p),it(),s()}function Hp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(on,"$wasm",n),u=()=>O(ea,"$audio",n),l=()=>O(Mn,"$amiga",n),h=()=>O(sn,"$config",n),b=()=>O(Wi,"$memory",n),m=()=>O(Mu,"$df0",n),_=()=>O(Iu,"$df1",n),R=()=>O($u,"$df2",n),p=()=>O(Nu,"$df3",n),A=()=>O(Lu,"$diskController",n),y=()=>O(Uu,"$hd0",n),w=()=>O(Fu,"$hd1",n),x=()=>O(Ku,"$hd2",n),M=()=>O(Bu,"$hd3",n),P=()=>O(Vu,"$paula",n),T=()=>O(Pa,"$initialized",n),v=()=>O(Do,"$warp",n),I=()=>O(el,"$MsgNone",n),G=()=>O(Qi,"$MsgConfig",n),D=()=>O(Jc,"$MsgPower",n),U=()=>O(Zc,"$MsgRun",n),Q=()=>O(Qc,"$MsgPause",n),ae=()=>O(Xc,"$MsgStep",n),z=()=>O(Yc,"$MsgReset",n),X=()=>O(qc,"$MsgShutdown",n),J=()=>O(zc,"$MsgAbort",n),ye=()=>O(Wc,"$MsgWarp",n),de=()=>O(jc,"$MsgTrack",n),xe=()=>O(Gc,"$MsgMute",n),we=()=>O(Hc,"$MsgPowerLedOn",n),ve=()=>O(Vc,"$MsgPowerLedDim",n),Te=()=>O(Bc,"$MsgPowerLedOff",n),ne=()=>O(Zi,"$MsgConsoleClose",n),se=()=>O(Ji,"$MsgConsoleUpdate",n),ce=()=>O(Kc,"$MsgConsoleDebugger",n),Ee=()=>O(Fc,"$MsgScriptDone",n),Ie=()=>O(Uc,"$MsgScriptPause",n),Ne=()=>O(Lc,"$MsgScriptAbort",n),ue=()=>O(Nc,"$MsgScriptWakeup",n),Pe=()=>O($c,"$MsgVideoFormat",n),He=()=>O(Ic,"$MsgOverclocking",n),me=()=>O(Mc,"$MsgBreakpointReached",n),q=()=>O(Cc,"$MsgBreakpointUpdated",n),ct=()=>O(Oc,"$MsgWatchpointReached",n),De=()=>O(Dc,"$MsgWatchpointUpdated",n),be=()=>O(kc,"$MsgCatchpointReached",n),Me=()=>O(Pc,"$MsgCatchpointUpdated",n),et=()=>O(xc,"$MsgSwTrapReached",n),gt=()=>O(Rc,"$MsgCpuHalt",n),Et=()=>O(Tc,"$MsgCopperBpReached",n),nt=()=>O(Ac,"$MsgCopperBpUpdated",n),pe=()=>O(Sc,"$MsgCopperWpReached",n),ge=()=>O(Ec,"$MsgCopperWpUpdated",n),ht=()=>O(wc,"$MsgViewport",n),Zt=()=>O(bc,"$MsgMemLayout",n),ln=()=>O(yc,"$MsgDriveConnect",n),$n=()=>O(_c,"$MsgDriveSelect",n),fn=()=>O(pc,"$MsgDriveRead",n),dn=()=>O(mc,"$MsgDriveWrite",n),Wt=()=>O(hc,"$MsgDriveLed",n),Hn=()=>O(gc,"$MsgDriveMotor",n),Rn=()=>O(vc,"$MsgDriveStep",n),Zn=()=>O(dc,"$MsgDrivePoll",n),tn=()=>O(fc,"$MsgDiskInsert",n),vn=()=>O(lc,"$MsgDiskEject",n),xn=()=>O(cc,"$MsgDiskProtected",n),gn=()=>O(uc,"$MsgHdcConnect",n),Jt=()=>O(sc,"$MsgHdcState",n),Ke=()=>O(ic,"$MsgHdrStep",n),Gt=()=>O(oc,"$MsgHdrRead",n),Nn=()=>O(ac,"$MsgHdrWrite",n),Le=()=>O(rc,"$MsgHdrIdle",n),oe=()=>O(nc,"$MsgCtrlAmigaAmiga",n),Ge=()=>O(zi,"$MsgShaking",n),mt=()=>O(tc,"$MsgSerIn",n),Bt=()=>O(ec,"$MsgSerOut",n),za=()=>O(Ju,"$MsgAutoSnapshotTaken",n),la=()=>O(Zu,"$MsgUserSnapshotTaken",n),ti=()=>O(Qu,"$MsgSnapshotRestored",n),ni=()=>O(Xu,"$MsgRecordingStarted",n),ur=()=>O(Yu,"$MsgRecordingStopped",n),cr=()=>O(qu,"$MsgRecordingAborted",n),fa=()=>O(zu,"$MsgDmaDebug",n),Fr=()=>O(Wu,"$MsgSrvState",n),_t=()=>O(ju,"$MsgSrvReceive",n),Dt=()=>O(Gu,"$MsgSrvSend",n),ri=()=>O(Hu,"$MsgAlarm",n);sr(()=>{console.log("Proxy::onMount()"),Zd(on,Tt(o).processMsg=Un,Tt(o)),mn()});async function Ar(qe){await u().setup();try{console.log("Showcase:",qe.title),l().powerOff(),hn(qe.roms),h().set(S.CHIP_RAM,qe.memory[0]),h().set(S.SLOW_RAM,qe.memory[1]),h().set(S.FAST_RAM,qe.memory[2]),h().set(S.DF1,qe.adf.length>1);for(let Be=0;Be<qe.adf.length;Be++)await Gn(qe.adf[Be],Be);h().set(S.WARP_MODE,qe.warp),console.log("Launchine emulator..."),l().run(),qe.title=="Absolute Inebriation"&&(console.log("Scheduling disk change (inebriation)"),l().setAlarmAbs(3e3,1)),qe.title=="Eon"&&(console.log("Scheduling disk change (eon)"),l().setAlarmAbs(7600,2)),console.log("Done")}catch(Be){throw console.log("CATCHED "+Be),Be}}function lr(){console.error("Exception "+l().errorCode()+": "+l().what())}async function Gn(qe,Be){try{console.log("Fetching adf/"+qe);let pn=await(await fetch("adf/"+qe)).arrayBuffer(),Xa=new Uint8Array(pn);l().insertDisk(Xa,Be),console.log("Disk inserted")}catch{lr()}}async function Tr(qe){if(qe==0)return b().deleteRom(),b().deleteExt(),fe(tl,qe),!0;try{const Be=await On.roms.get(qe);return Be?(Be?.rom?(b().loadRom(Be.rom,Be.rom.length),fe(tl,qe)):b().deleteRom(),Be?.ext?b().loadExt(Be.ext,Be.ext.length):b().deleteExt(),!0):!1}catch(Be){return console.log("installRom failed: ",Be),!1}}async function hn(qe){for(const Be of qe)if(await Tr(Be))return!0;return!1}async function Jn(qe){let Be=b().analyzeRom(qe,qe.byteLength);if(Be.crc32){try{const Ot=Be.title,pn=await On.roms.add({crc32:Be.crc32,title:Be.title,version:Be.version,released:Be.released,model:Be.model,isAros:Be.vendor==o().RomVendor.AROS,isDiag:Be.vendor==o().RomVendor.DIAG,isCommodore:Be.vendor==o().RomVendor.COMMODORE,isHyperion:Be.vendor==o().RomVendor.HYPERION,isUnknown:Be.vendor==o().RomVendor.UNKNOWN,isPatched:Be.isPatched,rom:qe,ext:null,extStart:0});console.log(`${Ot} successfully added with id ${pn}`)}catch(Ot){throw console.log("Failed to add Kickstart",Ot),Ot}fe(Ht,dt.kickstart)}}async function Ln(){await Tr(ft.Aros)}async function Rr(){await Tr(ft.DiagROM)}function qa(){mn()}function mn(){console.log("Creating proxies..."),fe(Hl,new(o()).AgnusProxy),fe(Ms,new(o()).AudioPortProxy),fe(Vl,new(o()).CPUProxy),fe(Ll,new(o()).DeniseProxy),fe(Mu,new(o()).DriveProxy(0)),fe(Iu,new(o()).DriveProxy(1)),fe($u,new(o()).DriveProxy(2)),fe(Nu,new(o()).DriveProxy(3)),fe(Lu,new(o()).DiskControllerProxy),fe(rf,new(o()).EnumProxy),fe(Uu,new(o()).HardDriveProxy(0)),fe(Fu,new(o()).HardDriveProxy(1)),fe(Ku,new(o()).HardDriveProxy(2)),fe(Bu,new(o()).HardDriveProxy(3)),fe(Os,new(o()).JoystickProxy(1)),fe(Cs,new(o()).JoystickProxy(2)),fe(Ul,new(o()).KeyboardProxy),fe(Wi,new(o()).MemoryProxy),fe(Nl,new(o()).MouseProxy(1)),fe(Fl,new(o()).MouseProxy(2)),fe(Vu,new(o()).PaulaProxy),fe(nf,new(o()).RetroShellProxy),fe(Mn,new(o()).AmigaProxy),console.log("Launching the emulator..."),l().launch(),console.log("Configuring the emulator..."),l().configure(o().OPT_AGNUS_REVISION,o().AGNUS_ECS_2MB),fe(Kl,{ArrowLeft:o().PULL_LEFT,ArrowRight:o().PULL_RIGHT,ArrowUp:o().PULL_UP,ArrowDown:o().PULL_DOWN,ControlRight:o().PRESS_FIRE,Space:o().PRESS_FIRE}),fe(Bl,{KeyS:o().PULL_LEFT,KeyD:o().PULL_RIGHT,KeyE:o().PULL_UP,KeyX:o().PULL_DOWN,KeyC:o().RELEASE_FIRE}),(async()=>(console.log("Installing Roms..."),hn([3304125791,2798523958,3283989056,1062194186]),console.log("Initialization completed"),fe(Pa,!0)))()}function pt(){if(!T())return;const qe=A().getState(),Be=A().getSelected(),Ot=qe==o().DRIVE_DMA_WRITE;fe(sa,l().poweredOn()),fe(ks,l().isRunning()),fe(Do,l().isWarping()),fe(Gl,h().getNum(S.WARP_MODE)),fe(Wl,l().isTracking()),fe(jl,P().isMuted()||v()),fe(zl,l().isHalted()),fe(Oo,[m().isConnected(),_().isConnected(),R().isConnected(),p().isConnected()]),fe(Is,[m().hasDisk(),_().hasDisk(),R().hasDisk(),p().hasDisk()]),fe(Ql,[m().motor(),_().motor(),R().motor(),p().motor()]),fe(Xl,[Be==0&&Ot,Be==1&&Ot,Be==2&&Ot,Be==3&&Ot]),fe(Yl,[m().hasModifiedDisk(),_().hasModifiedDisk(),R().hasModifiedDisk(),p().hasModifiedDisk()]),fe(ql,[m().hasProtectedDisk(),_().hasProtectedDisk(),R().hasProtectedDisk(),p().hasProtectedDisk()]),fe(Zl,[m().currentCyl(),_().currentCyl(),R().currentCyl(),p().currentCyl()]),fe(Oo,[y().isConnected(),y().isConnected(),w().isConnected(),x().isConnected()]),fe($s,[y().isConnected(),w().isConnected(),x().isConnected(),M().isConnected()]),fe(tf,[y().currentCyl(),w().currentCyl(),x().currentCyl(),M().currentCyl()]),fe(ef,[y().isReading(),w().isReading(),x().isReading(),M().isReading()]),fe(Jl,[y().isWriting(),w().isWriting(),x().isWriting(),M().isWriting()])}function Un(qe){switch(qe.type?.value){case o().MSG_NONE:Ue(el,I());break;case o().MSG_CONFIG:Ue(Qi,G());break;case o().MSG_POWER:Ue(Jc,D()),pt();break;case o().MSG_RUN:Ue(Zc,U()),pt();break;case o().MSG_PAUSE:Ue(Qc,Q()),pt();break;case o().MSG_STEP:Ue(Xc,ae());break;case o().MSG_RESET:Ue(Yc,z()),pt();break;case o().MSG_SHUTDOWN:Ue(qc,X());break;case o().MSG_ABORT:Ue(zc,J());break;case o().MSG_WARP:Ue(Wc,ye()),pt();break;case o().MSG_TRACK:Ue(jc,de()),pt();break;case o().MSG_MUTE:Ue(Gc,xe()),pt();break;case o().MSG_POWER_LED_ON:Ue(Hc,we());break;case o().MSG_POWER_LED_DIM:Ue(Vc,ve());break;case o().MSG_POWER_LED_OFF:Ue(Bc,Te());break;case o().MSG_CONSOLE_CLOSE:Ue(Zi,ne());break;case o().MSG_CONSOLE_UPDATE:Ue(Ji,se());break;case o().MSG_CONSOLE_DEBUGGER:Ue(Kc,ce());break;case o().MSG_SCRIPT_DONE:Ue(Fc,Ee());break;case o().MSG_SCRIPT_PAUSE:Ue(Uc,Ie());break;case o().MSG_SCRIPT_ABORT:Ue(Lc,Ne());break;case o().MSG_SCRIPT_WAKEUP:Ue(Nc,ue());break;case o().MSG_VIDEO_FORMAT:Ue($c,Pe());break;case o().MSG_OVERCLOCKING:Ue(Ic,He());break;case o().MSG_BREAKPOINT_REACHED:Ue(Mc,me());break;case o().MSG_BREAKPOINT_UPDATED:Ue(Cc,q());break;case o().MSG_WATCHPOINT_REACHED:Ue(Oc,ct());break;case o().MSG_WATCHPOINT_UPDATED:Ue(Dc,De());break;case o().MSG_CATCHPOINT_REACHED:Ue(kc,be());break;case o().MSG_CATCHPOINT_UPDATED:Ue(Pc,Me());break;case o().MSG_SWTRAP_REACHED:Ue(xc,et());break;case o().MSG_CPU_HALT:Ue(Rc,gt()),pt();break;case o().MSG_COPPERBP_REACHED:Ue(Tc,Et());break;case o().MSG_COPPERBP_UPDATED:Ue(Ac,nt());break;case o().MSG_COPPERWP_REACHED:Ue(Sc,pe());break;case o().MSG_COPPERWP_UPDATED:Ue(Ec,ge());break;case o().MSG_VIEWPORT:Ue(wc,ht());break;case o().MSG_MEM_LAYOUT:Ue(bc,Zt());break;case o().MSG_DRIVE_CONNECT:Ue(yc,ln()),pt();break;case o().MSG_DRIVE_SELECT:Ue(_c,$n());break;case o().MSG_DRIVE_READ:Ue(pc,fn());break;case o().MSG_DRIVE_WRITE:Ue(mc,dn()),pt();break;case o().MSG_DRIVE_LED:Ue(hc,Wt());break;case o().MSG_DRIVE_MOTOR:Ue(gc,Hn()),pt();break;case o().MSG_DRIVE_STEP:Ue(vc,Rn()),pt(),u().playStepSound(qe.drive.volume,qe.drive.pan);break;case o().MSG_DRIVE_POLL:Ue(dc,Zn()),pt(),u().playStepSound(qe.drive.volume,qe.drive.pan);break;case o().MSG_DISK_INSERT:Ue(fc,tn()),pt(),u().playInsertSound(qe.drive.volume,qe.drive.pan);break;case o().MSG_DISK_EJECT:Ue(lc,vn()),pt(),u().playEjectSound(qe.drive.volume,qe.drive.pan);break;case o().MSG_DISK_PROTECTED:Ue(cc,xn()),pt();break;case o().MSG_HDC_CONNECT:Ue(uc,gn()),pt();break;case o().MSG_HDC_STATE:Ue(sc,Jt()),pt();break;case o().MSG_HDR_STEP:Ue(ic,Ke()),u().playClickSound(qe.drive.volume,qe.drive.pan);break;case o().MSG_HDR_READ:Ue(oc,Gt()),pt();break;case o().MSG_HDR_WRITE:Ue(ac,Nn()),pt();break;case o().MSG_HDR_IDLE:Ue(rc,Le()),pt();break;case o().MSG_CTRL_AMIGA_AMIGA:Ue(nc,oe());break;case o().MSG_SHAKING:Ue(zi,Ge());break;case o().MSG_SER_IN:Ue(tc,mt());break;case o().MSG_SER_OUT:Ue(ec,Bt());break;case o().MSG_AUTO_SNAPSHOT_TAKEN:Ue(Ju,za());break;case o().MSG_USER_SNAPSHOT_TAKEN:Ue(Zu,la());break;case o().MSG_SNAPSHOT_RESTORED:Ue(Qu,ti()),pt();break;case o().MSG_RECORDING_STARTED:Ue(Xu,ni());break;case o().MSG_RECORDING_STOPPED:Ue(Yu,ur());break;case o().MSG_RECORDING_ABORTED:Ue(qu,cr());break;case o().MSG_DMA_DEBUG:Ue(zu,fa()),fe($l,qe.value);break;case o().MSG_SRV_STATE:Ue(Wu,Fr());break;case o().MSG_SRV_RECEIVE:Ue(ju,_t());break;case o().MSG_SRV_SEND:Ue(Gu,Dt());break;case o().MSG_ALARM:Ue(Hu,ri()),console.log("Alarm received: ",qe.value),qe.value==1&&(console.log("Inserting disk 2..."),Gn("AbsoluteInebriation2.adf",0)),qe.value==2&&(console.log("Inserting disk 2..."),Gn("Eon2.adf",0));break}}Ut(),Ye(r,"runShowcase",Ar),Ye(r,"reportException",lr),Ye(r,"insert",Gn),Ye(r,"installRom",Tr),Ye(r,"installRoms",hn),Ye(r,"addRom",Jn),Ye(r,"installAros",Ln),Ye(r,"installDiagRom",Rr),Ye(r,"runtimeInitialized",qa),Ye(r,"onRuntimeInitialized",mn),Ye(r,"updateStateVariables",pt),Ye(r,"processMsg",Un);var Ya=it({runShowcase:Ar,reportException:lr,insert:Gn,installRom:Tr,installRoms:hn,addRom:Jn,installAros:Ln,installDiagRom:Rr,runtimeInitialized:qa,onRuntimeInitialized:mn,updateStateVariables:pt,processMsg:Un});return s(),Ya}function Gp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Ms,"$audioPort",n),u=()=>O(on,"$wasm",n);let l,h,b,m,_,R=0;async function p(){if(l)return;console.log("Setting up audio..."),l=new AudioContext,l.onstatechange=()=>console.log("Audio Context: state = "+l.state);let I=l.createGain();I.gain.value=1,I.connect(l.destination),console.log("Audio context: ",l.state),o().setSampleRate(l.sampleRate),await l.audioWorklet.addModule("js/audio-processor.js"),console.log("Audio Worklet module loaded");const G=new AudioWorkletNode(l,"audio-processor",{outputChannelCount:[2],processorOptions:{pointers:[o().leftChannelBuffer(),o().rightChannelBuffer()],buffer:u().HEAPF32.buffer,length:2048}});console.log("Audio Worklet Node created"),G.port.onmessage=D=>{o().updateAudio(D.data)},G.connect(I),l.state==="suspended"&&await l.resume(),await A()}async function A(){console.log("Loading sounds..."),h||(h=await T("sounds/insert.mp3")),b||(b=await T("sounds/eject.mp3")),m||(m=await T("sounds/step.mp3")),_||(_=await T("sounds/stephd.mp3"))}function y(I,G){P(h,I)}function w(I,G){P(b,I)}function x(I,G){P(m,I)}function M(I,G){P(_,I)}async function P(I,G,D){if(I==null||R>=3)return;const U=l.createGain();U.gain.value=.004*G,U.connect(l.destination);const Q=l.createBufferSource();Q.buffer=I,Q.addEventListener("ended",()=>{R--}),Q.connect(U),Q.start(),R++}async function T(I){let D=await(await fetch(I)).arrayBuffer();return await l.decodeAudioData(D)}Ut(),Ye(r,"setup",p),Ye(r,"playInsertSound",y),Ye(r,"playEjectSound",w),Ye(r,"playStepSound",x),Ye(r,"playClickSound",M);var v=it({setup:p,playInsertSound:y,playEjectSound:w,playStepSound:x,playClickSound:M});return s(),v}function jp(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Mn,"$amiga",n),u=()=>O(on,"$wasm",n),l=()=>O(sn,"$config",n);let h=[{opt:S.WARP_MODE,default:[Ft.auto].toString()},{opt:S.THEME,default:Mt.default.toString()},{opt:S.CANVAS_BORDER,default:"0"},{opt:S.SHAKING,default:"1"}],b=[{opt:S.CPU_REVISION,default:"0"},{opt:S.AGNUS_REVISION,default:"0"},{opt:S.DENISE_REVISION,default:"0"},{opt:S.RTC_MODEL,default:"0"},{opt:S.CHIP_RAM,default:"512"},{opt:S.SLOW_RAM,default:"512"},{opt:S.FAST_RAM,default:"0"},{opt:S.BANK_MAP,default:"0"},{opt:S.INIT_PATTERN,default:"0"},{opt:S.UNMAPPED,default:"0"},{opt:S.SLOW_RAM_MIRROR,default:"1"},{opt:S.SLOW_RAM_DELAY,default:"1"},{opt:S.DF0,default:"1"},{opt:S.DF1,default:"1"},{opt:S.DF2,default:"0"},{opt:S.DF3,default:"0"},{opt:S.HD0,default:"1"},{opt:S.HD1,default:"0"},{opt:S.HD2,default:"0"},{opt:S.HD3,default:"0"}],m=[{opt:S.BLITTER_ACCURACY,default:"2"},{opt:S.TODBUG,default:"1"},{opt:S.PTR_DROPS,default:"1"},{opt:S.ECLOCK_SYNCING,default:"1"},{opt:S.DRIVE_SPEED,default:"1"},{opt:S.DRIVE_MECHANICS,default:"1"},{opt:S.OPT_LOCK_DSKSYNC,default:"0"},{opt:S.OPT_AUTO_DSKSYNC,default:"0"},{opt:S.CLX_SPR_SPR,default:"0"},{opt:S.CLX_SPR_PLF,default:"0"},{opt:S.CLX_PLF_PLF,default:"0"},{opt:S.ACCURATE_KEYBOARD,default:"1"}],_=[{opt:S.AUDVOL0,default:"100"},{opt:S.AUDVOL1,default:"100"},{opt:S.AUDVOL2,default:"100"},{opt:S.AUDVOL3,default:"100"},{opt:S.AUDVOLL,default:"50"},{opt:S.AUDVOLR,default:"50"},{opt:S.STEP_VOLUME,default:"50"},{opt:S.POLL_VOLUME,default:"50"},{opt:S.INSERT_VOLUME,default:"50"},{opt:S.EJECT_VOLUME,default:"50"}],R=[{opt:S.RENDER_MODE,default:ka.smooth.toString()},{opt:S.FLICKER_WEIGHT,default:"0"},{opt:S.PALETTE,default:"0"},{opt:S.BRIGHTNESS,default:"50"},{opt:S.CONTRAST,default:"100"},{opt:S.SATURATION,default:"50"}],p=Mt.default,A=0,y=1,w=ka.smooth,x=50;Fs(()=>On.opts.toArray()).subscribe(pe=>{}),sr(()=>{console.log("Config::onMount()"),P(),xe()});async function P(){await T(),await v(),await I(),await G(),await D()}async function T(){for(const pe of h)await U(pe.opt,pe.default)}async function v(){for(const pe of b)await U(pe.opt,pe.default)}async function I(){for(const pe of m)await U(pe.opt,pe.default)}async function G(){for(const pe of _)await U(pe.opt,pe.default)}async function D(){for(const pe of R)await U(pe.opt,pe.default)}async function U(pe,ge){try{await On.opts.add({key:pe,value:ge})}catch{}}async function Q(){await ae(),await z(),await X(),await J(),await ye()}async function ae(){for(const pe of h)await de(pe.opt);await T(),await we()}async function z(){for(const pe of b)await de(pe.opt);await v(),await ve()}async function X(){for(const pe of m)await de(pe.opt);await I(),await Te()}async function J(){for(const pe of _)await de(pe.opt);await G(),await ne()}async function ye(){for(const pe of R)await de(pe.opt);await D(),await se()}async function de(pe){try{const ge=await On.opts.delete(pe)}catch{console.log("Failed to remove entry",pe)}}async function xe(){console.log("Loading settings..."),await we(),await ve(),await Te(),await ne(),await se()}async function we(){for(const pe of h)await ce(pe.opt)}async function ve(){for(const pe of b)await ce(pe.opt)}async function Te(){for(const pe of m)await ce(pe.opt)}async function ne(){for(const pe of _)await ce(pe.opt)}async function se(){for(const pe of R)await ce(pe.opt)}async function ce(pe){try{const ge=await On.opts.get(pe);ge!==void 0&&Me(pe,ge.value)}catch{}}async function Ee(){await Ie(),await Ne(),await ue(),await Pe(),await He()}async function Ie(){for(const pe of h)await me(pe.opt)}async function Ne(){for(const pe of b)await me(pe.opt)}async function ue(){for(const pe of m)await me(pe.opt)}async function Pe(){for(const pe of _)await me(pe.opt)}async function He(){for(const pe of R)await me(pe.opt)}async function me(pe){const ge=ct(pe);try{const ht=await On.opts.put({key:pe,value:ge})}catch{}}function q(pe){if(pe==null)throw new Error("Value is undefined or null");return pe}function ct(pe){switch(pe){case S.THEME:return[p].toString();case S.CANVAS_BORDER:return A.toString();case S.SHAKING:return y.toString();case S.CPU_REVISION:return o().getConfig(q(u().OPT_CPU_REVISION)).toString();case S.CPU_SPEED:return o().getConfig(q(u().OPT_CPU_OVERCLOCKING)).toString();case S.WARP_MODE:return o().getConfig(q(u().OPT_AMIGA_WARP_MODE)).toString();case S.AGNUS_REVISION:return o().getConfig(q(u().OPT_AGNUS_REVISION)).toString();case S.DENISE_REVISION:return o().getConfig(q(u().OPT_DENISE_REVISION)).toString();case S.RTC_MODEL:return o().getConfig(q(u().OPT_RTC_MODEL)).toString();case S.CHIP_RAM:return o().getConfig(q(u().OPT_MEM_CHIP_RAM)).toString();case S.SLOW_RAM:return o().getConfig(q(u().OPT_MEM_SLOW_RAM)).toString();case S.FAST_RAM:return o().getConfig(q(u().OPT_MEM_FAST_RAM)).toString();case S.BANK_MAP:return o().getConfig(q(u().OPT_MEM_BANKMAP)).toString();case S.INIT_PATTERN:return o().getConfig(q(u().OPT_MEM_RAM_INIT_PATTERN)).toString();case S.UNMAPPED:return o().getConfig(q(u().OPT_MEM_UNMAPPING_TYPE)).toString();case S.SLOW_RAM_MIRROR:return o().getConfig(q(u().OPT_MEM_SLOW_RAM_MIRROR)).toString();case S.SLOW_RAM_DELAY:return o().getConfig(q(u().OPT_MEM_SLOW_RAM_DELAY)).toString();case S.DF0:return o().getConfigId(q(u().OPT_DRIVE_CONNECT)).toString();case S.DF1:return o().getConfigId(q(u().OPT_DRIVE_CONNECT)).toString();case S.DF2:return o().getConfigId(q(u().OPT_DRIVE_CONNECT)).toString();case S.DF3:return o().getConfigId(q(u().OPT_DRIVE_CONNECT)).toString();case S.HD0:return o().getConfigId(q(u().OPT_HDC_CONNECT)).toString();case S.HD1:return o().getConfigId(q(u().OPT_HDC_CONNECT)).toString();case S.HD2:return o().getConfigId(q(u().OPT_HDC_CONNECT)).toString();case S.HD3:return o().getConfigId(q(u().OPT_HDC_CONNECT)).toString();case S.BLITTER_ACCURACY:return o().getConfig(q(u().OPT_BLITTER_ACCURACY)).toString();case S.TODBUG:return o().getConfig(q(u().OPT_CIA_TODBUG)).toString();case S.PTR_DROPS:return o().getConfig(q(u().OPT_AGNUS_PTR_DROPS)).toString();case S.ECLOCK_SYNCING:return o().getConfig(q(u().OPT_CIA_ECLOCK_SYNCING)).toString();case S.DRIVE_SPEED:return o().getConfig(q(u().OPT_DC_SPEED)).toString();case S.DRIVE_MECHANICS:return o().getConfig(q(u().OPT_DRIVE_MECHANICS)).toString();case S.OPT_LOCK_DSKSYNC:return o().getConfig(q(u().OPT_DC_LOCK_DSKSYNC)).toString();case S.OPT_AUTO_DSKSYNC:return o().getConfig(q(u().OPT_DC_AUTO_DSKSYNC)).toString();case S.CLX_SPR_SPR:return o().getConfig(q(u().OPT_DENISE_CLX_SPR_SPR)).toString();case S.CLX_SPR_PLF:return o().getConfig(q(u().OPT_DENISE_CLX_SPR_PLF)).toString();case S.CLX_PLF_PLF:return o().getConfig(q(u().OPT_DENISE_CLX_PLF_PLF)).toString();case S.ACCURATE_KEYBOARD:return o().getConfig(q(u().OPT_KBD_ACCURACY)).toString();case S.SAMPLING_METHOD:return o().getConfig(q(u().OPT_AUD_SAMPLING_METHOD)).toString();case S.FILTER_TYPE:return o().getConfig(q(u().OPT_AUD_FILTER_TYPE)).toString();case S.AUDVOL0:return o().getConfig(q(u().OPT_AUD_VOL0)).toString();case S.AUDVOL1:return o().getConfig(q(u().OPT_AUD_VOL1)).toString();case S.AUDVOL2:return o().getConfig(q(u().OPT_AUD_VOL2)).toString();case S.AUDVOL3:return o().getConfig(q(u().OPT_AUD_VOL3)).toString();case S.AUDVOLL:return o().getConfig(q(u().OPT_AUD_VOLL)).toString();case S.AUDVOLR:return o().getConfig(q(u().OPT_AUD_VOLR)).toString();case S.STEP_VOLUME:return 0;case S.POLL_VOLUME:return 0;case S.INSERT_VOLUME:return 0;case S.EJECT_VOLUME:return 0;case S.RENDER_MODE:return w.toString();case S.PALETTE:return o().getConfig(q(u().OPT_MON_PALETTE)).toString();case S.BRIGHTNESS:return o().getConfig(q(u().OPT_MON_BRIGHTNESS)).toString();case S.CONTRAST:return o().getConfig(q(u().OPT_MON_CONTRAST)).toString();case S.SATURATION:return o().getConfig(q(u().OPT_MON_SATURATION)).toString();case S.FLICKER_WEIGHT:return x.toString();default:return console.warn("get: Invalid option: ",pe),"???"}}function De(pe){return Number(ct(pe))}function be(pe){return De(pe)!=0}function Me(pe,ge){switch(pe){case S.THEME:Et(Number(ge));break;case S.CANVAS_BORDER:A=Number(ge);break;case S.SHAKING:y=Number(ge);break;case S.CPU_REVISION:o().configure(q(u().OPT_CPU_REVISION),Number(ge));break;case S.CPU_SPEED:o().configure(q(u().OPT_CPU_OVERCLOCKING),Number(ge));break;case S.WARP_MODE:o().configure(q(u().OPT_AMIGA_WARP_MODE),Number(ge));break;case S.AGNUS_REVISION:o().configure(q(u().OPT_AGNUS_REVISION),Number(ge));break;case S.DENISE_REVISION:o().configure(q(u().OPT_DENISE_REVISION),Number(ge));break;case S.RTC_MODEL:o().configure(q(u().OPT_RTC_MODEL),Number(ge));break;case S.CHIP_RAM:o().configure(q(u().OPT_MEM_CHIP_RAM),Number(ge));break;case S.SLOW_RAM:o().configure(q(u().OPT_MEM_SLOW_RAM),Number(ge));break;case S.FAST_RAM:o().configure(q(u().OPT_MEM_FAST_RAM),Number(ge));break;case S.BANK_MAP:o().configure(q(u().OPT_MEM_BANKMAP),Number(ge));break;case S.INIT_PATTERN:o().configure(q(u().OPT_MEM_RAM_INIT_PATTERN),Number(ge));break;case S.UNMAPPED:o().configure(q(u().OPT_MEM_UNMAPPING_TYPE),Number(ge));break;case S.SLOW_RAM_MIRROR:o().configure(q(u().OPT_MEM_SLOW_RAM_MIRROR),Number(ge));break;case S.SLOW_RAM_DELAY:o().configure(q(u().OPT_MEM_SLOW_RAM_DELAY),Number(ge));break;case S.DF0:break;case S.DF1:o().configureId(q(u().OPT_DRIVE_CONNECT),1,Number(ge)),Number(ge)==0&&o().configureId(q(u().OPT_DRIVE_CONNECT),2,0),Number(ge)==0&&o().configureId(q(u().OPT_DRIVE_CONNECT),3,0);break;case S.DF2:Number(ge)==1&&o().configureId(q(u().OPT_DRIVE_CONNECT),1,1),o().configureId(q(u().OPT_DRIVE_CONNECT),2,Number(ge)),Number(ge)==0&&o().configureId(q(u().OPT_DRIVE_CONNECT),3,0);break;case S.DF3:Number(ge)==1&&o().configureId(q(u().OPT_DRIVE_CONNECT),1,1),Number(ge)==1&&o().configureId(q(u().OPT_DRIVE_CONNECT),2,1),o().configureId(q(u().OPT_DRIVE_CONNECT),3,Number(ge));break;case S.HD0:o().configureId(q(u().OPT_HDC_CONNECT),0,ge);break;case S.HD1:o().configureId(q(u().OPT_HDC_CONNECT),1,ge);break;case S.HD2:o().configureId(q(u().OPT_HDC_CONNECT),2,ge);break;case S.HD3:o().configureId(q(u().OPT_HDC_CONNECT),3,ge);break;case S.BLITTER_ACCURACY:o().configure(q(u().OPT_BLITTER_ACCURACY),Number(ge));break;case S.TODBUG:o().configure(q(u().OPT_CIA_TODBUG),Number(ge));break;case S.PTR_DROPS:o().configure(q(u().OPT_AGNUS_PTR_DROPS),Number(ge));break;case S.ECLOCK_SYNCING:o().configure(q(u().OPT_CIA_ECLOCK_SYNCING),Number(ge));break;case S.DRIVE_SPEED:o().configure(q(u().OPT_DC_SPEED),Number(ge));break;case S.DRIVE_MECHANICS:o().configureId(q(u().OPT_DRIVE_MECHANICS),0,Number(ge)),o().configureId(q(u().OPT_DRIVE_MECHANICS),1,Number(ge)),o().configureId(q(u().OPT_DRIVE_MECHANICS),2,Number(ge)),o().configureId(q(u().OPT_DRIVE_MECHANICS),3,Number(ge));break;case S.OPT_LOCK_DSKSYNC:o().configure(q(u().OPT_DC_LOCK_DSKSYNC),Number(ge));break;case S.OPT_AUTO_DSKSYNC:o().configure(q(u().OPT_DC_AUTO_DSKSYNC),Number(ge));break;case S.CLX_SPR_SPR:o().configure(q(u().OPT_DENISE_CLX_SPR_SPR),Number(ge));break;case S.CLX_SPR_PLF:o().configure(q(u().OPT_DENISE_CLX_SPR_PLF),Number(ge));break;case S.CLX_PLF_PLF:o().configure(q(u().OPT_DENISE_CLX_PLF_PLF),Number(ge));break;case S.ACCURATE_KEYBOARD:o().configure(q(u().OPT_KBD_ACCURACY),Number(ge));break;case S.SAMPLING_METHOD:o().configure(q(u().OPT_AUD_SAMPLING_METHOD),Number(ge));break;case S.FILTER_TYPE:o().configure(q(u().OPT_AUD_FILTER_TYPE),Number(ge));break;case S.AUDVOL0:o().configure(q(u().OPT_AUD_VOL0),Number(ge));break;case S.AUDVOL1:o().configure(q(u().OPT_AUD_VOL1),Number(ge));break;case S.AUDVOL2:o().configure(q(u().OPT_AUD_VOL2),Number(ge));break;case S.AUDVOL3:o().configure(q(u().OPT_AUD_VOL3),Number(ge));break;case S.AUDVOLL:o().configure(q(u().OPT_AUD_VOLL),Number(ge));break;case S.AUDVOLR:o().configure(q(u().OPT_AUD_VOLR),Number(ge));break;case S.STEP_VOLUME:break;case S.POLL_VOLUME:break;case S.INSERT_VOLUME:break;case S.EJECT_VOLUME:break;case S.RENDER_MODE:w=Number(ge);break;case S.PALETTE:o().configure(q(u().OPT_MON_PALETTE),Number(ge));break;case S.BRIGHTNESS:o().configure(q(u().OPT_MON_BRIGHTNESS),Number(ge));break;case S.CONTRAST:o().configure(q(u().OPT_MON_CONTRAST),Number(ge));break;case S.SATURATION:o().configure(q(u().OPT_MON_SATURATION),Number(ge));break;case S.FLICKER_WEIGHT:x=Number(ge);break;default:console.warn("set: Invalid option: ",pe)}fe(sn,l())}function et(pe,ge){Me(pe,ge.toString())}function gt(pe,ge){Me(pe,ge?"true":"false")}function Et(pe){p=pe;let ge="";switch(p){case Mt.default:ge="mytheme",fe(En,!0),fe(kn,"invert");break;case Mt.light:ge="light",fe(En,!0),fe(kn,"invert");break;case Mt.dark:ge="dark",fe(En,!0),fe(kn,"invert");break;case Mt.coffee:ge="coffee",fe(En,!1),fe(kn,"");break;case Mt.cupcake:ge="cupcake",fe(En,!1),fe(kn,"");break;case Mt.forest:ge="forest",fe(En,!0),fe(kn,"invert");break;case Mt.aqua:ge="aqua",fe(En,!1),fe(kn,"");break;case Mt.garden:ge="garden",fe(En,!0),fe(kn,"invert");break;case Mt.pastel:ge="pastel",fe(En,!1),fe(kn,"");break;default:console.warn("Invalid theme")}document.querySelector("html")?.setAttribute("data-theme",ge)}Ut(),Ye(r,"restoreDefaults",Q),Ye(r,"restoreGeneralDefaults",ae),Ye(r,"restoreMachineDefaults",z),Ye(r,"restoreCompatibilityDefaults",X),Ye(r,"restoreAudioDefaults",J),Ye(r,"restoreVideoDefaults",ye),Ye(r,"loadSettings",xe),Ye(r,"loadGeneralSettings",we),Ye(r,"loadMachineSettings",ve),Ye(r,"loadCompatibilitySettings",Te),Ye(r,"loadAudioSettings",ne),Ye(r,"loadVideoSettings",se),Ye(r,"saveSettings",Ee),Ye(r,"saveGeneralSettings",Ie),Ye(r,"saveMachineSettings",Ne),Ye(r,"saveCompatibilitySettings",ue),Ye(r,"saveAudioSettings",Pe),Ye(r,"saveVideoSettings",He),Ye(r,"get",ct),Ye(r,"getNum",De),Ye(r,"getBool",be),Ye(r,"set",Me),Ye(r,"setNum",et),Ye(r,"setBool",gt);var nt=it({restoreDefaults:Q,restoreGeneralDefaults:ae,restoreMachineDefaults:z,restoreCompatibilityDefaults:X,restoreAudioDefaults:J,restoreVideoDefaults:ye,loadSettings:xe,loadGeneralSettings:we,loadMachineSettings:ve,loadCompatibilitySettings:Te,loadAudioSettings:ne,loadVideoSettings:se,saveSettings:Ee,saveGeneralSettings:Ie,saveMachineSettings:Ne,saveCompatibilitySettings:ue,saveAudioSettings:Pe,saveVideoSettings:He,get:ct,getNum:De,getBool:be,set:Me,setNum:et,setBool:gt});return s(),nt}function Wp(a,r){ot(r,!0);const[n,s]=vt(),o=()=>O(bn,"$port1",n),u=()=>O(Os,"$joystick1",n),l=()=>O(wn,"$port2",n),h=()=>O(Cs,"$joystick2",n),b=()=>O(on,"$wasm",n);let m=he(r,"gamepads",31,()=>Ho({}));sr(()=>{console.log("GamePadManager::onMount()"),window.addEventListener("gamepadconnected",A=>{m(m()[A.gamepad.index]=A.gamepad,!0)},!1),window.addEventListener("gamepaddisconnected",A=>{delete m()[A.gamepad.index]},!1)});function _(){return o()==nn.gamepad1||o()==nn.gamepad2?u():l()==nn.gamepad1||l()==nn.gamepad2?h():null}function R(){const A=navigator.getGamepads();if(A.length==0)return;const y=A[0];if(!y)return;const w=y.buttons[0].pressed,x=y.axes[0].valueOf(),M=y.axes[1].valueOf();w?_()?.trigger(b().PRESS_FIRE):_()?.trigger(b().RELEASE_FIRE),x<-.5?_()?.trigger(b().PULL_LEFT):x>.5?_()?.trigger(b().PULL_RIGHT):_()?.trigger(b().RELEASE_X),M<-.5?_()?.trigger(b().PULL_UP):M>.5?_()?.trigger(b().PULL_DOWN):_()?.trigger(b().RELEASE_Y)}var p=it({pollState:R});return s(),p}var zp=Re('<!> <div class="box relative grow border-none border-green-300 overflow-auto"><!> <!> <!> <!> <!> <!></div>',1),qp=Re("<!> <!> <!> <!>",1),Yp=Re('<div class="h-screen overflow-y-auto scroll-smooth bg-black text-white"><!> <!> <!></div>');function d0(a,r){ot(r,!1);const[n,s]=vt(),o=()=>O(Pa,"$initialized",n),u=()=>O(qi,"$canvasWidth",n),l=()=>O(Yi,"$canvasHeight",n),h=()=>O(_o,"$aspectWidth",n),b=()=>O(yo,"$aspectHeight",n),m=()=>O(Mn,"$amiga",n),_=()=>O(Ht,"$layer",n),R=()=>O(on,"$wasm",n),p=()=>O(bn,"$port1",n),A=()=>O(wn,"$port2",n),y=()=>O(Mr,"$proxy",n),w=()=>O(sn,"$config",n),x=()=>O(ea,"$audio",n),M=()=>O(Xi,"$gamepadManager",n);let P=0,T=yt(),v=yt(),I=yt(),G;Fs(()=>On.roms.orderBy("title").toArray()).subscribe(se=>{fe(Ds,se)}),sr(()=>{console.log("+page::onMount()"),window.addEventListener("resize",function(){clearTimeout(G),G=setTimeout(ae,250)}),window.addEventListener("error",z),window.addEventListener("unhandledrejection",X)});function U(se){P++,f(T)&&f(T).doAnimationFrame(P,se),f(I)&&f(I).update(P,se),window.requestAnimationFrame(U)}function Q(){f(v)!=null&&(fe(qi,f(v).clientWidth),fe(Yi,f(v).clientHeight),fe(_o,u()),fe(yo,h()*3/4),b()>l()&&(fe(yo,l()),fe(_o,b()*4/3)))}function ae(){Q()}function z(se){m().what()!==0&&(fe(rs,m().what()),fe(ns,m().errorCode()))}function X(se){m().what()!==0&&(fe(rs,m().what()),fe(ns,m().errorCode()))}function J(se,ce){switch(se){case"shell":fe(Ht,_()==dt.shell?dt.none:dt.shell);break;case"settings":fe(Ht,_()==dt.settings?dt.none:dt.settings);break;case"monitor":m().getConfig(R().OPT_DMA_DEBUG_ENABLE)?(f(T).textureRect.zoomIn(),m().configure(R().OPT_DMA_DEBUG_ENABLE,0)):(f(T).textureRect.zoomOut(),m().configure(R().OPT_DMA_DEBUG_ENABLE,1));break;case"pause":try{m().isRunning()?(console.log("Pausing..."),m().pause()):(console.log("Running..:"),m().run())}catch(Ee){console.log(Ee),R().reportException()}break;case"power":try{m().poweredOn()?(m().powerOff(),m().hardReset()):m().run()}catch(Ee){console.log(Ee),R().reportException()}break;case"reset":try{m().hardReset()}catch(Ee){console.log(Ee),R().reportException()}break;case"fit":fe(Ta,"fit");break;case"aspect":fe(Ta,"aspect");break;case"full":fe(Ta,"full");break;case"empty1":fe(bn,0);break;case"mouse1":fe(bn,1),A()==1&&fe(wn,0);break;case"keyset11":fe(bn,2),A()==2&&fe(wn,0);break;case"keyset12":fe(bn,3),A()==3&&fe(wn,0);break;case"gamepad11":fe(bn,4),A()==4&&fe(wn,0);break;case"empty2":fe(wn,0);break;case"mouse2":fe(wn,1),p()==1&&fe(bn,0);break;case"keyset21":fe(wn,2),p()==2&&fe(bn,0);break;case"keyset22":fe(wn,3),p()==3&&fe(bn,0);break;case"gamepad21":fe(wn,4),p()==4&&fe(bn,0);break;default:console.log("Unhandled sender: "+se)}}function ye(se){}An(()=>f(v),()=>{f(v)&&Q()}),An(()=>o(),()=>{o()&&window.requestAnimationFrame(U)}),Lr(),Ut();var de=Yp();Xd(se=>{Qd.title="vAmiga.net"});var xe=W(de);Vp(xe,{});var we=Z(xe,2);{var ve=se=>{Kt(Hp(se,{$$legacy:!0}),ce=>fe(Mr,ce),()=>y())};Xe(we,se=>{R()&&se(ve)})}var Te=Z(we,2);{var ne=se=>{var ce=qp(),Ee=ze(ce);Kt(jp(Ee,{$$legacy:!0}),Pe=>fe(sn,Pe),()=>w());var Ie=Z(Ee,2);Kt(Gp(Ie,{$$legacy:!0}),Pe=>fe(ea,Pe),()=>x());var Ne=Z(Ie,2);Kt(Wp(Ne,{$$legacy:!0}),Pe=>fe(Xi,Pe),()=>M());var ue=Z(Ne,2);kp(ue,{children:(Pe,He)=>{var me=zp(),q=ze(me);Kt(Tp(q,{$$events:{push:ye},$$legacy:!0}),nt=>Ve(I,nt),()=>f(I));var ct=Z(q,2),De=W(ct);sm(De,{});var be=Z(De,2);Kt(gm(be,{$$legacy:!0}),nt=>Ve(T,nt),()=>f(T));var Me=Z(be,2);xp(Me,{});var et=Z(Me,2);dp(et,{});var gt=Z(et,2);Kp(gt,{});var Et=Z(gt,2);Mv(Et,{action:J}),j(ct),Kt(ct,nt=>Ve(v,nt),()=>f(v)),ie(Pe,me)},$$slots:{default:!0}}),ie(se,ce)};Xe(Te,se=>{o()&&se(ne)})}j(de),ie(a,de),it(),s()}export{d0 as component};
