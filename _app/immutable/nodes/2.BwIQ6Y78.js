import"../chunks/NZTpNUN0.js";import{i as Bt}from"../chunks/DHhcLtQ9.js";import{S as Es,D as Gt,E as Ss,am as ud,an as cd,ao as ld,C as Fi,O as Pl,N as Ua,P as Hr,U as fd,a as d,Y as _e,G as dd,I as vd,J as Ou,K as Oo,L as Aa,ap as gd,aq as hd,M as Dl,ar as Ol,as as kl,m as Rt,a7 as ku,at as ko,$ as Ho,au as As,av as md,aw as pd,ax as _d,ay as Ri,az as Ts,aA as yd,aB as bd,aC as wd,aD as Cu,aE as Ed,aF as Cl,aG as Sd,Q as Rs,aH as Ad,aI as Td,t as Ml,aJ as Rd,aK as xd,aL as Pd,aM as Dd,j as Od,aN as kd,aO as Cd,aP as Md,aQ as an,aR as Id,aS as $d,aT as Nd,aU as Ld,F as Ud,aV as Fd,aW as Bd,f as Wn,aX as Kd,aY as Vd,aZ as Hd,a_ as Il,aa as Gd,n as wn,V as jd,p as at,l as Ae,y as z,z as W,q as ut,v as se,x as it,A as Z,ac as Et,o as ze,ak as Qe,b as He,ai as kt,a$ as Xt,B as At,ad as zn,b0 as En,b1 as Go,Z as Bi,e as xi,b2 as Wd,ab as sr,b3 as zd,b4 as jn,i as Un,b5 as oa,ag as Vr,b6 as xs,b7 as qd,al as Yd,b8 as Xd,b9 as Zd}from"../chunks/CCYfz4d6.js";import{p as me,i as Xe,l as $t,s as on,b as Lt}from"../chunks/Q-tPc7B_.js";import{b as k,s as dt,a as le,d as Qd,u as Le}from"../chunks/B3TMqfdX.js";import{d as bn,s as Ki,p as sa,L as ft,l as Ut,a as _n,b as yn,c as $l,r as Ps,e as Ta,i as Pa,m as jo,f as Qr,g as kn,k as Ds,W as Nt,h as Jr,O as w,w as Sn,j as en,n as Nl,M as Wo,I as nn,R as Da,o as Ll,q as Os,t as ks,u as Ul,v as Fl,x as Bl,y as Kl,z as zo,A as qo,B as pi,C as _i,D as Yo,E as Jd,F as ae,T as Ct,G as Xo,H as xn,J as Vl,K as Hl,N as Cs,P as Gl,Q as Pi,S as jl,U as Wl,V as zl,X as Ms,Y as ql,Z as Yl,_ as Xl,$ as Zl,a0 as Ql,a1 as Is,a2 as $s,a3 as ev,a4 as Jl,a5 as ef,a6 as tf,a7 as Zo,a8 as Qo,a9 as nf,aa as Jo,ab as es,ac as ts,ad as rf,ae as ns,af as Mu,ag as Iu,ah as $u,ai as Nu,aj as Lu,ak as Uu,al as Fu,am as Bu,an as Ku,ao as Vu,ap as Hu,aq as Gu,ar as ju,as as Wu,at as zu,au as qu,av as Yu,aw as Xu,ax as Zu,ay as Qu,az as Ju,aA as ec,aB as tc,aC as nc,aD as rc,aE as ac,aF as ic,aG as oc,aH as sc,aI as uc,aJ as cc,aK as lc,aL as fc,aM as dc,aN as vc,aO as gc,aP as hc,aQ as mc,aR as pc,aS as _c,aT as yc,aU as bc,aV as wc,aW as Ec,aX as Sc,aY as Ac,aZ as Tc,a_ as Rc,a$ as xc,b0 as Pc,b1 as Dc,b2 as Oc,b3 as kc,b4 as Cc,b5 as Mc,b6 as Ic,b7 as $c,b8 as Nc,b9 as Lc,ba as Uc,bb as Fc,bc as Bc,bd as Kc,be as Vc,bf as Hc,bg as Gc,bh as jc,bi as Wc,bj as zc,bk as qc,bl as Yc,bm as Xc,bn as Zc,bo as Qc,bp as Jc,bq as el,br as tl}from"../chunks/DvrEDmIj.js";import"../chunks/5GM0FnLi.js";function tv(a,r){if(r){const n=document.body;a.autofocus=!0,Es(()=>{document.activeElement===n&&a.focus()})}}let nl=!1;function nv(){nl||(nl=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{if(!a.defaultPrevented)for(const r of a.target.elements)r.__on_r?.()})},{capture:!0}))}function Di(a,r,n){Gt&&Ss();var s=a,i=fd,u,l=ud()?cd:ld;Fi(()=>{l(i,i=r())&&(u&&Pl(u),u=Ua(()=>n(s)))}),Gt&&(s=Hr)}function ea(a,r){return r}function rv(a,r,n,s){for(var i=[],u=r.length,l=0;l<u;l++)md(r[l].e,i,!0);var h=u>0&&i.length===0&&n!==null;if(h){var b=n.parentNode;pd(b),b.append(n),s.clear(),hr(a,r[0].prev,r[u-1].next)}_d(i,()=>{for(var m=0;m<u;m++){var y=r[m];h||(s.delete(y.k),hr(a,y.prev,y.next)),Ri(y.e,!h)}})}function ta(a,r,n,s,i,u=null){var l=a,h={flags:r,items:new Map,first:null},b=(r&Cl)!==0;if(b){var m=a;l=Gt?Oo(bd(m)):m.appendChild(wd())}Gt&&Ss();var y=null,T=!1,_=_e(()=>{var A=n();return kl(A)?A:A==null?[]:Ol(A)});Fi(()=>{var A=d(_),p=A.length;if(T&&p===0)return;T=p===0;let S=!1;if(Gt){var P=dd(l)===vd;P!==(p===0)&&(l=Ou(),Oo(l),Aa(!1),S=!0)}if(Gt){for(var I=null,R,x=0;x<p;x++){if(Hr.nodeType===gd&&Hr.data===hd){l=Hr,S=!0,Aa(!1);break}var v=A[x],$=s(v,x);R=af(Hr,h,I,null,v,$,x,i,r,n),h.items.set($,R),I=R}p>0&&Oo(Ou())}Gt||av(A,h,l,i,r,s,n),u!==null&&(p===0?y?Dl(y):y=Ua(()=>u(l)):y!==null&&Pl(y,()=>{y=null})),S&&Aa(!0),d(_)}),Gt&&(l=Hr)}function av(a,r,n,s,i,u,l){var h=(i&Sd)!==0,b=(i&(Ts|As))!==0,m=a.length,y=r.items,T=r.first,_=T,A,p=null,S,P=[],I=[],R,x,v,$;if(h)for($=0;$<m;$+=1)R=a[$],x=u(R,$),v=y.get(x),v!==void 0&&(v.a?.measure(),(S??=new Set).add(v));for($=0;$<m;$+=1){if(R=a[$],x=u(R,$),v=y.get(x),v===void 0){var j=_?_.e.nodes_start:n;p=af(j,r,p,p===null?r.first:p.next,R,x,$,s,i,l),y.set(x,p),P=[],I=[],_=p.next;continue}if(b&&iv(v,R,$,i),(v.e.f&ko)!==0&&(Dl(v.e),h&&(v.a?.unfix(),(S??=new Set).delete(v))),v!==_){if(A!==void 0&&A.has(v)){if(P.length<I.length){var D=I[0],U;p=D.prev;var te=P[0],ie=P[P.length-1];for(U=0;U<P.length;U+=1)rl(P[U],D,n);for(U=0;U<I.length;U+=1)A.delete(I[U]);hr(r,te.prev,ie.next),hr(r,p,te),hr(r,ie,D),_=D,p=ie,$-=1,P=[],I=[]}else A.delete(v),rl(v,_,n),hr(r,v.prev,v.next),hr(r,v,p===null?r.first:p.next),hr(r,p,v),p=v;continue}for(P=[],I=[];_!==null&&_.k!==x;)(_.e.f&ko)===0&&(A??=new Set).add(_),I.push(_),_=_.next;if(_===null)continue;v=_}P.push(v),p=v,_=v.next}if(_!==null||A!==void 0){for(var X=A===void 0?[]:Ol(A);_!==null;)(_.e.f&ko)===0&&X.push(_),_=_.next;var q=X.length;if(q>0){var ne=(i&Cl)!==0&&m===0?n:null;if(h){for($=0;$<q;$+=1)X[$].a?.measure();for($=0;$<q;$+=1)X[$].a?.fix()}rv(r,X,ne,y)}}h&&Es(()=>{if(S!==void 0)for(v of S)v.a?.apply()}),Ho.first=r.first&&r.first.e,Ho.last=p&&p.e}function iv(a,r,n,s){(s&Ts)!==0&&Cu(a.v,r),(s&As)!==0?Cu(a.i,n):a.i=n}function af(a,r,n,s,i,u,l,h,b,m){var y=(b&Ts)!==0,T=(b&yd)===0,_=y?T?Rt(i,!1,!1):ku(i):i,A=(b&As)===0?l:ku(l),p={i:A,v:_,k:u,a:null,e:null,prev:n,next:s};try{return p.e=Ua(()=>h(a,_,A,m),Gt),p.e.prev=n&&n.e,p.e.next=s&&s.e,n===null?r.first=p:(n.next=p,n.e.next=p.e),s!==null&&(s.prev=p,s.e.prev=p.e),p}finally{}}function rl(a,r,n){for(var s=a.next?a.next.e.nodes_start:n,i=r?r.e.nodes_start:n,u=a.e.nodes_start;u!==s;){var l=Ed(u);i.before(u),u=l}}function hr(a,r,n){r===null?a.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}function Oa(a,r,n,s,i){Gt&&Ss();var u=r.$$slots?.[n],l=!1;u===!0&&(u=r.children,l=!0),u===void 0||u(a,l?()=>s:s)}function ov(a,r){var n=void 0,s;Fi(()=>{n!==(n=r())&&(s&&(Ri(s),s=null),n&&(s=Ua(()=>{Rs(()=>n(a))})))})}function of(a){var r,n,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var i=a.length;for(r=0;r<i;r++)a[r]&&(n=of(a[r]))&&(s&&(s+=" "),s+=n)}else for(n in a)a[n]&&(s&&(s+=" "),s+=n);return s}function sv(){for(var a,r,n=0,s="",i=arguments.length;n<i;n++)(a=arguments[n])&&(r=of(a))&&(s&&(s+=" "),s+=r);return s}function _r(a){return typeof a=="object"?sv(a):a??""}const al=[...` 	
\r\fÂ \v\uFEFF`];function uv(a,r,n){var s=a==null?"":""+a;if(r&&(s=s?s+" "+r:r),n){for(var i in n)if(n[i])s=s?s+" "+i:i;else if(s.length)for(var u=i.length,l=0;(l=s.indexOf(i,l))>=0;){var h=l+u;(l===0||al.includes(s[l-1]))&&(h===s.length||al.includes(s[h]))?s=(l===0?"":s.substring(0,l))+s.substring(h+1):l=h}}return s===""?null:s}function il(a,r=!1){var n=r?" !important;":";",s="";for(var i in a){var u=a[i];u!=null&&u!==""&&(s+=" "+i+": "+u+n)}return s}function Co(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function cv(a,r){if(r){var n="",s,i;if(Array.isArray(r)?(s=r[0],i=r[1]):s=r,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var u=!1,l=0,h=!1,b=[];s&&b.push(...Object.keys(s).map(Co)),i&&b.push(...Object.keys(i).map(Co));var m=0,y=-1;const S=a.length;for(var T=0;T<S;T++){var _=a[T];if(h?_==="/"&&a[T-1]==="*"&&(h=!1):u?u===_&&(u=!1):_==="/"&&a[T+1]==="*"?h=!0:_==='"'||_==="'"?u=_:_==="("?l++:_===")"&&l--,!h&&u===!1&&l===0){if(_===":"&&y===-1)y=T;else if(_===";"||T===S-1){if(y!==-1){var A=Co(a.substring(m,y).trim());if(!b.includes(A)){_!==";"&&T++;var p=a.substring(m,T).trim();n+=" "+p+";"}}m=T+1,y=-1}}}}return s&&(n+=il(s)),i&&(n+=il(i,!0)),n=n.trim(),n===""?null:n}return a==null?null:String(a)}function We(a,r,n,s,i,u){var l=a.__className;if(Gt||l!==n||l===void 0){var h=uv(n,s,u);(!Gt||h!==a.getAttribute("class"))&&(h==null?a.removeAttribute("class"):r?a.className=h:a.setAttribute("class",h)),a.__className=n}else if(u&&i!==u)for(var b in u){var m=!!u[b];(i==null||m!==!!i[b])&&a.classList.toggle(b,m)}return u}function Mo(a,r={},n,s){for(var i in n){var u=n[i];r[i]!==u&&(n[i]==null?a.style.removeProperty(i):a.style.setProperty(i,u,s))}}function Ns(a,r,n,s){var i=a.__style;if(Gt||i!==r){var u=cv(r,s);(!Gt||u!==a.getAttribute("style"))&&(u==null?a.removeAttribute("style"):a.style.cssText=u),a.__style=r}else s&&(Array.isArray(s)?(Mo(a,n?.[0],s[0]),Mo(a,n?.[1],s[1],"important")):Mo(a,n,s));return s}function rs(a,r,n=!1){if(a.multiple){if(r==null)return;if(!kl(r))return Ad();for(var s of a.options)s.selected=r.includes(ol(s));return}for(s of a.options){var i=ol(s);if(Td(i,r)){s.selected=!0;return}}(!n||r!==void 0)&&(a.selectedIndex=-1)}function lv(a){var r=new MutationObserver(()=>{rs(a,a.__value)});r.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ml(()=>{r.disconnect()})}function ol(a){return"__value"in a?a.__value:a.value}const wa=Symbol("class"),Ea=Symbol("style"),sf=Symbol("is custom element"),uf=Symbol("is html");function fv(a){if(Gt){var r=!1,n=()=>{if(!r){if(r=!0,a.hasAttribute("value")){var s=a.value;Ft(a,"value",null),a.value=s}if(a.hasAttribute("checked")){var i=a.checked;Ft(a,"checked",null),a.checked=i}}};a.__on_r=n,$d(n),nv()}}function dv(a,r){var n=Us(a);n.value===(n.value=r??void 0)||a.value===r&&(r!==0||a.nodeName!=="PROGRESS")||(a.value=r??"")}function vv(a,r){r?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}function Ft(a,r,n,s){var i=Us(a);Gt&&(i[r]=a.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&a.nodeName==="LINK")||i[r]!==(i[r]=n)&&(r==="loading"&&(a[Pd]=n),n==null?a.removeAttribute(r):typeof n!="string"&&cf(a).includes(r)?a[r]=n:a.setAttribute(r,n))}function gv(a,r,n,s,i=!1){var u=Us(a),l=u[sf],h=!u[uf];let b=Gt&&l;b&&Aa(!1);var m=r||{},y=a.tagName==="OPTION";for(var T in r)T in n||(n[T]=null);n.class?n.class=_r(n.class):n[wa]&&(n.class=null),n[Ea]&&(n.style??=null);var _=cf(a);for(const x in n){let v=n[x];if(y&&x==="value"&&v==null){a.value=a.__value="",m[x]=v;continue}if(x==="class"){var A=a.namespaceURI==="http://www.w3.org/1999/xhtml";We(a,A,v,s,r?.[wa],n[wa]),m[x]=v,m[wa]=n[wa];continue}if(x==="style"){Ns(a,v,r?.[Ea],n[Ea]),m[x]=v,m[Ea]=n[Ea];continue}var p=m[x];if(!(v===p&&!(v===void 0&&a.hasAttribute(x)))){m[x]=v;var S=x[0]+x[1];if(S!=="$$")if(S==="on"){const $={},j="$$"+x;let D=x.slice(2);var P=Nd(D);if(Cd(D)&&(D=D.slice(0,-7),$.capture=!0),!P&&p){if(v!=null)continue;a.removeEventListener(D,m[j],$),m[j]=null}if(v!=null)if(P)a[`__${D}`]=v,an([D]);else{let U=function(te){m[x].call(this,te)};m[j]=Md(D,a,U,$)}else P&&(a[`__${D}`]=void 0)}else if(x==="style")Ft(a,x,v);else if(x==="autofocus")tv(a,!!v);else if(!l&&(x==="__value"||x==="value"&&v!=null))a.value=a.__value=v;else if(x==="selected"&&y)vv(a,v);else{var I=x;h||(I=Id(I));var R=I==="defaultValue"||I==="defaultChecked";if(v==null&&!l&&!R)if(u[x]=null,I==="value"||I==="checked"){let $=a;const j=r===void 0;if(I==="value"){let D=$.defaultValue;$.removeAttribute(I),$.defaultValue=D,$.value=$.__value=j?D:null}else{let D=$.defaultChecked;$.removeAttribute(I),$.defaultChecked=D,$.checked=j?D:!1}}else a.removeAttribute(x);else R||_.includes(I)&&(l||typeof v!="string")?a[I]=v:typeof v!="function"&&Ft(a,I,v)}}}return b&&Aa(!0),m}function Ls(a,r,n=[],s,i=!1,u=Od){const l=n.map(u);var h=void 0,b={},m=a.nodeName==="SELECT",y=!1;if(Fi(()=>{var _=r(...l.map(d)),A=gv(a,h,_,s,i);y&&m&&"value"in _&&rs(a,_.value);for(let S of Object.getOwnPropertySymbols(b))_[S]||Ri(b[S]);for(let S of Object.getOwnPropertySymbols(_)){var p=_[S];S.description===kd&&(!h||p!==h[S])&&(b[S]&&Ri(b[S]),b[S]=Ua(()=>ov(a,()=>p))),A[S]=p}h=A}),m){var T=a;Rs(()=>{rs(T,h.value,!0),lv(T)})}y=!0}function Us(a){return a.__attributes??={[sf]:a.nodeName.includes("-"),[uf]:a.namespaceURI===Rd}}var sl=new Map;function cf(a){var r=sl.get(a.nodeName);if(r)return r;sl.set(a.nodeName,r=[]);for(var n,s=a,i=Element.prototype;i!==s;){n=Dd(s);for(var u in n)n[u].set&&r.push(u);s=xd(s)}return r}const hv=()=>performance.now(),nr={tick:a=>requestAnimationFrame(a),now:()=>hv(),tasks:new Set};function lf(){const a=nr.now();nr.tasks.forEach(r=>{r.c(a)||(nr.tasks.delete(r),r.f())}),nr.tasks.size!==0&&nr.tick(lf)}function mv(a){let r;return nr.tasks.size===0&&nr.tick(lf),{promise:new Promise(n=>{nr.tasks.add(r={c:a,f:n})}),abort(){nr.tasks.delete(r)}}}function hi(a,r){Il(()=>{a.dispatchEvent(new CustomEvent(r))})}function pv(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const r=a.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ul(a){const r={},n=a.split(";");for(const s of n){const[i,u]=s.split(":");if(!i||u===void 0)break;const l=pv(i.trim());r[l]=u.trim()}return r}const _v=a=>a;function xt(a,r,n,s){var i=(a&Vd)!==0,u=(a&Hd)!==0,l=i&&u,h=(a&Kd)!==0,b=l?"both":i?"in":"out",m,y=r.inert,T=r.style.overflow,_,A;function p(){return Il(()=>m??=n()(r,s?.()??{},{direction:b}))}var S={is_global:h,in(){if(r.inert=y,!i){A?.abort(),A?.reset?.();return}u||_?.abort(),hi(r,"introstart"),_=as(r,p(),A,1,()=>{hi(r,"introend"),_?.abort(),_=m=void 0,r.style.overflow=T})},out(x){if(!u){x?.(),m=void 0;return}r.inert=!0,hi(r,"outrostart"),A=as(r,p(),_,0,()=>{hi(r,"outroend"),x?.()})},stop:()=>{_?.abort(),A?.abort()}},P=Ho;if((P.transitions??=[]).push(S),i&&Ld){var I=h;if(!I){for(var R=P.parent;R&&(R.f&Ud)!==0;)for(;(R=R.parent)&&(R.f&Fd)===0;);I=!R||(R.f&Bd)!==0}I&&Rs(()=>{Wn(()=>S.in())})}}function as(a,r,n,s,i){var u=s===1;if(Gd(r)){var l,h=!1;return Es(()=>{if(!h){var P=r({direction:u?"in":"out"});l=as(a,P,n,s,i)}}),{abort:()=>{h=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n?.deactivate(),!r?.duration)return i(),{abort:wn,deactivate:wn,reset:wn,t:()=>s};const{delay:b=0,css:m,tick:y,easing:T=_v}=r;var _=[];if(u&&n===void 0&&(y&&y(0,1),m)){var A=ul(m(0,1));_.push(A,A)}var p=()=>1-s,S=a.animate(_,{duration:b,fill:"forwards"});return S.onfinish=()=>{S.cancel();var P=n?.t()??1-s;n?.abort();var I=s-P,R=r.duration*Math.abs(I),x=[];if(R>0){var v=!1;if(m)for(var $=Math.ceil(R/16.666666666666668),j=0;j<=$;j+=1){var D=P+I*T(j/$),U=ul(m(D,1-D));x.push(U),v||=U.overflow==="hidden"}v&&(a.style.overflow="hidden"),p=()=>{var te=S.currentTime;return P+I*T(te/R)},y&&mv(()=>{if(S.playState!=="running")return!1;var te=p();return y(te,1-te),!0})}S=a.animate(x,{duration:R,fill:"forwards"}),S.onfinish=()=>{p=()=>s,y?.(s,1-s),i()}},{abort:()=>{S&&(S.cancel(),S.effect=null,S.onfinish=wn)},deactivate:()=>{i=wn},reset:()=>{s===0&&y?.(1,0)},t:()=>p()}}function Ye(a,r,n){var s=jd(a,r);s&&s.set&&(a[r]=n,Ml(()=>{a[r]=null}))}var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var yi={exports:{}},wv=yi.exports,cl;function Ev(){return cl||(cl=1,function(a,r){(function(n,s){a.exports=s()})(wv,function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(o[f]=c[f])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var f in t=arguments[o])Object.prototype.hasOwnProperty.call(t,f)&&(e[f]=t[f]);return e}).apply(this,arguments)};function i(e,t,o){for(var c,f=0,g=t.length;f<g;f++)!c&&f in t||((c=c||Array.prototype.slice.call(t,0,f))[f]=t[f]);return e.concat(c||Array.prototype.slice.call(t))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:yv,l=Object.keys,h=Array.isArray;function b(e,t){return typeof t!="object"||l(t).forEach(function(o){e[o]=t[o]}),e}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var m=Object.getPrototypeOf,y={}.hasOwnProperty;function T(e,t){return y.call(e,t)}function _(e,t){typeof t=="function"&&(t=t(m(e))),(typeof Reflect>"u"?l:Reflect.ownKeys)(t).forEach(function(o){p(e,o,t[o])})}var A=Object.defineProperty;function p(e,t,o,c){A(e,t,b(o&&T(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},c))}function S(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:_.bind(null,e.prototype)}}}}var P=Object.getOwnPropertyDescriptor,I=[].slice;function R(e,t,o){return I.call(e,t,o)}function x(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function $(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function j(e,t){if(typeof t=="string"&&T(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var o=[],c=0,f=t.length;c<f;++c){var g=j(e,t[c]);o.push(g)}return o}var E=t.indexOf(".");if(E!==-1){var O=e[t.substr(0,E)];return O==null?void 0:j(O,t.substr(E+1))}}function D(e,t,o){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){v(typeof o!="string"&&"length"in o);for(var c=0,f=t.length;c<f;++c)D(e,t[c],o[c])}else{var g,E,O=t.indexOf(".");O!==-1?(g=t.substr(0,O),(E=t.substr(O+1))===""?o===void 0?h(e)&&!isNaN(parseInt(g))?e.splice(g,1):delete e[g]:e[g]=o:D(O=!(O=e[g])||!T(e,g)?e[g]={}:O,E,o)):o===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=o}}function U(e){var t,o={};for(t in e)T(e,t)&&(o[t]=e[t]);return o}var te=[].concat;function ie(e){return te.apply([],e)}var ln="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ie([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return u[e]}),X=new Set(ln.map(function(e){return u[e]})),q=null;function ne(e){return q=new WeakMap,e=function t(o){if(!o||typeof o!="object")return o;var c=q.get(o);if(c)return c;if(h(o)){c=[],q.set(o,c);for(var f=0,g=o.length;f<g;++f)c.push(t(o[f]))}else if(X.has(o.constructor))c=o;else{var E,O=m(o);for(E in c=O===Object.prototype?{}:Object.create(O),q.set(o,c),o)T(o,E)&&(c[E]=t(o[E]))}return c}(e),q=null,e}var pe={}.toString;function he(e){return pe.call(e).slice(8,-1)}var Te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof Te=="symbol"?function(e){var t;return e!=null&&(t=e[Te])&&t.apply(e)}:function(){return null};function ge(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Se={};function Q(e){var t,o,c,f;if(arguments.length===1){if(h(e))return e.slice();if(this===Se&&typeof e=="string")return[e];if(f=Pe(e)){for(o=[];!(c=f.next()).done;)o.push(c.value);return o}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(o=new Array(t);t--;)o[t]=e[t];return o}for(t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return o}var re=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},cn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Rn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(cn),de={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function be(e,t){this.name=e,this.message=t}function Ie(e,t){return e+". Errors: "+Object.keys(t).map(function(o){return t[o].toString()}).filter(function(o,c,f){return f.indexOf(o)===c}).join(`
`)}function Ce(e,t,o,c){this.failures=t,this.failedKeys=c,this.successCount=o,this.message=Ie(e,t)}function ue(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(o){return t[o]}),this.failuresByPos=t,this.message=Ie(e,this.failures)}S(be).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(Ce).from(be),S(ue).from(be);var Re=Rn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ke=be,M=Rn.reduce(function(e,t){var o=t+"Error";function c(f,g){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(g?`
 `+g:""),this.inner=g||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=de[t]||o,this.inner=null)}return S(c).from(Ke),e[t]=c,e},{});M.Syntax=SyntaxError,M.Type=TypeError,M.Range=RangeError;var Ve=cn.reduce(function(e,t){return e[t+"Error"]=M[t],e},{}),ct=Rn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=M[t]),e},{});function ke(){}function ye(e){return e}function $e(e,t){return e==null||e===ye?t:function(o){return t(e(o))}}function tt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function vt(e,t){return e===ke?t:function(){var o=e.apply(this,arguments);o!==void 0&&(arguments[0]=o);var c=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var g=t.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?tt(c,this.onsuccess):c),f&&(this.onerror=this.onerror?tt(f,this.onerror):f),g!==void 0?g:o}}function yt(e,t){return e===ke?t:function(){e.apply(this,arguments);var o=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?tt(o,this.onsuccess):o),c&&(this.onerror=this.onerror?tt(c,this.onerror):c)}}function ve(e,t){return e===ke?t:function(o){var c=e.apply(this,arguments);b(o,c);var f=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,o=t.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?tt(f,this.onsuccess):f),g&&(this.onerror=this.onerror?tt(g,this.onerror):g),c===void 0?o===void 0?void 0:o:b(c,o)}}function fe(e,t){return e===ke?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function bt(e,t){return e===ke?t:function(){var o=e.apply(this,arguments);if(o&&typeof o.then=="function"){for(var c=this,f=arguments.length,g=new Array(f);f--;)g[f]=arguments[f];return o.then(function(){return t.apply(c,g)})}return t.apply(this,arguments)}}ct.ModifyError=Ce,ct.DexieError=be,ct.BulkError=ue;var wt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zt(e){wt=e}var un={},Mn=100,ln=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,m(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,m(t),e]}(),cn=ln[0],Rn=ln[1],ln=ln[2],Rn=Rn&&Rn.then,jt=cn&&cn.constructor,Kn=!!ln,An=function(e,t){Ht.push([e,t]),tn&&(queueMicrotask(eo),tn=!1)},Qn=!0,tn=!0,fn=[],Tn=[],dn=ye,Qt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ke,pgp:!1,env:{},finalize:ke},Fe=Qt,Ht=[],In=0,Ne=[];function oe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Fe;if(typeof e!="function"){if(e!==un)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Kt(this,this._value))}this._state=null,this._value=null,++t.ref,function o(c,f){try{f(function(g){if(c._state===null){if(g===c)throw new TypeError("A promise cannot be resolved with itself.");var E=c._lib&&ur();g&&typeof g.then=="function"?o(c,function(O,N){g instanceof oe?g._then(O,N):g.then(O,N)}):(c._state=!0,c._value=g,za(c)),E&&cr()}},Kt.bind(null,c))}catch(g){Kt(c,g)}}(this,e)}var Ge={get:function(){var e=Fe,t=Vn;function o(c,f){var g=this,E=!e.global&&(e!==Fe||t!==Vn),O=E&&!$n(),N=new oe(function(F,V){la(g,new ht(Ya(c,e,E,O),Ya(f,e,E,O),F,V,e))});return this._consoleTask&&(N._consoleTask=this._consoleTask),N}return o.prototype=un,o},set:function(e){p(this,"then",e&&e.prototype===un?Ge:{get:function(){return e},set:Ge.set})}};function ht(e,t,o,c,f){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=o,this.reject=c,this.psd=f}function Kt(e,t){var o,c;Tn.push(t),e._state===null&&(o=e._lib&&ur(),t=dn(t),e._state=!1,e._value=t,c=e,fn.some(function(f){return f._value===c._value})||fn.push(c),za(e),o&&cr())}function za(e){var t=e._listeners;e._listeners=[];for(var o=0,c=t.length;o<c;++o)la(e,t[o]);var f=e._PSD;--f.ref||f.finalize(),In===0&&(++In,An(function(){--In==0&&fa()},[]))}function la(e,t){if(e._state!==null){var o=e._state?t.onFulfilled:t.onRejected;if(o===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++In,An(Ji,[o,e,t])}else e._listeners.push(t)}function Ji(e,t,o){try{var c,f=t._value;!t._state&&Tn.length&&(Tn=[]),c=wt&&t._consoleTask?t._consoleTask.run(function(){return e(f)}):e(f),t._state||Tn.indexOf(f)!==-1||function(g){for(var E=fn.length;E;)if(fn[--E]._value===g._value)return fn.splice(E,1)}(t),o.resolve(c)}catch(g){o.reject(g)}finally{--In==0&&fa(),--o.psd.ref||o.psd.finalize()}}function eo(){Nn(Qt,function(){ur()&&cr()})}function ur(){var e=Qn;return tn=Qn=!1,e}function cr(){var e,t,o;do for(;0<Ht.length;)for(e=Ht,Ht=[],o=e.length,t=0;t<o;++t){var c=e[t];c[0].apply(null,c[1])}while(0<Ht.length);tn=Qn=!0}function fa(){var e=fn;fn=[],e.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var t=Ne.slice(0),o=t.length;o;)t[--o]()}function Lr(e){return new oe(un,!1,e)}function mt(e,t){var o=Fe;return function(){var c=ur(),f=Fe;try{return gn(o,!0),e.apply(this,arguments)}catch(g){t&&t(g)}finally{gn(f,!1),c&&cr()}}}_(oe.prototype,{then:Ge,_then:function(e,t){la(this,new ht(null,null,e,t,Fe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,o=arguments[1];return typeof t=="function"?this.then(null,function(c){return(c instanceof t?o:Lr)(c)}):this.then(null,function(c){return(c&&c.name===t?o:Lr)(c)})},finally:function(e){return this.then(function(t){return oe.resolve(e()).then(function(){return t})},function(t){return oe.resolve(e()).then(function(){return Lr(t)})})},timeout:function(e,t){var o=this;return e<1/0?new oe(function(c,f){var g=setTimeout(function(){return f(new M.Timeout(t))},e);o.then(c,f).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&p(oe.prototype,Symbol.toStringTag,"Dexie.Promise"),Qt.env=gt(),_(oe,{all:function(){var e=Q.apply(null,arguments).map(Rr);return new oe(function(t,o){e.length===0&&t([]);var c=e.length;e.forEach(function(f,g){return oe.resolve(f).then(function(E){e[g]=E,--c||t(e)},o)})})},resolve:function(e){return e instanceof oe?e:e&&typeof e.then=="function"?new oe(function(t,o){e.then(t,o)}):new oe(un,!0,e)},reject:Lr,race:function(){var e=Q.apply(null,arguments).map(Rr);return new oe(function(t,o){e.map(function(c){return oe.resolve(c).then(t,o)})})},PSD:{get:function(){return Fe},set:function(e){return Fe=e}},totalEchoes:{get:function(){return Vn}},newPSD:vn,usePSD:Nn,scheduler:{get:function(){return An},set:function(e){An=e}},rejectionMapper:{get:function(){return dn},set:function(e){dn=e}},follow:function(e,t){return new oe(function(o,c){return vn(function(f,g){var E=Fe;E.unhandleds=[],E.onunhandled=g,E.finalize=tt(function(){var O,N=this;O=function(){N.unhandleds.length===0?f():g(N.unhandleds[0])},Ne.push(function F(){O(),Ne.splice(Ne.indexOf(F),1)}),++In,An(function(){--In==0&&fa()},[])},E.finalize),e()},t,o,c)})}}),jt&&(jt.allSettled&&p(oe,"allSettled",function(){var e=Q.apply(null,arguments).map(Rr);return new oe(function(t){e.length===0&&t([]);var o=e.length,c=new Array(o);e.forEach(function(f,g){return oe.resolve(f).then(function(E){return c[g]={status:"fulfilled",value:E}},function(E){return c[g]={status:"rejected",reason:E}}).then(function(){return--o||t(c)})})})}),jt.any&&typeof AggregateError<"u"&&p(oe,"any",function(){var e=Q.apply(null,arguments).map(Rr);return new oe(function(t,o){e.length===0&&o(new AggregateError([]));var c=e.length,f=new Array(c);e.forEach(function(g,E){return oe.resolve(g).then(function(O){return t(O)},function(O){f[E]=O,--c||o(new AggregateError(f))})})})}),jt.withResolvers&&(oe.withResolvers=jt.withResolvers));var Dt={awaits:0,echoes:0,id:0},to=0,Ar=[],lr=0,Vn=0,Tr=0;function vn(e,t,o,c){var f=Fe,g=Object.create(f);return g.parent=f,g.ref=0,g.global=!1,g.id=++Tr,Qt.env,g.env=Kn?{Promise:oe,PromiseProp:{value:oe,configurable:!0,writable:!0},all:oe.all,race:oe.race,allSettled:oe.allSettled,any:oe.any,resolve:oe.resolve,reject:oe.reject}:{},t&&b(g,t),++f.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Nn(g,e,o,c),g.ref===0&&g.finalize(),c}function Jn(){return Dt.id||(Dt.id=++to),++Dt.awaits,Dt.echoes+=Mn,Dt.id}function $n(){return!!Dt.awaits&&(--Dt.awaits==0&&(Dt.id=0),Dt.echoes=Dt.awaits*Mn,!0)}function Rr(e){return Dt.echoes&&e&&e.constructor===jt?(Jn(),e.then(function(t){return $n(),t},function(t){return $n(),Be(t)})):e}function qa(){var e=Ar[Ar.length-1];Ar.pop(),gn(e,!1)}function gn(e,t){var o,c=Fe;(t?!Dt.echoes||lr++&&e===Fe:!lr||--lr&&e===Fe)||queueMicrotask(t?(function(f){++Vn,Dt.echoes&&--Dt.echoes!=0||(Dt.echoes=Dt.awaits=Dt.id=0),Ar.push(Fe),gn(f,!0)}).bind(null,e):qa),e!==Fe&&(Fe=e,c===Qt&&(Qt.env=gt()),Kn&&(o=Qt.env.Promise,t=e.env,(c.global||e.global)&&(Object.defineProperty(u,"Promise",t.PromiseProp),o.all=t.all,o.race=t.race,o.resolve=t.resolve,o.reject=t.reject,t.allSettled&&(o.allSettled=t.allSettled),t.any&&(o.any=t.any))))}function gt(){var e=u.Promise;return Kn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Nn(e,t,o,c,f){var g=Fe;try{return gn(e,!0),t(o,c,f)}finally{gn(g,!1)}}function Ya(e,t,o,c){return typeof e!="function"?e:function(){var f=Fe;o&&Jn(),gn(t,!0);try{return e.apply(this,arguments)}finally{gn(f,!1),c&&queueMicrotask($n)}}}function qe(e){Promise===jt&&Dt.echoes===0?lr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Rn).indexOf("[native code]")===-1&&(Jn=$n=ke);var Be=oe.reject,Ot="ï¿¿",hn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xa="String expected.",Ur=[],Za="__dbnames",no="readonly",ro="readwrite";function xr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var au={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qa(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=ne(t))[e],t}}function iu(){throw M.Type()}function ot(e,t){try{var o=ou(e),c=ou(t);if(o!==c)return o==="Array"?1:c==="Array"?-1:o==="binary"?1:c==="binary"?-1:o==="string"?1:c==="string"?-1:o==="Date"?1:c!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(f,g){for(var E=f.length,O=g.length,N=E<O?E:O,F=0;F<N;++F)if(f[F]!==g[F])return f[F]<g[F]?-1:1;return E===O?0:E<O?-1:1}(su(e),su(t));case"Array":return function(f,g){for(var E=f.length,O=g.length,N=E<O?E:O,F=0;F<N;++F){var V=ot(f[F],g[F]);if(V!==0)return V}return E===O?0:E<O?-1:1}(e,t)}}catch{}return NaN}function ou(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=he(e),e==="ArrayBuffer"?"binary":e)}function su(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var uu=(_t.prototype._trans=function(e,t,o){var c=this._tx||Fe.trans,f=this.name,g=wt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function E(F,V,C){if(!C.schema[f])throw new M.NotFound("Table "+f+" not part of transaction");return t(C.idbtrans,C)}var O=ur();try{var N=c&&c.db._novip===this.db._novip?c===Fe.trans?c._promise(e,E,o):vn(function(){return c._promise(e,E,o)},{trans:c,transless:Fe.transless||Fe}):function F(V,C,G,L){if(V.idbdb&&(V._state.openComplete||Fe.letThrough||V._vip)){var K=V._createTransaction(C,G,V._dbSchema);try{K.create(),V._state.PR1398_maxLoop=3}catch(H){return H.name===Re.InvalidState&&V.isOpen()&&0<--V._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),V.close({disableAutoOpen:!1}),V.open().then(function(){return F(V,C,G,L)})):Be(H)}return K._promise(C,function(H,B){return vn(function(){return Fe.trans=K,L(H,B,K)})}).then(function(H){if(C==="readwrite")try{K.idbtrans.commit()}catch{}return C==="readonly"?H:K._completion.then(function(){return H})})}if(V._state.openComplete)return Be(new M.DatabaseClosed(V._state.dbOpenError));if(!V._state.isBeingOpened){if(!V._state.autoOpen)return Be(new M.DatabaseClosed);V.open().catch(ke)}return V._state.dbReadyPromise.then(function(){return F(V,C,G,L)})}(this.db,e,[this.name],E);return g&&(N._consoleTask=g,N=N.catch(function(F){return console.trace(F),Be(F)})),N}finally{O&&cr()}},_t.prototype.get=function(e,t){var o=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Be(new M.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return o.core.get({trans:c,key:e}).then(function(f){return o.hook.reading.fire(f)})}).then(t)},_t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=l(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&t.every(function(F){return 0<=O.keyPath.indexOf(F)})){for(var N=0;N<t.length;++N)if(t.indexOf(O.keyPath[N])===-1)return!1;return!0}return!1}).sort(function(O,N){return O.keyPath.length-N.keyPath.length})[0];if(o&&this.db._maxKey!==Ot){var g=o.keyPath.slice(0,t.length);return this.where(g).equals(g.map(function(N){return e[N]}))}!o&&wt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var c=this.schema.idxByName;function f(O,N){return ot(O,N)===0}var E=t.reduce(function(C,N){var F=C[0],V=C[1],C=c[N],G=e[N];return[F||C,F||!C?xr(V,C&&C.multi?function(L){return L=j(L,N),h(L)&&L.some(function(K){return f(G,K)})}:function(L){return f(G,j(L,N))}):V]},[null,null]),g=E[0],E=E[1];return g?this.where(g.name).equals(e[g.keyPath]).filter(E):o?this.filter(E):this.where(t).equals("")},_t.prototype.filter=function(e){return this.toCollection().and(e)},_t.prototype.count=function(e){return this.toCollection().count(e)},_t.prototype.offset=function(e){return this.toCollection().offset(e)},_t.prototype.limit=function(e){return this.toCollection().limit(e)},_t.prototype.each=function(e){return this.toCollection().each(e)},_t.prototype.toArray=function(e){return this.toCollection().toArray(e)},_t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},_t.prototype.reverse=function(){return this.toCollection().reverse()},_t.prototype.mapToClass=function(e){var t,o=this.db,c=this.name;function f(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof iu&&(function(N,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function V(){this.constructor=N}n(N,F),N.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V)}(f,t=e),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return c},e=f);for(var g=new Set,E=e.prototype;E;E=m(E))Object.getOwnPropertyNames(E).forEach(function(N){return g.add(N)});function O(N){if(!N)return N;var F,V=Object.create(e.prototype);for(F in N)if(!g.has(F))try{V[F]=N[F]}catch{}return V}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=O,this.hook("reading",O),e},_t.prototype.defineClass=function(){return this.mapToClass(function(e){b(this,e)})},_t.prototype.add=function(e,t){var o=this,c=this.schema.primKey,f=c.auto,g=c.keyPath,E=e;return g&&f&&(E=Qa(g)(e)),this._trans("readwrite",function(O){return o.core.mutate({trans:O,type:"add",keys:t!=null?[t]:null,values:[E]})}).then(function(O){return O.numFailures?oe.reject(O.failures[0]):O.lastResult}).then(function(O){if(g)try{D(e,g,O)}catch{}return O})},_t.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=j(e,this.schema.primKey.keyPath),e===void 0?Be(new M.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},_t.prototype.put=function(e,t){var o=this,c=this.schema.primKey,f=c.auto,g=c.keyPath,E=e;return g&&f&&(E=Qa(g)(e)),this._trans("readwrite",function(O){return o.core.mutate({trans:O,type:"put",values:[E],keys:t!=null?[t]:null})}).then(function(O){return O.numFailures?oe.reject(O.failures[0]):O.lastResult}).then(function(O){if(g)try{D(e,g,O)}catch{}return O})},_t.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"delete",keys:[e]})}).then(function(o){return o.numFailures?oe.reject(o.failures[0]):void 0})},_t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:au})}).then(function(t){return t.numFailures?oe.reject(t.failures[0]):void 0})},_t.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(o){return t.core.getMany({keys:e,trans:o}).then(function(c){return c.map(function(f){return t.hook.reading.fire(f)})})})},_t.prototype.bulkAdd=function(e,t,o){var c=this,f=Array.isArray(t)?t:void 0,g=(o=o||(f?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(E){var F=c.schema.primKey,O=F.auto,F=F.keyPath;if(F&&f)throw new M.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");var N=e.length,F=F&&O?e.map(Qa(F)):e;return c.core.mutate({trans:E,type:"add",keys:f,values:F,wantResults:g}).then(function(K){var C=K.numFailures,G=K.results,L=K.lastResult,K=K.failures;if(C===0)return g?G:L;throw new ue("".concat(c.name,".bulkAdd(): ").concat(C," of ").concat(N," operations failed"),K)})})},_t.prototype.bulkPut=function(e,t,o){var c=this,f=Array.isArray(t)?t:void 0,g=(o=o||(f?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(E){var F=c.schema.primKey,O=F.auto,F=F.keyPath;if(F&&f)throw new M.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");var N=e.length,F=F&&O?e.map(Qa(F)):e;return c.core.mutate({trans:E,type:"put",keys:f,values:F,wantResults:g}).then(function(K){var C=K.numFailures,G=K.results,L=K.lastResult,K=K.failures;if(C===0)return g?G:L;throw new ue("".concat(c.name,".bulkPut(): ").concat(C," of ").concat(N," operations failed"),K)})})},_t.prototype.bulkUpdate=function(e){var t=this,o=this.core,c=e.map(function(E){return E.key}),f=e.map(function(E){return E.changes}),g=[];return this._trans("readwrite",function(E){return o.getMany({trans:E,keys:c,cache:"clone"}).then(function(O){var N=[],F=[];e.forEach(function(C,G){var L=C.key,K=C.changes,H=O[G];if(H){for(var B=0,Y=Object.keys(K);B<Y.length;B++){var J=Y[B],ee=K[J];if(J===t.schema.primKey.keyPath){if(ot(ee,L)!==0)throw new M.Constraint("Cannot update primary key in bulkUpdate()")}else D(H,J,ee)}g.push(G),N.push(L),F.push(H)}});var V=N.length;return o.mutate({trans:E,type:"put",keys:N,values:F,updates:{keys:c,changeSpecs:f}}).then(function(C){var G=C.numFailures,L=C.failures;if(G===0)return V;for(var K=0,H=Object.keys(L);K<H.length;K++){var B,Y=H[K],J=g[Number(Y)];J!=null&&(B=L[Y],delete L[Y],L[J]=B)}throw new ue("".concat(t.name,".bulkUpdate(): ").concat(G," of ").concat(V," operations failed"),L)})})})},_t.prototype.bulkDelete=function(e){var t=this,o=e.length;return this._trans("readwrite",function(c){return t.core.mutate({trans:c,type:"delete",keys:e})}).then(function(E){var f=E.numFailures,g=E.lastResult,E=E.failures;if(f===0)return g;throw new ue("".concat(t.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),E)})},_t);function _t(){}function da(e){function t(E,O){if(O){for(var N=arguments.length,F=new Array(N-1);--N;)F[N-1]=arguments[N];return o[E].subscribe.apply(null,F),e}if(typeof E=="string")return o[E]}var o={};t.addEventType=g;for(var c=1,f=arguments.length;c<f;++c)g(arguments[c]);return t;function g(E,O,N){if(typeof E!="object"){var F;O=O||fe;var V={subscribers:[],fire:N=N||ke,subscribe:function(C){V.subscribers.indexOf(C)===-1&&(V.subscribers.push(C),V.fire=O(V.fire,C))},unsubscribe:function(C){V.subscribers=V.subscribers.filter(function(G){return G!==C}),V.fire=V.subscribers.reduce(O,N)}};return o[E]=t[E]=V}l(F=E).forEach(function(C){var G=F[C];if(h(G))g(C,F[C][0],F[C][1]);else{if(G!=="asap")throw new M.InvalidArgument("Invalid event config");var L=g(C,ye,function(){for(var K=arguments.length,H=new Array(K);K--;)H[K]=arguments[K];L.subscribers.forEach(function(B){$(function(){B.apply(null,H)})})})}})}}function va(e,t){return S(t).from({prototype:e}),t}function Fr(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ao(e,t){e.filter=xr(e.filter,t)}function io(e,t,o){var c=e.replayFilter;e.replayFilter=c?function(){return xr(c(),t())}:t,e.justLimit=o&&!c}function Ja(e,t){if(e.isPrimKey)return t.primaryKey;var o=t.getIndexByKeyPath(e.index);if(!o)throw new M.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return o}function cu(e,t,o){var c=Ja(e,t.schema);return t.openCursor({trans:o,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:c,range:e.range}})}function ei(e,t,o,c){var f=e.replayFilter?xr(e.filter,e.replayFilter()):e.filter;if(e.or){var g={},E=function(O,N,F){var V,C;f&&!f(N,F,function(G){return N.stop(G)},function(G){return N.fail(G)})||((C=""+(V=N.primaryKey))=="[object ArrayBuffer]"&&(C=""+new Uint8Array(V)),T(g,C)||(g[C]=!0,t(O,N,F)))};return Promise.all([e.or._iterate(E,o),lu(cu(e,c,o),e.algorithm,E,!e.keysOnly&&e.valueMapper)])}return lu(cu(e,c,o),xr(e.algorithm,f),t,!e.keysOnly&&e.valueMapper)}function lu(e,t,o,c){var f=mt(c?function(g,E,O){return o(c(g),E,O)}:o);return e.then(function(g){if(g)return g.start(function(){var E=function(){return g.continue()};t&&!t(g,function(O){return E=O},function(O){g.stop(O),E=ke},function(O){g.fail(O),E=ke})||f(g.value,g,function(O){return E=O}),E()})})}var ga=(fu.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var o=t.add;if(h(o))return i(i([],h(e)?e:[],!0),o).sort();if(typeof o=="number")return(Number(e)||0)+o;if(typeof o=="bigint")try{return BigInt(e)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(t.remove!==void 0){var c=t.remove;if(h(c))return h(e)?e.filter(function(f){return!c.includes(f)}).sort():[];if(typeof c=="number")return Number(e)-c;if(typeof c=="bigint")try{return BigInt(e)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return o=(o=t.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof e=="string"&&e.startsWith(o)?t.replacePrefix[1]+e.substring(o.length):e},fu);function fu(e){this["@@propmod"]=e}var Vf=(st.prototype._read=function(e,t){var o=this._ctx;return o.error?o.table._trans(null,Be.bind(null,o.error)):o.table._trans("readonly",e).then(t)},st.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Be.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},st.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=xr(t.algorithm,e)},st.prototype._iterate=function(e,t){return ei(this._ctx,e,t,this._ctx.table.core)},st.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&b(o,e),t._ctx=o,t},st.prototype.raw=function(){return this._ctx.valueMapper=null,this},st.prototype.each=function(e){var t=this._ctx;return this._read(function(o){return ei(t,e,o,t.table.core)})},st.prototype.count=function(e){var t=this;return this._read(function(o){var c=t._ctx,f=c.table.core;if(Fr(c,!0))return f.count({trans:o,query:{index:Ja(c,f.schema),range:c.range}}).then(function(E){return Math.min(E,c.limit)});var g=0;return ei(c,function(){return++g,!1},o,f).then(function(){return g})}).then(e)},st.prototype.sortBy=function(e,t){var o=e.split(".").reverse(),c=o[0],f=o.length-1;function g(N,F){return F?g(N[o[F]],F-1):N[c]}var E=this._ctx.dir==="next"?1:-1;function O(N,F){return ot(g(N,f),g(F,f))*E}return this.toArray(function(N){return N.sort(O)}).then(t)},st.prototype.toArray=function(e){var t=this;return this._read(function(o){var c=t._ctx;if(c.dir==="next"&&Fr(c,!0)&&0<c.limit){var f=c.valueMapper,g=Ja(c,c.table.core.schema);return c.table.core.query({trans:o,limit:c.limit,values:!0,query:{index:g,range:c.range}}).then(function(O){return O=O.result,f?O.map(f):O})}var E=[];return ei(c,function(O){return E.push(O)},o,c.table.core).then(function(){return E})},e)},st.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Fr(t)?io(t,function(){var o=e;return function(c,f){return o===0||(o===1?--o:f(function(){c.advance(o),o=0}),!1)}}):io(t,function(){var o=e;return function(){return--o<0}})),this},st.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),io(this._ctx,function(){var t=e;return function(o,c,f){return--t<=0&&c(f),0<=t}},!0),this},st.prototype.until=function(e,t){return ao(this._ctx,function(o,c,f){return!e(o.value)||(c(f),t)}),this},st.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},st.prototype.last=function(e){return this.reverse().first(e)},st.prototype.filter=function(e){var t;return ao(this._ctx,function(o){return e(o.value)}),(t=this._ctx).isMatch=xr(t.isMatch,e),this},st.prototype.and=function(e){return this.filter(e)},st.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},st.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},st.prototype.desc=function(){return this.reverse()},st.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,c){e(c.key,c)})},st.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},st.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,c){e(c.primaryKey,c)})},st.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var o=[];return this.each(function(c,f){o.push(f.key)}).then(function(){return o}).then(e)},st.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Fr(t,!0)&&0<t.limit)return this._read(function(c){var f=Ja(t,t.table.core.schema);return t.table.core.query({trans:c,values:!1,limit:t.limit,query:{index:f,range:t.range}})}).then(function(c){return c.result}).then(e);t.keysOnly=!t.isMatch;var o=[];return this.each(function(c,f){o.push(f.primaryKey)}).then(function(){return o}).then(e)},st.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},st.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},st.prototype.lastKey=function(e){return this.reverse().firstKey(e)},st.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return ao(this._ctx,function(f){var c=f.primaryKey.toString(),f=T(t,c);return t[c]=!0,!f}),this},st.prototype.modify=function(e){var t=this,o=this._ctx;return this._write(function(c){var f,g,E;E=typeof e=="function"?e:(f=l(e),g=f.length,function(B){for(var Y=!1,J=0;J<g;++J){var ee=f[J],ce=e[ee],we=j(B,ee);ce instanceof ga?(D(B,ee,ce.execute(we)),Y=!0):we!==ce&&(D(B,ee,ce),Y=!0)}return Y});var O=o.table.core,C=O.schema.primaryKey,N=C.outbound,F=C.extractKey,V=200,C=t.db._options.modifyChunkSize;C&&(V=typeof C=="object"?C[O.name]||C["*"]||200:C);function G(B,ee){var J=ee.failures,ee=ee.numFailures;K+=B-ee;for(var ce=0,we=l(J);ce<we.length;ce++){var Oe=we[ce];L.push(J[Oe])}}var L=[],K=0,H=[];return t.clone().primaryKeys().then(function(B){function Y(ee){var ce=Math.min(V,B.length-ee);return O.getMany({trans:c,keys:B.slice(ee,ee+ce),cache:"immutable"}).then(function(we){for(var Oe=[],Ee=[],xe=N?[]:null,Me=[],De=0;De<ce;++De){var Ue=we[De],Je={value:ne(Ue),primKey:B[ee+De]};E.call(Je,Je.value,Je)!==!1&&(Je.value==null?Me.push(B[ee+De]):N||ot(F(Ue),F(Je.value))===0?(Ee.push(Je.value),N&&xe.push(B[ee+De])):(Me.push(B[ee+De]),Oe.push(Je.value)))}return Promise.resolve(0<Oe.length&&O.mutate({trans:c,type:"add",values:Oe}).then(function(nt){for(var rt in nt.failures)Me.splice(parseInt(rt),1);G(Oe.length,nt)})).then(function(){return(0<Ee.length||J&&typeof e=="object")&&O.mutate({trans:c,type:"put",keys:xe,values:Ee,criteria:J,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<ee}).then(function(nt){return G(Ee.length,nt)})}).then(function(){return(0<Me.length||J&&e===oo)&&O.mutate({trans:c,type:"delete",keys:Me,criteria:J,isAdditionalChunk:0<ee}).then(function(nt){return G(Me.length,nt)})}).then(function(){return B.length>ee+ce&&Y(ee+V)})})}var J=Fr(o)&&o.limit===1/0&&(typeof e!="function"||e===oo)&&{index:o.index,range:o.range};return Y(0).then(function(){if(0<L.length)throw new Ce("Error modifying one or more objects",L,K,H);return B.length})})})},st.prototype.delete=function(){var e=this._ctx,t=e.range;return Fr(e)&&(e.isPrimKey||t.type===3)?this._write(function(o){var c=e.table.core.schema.primaryKey,f=t;return e.table.core.count({trans:o,query:{index:c,range:f}}).then(function(g){return e.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(E){var O=E.failures;if(E.lastResult,E.results,E=E.numFailures,E)throw new Ce("Could not delete some values",Object.keys(O).map(function(N){return O[N]}),g-E);return g-E})})}):this.modify(oo)},st);function st(){}var oo=function(e,t){return t.value=null};function Hf(e,t){return e<t?-1:e===t?0:1}function Gf(e,t){return t<e?-1:e===t?0:1}function mn(e,t,o){return e=e instanceof vu?new e.Collection(e):e,e._ctx.error=new(o||TypeError)(t),e}function Br(e){return new e.Collection(e,function(){return du("")}).limit(0)}function ti(e,t,o,c){var f,g,E,O,N,F,V,C=o.length;if(!o.every(function(K){return typeof K=="string"}))return mn(e,Xa);function G(K){f=K==="next"?function(B){return B.toUpperCase()}:function(B){return B.toLowerCase()},g=K==="next"?function(B){return B.toLowerCase()}:function(B){return B.toUpperCase()},E=K==="next"?Hf:Gf;var H=o.map(function(B){return{lower:g(B),upper:f(B)}}).sort(function(B,Y){return E(B.lower,Y.lower)});O=H.map(function(B){return B.upper}),N=H.map(function(B){return B.lower}),V=(F=K)==="next"?"":c}G("next"),e=new e.Collection(e,function(){return fr(O[0],N[C-1]+c)}),e._ondirectionchange=function(K){G(K)};var L=0;return e._addAlgorithm(function(K,H,B){var Y=K.key;if(typeof Y!="string")return!1;var J=g(Y);if(t(J,N,L))return!0;for(var ee=null,ce=L;ce<C;++ce){var we=function(Oe,Ee,xe,Me,De,Ue){for(var Je=Math.min(Oe.length,Me.length),nt=-1,rt=0;rt<Je;++rt){var pn=Ee[rt];if(pn!==Me[rt])return De(Oe[rt],xe[rt])<0?Oe.substr(0,rt)+xe[rt]+xe.substr(rt+1):De(Oe[rt],Me[rt])<0?Oe.substr(0,rt)+Me[rt]+xe.substr(rt+1):0<=nt?Oe.substr(0,nt)+Ee[nt]+xe.substr(nt+1):null;De(Oe[rt],pn)<0&&(nt=rt)}return Je<Me.length&&Ue==="next"?Oe+xe.substr(Oe.length):Je<Oe.length&&Ue==="prev"?Oe.substr(0,xe.length):nt<0?null:Oe.substr(0,nt)+Me[nt]+xe.substr(nt+1)}(Y,J,O[ce],N[ce],E,F);we===null&&ee===null?L=ce+1:(ee===null||0<E(ee,we))&&(ee=we)}return H(ee!==null?function(){K.continue(ee+V)}:B),!1}),e}function fr(e,t,o,c){return{type:2,lower:e,upper:t,lowerOpen:o,upperOpen:c}}function du(e){return{type:1,lower:e,upper:e}}var vu=(Object.defineProperty(Vt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Vt.prototype.between=function(e,t,o,c){o=o!==!1,c=c===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(o||c)&&(!o||!c)?Br(this):new this.Collection(this,function(){return fr(e,t,!o,!c)})}catch{return mn(this,hn)}},Vt.prototype.equals=function(e){return e==null?mn(this,hn):new this.Collection(this,function(){return du(e)})},Vt.prototype.above=function(e){return e==null?mn(this,hn):new this.Collection(this,function(){return fr(e,void 0,!0)})},Vt.prototype.aboveOrEqual=function(e){return e==null?mn(this,hn):new this.Collection(this,function(){return fr(e,void 0,!1)})},Vt.prototype.below=function(e){return e==null?mn(this,hn):new this.Collection(this,function(){return fr(void 0,e,!1,!0)})},Vt.prototype.belowOrEqual=function(e){return e==null?mn(this,hn):new this.Collection(this,function(){return fr(void 0,e)})},Vt.prototype.startsWith=function(e){return typeof e!="string"?mn(this,Xa):this.between(e,e+Ot,!0,!0)},Vt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):ti(this,function(t,o){return t.indexOf(o[0])===0},[e],Ot)},Vt.prototype.equalsIgnoreCase=function(e){return ti(this,function(t,o){return t===o[0]},[e],"")},Vt.prototype.anyOfIgnoreCase=function(){var e=Q.apply(Se,arguments);return e.length===0?Br(this):ti(this,function(t,o){return o.indexOf(t)!==-1},e,"")},Vt.prototype.startsWithAnyOfIgnoreCase=function(){var e=Q.apply(Se,arguments);return e.length===0?Br(this):ti(this,function(t,o){return o.some(function(c){return t.indexOf(c)===0})},e,Ot)},Vt.prototype.anyOf=function(){var e=this,t=Q.apply(Se,arguments),o=this._cmp;try{t.sort(o)}catch{return mn(this,hn)}if(t.length===0)return Br(this);var c=new this.Collection(this,function(){return fr(t[0],t[t.length-1])});c._ondirectionchange=function(g){o=g==="next"?e._ascending:e._descending,t.sort(o)};var f=0;return c._addAlgorithm(function(g,E,O){for(var N=g.key;0<o(N,t[f]);)if(++f===t.length)return E(O),!1;return o(N,t[f])===0||(E(function(){g.continue(t[f])}),!1)}),c},Vt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Vt.prototype.noneOf=function(){var e=Q.apply(Se,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return mn(this,hn)}var t=e.reduce(function(o,c){return o?o.concat([[o[o.length-1][1],c]]):[[-1/0,c]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Vt.prototype.inAnyRange=function(Y,t){var o=this,c=this._cmp,f=this._ascending,g=this._descending,E=this._min,O=this._max;if(Y.length===0)return Br(this);if(!Y.every(function(J){return J[0]!==void 0&&J[1]!==void 0&&f(J[0],J[1])<=0}))return mn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",M.InvalidArgument);var N=!t||t.includeLowers!==!1,F=t&&t.includeUppers===!0,V,C=f;function G(J,ee){return C(J[0],ee[0])}try{(V=Y.reduce(function(J,ee){for(var ce=0,we=J.length;ce<we;++ce){var Oe=J[ce];if(c(ee[0],Oe[1])<0&&0<c(ee[1],Oe[0])){Oe[0]=E(Oe[0],ee[0]),Oe[1]=O(Oe[1],ee[1]);break}}return ce===we&&J.push(ee),J},[])).sort(G)}catch{return mn(this,hn)}var L=0,K=F?function(J){return 0<f(J,V[L][1])}:function(J){return 0<=f(J,V[L][1])},H=N?function(J){return 0<g(J,V[L][0])}:function(J){return 0<=g(J,V[L][0])},B=K,Y=new this.Collection(this,function(){return fr(V[0][0],V[V.length-1][1],!N,!F)});return Y._ondirectionchange=function(J){C=J==="next"?(B=K,f):(B=H,g),V.sort(G)},Y._addAlgorithm(function(J,ee,ce){for(var we,Oe=J.key;B(Oe);)if(++L===V.length)return ee(ce),!1;return!K(we=Oe)&&!H(we)||(o._cmp(Oe,V[L][1])===0||o._cmp(Oe,V[L][0])===0||ee(function(){C===f?J.continue(V[L][0]):J.continue(V[L][1])}),!1)}),Y},Vt.prototype.startsWithAnyOf=function(){var e=Q.apply(Se,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Br(this):this.inAnyRange(e.map(function(t){return[t,t+Ot]})):mn(this,"startsWithAnyOf() only works with strings")},Vt);function Vt(){}function Hn(e){return mt(function(t){return ha(t),e(t.target.error),!1})}function ha(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ma="storagemutated",so="x-storagemutated-1",dr=da(null,ma),jf=(Gn.prototype._lock=function(){return v(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},Gn.prototype._unlock=function(){if(v(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Nn(e[1],e[0])}catch{}}return this},Gn.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},Gn.prototype.create=function(e){var t=this;if(!this.mode)return this;var o=this.db.idbdb,c=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!o)switch(c&&c.name){case"DatabaseClosedError":throw new M.DatabaseClosed(c);case"MissingAPIError":throw new M.MissingAPI(c.message,c);default:throw new M.OpenFailed(c)}if(!this.active)throw new M.TransactionInactive;return v(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=mt(function(f){ha(f),t._reject(e.error)}),e.onabort=mt(function(f){ha(f),t.active&&t._reject(new M.Abort(e.error)),t.active=!1,t.on("abort").fire(f)}),e.oncomplete=mt(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&dr.storagemutated.fire(e.mutatedParts)}),this},Gn.prototype._promise=function(e,t,o){var c=this;if(e==="readwrite"&&this.mode!=="readwrite")return Be(new M.ReadOnly("Transaction is readonly"));if(!this.active)return Be(new M.TransactionInactive);if(this._locked())return new oe(function(g,E){c._blockedFuncs.push([function(){c._promise(e,t,o).then(g,E)},Fe])});if(o)return vn(function(){var g=new oe(function(E,O){c._lock();var N=t(E,O,c);N&&N.then&&N.then(E,O)});return g.finally(function(){return c._unlock()}),g._lib=!0,g});var f=new oe(function(g,E){var O=t(g,E,c);O&&O.then&&O.then(g,E)});return f._lib=!0,f},Gn.prototype._root=function(){return this.parent?this.parent._root():this},Gn.prototype.waitFor=function(e){var t,o=this._root(),c=oe.resolve(e);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return c}):(o._waitingFor=c,o._waitingQueue=[],t=o.idbtrans.objectStore(o.storeNames[0]),function g(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(t.get(-1/0).onsuccess=g)}());var f=o._waitingFor;return new oe(function(g,E){c.then(function(O){return o._waitingQueue.push(mt(g.bind(null,O)))},function(O){return o._waitingQueue.push(mt(E.bind(null,O)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},Gn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new M.Abort))},Gn.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(T(t,e))return t[e];var o=this.schema[e];if(!o)throw new M.NotFound("Table "+e+" not part of transaction");return o=new this.db.Table(e,o,this),o.core=this.db.core.table(e),t[e]=o},Gn);function Gn(){}function uo(e,t,o,c,f,g,E){return{name:e,keyPath:t,unique:o,multi:c,auto:f,compound:g,src:(o&&!E?"&":"")+(c?"*":"")+(f?"++":"")+gu(t)}}function gu(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function co(e,t,o){return{name:e,primKey:t,indexes:o,mappedClass:null,idxByName:(c=function(f){return[f.name,f]},o.reduce(function(f,g,E){return E=c(g,E),E&&(f[E[0]]=E[1]),f},{}))};var c}var pa=function(e){try{return e.only([[]]),pa=function(){return[[]]},[[]]}catch{return pa=function(){return Ot},Ot}};function lo(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(o){return o[t]}:function(o){return j(o,t)}:function(o){return j(o,e)};var t}function hu(e){return[].slice.call(e)}var Wf=0;function _a(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function zf(e,t,N){function c(B){if(B.type===3)return null;if(B.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var L=B.lower,K=B.upper,H=B.lowerOpen,B=B.upperOpen;return L===void 0?K===void 0?null:t.upperBound(K,!!B):K===void 0?t.lowerBound(L,!!H):t.bound(L,K,!!H,!!B)}function f(G){var L,K=G.name;return{name:K,schema:G,mutate:function(H){var B=H.trans,Y=H.type,J=H.keys,ee=H.values,ce=H.range;return new Promise(function(we,Oe){we=mt(we);var Ee=B.objectStore(K),xe=Ee.keyPath==null,Me=Y==="put"||Y==="add";if(!Me&&Y!=="delete"&&Y!=="deleteRange")throw new Error("Invalid operation type: "+Y);var De,Ue=(J||ee||{length:1}).length;if(J&&ee&&J.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(Ue===0)return we({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(Jt){++pn,ha(Jt)}var nt=[],rt=[],pn=0;if(Y==="deleteRange"){if(ce.type===4)return we({numFailures:pn,failures:rt,results:[],lastResult:void 0});ce.type===3?nt.push(De=Ee.clear()):nt.push(De=Ee.delete(c(ce)))}else{var xe=Me?xe?[ee,J]:[ee,null]:[J,null],Ze=xe[0],zt=xe[1];if(Me)for(var qt=0;qt<Ue;++qt)nt.push(De=zt&&zt[qt]!==void 0?Ee[Y](Ze[qt],zt[qt]):Ee[Y](Ze[qt])),De.onerror=Je;else for(qt=0;qt<Ue;++qt)nt.push(De=Ee[Y](Ze[qt])),De.onerror=Je}function gi(Jt){Jt=Jt.target.result,nt.forEach(function(Or,Do){return Or.error!=null&&(rt[Do]=Or.error)}),we({numFailures:pn,failures:rt,results:Y==="delete"?J:nt.map(function(Or){return Or.result}),lastResult:Jt})}De.onerror=function(Jt){Je(Jt),gi(Jt)},De.onsuccess=gi})},getMany:function(H){var B=H.trans,Y=H.keys;return new Promise(function(J,ee){J=mt(J);for(var ce,we=B.objectStore(K),Oe=Y.length,Ee=new Array(Oe),xe=0,Me=0,De=function(nt){nt=nt.target,Ee[nt._pos]=nt.result,++Me===xe&&J(Ee)},Ue=Hn(ee),Je=0;Je<Oe;++Je)Y[Je]!=null&&((ce=we.get(Y[Je]))._pos=Je,ce.onsuccess=De,ce.onerror=Ue,++xe);xe===0&&J(Ee)})},get:function(H){var B=H.trans,Y=H.key;return new Promise(function(J,ee){J=mt(J);var ce=B.objectStore(K).get(Y);ce.onsuccess=function(we){return J(we.target.result)},ce.onerror=Hn(ee)})},query:(L=F,function(H){return new Promise(function(B,Y){B=mt(B);var J,ee,ce,xe=H.trans,we=H.values,Oe=H.limit,De=H.query,Ee=Oe===1/0?void 0:Oe,Me=De.index,De=De.range,xe=xe.objectStore(K),Me=Me.isPrimaryKey?xe:xe.index(Me.name),De=c(De);if(Oe===0)return B({result:[]});L?((Ee=we?Me.getAll(De,Ee):Me.getAllKeys(De,Ee)).onsuccess=function(Ue){return B({result:Ue.target.result})},Ee.onerror=Hn(Y)):(J=0,ee=!we&&"openKeyCursor"in Me?Me.openKeyCursor(De):Me.openCursor(De),ce=[],ee.onsuccess=function(Ue){var Je=ee.result;return Je?(ce.push(we?Je.value:Je.primaryKey),++J===Oe?B({result:ce}):void Je.continue()):B({result:ce})},ee.onerror=Hn(Y))})}),openCursor:function(H){var B=H.trans,Y=H.values,J=H.query,ee=H.reverse,ce=H.unique;return new Promise(function(we,Oe){we=mt(we);var Me=J.index,Ee=J.range,xe=B.objectStore(K),xe=Me.isPrimaryKey?xe:xe.index(Me.name),Me=ee?ce?"prevunique":"prev":ce?"nextunique":"next",De=!Y&&"openKeyCursor"in xe?xe.openKeyCursor(c(Ee),Me):xe.openCursor(c(Ee),Me);De.onerror=Hn(Oe),De.onsuccess=mt(function(Ue){var Je,nt,rt,pn,Ze=De.result;Ze?(Ze.___id=++Wf,Ze.done=!1,Je=Ze.continue.bind(Ze),nt=(nt=Ze.continuePrimaryKey)&&nt.bind(Ze),rt=Ze.advance.bind(Ze),pn=function(){throw new Error("Cursor not stopped")},Ze.trans=B,Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=function(){throw new Error("Cursor not started")},Ze.fail=mt(Oe),Ze.next=function(){var zt=this,qt=1;return this.start(function(){return qt--?zt.continue():zt.stop()}).then(function(){return zt})},Ze.start=function(zt){function qt(){if(De.result)try{zt()}catch(Jt){Ze.fail(Jt)}else Ze.done=!0,Ze.start=function(){throw new Error("Cursor behind last entry")},Ze.stop()}var gi=new Promise(function(Jt,Or){Jt=mt(Jt),De.onerror=Hn(Or),Ze.fail=Or,Ze.stop=function(Do){Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=pn,Jt(Do)}});return De.onsuccess=mt(function(Jt){De.onsuccess=qt,qt()}),Ze.continue=Je,Ze.continuePrimaryKey=nt,Ze.advance=rt,qt(),gi},we(Ze)):we(null)},Oe)})},count:function(H){var B=H.query,Y=H.trans,J=B.index,ee=B.range;return new Promise(function(ce,we){var Oe=Y.objectStore(K),Ee=J.isPrimaryKey?Oe:Oe.index(J.name),Oe=c(ee),Ee=Oe?Ee.count(Oe):Ee.count();Ee.onsuccess=mt(function(xe){return ce(xe.target.result)}),Ee.onerror=Hn(we)})}}}var g,E,O,V=(E=N,O=hu((g=e).objectStoreNames),{schema:{name:g.name,tables:O.map(function(G){return E.objectStore(G)}).map(function(G){var L=G.keyPath,B=G.autoIncrement,K=h(L),H={},B={name:G.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:L==null,compound:K,keyPath:L,autoIncrement:B,unique:!0,extractKey:lo(L)},indexes:hu(G.indexNames).map(function(Y){return G.index(Y)}).map(function(ce){var J=ce.name,ee=ce.unique,we=ce.multiEntry,ce=ce.keyPath,we={name:J,compound:h(ce),keyPath:ce,unique:ee,multiEntry:we,extractKey:lo(ce)};return H[_a(ce)]=we}),getIndexByKeyPath:function(Y){return H[_a(Y)]}};return H[":id"]=B.primaryKey,L!=null&&(H[_a(L)]=B.primaryKey),B})},hasGetAll:0<O.length&&"getAll"in E.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),N=V.schema,F=V.hasGetAll,V=N.tables.map(f),C={};return V.forEach(function(G){return C[G.name]=G}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(G){if(!C[G])throw new Error("Table '".concat(G,"' not found"));return C[G]},MIN_KEY:-1/0,MAX_KEY:pa(t),schema:N}}function qf(e,t,o,c){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(c=zf(t,f,c),e.dbcore.reduce(function(g,E){return E=E.create,s(s({},g),E(g))},c))}}function ni(e,c){var o=c.db,c=qf(e._middlewares,o,e._deps,c);e.core=c.dbcore,e.tables.forEach(function(f){var g=f.name;e.core.schema.tables.some(function(E){return E.name===g})&&(f.core=e.core.table(g),e[g]instanceof e.Table&&(e[g].core=f.core))})}function ri(e,t,o,c){o.forEach(function(f){var g=c[f];t.forEach(function(E){var O=function N(F,V){return P(F,V)||(F=m(F))&&N(F,V)}(E,f);(!O||"value"in O&&O.value===void 0)&&(E===e.Transaction.prototype||E instanceof e.Transaction?p(E,f,{get:function(){return this.table(f)},set:function(N){A(this,f,{value:N,writable:!0,configurable:!0,enumerable:!0})}}):E[f]=new e.Table(f,g))})})}function fo(e,t){t.forEach(function(o){for(var c in o)o[c]instanceof e.Table&&delete o[c]})}function Yf(e,t){return e._cfg.version-t._cfg.version}function Xf(e,t,o,c){var f=e._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=co("$meta",pu("")[0],[]),e._storeNames.push("$meta"));var g=e._createTransaction("readwrite",e._storeNames,f);g.create(o),g._completion.catch(c);var E=g._reject.bind(g),O=Fe.transless||Fe;vn(function(){return Fe.trans=g,Fe.transless=O,t!==0?(ni(e,o),F=t,((N=g).storeNames.includes("$meta")?N.table("$meta").get("version").then(function(V){return V??F}):oe.resolve(F)).then(function(V){return G=V,L=g,K=o,H=[],V=(C=e)._versions,B=C._dbSchema=ii(0,C.idbdb,K),(V=V.filter(function(Y){return Y._cfg.version>=G})).length!==0?(V.forEach(function(Y){H.push(function(){var J=B,ee=Y._cfg.dbschema;oi(C,J,K),oi(C,ee,K),B=C._dbSchema=ee;var ce=vo(J,ee);ce.add.forEach(function(Me){go(K,Me[0],Me[1].primKey,Me[1].indexes)}),ce.change.forEach(function(Me){if(Me.recreate)throw new M.Upgrade("Not yet support for changing primary key");var De=K.objectStore(Me.name);Me.add.forEach(function(Ue){return ai(De,Ue)}),Me.change.forEach(function(Ue){De.deleteIndex(Ue.name),ai(De,Ue)}),Me.del.forEach(function(Ue){return De.deleteIndex(Ue)})});var we=Y._cfg.contentUpgrade;if(we&&Y._cfg.version>G){ni(C,K),L._memoizedTables={};var Oe=U(ee);ce.del.forEach(function(Me){Oe[Me]=J[Me]}),fo(C,[C.Transaction.prototype]),ri(C,[C.Transaction.prototype],l(Oe),Oe),L.schema=Oe;var Ee,xe=re(we);return xe&&Jn(),ce=oe.follow(function(){var Me;(Ee=we(L))&&xe&&(Me=$n.bind(null,null),Ee.then(Me,Me))}),Ee&&typeof Ee.then=="function"?oe.resolve(Ee):ce.then(function(){return Ee})}}),H.push(function(J){var ee,ce,we=Y._cfg.dbschema;ee=we,ce=J,[].slice.call(ce.db.objectStoreNames).forEach(function(Oe){return ee[Oe]==null&&ce.db.deleteObjectStore(Oe)}),fo(C,[C.Transaction.prototype]),ri(C,[C.Transaction.prototype],C._storeNames,C._dbSchema),L.schema=C._dbSchema}),H.push(function(J){C.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(C.idbdb.version/10)===Y._cfg.version?(C.idbdb.deleteObjectStore("$meta"),delete C._dbSchema.$meta,C._storeNames=C._storeNames.filter(function(ee){return ee!=="$meta"})):J.objectStore("$meta").put(Y._cfg.version,"version"))})}),function Y(){return H.length?oe.resolve(H.shift()(L.idbtrans)).then(Y):oe.resolve()}().then(function(){mu(B,K)})):oe.resolve();var C,G,L,K,H,B}).catch(E)):(l(f).forEach(function(V){go(o,V,f[V].primKey,f[V].indexes)}),ni(e,o),void oe.follow(function(){return e.on.populate.fire(g)}).catch(E));var N,F})}function Zf(e,t){mu(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var o=ii(0,e.idbdb,t);oi(e,e._dbSchema,t);for(var c=0,f=vo(o,e._dbSchema).change;c<f.length;c++){var g=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=t.objectStore(E.name);E.add.forEach(function(N){wt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(N.src)),ai(O,N)})}(f[c]);if(typeof g=="object")return g.value}}function vo(e,t){var o,c={del:[],add:[],change:[]};for(o in e)t[o]||c.del.push(o);for(o in t){var f=e[o],g=t[o];if(f){var E={name:o,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||f.primKey.auto!==g.primKey.auto)E.recreate=!0,c.change.push(E);else{var O=f.idxByName,N=g.idxByName,F=void 0;for(F in O)N[F]||E.del.push(F);for(F in N){var V=O[F],C=N[F];V?V.src!==C.src&&E.change.push(C):E.add.push(C)}(0<E.del.length||0<E.add.length||0<E.change.length)&&c.change.push(E)}}else c.add.push([o,g])}return c}function go(e,t,o,c){var f=e.db.createObjectStore(t,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return c.forEach(function(g){return ai(f,g)}),f}function mu(e,t){l(e).forEach(function(o){t.db.objectStoreNames.contains(o)||(wt&&console.debug("Dexie: Creating missing table",o),go(t,o,e[o].primKey,e[o].indexes))})}function ai(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ii(e,t,o){var c={};return R(t.objectStoreNames,0).forEach(function(f){for(var g=o.objectStore(f),E=uo(gu(F=g.keyPath),F||"",!0,!1,!!g.autoIncrement,F&&typeof F!="string",!0),O=[],N=0;N<g.indexNames.length;++N){var V=g.index(g.indexNames[N]),F=V.keyPath,V=uo(V.name,F,!!V.unique,!!V.multiEntry,!1,F&&typeof F!="string",!1);O.push(V)}c[f]=co(f,E,O)}),c}function oi(e,t,o){for(var c=o.db.objectStoreNames,f=0;f<c.length;++f){var g=c[f],E=o.objectStore(g);e._hasGetAll="getAll"in E;for(var O=0;O<E.indexNames.length;++O){var N=E.indexNames[O],F=E.index(N).keyPath,V=typeof F=="string"?F:"["+R(F).join("+")+"]";!t[g]||(F=t[g].idxByName[V])&&(F.name=N,delete t[g].idxByName[V],t[g].idxByName[N]=F)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function pu(e){return e.split(",").map(function(t,o){var c=(t=t.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return uo(c,f||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(f),o===0)})}var Qf=(si.prototype._parseStoresSpec=function(e,t){l(e).forEach(function(o){if(e[o]!==null){var c=pu(e[o]),f=c.shift();if(f.unique=!0,f.multi)throw new M.Schema("Primary key cannot be multi-valued");c.forEach(function(g){if(g.auto)throw new M.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new M.Schema("Index must have a name and cannot be an empty string")}),t[o]=co(o,f,c)}})},si.prototype.stores=function(o){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,o):o;var o=t._versions,c={},f={};return o.forEach(function(g){b(c,g._cfg.storesSource),f=g._cfg.dbschema={},g._parseStoresSpec(c,f)}),t._dbSchema=f,fo(t,[t._allTables,t,t.Transaction.prototype]),ri(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],l(f),f),t._storeNames=l(f),this},si.prototype.upgrade=function(e){return this._cfg.contentUpgrade=bt(this._cfg.contentUpgrade||ke,e),this},si);function si(){}function ho(e,t){var o=e._dbNamesDB;return o||(o=e._dbNamesDB=new er(Za,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function mo(e){return e&&typeof e.databases=="function"}function po(e){return vn(function(){return Fe.letThrough=!0,e()})}function _o(e){return!("from"in e)}var Wt=function(e,t){if(!this){var o=new Wt;return e&&"d"in e&&b(o,e),o}b(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function ya(e,t,o){var c=ot(t,o);if(!isNaN(c)){if(0<c)throw RangeError();if(_o(e))return b(e,{from:t,to:o,d:1});var f=e.l,c=e.r;if(ot(o,e.from)<0)return f?ya(f,t,o):e.l={from:t,to:o,d:1,l:null,r:null},yu(e);if(0<ot(t,e.to))return c?ya(c,t,o):e.r={from:t,to:o,d:1,l:null,r:null},yu(e);ot(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),0<ot(o,e.to)&&(e.to=o,e.r=null,e.d=e.l?e.l.d+1:1),o=!e.r,f&&!e.l&&ba(e,f),c&&o&&ba(e,c)}}function ba(e,t){_o(t)||function o(c,N){var g=N.from,E=N.to,O=N.l,N=N.r;ya(c,g,E),O&&o(c,O),N&&o(c,N)}(e,t)}function _u(e,t){var o=ui(t),c=o.next();if(c.done)return!1;for(var f=c.value,g=ui(e),E=g.next(f.from),O=E.value;!c.done&&!E.done;){if(ot(O.from,f.to)<=0&&0<=ot(O.to,f.from))return!0;ot(f.from,O.from)<0?f=(c=o.next(O.from)).value:O=(E=g.next(f.from)).value}return!1}function ui(e){var t=_o(e)?null:{s:0,n:e};return{next:function(o){for(var c=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,c)for(;t.n.l&&ot(o,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!c||ot(o,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function yu(e){var t,o,c=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((o=e.l)===null||o===void 0?void 0:o.d)||0),f=1<c?"r":c<-1?"l":"";f&&(t=f=="r"?"l":"r",o=s({},e),c=e[f],e.from=c.from,e.to=c.to,e[f]=c[f],o[f]=c[t],(e[t]=o).d=bu(o)),e.d=bu(e)}function bu(o){var t=o.r,o=o.l;return(t?o?Math.max(t.d,o.d):t.d:o?o.d:0)+1}function ci(e,t){return l(t).forEach(function(o){e[o]?ba(e[o],t[o]):e[o]=function c(f){var g,E,O={};for(g in f)T(f,g)&&(E=f[g],O[g]=!E||typeof E!="object"||X.has(E.constructor)?E:c(E));return O}(t[o])}),e}function yo(e,t){return e.all||t.all||Object.keys(e).some(function(o){return t[o]&&_u(t[o],e[o])})}_(Wt.prototype,((Rn={add:function(e){return ba(this,e),this},addKey:function(e){return ya(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(o){return ya(t,o,o)}),this},hasKey:function(e){var t=ui(this).next(e).value;return t&&ot(t.from,e)<=0&&0<=ot(t.to,e)}})[Te]=function(){return ui(this)},Rn));var Pr={},bo={},wo=!1;function li(e){ci(bo,e),wo||(wo=!0,setTimeout(function(){wo=!1,Eo(bo,!(bo={}))},0))}function Eo(e,t){t===void 0&&(t=!1);var o=new Set;if(e.all)for(var c=0,f=Object.values(Pr);c<f.length;c++)wu(E=f[c],e,o,t);else for(var g in e){var E,O=/^idb\:\/\/(.*)\/(.*)\//.exec(g);O&&(g=O[1],O=O[2],(E=Pr["idb://".concat(g,"/").concat(O)])&&wu(E,e,o,t))}o.forEach(function(N){return N()})}function wu(e,t,o,c){for(var f=[],g=0,E=Object.entries(e.queries.query);g<E.length;g++){for(var O=E[g],N=O[0],F=[],V=0,C=O[1];V<C.length;V++){var G=C[V];yo(t,G.obsSet)?G.subscribers.forEach(function(B){return o.add(B)}):c&&F.push(G)}c&&f.push([N,F])}if(c)for(var L=0,K=f;L<K.length;L++){var H=K[L],N=H[0],F=H[1];e.queries.query[N]=F}}function Jf(e){var t=e._state,o=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Be(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var c=t.openCanceller,f=Math.round(10*e.verno),g=!1;function E(){if(t.openCanceller!==c)throw new M.DatabaseClosed("db.open() was cancelled")}function O(){return new oe(function(G,L){if(E(),!o)throw new M.MissingAPI;var K=e.name,H=t.autoSchema||!f?o.open(K):o.open(K,f);if(!H)throw new M.MissingAPI;H.onerror=Hn(L),H.onblocked=mt(e._fireOnBlocked),H.onupgradeneeded=mt(function(B){var Y;V=H.transaction,t.autoSchema&&!e._options.allowEmptyDB?(H.onerror=ha,V.abort(),H.result.close(),(Y=o.deleteDatabase(K)).onsuccess=Y.onerror=mt(function(){L(new M.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(V.onerror=Hn(L),B=B.oldVersion>Math.pow(2,62)?0:B.oldVersion,C=B<1,e.idbdb=H.result,g&&Zf(e,V),Xf(e,B/10,V,L))},L),H.onsuccess=mt(function(){V=null;var B,Y,J,ee,ce,we=e.idbdb=H.result,Oe=R(we.objectStoreNames);if(0<Oe.length)try{var Ee=we.transaction((ee=Oe).length===1?ee[0]:ee,"readonly");if(t.autoSchema)Y=we,J=Ee,(B=e).verno=Y.version/10,J=B._dbSchema=ii(0,Y,J),B._storeNames=R(Y.objectStoreNames,0),ri(B,[B._allTables],l(J),J);else if(oi(e,e._dbSchema,Ee),((ce=vo(ii(0,(ce=e).idbdb,Ee),ce._dbSchema)).add.length||ce.change.some(function(xe){return xe.add.length||xe.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),we.close(),f=we.version+1,g=!0,G(O());ni(e,Ee)}catch{}Ur.push(e),we.onversionchange=mt(function(xe){t.vcFired=!0,e.on("versionchange").fire(xe)}),we.onclose=mt(function(xe){e.on("close").fire(xe)}),C&&(ce=e._deps,Ee=K,we=ce.indexedDB,ce=ce.IDBKeyRange,mo(we)||Ee===Za||ho(we,ce).put({name:Ee}).catch(ke)),G()},L)}).catch(function(G){switch(G?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(0<f)return f=0,O()}return oe.reject(G)})}var N,F=t.dbReadyResolve,V=null,C=!1;return oe.race([c,(typeof navigator>"u"?oe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(G){function L(){return indexedDB.databases().finally(G)}N=setInterval(L,100),L()}).finally(function(){return clearInterval(N)}):Promise.resolve()).then(O)]).then(function(){return E(),t.onReadyBeingFired=[],oe.resolve(po(function(){return e.on.ready.fire(e.vip)})).then(function G(){if(0<t.onReadyBeingFired.length){var L=t.onReadyBeingFired.reduce(bt,ke);return t.onReadyBeingFired=[],oe.resolve(po(function(){return L(e.vip)})).then(G)}})}).finally(function(){t.openCanceller===c&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(G){t.dbOpenError=G;try{V&&V.abort()}catch{}return c===t.openCanceller&&e._close(),Be(G)}).finally(function(){t.openComplete=!0,F()}).then(function(){var G;return C&&(G={},e.tables.forEach(function(L){L.schema.indexes.forEach(function(K){K.name&&(G["idb://".concat(e.name,"/").concat(L.name,"/").concat(K.name)]=new Wt(-1/0,[[[]]]))}),G["idb://".concat(e.name,"/").concat(L.name,"/")]=G["idb://".concat(e.name,"/").concat(L.name,"/:dels")]=new Wt(-1/0,[[[]]])}),dr(ma).fire(G),Eo(G,!0)),e})}function So(e){function t(g){return e.next(g)}var o=f(t),c=f(function(g){return e.throw(g)});function f(g){return function(N){var O=g(N),N=O.value;return O.done?N:N&&typeof N.then=="function"?N.then(o,c):h(N)?Promise.all(N).then(o,c):o(N)}}return f(t)()}function fi(e,t,o){for(var c=h(e)?e.slice():[e],f=0;f<o;++f)c.push(t);return c}var ed={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var o=e.table(t),c=o.schema,f={},g=[];function E(C,G,L){var K=_a(C),H=f[K]=f[K]||[],B=C==null?0:typeof C=="string"?1:C.length,Y=0<G,Y=s(s({},L),{name:Y?"".concat(K,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:Y,keyTail:G,keyLength:B,extractKey:lo(C),unique:!Y&&L.unique});return H.push(Y),Y.isPrimaryKey||g.push(Y),1<B&&E(B===2?C[0]:C.slice(0,B-1),G+1,L),H.sort(function(J,ee){return J.keyTail-ee.keyTail}),Y}t=E(c.primaryKey.keyPath,0,c.primaryKey),f[":id"]=[t];for(var O=0,N=c.indexes;O<N.length;O++){var F=N[O];E(F.keyPath,0,F)}function V(C){var G,L=C.query.index;return L.isVirtual?s(s({},C),{query:{index:L.lowLevelIndex,range:(G=C.query.range,L=L.keyTail,{type:G.type===1?2:G.type,lower:fi(G.lower,G.lowerOpen?e.MAX_KEY:e.MIN_KEY,L),lowerOpen:!0,upper:fi(G.upper,G.upperOpen?e.MIN_KEY:e.MAX_KEY,L),upperOpen:!0})}}):C}return s(s({},o),{schema:s(s({},c),{primaryKey:t,indexes:g,getIndexByKeyPath:function(C){return(C=f[_a(C)])&&C[0]}}),count:function(C){return o.count(V(C))},query:function(C){return o.query(V(C))},openCursor:function(C){var G=C.query.index,L=G.keyTail,K=G.isVirtual,H=G.keyLength;return K?o.openCursor(V(C)).then(function(Y){return Y&&B(Y)}):o.openCursor(C);function B(Y){return Object.create(Y,{continue:{value:function(J){J!=null?Y.continue(fi(J,C.reverse?e.MAX_KEY:e.MIN_KEY,L)):C.unique?Y.continue(Y.key.slice(0,H).concat(C.reverse?e.MIN_KEY:e.MAX_KEY,L)):Y.continue()}},continuePrimaryKey:{value:function(J,ee){Y.continuePrimaryKey(fi(J,e.MAX_KEY,L),ee)}},primaryKey:{get:function(){return Y.primaryKey}},key:{get:function(){var J=Y.key;return H===1?J[0]:J.slice(0,H)}},value:{get:function(){return Y.value}}})}}})}})}};function Ao(e,t,o,c){return o=o||{},c=c||"",l(e).forEach(function(f){var g,E,O;T(t,f)?(g=e[f],E=t[f],typeof g=="object"&&typeof E=="object"&&g&&E?(O=he(g))!==he(E)?o[c+f]=t[f]:O==="Object"?Ao(g,E,o,c+f+"."):g!==E&&(o[c+f]=t[f]):g!==E&&(o[c+f]=t[f])):o[c+f]=void 0}),l(t).forEach(function(f){T(e,f)||(o[c+f]=t[f])}),o}function To(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var td={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var o=e.table(t),c=o.schema.primaryKey;return s(s({},o),{mutate:function(f){var g=Fe.trans,E=g.table(t).hook,O=E.deleting,N=E.creating,F=E.updating;switch(f.type){case"add":if(N.fire===ke)break;return g._promise("readwrite",function(){return V(f)},!0);case"put":if(N.fire===ke&&F.fire===ke)break;return g._promise("readwrite",function(){return V(f)},!0);case"delete":if(O.fire===ke)break;return g._promise("readwrite",function(){return V(f)},!0);case"deleteRange":if(O.fire===ke)break;return g._promise("readwrite",function(){return function C(G,L,K){return o.query({trans:G,values:!1,query:{index:c,range:L},limit:K}).then(function(H){var B=H.result;return V({type:"delete",keys:B,trans:G}).then(function(Y){return 0<Y.numFailures?Promise.reject(Y.failures[0]):B.length<K?{failures:[],numFailures:0,lastResult:void 0}:C(G,s(s({},L),{lower:B[B.length-1],lowerOpen:!0}),K)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function V(C){var G,L,K,H=Fe.trans,B=C.keys||To(c,C);if(!B)throw new Error("Keys missing");return(C=C.type==="add"||C.type==="put"?s(s({},C),{keys:B}):s({},C)).type!=="delete"&&(C.values=i([],C.values)),C.keys&&(C.keys=i([],C.keys)),G=o,K=B,((L=C).type==="add"?Promise.resolve([]):G.getMany({trans:L.trans,keys:K,cache:"immutable"})).then(function(Y){var J=B.map(function(ee,ce){var we,Oe,Ee,xe=Y[ce],Me={onerror:null,onsuccess:null};return C.type==="delete"?O.fire.call(Me,ee,xe,H):C.type==="add"||xe===void 0?(we=N.fire.call(Me,ee,C.values[ce],H),ee==null&&we!=null&&(C.keys[ce]=ee=we,c.outbound||D(C.values[ce],c.keyPath,ee))):(we=Ao(xe,C.values[ce]),(Oe=F.fire.call(Me,we,ee,xe,H))&&(Ee=C.values[ce],Object.keys(Oe).forEach(function(De){T(Ee,De)?Ee[De]=Oe[De]:D(Ee,De,Oe[De])}))),Me});return o.mutate(C).then(function(ee){for(var ce=ee.failures,we=ee.results,Oe=ee.numFailures,ee=ee.lastResult,Ee=0;Ee<B.length;++Ee){var xe=(we||B)[Ee],Me=J[Ee];xe==null?Me.onerror&&Me.onerror(ce[Ee]):Me.onsuccess&&Me.onsuccess(C.type==="put"&&Y[Ee]?C.values[Ee]:xe)}return{failures:ce,results:we,numFailures:Oe,lastResult:ee}}).catch(function(ee){return J.forEach(function(ce){return ce.onerror&&ce.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function Eu(e,t,o){try{if(!t||t.keys.length<e.length)return null;for(var c=[],f=0,g=0;f<t.keys.length&&g<e.length;++f)ot(t.keys[f],e[g])===0&&(c.push(o?ne(t.values[f]):t.values[f]),++g);return c.length===e.length?c:null}catch{return null}}var nd={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var o=e.table(t);return s(s({},o),{getMany:function(c){if(!c.cache)return o.getMany(c);var f=Eu(c.keys,c.trans._cache,c.cache==="clone");return f?oe.resolve(f):o.getMany(c).then(function(g){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?ne(g):g},g})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),o.mutate(c)}})}}}};function Su(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Au(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rd={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,o=new Wt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(c,f,g){if(Fe.subscr&&f!=="readonly")throw new M.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return e.transaction(c,f,g)},table:function(c){var f=e.table(c),g=f.schema,E=g.primaryKey,C=g.indexes,O=E.extractKey,N=E.outbound,F=E.autoIncrement&&C.filter(function(L){return L.compound&&L.keyPath.includes(E.keyPath)}),V=s(s({},f),{mutate:function(L){function K(De){return De="idb://".concat(t,"/").concat(c,"/").concat(De),ee[De]||(ee[De]=new Wt)}var H,B,Y,J=L.trans,ee=L.mutatedParts||(L.mutatedParts={}),ce=K(""),we=K(":dels"),Oe=L.type,Me=L.type==="deleteRange"?[L.range]:L.type==="delete"?[L.keys]:L.values.length<50?[To(E,L).filter(function(De){return De}),L.values]:[],Ee=Me[0],xe=Me[1],Me=L.trans._cache;return h(Ee)?(ce.addKeys(Ee),(Me=Oe==="delete"||Ee.length===xe.length?Eu(Ee,Me):null)||we.addKeys(Ee),(Me||xe)&&(H=K,B=Me,Y=xe,g.indexes.forEach(function(De){var Ue=H(De.name||"");function Je(rt){return rt!=null?De.extractKey(rt):null}function nt(rt){return De.multiEntry&&h(rt)?rt.forEach(function(pn){return Ue.addKey(pn)}):Ue.addKey(rt)}(B||Y).forEach(function(rt,zt){var Ze=B&&Je(B[zt]),zt=Y&&Je(Y[zt]);ot(Ze,zt)!==0&&(Ze!=null&&nt(Ze),zt!=null&&nt(zt))})}))):Ee?(xe={from:(xe=Ee.lower)!==null&&xe!==void 0?xe:e.MIN_KEY,to:(xe=Ee.upper)!==null&&xe!==void 0?xe:e.MAX_KEY},we.add(xe),ce.add(xe)):(ce.add(o),we.add(o),g.indexes.forEach(function(De){return K(De.name).add(o)})),f.mutate(L).then(function(De){return!Ee||L.type!=="add"&&L.type!=="put"||(ce.addKeys(De.results),F&&F.forEach(function(Ue){for(var Je=L.values.map(function(Ze){return Ue.extractKey(Ze)}),nt=Ue.keyPath.findIndex(function(Ze){return Ze===E.keyPath}),rt=0,pn=De.results.length;rt<pn;++rt)Je[rt][nt]=De.results[rt];K(Ue.name).addKeys(Je)})),J.mutatedParts=ci(J.mutatedParts||{},ee),De})}}),C=function(K){var H=K.query,K=H.index,H=H.range;return[K,new Wt((K=H.lower)!==null&&K!==void 0?K:e.MIN_KEY,(H=H.upper)!==null&&H!==void 0?H:e.MAX_KEY)]},G={get:function(L){return[E,new Wt(L.key)]},getMany:function(L){return[E,new Wt().addKeys(L.keys)]},count:C,query:C,openCursor:C};return l(G).forEach(function(L){V[L]=function(K){var H=Fe.subscr,B=!!H,Y=Su(Fe,f)&&Au(L,K)?K.obsSet={}:H;if(B){var J=function(xe){return xe="idb://".concat(t,"/").concat(c,"/").concat(xe),Y[xe]||(Y[xe]=new Wt)},ee=J(""),ce=J(":dels"),H=G[L](K),B=H[0],H=H[1];if((L==="query"&&B.isPrimaryKey&&!K.values?ce:J(B.name||"")).add(H),!B.isPrimaryKey){if(L!=="count"){var we=L==="query"&&N&&K.values&&f.query(s(s({},K),{values:!1}));return f[L].apply(this,arguments).then(function(xe){if(L==="query"){if(N&&K.values)return we.then(function(Je){return Je=Je.result,ee.addKeys(Je),xe});var Me=K.values?xe.result.map(O):xe.result;(K.values?ee:ce).addKeys(Me)}else if(L==="openCursor"){var De=xe,Ue=K.values;return De&&Object.create(De,{key:{get:function(){return ce.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var Je=De.primaryKey;return ce.addKey(Je),Je}},value:{get:function(){return Ue&&ee.addKey(De.primaryKey),De.value}}})}return xe})}ce.add(o)}}return f[L].apply(this,arguments)}}),V}})}};function Tu(e,t,o){if(o.numFailures===0)return t;if(t.type==="deleteRange")return null;var c=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return o.numFailures===c?null:(t=s({},t),h(t.keys)&&(t.keys=t.keys.filter(function(f,g){return!(g in o.failures)})),"values"in t&&h(t.values)&&(t.values=t.values.filter(function(f,g){return!(g in o.failures)})),t)}function Ro(e,t){return o=e,((c=t).lower===void 0||(c.lowerOpen?0<ot(o,c.lower):0<=ot(o,c.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?ot(e,t.upper)<0:ot(e,t.upper)<=0));var o,c}function Ru(e,t,G,c,f,g){if(!G||G.length===0)return e;var E=t.query.index,O=E.multiEntry,N=t.query.range,F=c.schema.primaryKey.extractKey,V=E.extractKey,C=(E.lowLevelIndex||E).extractKey,G=G.reduce(function(L,K){var H=L,B=[];if(K.type==="add"||K.type==="put")for(var Y=new Wt,J=K.values.length-1;0<=J;--J){var ee,ce=K.values[J],we=F(ce);Y.hasKey(we)||(ee=V(ce),(O&&h(ee)?ee.some(function(De){return Ro(De,N)}):Ro(ee,N))&&(Y.addKey(we),B.push(ce)))}switch(K.type){case"add":var Oe=new Wt().addKeys(t.values?L.map(function(Ue){return F(Ue)}):L),H=L.concat(t.values?B.filter(function(Ue){return Ue=F(Ue),!Oe.hasKey(Ue)&&(Oe.addKey(Ue),!0)}):B.map(function(Ue){return F(Ue)}).filter(function(Ue){return!Oe.hasKey(Ue)&&(Oe.addKey(Ue),!0)}));break;case"put":var Ee=new Wt().addKeys(K.values.map(function(Ue){return F(Ue)}));H=L.filter(function(Ue){return!Ee.hasKey(t.values?F(Ue):Ue)}).concat(t.values?B:B.map(function(Ue){return F(Ue)}));break;case"delete":var xe=new Wt().addKeys(K.keys);H=L.filter(function(Ue){return!xe.hasKey(t.values?F(Ue):Ue)});break;case"deleteRange":var Me=K.range;H=L.filter(function(Ue){return!Ro(F(Ue),Me)})}return H},e);return G===e?e:(G.sort(function(L,K){return ot(C(L),C(K))||ot(F(L),F(K))}),t.limit&&t.limit<1/0&&(G.length>t.limit?G.length=t.limit:e.length===t.limit&&G.length<t.limit&&(f.dirty=!0)),g?Object.freeze(G):G)}function xu(e,t){return ot(e.lower,t.lower)===0&&ot(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ad(e,t){return function(o,c,f,g){if(o===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=ot(o,c))===0){if(f&&g)return 0;if(f)return 1;if(g)return-1}return c}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(o,c,f,g){if(o===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=ot(o,c))===0){if(f&&g)return 0;if(f)return-1;if(g)return 1}return c}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function id(e,t,o,c){e.subscribers.add(o),c.addEventListener("abort",function(){var f,g;e.subscribers.delete(o),e.subscribers.size===0&&(f=e,g=t,setTimeout(function(){f.subscribers.size===0&&ge(g,f)},3e3))})}var od={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(o,c,f){var g,E,O=e.transaction(o,c,f);return c==="readwrite"&&(E=(g=new AbortController).signal,f=function(N){return function(){if(g.abort(),c==="readwrite"){for(var F=new Set,V=0,C=o;V<C.length;V++){var G=C[V],L=Pr["idb://".concat(t,"/").concat(G)];if(L){var K=e.table(G),H=L.optimisticOps.filter(function(Ue){return Ue.trans===O});if(O._explicit&&N&&O.mutatedParts)for(var B=0,Y=Object.values(L.queries.query);B<Y.length;B++)for(var J=0,ee=(Oe=Y[B]).slice();J<ee.length;J++)yo((Ee=ee[J]).obsSet,O.mutatedParts)&&(ge(Oe,Ee),Ee.subscribers.forEach(function(Ue){return F.add(Ue)}));else if(0<H.length){L.optimisticOps=L.optimisticOps.filter(function(Ue){return Ue.trans!==O});for(var ce=0,we=Object.values(L.queries.query);ce<we.length;ce++)for(var Oe,Ee,xe,Me=0,De=(Oe=we[ce]).slice();Me<De.length;Me++)(Ee=De[Me]).res!=null&&O.mutatedParts&&(N&&!Ee.dirty?(xe=Object.isFrozen(Ee.res),xe=Ru(Ee.res,Ee.req,H,K,Ee,xe),Ee.dirty?(ge(Oe,Ee),Ee.subscribers.forEach(function(Ue){return F.add(Ue)})):xe!==Ee.res&&(Ee.res=xe,Ee.promise=oe.resolve({result:xe}))):(Ee.dirty&&ge(Oe,Ee),Ee.subscribers.forEach(function(Ue){return F.add(Ue)})))}}}F.forEach(function(Ue){return Ue()})}}},O.addEventListener("abort",f(!1),{signal:E}),O.addEventListener("error",f(!1),{signal:E}),O.addEventListener("complete",f(!0),{signal:E})),O},table:function(o){var c=e.table(o),f=c.schema.primaryKey;return s(s({},c),{mutate:function(g){var E=Fe.trans;if(f.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return c.mutate(g);var O=Pr["idb://".concat(t,"/").concat(o)];return O?(E=c.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||To(f,g).some(function(N){return N==null}))?(O.optimisticOps.push(g),g.mutatedParts&&li(g.mutatedParts),E.then(function(N){0<N.numFailures&&(ge(O.optimisticOps,g),(N=Tu(0,g,N))&&O.optimisticOps.push(N),g.mutatedParts&&li(g.mutatedParts))}),E.catch(function(){ge(O.optimisticOps,g),g.mutatedParts&&li(g.mutatedParts)})):E.then(function(N){var F=Tu(0,s(s({},g),{values:g.values.map(function(V,C){var G;return N.failures[C]?V:(V=(G=f.keyPath)!==null&&G!==void 0&&G.includes(".")?ne(V):s({},V),D(V,f.keyPath,N.results[C]),V)})}),N);O.optimisticOps.push(F),queueMicrotask(function(){return g.mutatedParts&&li(g.mutatedParts)})}),E):c.mutate(g)},query:function(g){if(!Su(Fe,c)||!Au("query",g))return c.query(g);var E=((F=Fe.trans)===null||F===void 0?void 0:F.db._options.cache)==="immutable",C=Fe,O=C.requery,N=C.signal,F=function(K,H,B,Y){var J=Pr["idb://".concat(K,"/").concat(H)];if(!J)return[];if(!(H=J.queries[B]))return[null,!1,J,null];var ee=H[(Y.query?Y.query.index.name:null)||""];if(!ee)return[null,!1,J,null];switch(B){case"query":var ce=ee.find(function(we){return we.req.limit===Y.limit&&we.req.values===Y.values&&xu(we.req.query.range,Y.query.range)});return ce?[ce,!0,J,ee]:[ee.find(function(we){return("limit"in we.req?we.req.limit:1/0)>=Y.limit&&(!Y.values||we.req.values)&&ad(we.req.query.range,Y.query.range)}),!1,J,ee];case"count":return ce=ee.find(function(we){return xu(we.req.query.range,Y.query.range)}),[ce,!!ce,J,ee]}}(t,o,"query",g),V=F[0],C=F[1],G=F[2],L=F[3];return V&&C?V.obsSet=g.obsSet:(C=c.query(g).then(function(K){var H=K.result;if(V&&(V.res=H),E){for(var B=0,Y=H.length;B<Y;++B)Object.freeze(H[B]);Object.freeze(H)}else K.result=ne(H);return K}).catch(function(K){return L&&V&&ge(L,V),Promise.reject(K)}),V={obsSet:g.obsSet,promise:C,subscribers:new Set,type:"query",req:g,dirty:!1},L?L.push(V):(L=[V],(G=G||(Pr["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=L)),id(V,L,O,N),V.promise.then(function(K){return{result:Ru(K.result,g,G?.optimisticOps,c,V,E)}})}})}})}};function di(e,t){return new Proxy(e,{get:function(o,c,f){return c==="db"?t:Reflect.get(o,c,f)}})}var er=(Tt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new M.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new M.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,o=t.filter(function(c){return c._cfg.version===e})[0];return o||(o=new this.Version(e),t.push(o),t.sort(Yf),o.stores({}),this._state.autoSchema=!1,o)},Tt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?e():new oe(function(o,c){if(t._state.openComplete)return c(new M.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void c(new M.DatabaseClosed);t.open().catch(ke)}t._state.dbReadyPromise.then(o,c)}).then(e)},Tt.prototype.use=function(e){var t=e.stack,o=e.create,c=e.level,f=e.name;return f&&this.unuse({stack:t,name:f}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:o,level:c??10,name:f}),e.sort(function(g,E){return g.level-E.level}),this},Tt.prototype.unuse=function(e){var t=e.stack,o=e.name,c=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(f){return c?f.create!==c:!!o&&f.name!==o})),this},Tt.prototype.open=function(){var e=this;return Nn(Qt,function(){return Jf(e)})},Tt.prototype._close=function(){var e=this._state,t=Ur.indexOf(this);if(0<=t&&Ur.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new oe(function(o){e.dbReadyResolve=o}),e.openCanceller=new oe(function(o,c){e.cancelOpen=c}))},Tt.prototype.close=function(o){var t=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;t?(o.isBeingOpened&&o.cancelOpen(new M.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new M.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Tt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new oe(function(f,g){function E(){t.close(e);var O=t._deps.indexedDB.deleteDatabase(t.name);O.onsuccess=mt(function(){var N,F,V;N=t._deps,F=t.name,V=N.indexedDB,N=N.IDBKeyRange,mo(V)||F===Za||ho(V,N).delete(F).catch(ke),f()}),O.onerror=Hn(g),O.onblocked=t._fireOnBlocked}if(o)throw new M.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(E):E()})},Tt.prototype.backendDB=function(){return this.idbdb},Tt.prototype.isOpen=function(){return this.idbdb!==null},Tt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Tt.prototype,"tables",{get:function(){var e=this;return l(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Tt.prototype.transaction=function(){var e=(function(t,o,c){var f=arguments.length;if(f<2)throw new M.InvalidArgument("Too few arguments");for(var g=new Array(f-1);--f;)g[f-1]=arguments[f];return c=g.pop(),[t,ie(g),c]}).apply(this,arguments);return this._transaction.apply(this,e)},Tt.prototype._transaction=function(e,t,o){var c=this,f=Fe.trans;f&&f.db===this&&e.indexOf("!")===-1||(f=null);var g,E,O=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(E=t.map(function(F){if(F=F instanceof c.Table?F.name:F,typeof F!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return F}),e=="r"||e===no)g=no;else{if(e!="rw"&&e!=ro)throw new M.InvalidArgument("Invalid transaction mode: "+e);g=ro}if(f){if(f.mode===no&&g===ro){if(!O)throw new M.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&E.forEach(function(F){if(f&&f.storeNames.indexOf(F)===-1){if(!O)throw new M.SubTransaction("Table "+F+" not included in parent transaction.");f=null}}),O&&f&&!f.active&&(f=null)}}catch(F){return f?f._promise(null,function(V,C){C(F)}):Be(F)}var N=(function F(V,C,G,L,K){return oe.resolve().then(function(){var H=Fe.transless||Fe,B=V._createTransaction(C,G,V._dbSchema,L);if(B.explicit=!0,H={trans:B,transless:H},L)B.idbtrans=L.idbtrans;else try{B.create(),B.idbtrans._explicit=!0,V._state.PR1398_maxLoop=3}catch(ee){return ee.name===Re.InvalidState&&V.isOpen()&&0<--V._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),V.close({disableAutoOpen:!1}),V.open().then(function(){return F(V,C,G,null,K)})):Be(ee)}var Y,J=re(K);return J&&Jn(),H=oe.follow(function(){var ee;(Y=K.call(B,B))&&(J?(ee=$n.bind(null,null),Y.then(ee,ee)):typeof Y.next=="function"&&typeof Y.throw=="function"&&(Y=So(Y)))},H),(Y&&typeof Y.then=="function"?oe.resolve(Y).then(function(ee){return B.active?ee:Be(new M.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):H.then(function(){return Y})).then(function(ee){return L&&B._resolve(),B._completion.then(function(){return ee})}).catch(function(ee){return B._reject(ee),Be(ee)})})}).bind(null,this,g,E,f,o);return f?f._promise(g,N,"lock"):Fe.trans?Nn(Fe.transless,function(){return c._whenReady(N)}):this._whenReady(N)},Tt.prototype.table=function(e){if(!T(this._allTables,e))throw new M.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Tt);function Tt(e,t){var o=this;this._middlewares={},this.verno=0;var c=Tt.dependencies;this._options=t=s({addons:Tt.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},c=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,g,E,O,N,F={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ke,dbReadyPromise:null,cancelOpen:ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};F.dbReadyPromise=new oe(function(C){F.dbReadyResolve=C}),F.openCanceller=new oe(function(C,G){F.cancelOpen=G}),this._state=F,this.name=e,this.on=da(this,"populate","blocked","versionchange","close",{ready:[bt,ke]}),this.on.ready.subscribe=x(this.on.ready.subscribe,function(C){return function(G,L){Tt.vip(function(){var K,H=o._state;H.openComplete?(H.dbOpenError||oe.resolve().then(G),L&&C(G)):H.onReadyBeingFired?(H.onReadyBeingFired.push(G),L&&C(G)):(C(G),K=o,L||C(function B(){K.on.ready.unsubscribe(G),K.on.ready.unsubscribe(B)}))})}}),this.Collection=(f=this,va(Vf.prototype,function(Y,B){this.db=f;var L=au,K=null;if(B)try{L=B()}catch(J){K=J}var H=Y._ctx,B=H.table,Y=B.hook.reading.fire;this._ctx={table:B,index:H.index,isPrimKey:!H.index||B.schema.primKey.keyPath&&H.index===B.schema.primKey.name,range:L,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:H.or,valueMapper:Y!==ye?Y:null}})),this.Table=(g=this,va(uu.prototype,function(C,G,L){this.db=g,this._tx=L,this.name=C,this.schema=G,this.hook=g._allTables[C]?g._allTables[C].hook:da(null,{creating:[vt,ke],reading:[$e,ye],updating:[ve,ke],deleting:[yt,ke]})})),this.Transaction=(E=this,va(jf.prototype,function(C,G,L,K,H){var B=this;this.db=E,this.mode=C,this.storeNames=G,this.schema=L,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=da(this,"complete","error","abort"),this.parent=H||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new oe(function(Y,J){B._resolve=Y,B._reject=J}),this._completion.then(function(){B.active=!1,B.on.complete.fire()},function(Y){var J=B.active;return B.active=!1,B.on.error.fire(Y),B.parent?B.parent._reject(Y):J&&B.idbtrans&&B.idbtrans.abort(),Be(Y)})})),this.Version=(O=this,va(Qf.prototype,function(C){this.db=O,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(N=this,va(vu.prototype,function(C,G,L){if(this.db=N,this._ctx={table:C,index:G===":id"?null:G,or:L},this._cmp=this._ascending=ot,this._descending=function(K,H){return ot(H,K)},this._max=function(K,H){return 0<ot(K,H)?K:H},this._min=function(K,H){return ot(K,H)<0?K:H},this._IDBKeyRange=N._deps.IDBKeyRange,!this._IDBKeyRange)throw new M.MissingAPI})),this.on("versionchange",function(C){0<C.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(C){!C.newVersion||C.newVersion<C.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(C.oldVersion/10))}),this._maxKey=pa(t.IDBKeyRange),this._createTransaction=function(C,G,L,K){return new o.Transaction(C,G,L,o._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(C){o.on("blocked").fire(C),Ur.filter(function(G){return G.name===o.name&&G!==o&&!G._state.vcFired}).map(function(G){return G.on("versionchange").fire(C)})},this.use(nd),this.use(od),this.use(rd),this.use(ed),this.use(td);var V=new Proxy(this,{get:function(C,G,L){if(G==="_vip")return!0;if(G==="table")return function(H){return di(o.table(H),V)};var K=Reflect.get(C,G,L);return K instanceof uu?di(K,V):G==="tables"?K.map(function(H){return di(H,V)}):G==="_createTransaction"?function(){return di(K.apply(this,arguments),V)}:K}});this.vip=V,c.forEach(function(C){return C(o)})}var vi,Rn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",sd=(xo.prototype.subscribe=function(e,t,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:o})},xo.prototype[Rn]=function(){return this},xo);function xo(e){this._subscribe=e}try{vi={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{vi={indexedDB:null,IDBKeyRange:null}}function Pu(e){var t,o=!1,c=new sd(function(f){var g=re(e),E,O=!1,N={},F={},V={get closed(){return O},unsubscribe:function(){O||(O=!0,E&&E.abort(),C&&dr.storagemutated.unsubscribe(L))}};f.start&&f.start(V);var C=!1,G=function(){return qe(K)},L=function(H){ci(N,H),yo(F,N)&&G()},K=function(){var H,B,Y;!O&&vi.indexedDB&&(N={},H={},E&&E.abort(),E=new AbortController,Y=function(J){var ee=ur();try{g&&Jn();var ce=vn(e,J);return ce=g?ce.finally($n):ce}finally{ee&&cr()}}(B={subscr:H,signal:E.signal,requery:G,querier:e,trans:null}),Promise.resolve(Y).then(function(J){o=!0,t=J,O||B.signal.aborted||(N={},function(ee){for(var ce in ee)if(T(ee,ce))return;return 1}(F=H)||C||(dr(ma,L),C=!0),qe(function(){return!O&&f.next&&f.next(J)}))},function(J){o=!1,["DatabaseClosedError","AbortError"].includes(J?.name)||O||qe(function(){O||f.error&&f.error(J)})}))};return setTimeout(G,0),V});return c.hasValue=function(){return o},c.getValue=function(){return t},c}var Dr=er;function Po(e){var t=vr;try{vr=!0,dr.storagemutated.fire(e),Eo(e,!0)}finally{vr=t}}_(Dr,s(s({},ct),{delete:function(e){return new Dr(e,{addons:[]}).delete()},exists:function(e){return new Dr(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Dr.dependencies,o=t.indexedDB,t=t.IDBKeyRange,(mo(o)?Promise.resolve(o.databases()).then(function(c){return c.map(function(f){return f.name}).filter(function(f){return f!==Za})}):ho(o,t).toCollection().primaryKeys()).then(e)}catch{return Be(new M.MissingAPI)}var t,o},defineClass:function(){return function(e){b(this,e)}},ignoreTransaction:function(e){return Fe.trans?Nn(Fe.transless,e):e()},vip:po,async:function(e){return function(){try{var t=So(e.apply(this,arguments));return t&&typeof t.then=="function"?t:oe.resolve(t)}catch(o){return Be(o)}}},spawn:function(e,t,o){try{var c=So(e.apply(o,t||[]));return c&&typeof c.then=="function"?c:oe.resolve(c)}catch(f){return Be(f)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(e,t){return t=oe.resolve(typeof e=="function"?Dr.ignoreTransaction(e):e).timeout(t||6e4),Fe.trans?Fe.trans.waitFor(t):t},Promise:oe,debug:{get:function(){return wt},set:function(e){Zt(e)}},derive:S,extend:b,props:_,override:x,Events:da,on:dr,liveQuery:Pu,extendObservabilitySet:ci,getByKeyPath:j,setByKeyPath:D,delByKeyPath:function(e,t){typeof t=="string"?D(e,t,void 0):"length"in t&&[].map.call(t,function(o){D(e,o,void 0)})},shallowClone:U,deepClone:ne,getObjectDiff:Ao,cmp:ot,asap:$,minKey:-1/0,addons:[],connections:Ur,errnames:Re,dependencies:vi,cache:Pr,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,o){return e+t/Math.pow(10,2*o)})})),Dr.maxKey=pa(Dr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(dr(ma,function(e){vr||(e=new CustomEvent(so,{detail:e}),vr=!0,dispatchEvent(e),vr=!1)}),addEventListener(so,function(e){e=e.detail,vr||Po(e)}));var Kr,vr=!1,Du=function(){};return typeof BroadcastChannel<"u"&&((Du=function(){(Kr=new BroadcastChannel(so)).onmessage=function(e){return e.data&&Po(e.data)}})(),typeof Kr.unref=="function"&&Kr.unref(),dr(ma,function(e){vr||Kr.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!er.disableBfCache&&e.persisted){wt&&console.debug("Dexie: handling persisted pagehide"),Kr?.close();for(var t=0,o=Ur;t<o.length;t++)o[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!er.disableBfCache&&e.persisted&&(wt&&console.debug("Dexie: handling persisted pageshow"),Du(),Po({all:new Wt(-1/0,[[]])}))})),oe.rejectionMapper=function(e,t){return!e||e instanceof be||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ve[e.name]?e:(t=new Ve[e.name](t||e.message,e),"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t)},Zt(wt),s(er,Object.freeze({__proto__:null,Dexie:er,liveQuery:Pu,Entity:iu,cmp:ot,PropModification:ga,replacePrefix:function(e,t){return new ga({replacePrefix:[e,t]})},add:function(e){return new ga({add:e})},remove:function(e){return new ga({remove:e})},default:er,RangeSet:Wt,mergeRanges:ba,rangesOverlap:_u}),{default:er}),er})}(yi)),yi.exports}var Sv=Ev();const is=bv(Sv),ll=Symbol.for("Dexie"),Oi=globalThis[ll]||(globalThis[ll]=is);if(is.semVer!==Oi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${is.semVer} and ${Oi.semVer}`);const{liveQuery:Fs,mergeRanges:a0,rangesOverlap:i0,RangeSet:o0,cmp:s0,Entity:u0,PropModification:c0,replacePrefix:l0,add:f0,remove:d0}=Oi;class Av extends Oi{roms;opts;constructor(){super("myDatabase"),this.version(3).stores({roms:"crc32, title",opts:"key"})}}const Dn=new Av;var Tv=Ae('<button type="button"><img/></button>');function mr(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(bn,"$darkTheme",n);let u=me(r,"item",19,()=>({id:"",icon:""})),l=me(r,"alt",3,"Icon"),h=me(r,"toggle",3,!1),b=me(r,"active",3,!1),m=me(r,"select",3,()=>{}),y=!1;function T(p){p.preventDefault(),y=h()?!y:!0,m()(p.target.id,y)}var _=Tv();_.__click=T;var A=z(_);W(_),ut(()=>{We(_,1,`btn btn-lg btn-primary btn-square p-1.5 ${b()?"btn-active":""}`),We(A,1,_r(i()?"invert":"")),Ft(A,"id",u().id),Ft(A,"src",u().icon),Ft(A,"alt",l())}),se(a,_),it(),s()}an(["click"]);const Rv=a=>a;function Pt(a,{delay:r=0,duration:n=400,easing:s=Rv}={}){const i=+getComputedStyle(a).opacity;return{delay:r,duration:n,easing:s,css:u=>`opacity: ${u*i}`}}var xv=Ae('<div><div class="mx-1 flex space-x-1"></div></div>'),Pv=Ae('<div class="flex border-0"><div><div class="border-0"><!></div></div> <!></div>');function Io(a,r){let n=me(r,"expanded",3,!1),s=me(r,"item",19,()=>({id:"",icon:""})),i=me(r,"subitems",19,()=>[{id:"",icon:""}]),u=me(r,"select",3,()=>{});var l=Pv(),h=z(l),b=z(h),m=z(b);mr(m,{select:u(),get active(){return n()},get item(){return s()}}),W(b),W(h);var y=Z(h,2);{var T=_=>{var A=xv(),p=z(A);ta(p,21,i,ea,(S,P,I,R)=>{mr(S,{select:u(),get item(){return d(P)}})}),W(p),W(A),xt(3,A,()=>Pt,()=>({duration:200})),se(_,A)};Xe(y,_=>{n()&&_(T)})}W(l),se(a,l)}var Dv=Ae('<div class="h-2"></div>');function $o(a){var r=Dv();se(a,r)}var Ov=Ae("<!> <!>",1),kv=Ae("<!> <!>",1),Cv=Ae('<div><div class="bg-base-100/75 absolute top-0 left-0 z-40 flex w-16 flex-col pl-2"><div class="mt-1.5 mb-2 flex flex-col space-y-1.5 border-0"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function Mv(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(Ps,"$running",n),u=()=>k(_n,"$port1",n),l=()=>k(yn,"$port2",n),h=()=>k(Ta,"$layout",n),b=()=>k(Ki,"$showSidebar",n),m=()=>k(sa,"$poweredOn",n),y=()=>k(Ut,"$layer",n),T=()=>k($l,"$debugDma",n);let _=me(r,"action",3,()=>{}),A=kt(""),p=200;function S(Te,Pe){He(A,Te==d(A)?"":Te,!0),_()(Te,Pe)}const P=["icons/device-none.png","icons/device-mouse.png","icons/device-keyset-1.png","icons/device-keyset-2.png","icons/device-usb-1.png","icons/device-usb-2.png"];let I="icons/powerIcon.png",R="icons/resetIcon.png",x="icons/settingsIcon.png",v="icons/retroShellIcon.png",$="icons/monitorIcon.png",j=Qe(()=>i()?"icons/pauseIcon.png":"icons/runIcon.png"),D=Qe(()=>P[u()]),U=Qe(()=>P[l()]),te=Qe(()=>h()=="full"?"icons/layoutFullIcon.png":h()=="aspect"?"icons/layoutAspectIcon.png":"icons/layoutFitIcon.png");const ie=[{id:"empty1",icon:P[0]},{id:"mouse1",icon:P[1]},{id:"keyset11",icon:P[2]},{id:"keyset12",icon:P[3]},{id:"gamepad11",icon:P[4]}],X=[{id:"empty2",icon:P[0]},{id:"mouse2",icon:P[1]},{id:"keyset21",icon:P[2]},{id:"keyset22",icon:P[3]},{id:"gamepad21",icon:P[4]}],q=[{id:"aspect",icon:"icons/layoutAspectIcon.png"},{id:"fit",icon:"icons/layoutFitIcon.png"},{id:"full",icon:"icons/layoutFullIcon.png"}];var ne=Et(),pe=ze(ne);{var he=Te=>{var Pe=Cv(),ge=z(Pe),Se=z(ge),Q=z(Se);mr(Q,{select:S,item:{id:"power",icon:I}});var re=Z(Q,2);{var de=ve=>{var fe=Ov(),bt=ze(fe);const wt=Qe(()=>({id:"pause",icon:d(j)}));mr(bt,{select:S,get item(){return d(wt)}});var Zt=Z(bt,2);mr(Zt,{select:S,item:{id:"reset",icon:R}}),se(ve,fe)};Xe(re,ve=>{m()&&ve(de)})}var be=Z(re,2);$o(be);var Ie=Z(be,2);const Ce=Qe(()=>d(A)==="port1"),ue=Qe(()=>({id:"port1",icon:d(D)}));Io(Ie,{select:S,get expanded(){return d(Ce)},get item(){return d(ue)},get subitems(){return ie}});var Re=Z(Ie,2);const Ke=Qe(()=>d(A)==="port2"),M=Qe(()=>({id:"port2",icon:d(U)}));Io(Re,{select:S,get expanded(){return d(Ke)},get item(){return d(M)},get subitems(){return X}});var Ve=Z(Re,2);$o(Ve);var ct=Z(Ve,2);const ke=Qe(()=>y()===ft.settings);mr(ct,{select:S,item:{id:"settings",icon:x},get active(){return d(ke)}});var ye=Z(ct,2);const $e=Qe(()=>y()===ft.shell);mr(ye,{select:S,item:{id:"shell",icon:v},get active(){return d($e)}});var tt=Z(ye,2);$o(tt);var vt=Z(tt,2);{var yt=ve=>{var fe=kv(),bt=ze(fe);const wt=Qe(()=>d(A)==="layout"),Zt=Qe(()=>({id:"layout",icon:d(te)}));Io(bt,{select:S,get expanded(){return d(wt)},get item(){return d(Zt)},get subitems(){return q}});var un=Z(bt,2);mr(un,{select:S,item:{id:"monitor",icon:$},get active(){return T()}}),se(ve,fe)};Xe(vt,ve=>{m()&&ve(yt)})}W(Se),W(ge),W(Pe),xt(3,Pe,()=>Pt,()=>({duration:p})),se(Te,Pe)};Xe(pe,Te=>{b()&&Te(he)})}se(a,ne),it(),s()}var Iv=Xt("<title> </title>"),$v=Xt('<svg xmlns="http://www.w3.org/2000/svg" class="svelte-c8tyih"><!><!></svg>');function sn(a,r){let n=me(r,"title",8,null),s=me(r,"viewBox",8);var i=$v(),u=z(i);{var l=b=>{var m=Iv(),y=z(m,!0);W(m),ut(()=>At(y,n())),se(b,m)};Xe(u,b=>{n()&&b(l)})}var h=Z(u);Oa(h,r,"default",{}),W(i),ut(()=>Ft(i,"viewBox",s())),se(a,i)}var Nv=Xt('<path d="M16.922 2.029c-7.716 0-13.971 6.255-13.971 13.971s6.255 13.971 13.971 13.971c7.716 0 13.971-6.255 13.971-13.971s-6.255-13.971-13.971-13.971zM13.224 17.246c-0.178 0.106-0.35 0.178-0.568 0.238-0.172 0.047-0.344 0.106-0.382 0.13-0.107 0.068-0.289 0.377-0.391 0.66-0.127 0.354-0.172 0.721-0.131 1.061 0.038 0.314 0.168 0.915 0.252 1.172 0.070 0.213 0.387 0.889 0.543 1.158 0.13 0.224 0.136 0.299 0.030 0.426-0.17 0.204-0.53 0.356-1.030 0.435-0.43 0.068-0.788 0.079-1.134 0.035-0.639-0.082-1.090-0.234-1.243-0.418-0.141-0.169-0.136-0.193 0.193-0.857 0.321-0.649 0.408-0.879 0.535-1.414 0.066-0.279 0.079-0.4 0.079-0.755-0.001-0.497-0.046-0.706-0.222-1.034-0.219-0.41-0.313-0.484-0.79-0.617-0.574-0.161-1.346-0.682-2.049-1.383-0.353-0.353-0.701-0.895-0.918-1.432-0.18-0.446-0.341-1.379-0.248-1.439 0.024-0.015 0.807-0.024 1.594-0.026s1.579 0.004 1.618 0.019c0.028 0.011 0.077 0.081 0.109 0.158 0.114 0.268 0.827 1.233 1.161 1.569 0.644 0.649 1.003 0.929 1.793 1.405 0.397 0.239 0.823 0.432 1.287 0.584 0.242 0.079 0.227 0.136-0.091 0.325zM18.266 19.632c0.002 0.639 0.009 0.721 0.080 1.026 0.080 0.342 0.401 1.328 0.546 1.675 0.147 0.353 0.633 1.369 0.744 1.555 0.131 0.219 0.135 0.294 0.023 0.472-0.231 0.367-1.026 0.654-2.126 0.765-0.539 0.055-0.84 0.054-1.343-0.002-0.515-0.057-0.838-0.122-1.186-0.238-0.164-0.055-0.334-0.108-0.377-0.118-0.127-0.031-0.43-0.251-0.515-0.374-0.157-0.229-0.162-0.213 0.329-1.205 0.446-0.902 0.499-1.033 0.723-1.791 0.189-0.64 0.244-0.886 0.278-1.263 0.043-0.474 0.018-1.226-0.049-1.514-0.116-0.492-0.405-1.018-0.778-1.415-0.253-0.27-0.493-0.436-0.793-0.548-0.851-0.32-1.748-0.824-2.393-1.348-0.333-0.27-0.967-0.893-1.217-1.196-0.674-0.816-1.265-1.984-1.475-2.914-0.107-0.473-0.185-1.038-0.173-1.249l0.008-0.159v0.001h16.568l0.010 0.136c0.025 0.344-0.182 1.371-0.374 1.855-0.059 0.149-0.145 0.384-0.191 0.522s-0.109 0.288-0.14 0.333c-0.031 0.045-0.115 0.192-0.186 0.324-0.585 1.092-1.713 2.248-2.903 2.974-0.404 0.247-1.073 0.571-1.433 0.694-0.156 0.053-0.324 0.133-0.374 0.176-0.247 0.217-0.587 0.583-0.704 0.758-0.072 0.108-0.146 0.206-0.166 0.218-0.064 0.040-0.304 0.635-0.362 0.899-0.046 0.211-0.056 0.38-0.054 0.951zM26.404 16.568c-0.493 0.432-0.947 0.692-1.574 0.905-0.391 0.132-0.406 0.141-0.511 0.282-0.159 0.213-0.353 0.615-0.387 0.802-0.051 0.279-0.036 0.824 0.032 1.161 0.135 0.673 0.285 1.093 0.626 1.758 0.21 0.41 0.217 0.428 0.182 0.533-0.079 0.242-0.524 0.448-1.154 0.534-0.75 0.103-1.525 0.016-2.012-0.226-0.209-0.104-0.395-0.288-0.395-0.391 0-0.020 0.135-0.303 0.299-0.629 0.43-0.856 0.63-1.556 0.636-2.224 0.003-0.378-0.048-0.6-0.221-0.972-0.184-0.392-0.306-0.485-0.868-0.658-0.178-0.055-0.291-0.111-0.644-0.32-0.201-0.119-0.171-0.153 0.291-0.311 0.536-0.184 1.214-0.563 1.851-1.037 0.339-0.252 1.16-1.058 1.437-1.411 0.242-0.307 0.532-0.741 0.641-0.957 0.043-0.087 0.105-0.171 0.136-0.189 0.039-0.021 1.287-0.034 2.238-0.032 0.57 0.002 1.034 0.006 1.066 0.019 0.037 0.014 0.047 0.066 0.047 0.245 0 0.294-0.225 1.175-0.364 1.424-0.462 0.829-0.69 1.115-1.351 1.693z"></path>');function Lv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 34 32"},()=>n,{children:(s,i)=>{var u=Nv();se(s,u)},$$slots:{default:!0}}))}var Uv=Xt('<path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>');function Fv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 496 512"},()=>n,{children:(s,i)=>{var u=Uv();se(s,u)},$$slots:{default:!0}}))}var Bv=Xt('<path d="M416 48v416c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h224c26.51 0 48 21.49 48 48zm96 58v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42V88h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zM30 376h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6z"></path>');function Kv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=Bv();se(s,u)},$$slots:{default:!0}}))}var Vv=Xt('<path d="M384 16c48 32 64 80 64 112 0 128 0 256-32 368l-16-112c-48 32-112 64-144 64s-96-32-144-64L96 496C64 384 64 256 64 128c0-32 16-80 64-112-16 48-16 96 0 128 64-32 192-32 256 0 16-32 16-80 0-128zm0 256c-33.7 46.8-52 57.2-112 80 33.5 32 95.5 21.5 128-16 14.1-16.3 6.8-44.6-16-64zm-256 0c-22.8 19.4-30.1 47.7-16 64 32.5 37.5 94.5 48 128 16-60-22.8-78.3-33.2-112-80z"></path>');function Hv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=Vv();se(s,u)},$$slots:{default:!0}}))}var Gv=Xt('<path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path>');function jv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 24 24"},()=>n,{children:(s,i)=>{var u=Gv();se(s,u)},$$slots:{default:!0}}))}var Wv=Xt('<path d="M7 4c-.83 0-1.5-.67-1.5-1.5S6.17 1 7 1s1.5.67 1.5 1.5S7.83 4 7 4zm7 6c0 1.11-.89 2-2 2h-1c-1.11 0-2-.89-2-2l2-4h-1c-.55 0-1-.45-1-1H8v8c.42 0 1 .45 1 1h1c.42 0 1 .45 1 1H3c0-.55.58-1 1-1h1c0-.55.58-1 1-1h.03L6 5H5c0 .55-.45 1-1 1H3l2 4c0 1.11-.89 2-2 2H2c-1.11 0-2-.89-2-2l2-4H1V5h3c0-.55.45-1 1-1h4c.55 0 1 .45 1 1h3v1h-1l2 4zM2.5 7L1 10h3L2.5 7zM13 10l-1.5-3-1.5 3h3z"></path>');function zv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 14 16"},()=>n,{children:(s,i)=>{var u=Wv();se(s,u)},$$slots:{default:!0}}))}var qv=Ae('<div class="my-4 flex w-28 flex-col items-center justify-center border-0"><button class="flex h-16 w-16 flex-col items-center justify-center text-gray-300"><!></button> <div class="font-josefin flex border-none text-xl text-gray-300"><!></div></div>');function No(a,r){let n=me(r,"onclick",3,()=>{});var s=qv(),i=z(s);i.__click=function(...b){n()?.apply(this,b)};var u=z(i);zn(u,()=>r.icon),W(i);var l=Z(i,2),h=z(l);zn(h,()=>r.description),W(l),W(s),se(a,s)}an(["click"]);function Yv(a,r){console.log("close"),r(!1)}var Xv=Ae(`<div><div class="font-josefin flex h-[500px] flex-col"><div class="w-full text-center text-3xl font-semibold text-white">Impressum</div> <hr class="my-4 h-px border-0 bg-gray-200 dark:bg-gray-700"/> <div class="grow overflow-auto border-blue-500 px-4"><div><article class="prose mx-1"><h2>Kontakt</h2> <address>Prof. Dr. Dirk W. Hoffmann<br/> Hochschule Karlsruhe<br/> MoltkestraÃe 30<br/> D - 76133 Karlsruhe<br/> Germany</address> <h2>Datenschutz</h2> <p>Durch die Nutzung unserer Website erklÃ¤ren Sie sich mit der Erhebung, Verarbeitung und
						Nutzung von Daten gemÃ¤Ã der nachfolgenden Beschreibung einverstanden. Unsere Website
						kann grundsÃ¤tzlich ohne Registrierung besucht werden. Dabei werden Daten wie
						beispielsweise aufgerufene Seiten bzw. Namen der abgerufenen Datei, Datum und Uhrzeit zu
						statistischen Zwecken auf dem Server gespeichert, ohne dass diese Daten unmittelbar auf
						Ihre Person bezogen werden. Personenbezogene Daten, insbesondere Name, Adresse oder
						E-Mail-Adresse werden soweit mÃ¶glich auf freiwilliger Basis erhoben. Ohne Ihre
						Einwilligung erfolgt keine Weitergabe der Daten an Dritte.</p> <h2>Hosting</h2> <p>Diese Webseite wird gehostet auf Servern der Github Inc., 88 Colin P Kelly Jr. Street,
						San Francisco, CA 94107, USA. GitHub kann beim Aufruf dieser Webseiten technische
						Informationen inklusive ihrer IP Adresse aufzeichnen. Weitere Informationen zum Umgang
						mit Nutzerdaten finden Sie in der <a href="https://help.github.com/articles/github-privacy-policy">DatenschutzerklÃ¤rung von GitHub</a>.</p></article></div></div> <hr class="my-4 h-px border-0 bg-gray-200 dark:bg-gray-700"/> <div class="flex w-full justify-center"><button class="btn btn-primary">Close</button></div></div></div>`);function Zv(a,r){at(r,!0);let n=me(r,"show",15,!1);var s=Xv(),i=z(s),u=Z(z(i),4),l=z(u),h=z(l);W(l),W(u);var b=Z(u,4),m=z(b);m.__click=[Yv,n],W(b),W(i),W(s),xt(1,h,()=>Pt),xt(3,s,()=>Pt),se(a,s),it()}an(["click"]);var Qv=Xt('<path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path>');function Jv(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=Qv();se(s,u)},$$slots:{default:!0}}))}var eg=Xt('<path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path>');function tg(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=eg();se(s,u)},$$slots:{default:!0}}))}var ng=Xt('<path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path>');function ff(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=ng();se(s,u)},$$slots:{default:!0}}))}var rg=Ae('<input type="file" class="hidden"/>');function df(a,r){at(r,!1);let n=Rt(),s,i;function u(){return d(n).click(),new Promise(function(m,y){s=m,i=y})}async function l(){if(d(n).files&&d(n).files.length>0){let m=d(n).files[0],y=await h(m);s(y)}else i();Go(n,d(n).value="")}function h(m){return new Promise(async(y,T)=>{try{let _=new FileReader;_.onload=function(A){y(new Uint8Array(this.result))},_.readAsArrayBuffer(m)}catch(_){T(_)}})}Bt();var b=rg();return Lt(b,m=>He(n,m),()=>d(n)),En("change",b,l),se(a,b),Ye(r,"open",u),it({open:u})}function ag(a,r,n){console.log("close"),r(!1),le(Ut,ft.none)}var ig=(a,r)=>He(r,0),og=(a,r)=>He(r,1),sg=(a,r,n)=>r(a,d(n).crc32),ug=(a,r,n)=>r(a,d(n).crc32),cg=Ae('<tr><td><div class="flex h-[5.5rem] space-x-4"><div><img class="h-full w-full" alt="Rom Chip Icon"/></div> <div><div class="font-bold"> </div> <div class="opacity-60"> </div> <div class="opacity-60"> </div></div> <div><button class="btn btn-primary btn-outline btn-sm">Install</button></div> <div><button class="btn btn-primary btn-outline btn-sm w-8 p-1.5"><!></button></div></div></td></tr>'),lg=(a,r)=>r(),fg=Ae(`<table class="table-compact table-zebra table w-full"><tbody><!><tr><td><div class="flex h-[5.5rem] space-x-4"><div><p>Use drag-and-drop or press the 'Plus' button</p> <p>to add additional ROMs.</p></div> <div><button class="btn btn-primary btn-outline btn-sm w-8 p-1.5"><!></button></div></div></td></tr></tbody></table>`),dg=Ae(`<article><h3>Kickstart</h3> <p>To run the emulator, a Kickstart ROM is required. The original Amiga ROMs are the
					intellectual property of Cloantoâ¢ and cannot be freely distributed. If you own a legal
					Kickstart ROM, you can add the ROM image to vAmiga.net via drag and drop. Once a supported
					image is detected, it becomes available in the ROM database. The ROMs are stored in the
					browser's memory and will remain available in future sessions.</p> <h3>Encrypted ROMs</h3> <p>If you have purchased an older version of Amiga Foreverâ¢, you may possess encrypted ROM
					files. These are accompanied by a <code>.key</code> file required to decrypt the ROM. Encrypted
					ROMs are not yet supported by the emulator. They must be decrypted manually before they can
					be used in vAmiga.net.</p> <h3>AROS</h3> <p>If you donât have access to an original Kickstart ROM, you may use the Amiga Research
					Operating System ROM (AROS) instead. AROS is an open-source Kickstart replacement and can
					be freely redistributed. However, not all Amiga programs are compatible with AROS, so we
					strongly recommend using vAmiga.net with original ROMs whenever possible.</p></article>`),vg=Ae('<!> <div><div class="mx-2 flex items-center space-x-2"><div><button>Installed Roms</button> <button>Legal Information</button> <div class="flex grow items-center justify-end"><button class="btn btn-sm btn-primary flex w-8 p-0"><!></button></div></div></div> <div><!></div></div>',1);function gg(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(jo,"$memory",n),u=()=>k(Pa,"$initialized",n),l=()=>k(Ut,"$layer",n),h=()=>k(kn,"$amiga",n),b=()=>k(Qr,"$proxy",n);let m=kt(Bi([]));Fs(()=>Dn.roms.orderBy("title").toArray()).subscribe(de=>{He(m,de,!0)});let T=me(r,"show",15,!0);async function _(de,be=null,Ie=0){let Ce=i().analyzeRom(de,de.length);if(Ce.crc32)try{const ue=Ce.title,Re=await Dn.roms.where("crc32").equals(Ce.crc32).first();if(Re){console.log(`ROM with CRC32 ${Ce.crc32} already exists: ${Re.title}`);return}const Ke=await Dn.roms.add({crc32:Ce.crc32,title:Ce.title,version:Ce.version,released:Ce.released,model:Ce.model,isAros:Ce.isAros,isDiag:Ce.isDiag,isCommodore:Ce.isCommodore,isHyperion:Ce.isHyperion,isPatched:Ce.isPatched,isUnknown:Ce.isUnknown,rom:de,ext:be,extStart:Ie});console.log(`${ue} successfully added with id ${Ke}`)}catch(ue){console.warn("Failed to add Kickstart",ue)}}async function A(){try{let de=await fetch("roms/aros-svn55696-rom.bin"),be=await de.arrayBuffer(),Ie=new Uint8Array(be);de=await fetch("roms/aros-svn55696-ext.bin"),be=await de.arrayBuffer();let Ce=new Uint8Array(be);await _(Ie,Ce),de=await fetch("roms/diagrom-121.bin"),be=await de.arrayBuffer();let ue=new Uint8Array(be);await _(ue)}catch{console.error("Cannot install default Roms")}}function p(de){return de.isUnknown?"CRC "+de.crc32.toString():de.version}xi(()=>{u()&&A()});function S(de){return de.isHyperion?"rom-hyperion.png":de.isAros?"rom-aros.png":de.isDiag?"rom-diag.png":de.isCommodore?"rom-commodore.png":"rom-unknown.png"}async function P(de,be){try{await Dn.roms.delete(be),console.log("Kickstart {id} deleted")}catch(Ie){console.log("Failed to delete Kickstart",Ie)}}async function I(de,be){console.log("Installing ROM ",be,"..."),h().powerOff(),await b().installRom(be),h().hardReset(),h().run()}const R="";let x=kt(0),v=kt(void 0);function $(){d(v)?.open().then(function(de){console.log("open file dialog",de),b().addRom(de)},function(de){console.log("error",de)})}var j=vg(),D=ze(j);Lt(df(D,{}),de=>He(v,de,!0),()=>d(v));var U=Z(D,2);We(U,1," flex h-full flex-col border-green-500");var te=z(U),ie=z(te);We(ie,1," tabs tabs-box flex grow");var X=z(ie);let q;X.__click=[ig,x];var ne=Z(X,2);let pe;ne.__click=[og,x];var he=Z(ne,2),Te=z(he);Te.__click=[ag,T,l];var Pe=z(Te);ff(Pe,{}),W(Te),W(he),W(ie),W(te);var ge=Z(te,2);We(ge,1,"mt-4 flex overflow-auto  text-base-content p-1");var Se=z(ge);{var Q=de=>{var be=fg(),Ie=z(be);We(Ie,1,_r(R));var Ce=z(Ie);{var ue=$e=>{var tt=Et(),vt=ze(tt);ta(vt,17,()=>d(m),ea,(yt,ve)=>{var fe=cg();We(fe,1,"h-8  border-0 border-purple-400");var bt=z(fe),wt=z(bt),Zt=z(wt);We(Zt,1," h-full w-[4.5rem]");var un=z(Zt);W(Zt);var Mn=Z(Zt,2);We(Mn,1," flex h-full grow flex-col overflow-hidden");var cn=z(Mn),ln=z(cn,!0);W(cn);var jt=Z(cn,2),Kn=z(jt,!0);W(jt);var An=Z(jt,2),Qn=z(An,!0);W(An),W(Mn);var tn=Z(Mn,2);We(tn,1," flex h-full items-center");var fn=z(tn);fn.__click=[sg,I,ve],W(tn);var Tn=Z(tn,2);We(Tn,1," flex h-full items-center");var dn=z(Tn);dn.__click=[ug,P,ve];var Qt=z(dn);tg(Qt,{}),W(dn),W(Tn),W(wt),W(bt),W(fe),ut((Fe,Ht)=>{Ft(un,"src",Fe),At(ln,d(ve).title),At(Kn,Ht),At(Qn,d(ve).model)},[()=>"icons/"+S(d(ve)),()=>p(d(ve))]),se(yt,fe)}),se($e,tt)};Xe(Ce,$e=>{d(m)&&$e(ue)})}var Re=Z(Ce);We(Re,1,"h-8  border-0 border-purple-400");var Ke=z(Re),M=z(Ke),Ve=z(M);We(Ve,1," text-base-content font-josefin flex h-full grow flex-col justify-center overflow-hidden border-0 text-center text-base");var ct=Z(Ve,2);We(ct,1," flex h-full items-center");var ke=z(ct);ke.__click=[lg,$];var ye=z(ke);Jv(ye,{}),W(ke),W(ct),W(M),W(Ke),W(Re),W(Ie),W(be),xt(1,be,()=>Pt),se(de,be)},re=de=>{var be=dg();We(be,1,"prose mx-1 "),xt(1,be,()=>Pt),se(de,be)};Xe(Se,de=>{d(x)===0?de(Q):de(re,!1)})}W(ge),W(U),ut((de,be)=>{q=We(X,1,"tab",null,q,de),pe=We(ne,1,"tab",null,pe,be)},[()=>({"tab-active":d(x)===0}),()=>({"tab-active":d(x)===1})]),se(a,j),it(),s()}an(["click"]);function na(...a){return a.filter(Boolean).join(" ")}function hg(a,r){if(a){const n=Object.keys(a);for(let s=0;s<n.length;s++){const i=n[s];if(i!=="__proto__"&&r(a[i],i)===!1)break}}return a}function fl(a){const r=a.Components.Elements?.list.children;return r&&Array.prototype.slice.call(r)||[]}function ki(a){return a!==null&&typeof a=="object"}function os(a,r){if(Array.isArray(a)&&Array.isArray(r))return a.length===r.length&&!a.some((n,s)=>!os(n,r[s]));if(ki(a)&&ki(r)){const n=Object.keys(a),s=Object.keys(r);return n.length===s.length&&!n.some(i=>!Object.prototype.hasOwnProperty.call(r,i)||!os(a[i],r[i]))}return a===r}function mg(a,r){return a.length===r.length&&!a.some((n,s)=>n!==r[s])}function bi(a,r){const n=a;return hg(r,(s,i)=>{Array.isArray(s)?n[i]=s.slice():ki(s)?n[i]=bi(ki(n[i])?n[i]:{},s):n[i]=s}),n}function pg(a,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,s.key,s)}}function _g(a,r,n){return r&&pg(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var dl="(prefers-reduced-motion: reduce)",qr=1,yg=2,ra=3,ua=4,Fa=5,wi=6,Ci=7,bg={CREATED:qr,MOUNTED:yg,IDLE:ra,MOVING:ua,SCROLLING:Fa,DRAGGING:wi,DESTROYED:Ci};function or(a){a.length=0}function wr(a,r,n){return Array.prototype.slice.call(a,r,n)}function pt(a){return a.bind.apply(a,[null].concat(wr(arguments,1)))}var vf=setTimeout,ss=function(){};function vl(a){return requestAnimationFrame(a)}function Vi(a,r){return typeof r===a}function ka(a){return!Ks(a)&&Vi("object",a)}var Bs=Array.isArray,gf=pt(Vi,"function"),yr=pt(Vi,"string"),Ba=pt(Vi,"undefined");function Ks(a){return a===null}function hf(a){try{return a instanceof(a.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function Ka(a){return Bs(a)?a:[a]}function Cn(a,r){Ka(a).forEach(r)}function Vs(a,r){return a.indexOf(r)>-1}function Ei(a,r){return a.push.apply(a,Ka(r)),a}function rr(a,r,n){a&&Cn(r,function(s){s&&a.classList[n?"add":"remove"](s)})}function qn(a,r){rr(a,yr(r)?r.split(" "):r,!0)}function Va(a,r){Cn(r,a.appendChild.bind(a))}function Hs(a,r){Cn(a,function(n){var s=(r||n).parentNode;s&&s.insertBefore(n,r)})}function Ca(a,r){return hf(a)&&(a.msMatchesSelector||a.matches).call(a,r)}function mf(a,r){var n=a?wr(a.children):[];return r?n.filter(function(s){return Ca(s,r)}):n}function Ha(a,r){return r?mf(a,r)[0]:a.firstElementChild}var Ma=Object.keys;function Cr(a,r,n){return a&&(n?Ma(a).reverse():Ma(a)).forEach(function(s){s!=="__proto__"&&r(a[s],s)}),a}function Ia(a){return wr(arguments,1).forEach(function(r){Cr(r,function(n,s){a[s]=r[s]})}),a}function pr(a){return wr(arguments,1).forEach(function(r){Cr(r,function(n,s){Bs(n)?a[s]=n.slice():ka(n)?a[s]=pr({},ka(a[s])?a[s]:{},n):a[s]=n})}),a}function gl(a,r){Cn(r||Ma(a),function(n){delete a[n]})}function Yn(a,r){Cn(a,function(n){Cn(r,function(s){n&&n.removeAttribute(s)})})}function et(a,r,n){ka(r)?Cr(r,function(s,i){et(a,i,s)}):Cn(a,function(s){Ks(n)||n===""?Yn(s,r):s.setAttribute(r,String(n))})}function Xr(a,r,n){var s=document.createElement(a);return r&&(yr(r)?qn(s,r):et(s,r)),n&&Va(n,s),s}function Ln(a,r,n){if(Ba(n))return getComputedStyle(a)[r];Ks(n)||(a.style[r]=""+n)}function $a(a,r){Ln(a,"display",r)}function pf(a){a.setActive&&a.setActive()||a.focus({preventScroll:!0})}function Fn(a,r){return a.getAttribute(r)}function hl(a,r){return a&&a.classList.contains(r)}function Pn(a){return a.getBoundingClientRect()}function Mr(a){Cn(a,function(r){r&&r.parentNode&&r.parentNode.removeChild(r)})}function _f(a){return Ha(new DOMParser().parseFromString(a,"text/html").body)}function tr(a,r){a.preventDefault(),r&&(a.stopPropagation(),a.stopImmediatePropagation())}function yf(a,r){return a&&a.querySelector(r)}function Gs(a,r){return r?wr(a.querySelectorAll(r)):[]}function ar(a,r){rr(a,r,!1)}function us(a){return a.timeStamp}function kr(a){return yr(a)?a:a?a+"px":""}var Ga="splide",js="data-"+Ga;function Ra(a,r){if(!a)throw new Error("["+Ga+"] "+(r||""))}var br=Math.min,Mi=Math.max,Ii=Math.floor,Na=Math.ceil,rn=Math.abs;function bf(a,r,n){return rn(a-r)<n}function Si(a,r,n,s){var i=br(r,n),u=Mi(r,n);return s?i<a&&a<u:i<=a&&a<=u}function Gr(a,r,n){var s=br(r,n),i=Mi(r,n);return br(Mi(s,a),i)}function cs(a){return+(a>0)-+(a<0)}function ls(a,r){return Cn(r,function(n){a=a.replace("%s",""+n)}),a}function Ws(a){return a<10?"0"+a:""+a}var ml={};function wg(a){return""+a+Ws(ml[a]=(ml[a]||0)+1)}function wf(){var a=[];function r(l,h,b,m){i(l,h,function(y,T,_){var A="addEventListener"in y,p=A?y.removeEventListener.bind(y,T,b,m):y.removeListener.bind(y,b);A?y.addEventListener(T,b,m):y.addListener(b),a.push([y,T,_,b,p])})}function n(l,h,b){i(l,h,function(m,y,T){a=a.filter(function(_){return _[0]===m&&_[1]===y&&_[2]===T&&(!b||_[3]===b)?(_[4](),!1):!0})})}function s(l,h,b){var m,y=!0;return typeof CustomEvent=="function"?m=new CustomEvent(h,{bubbles:y,detail:b}):(m=document.createEvent("CustomEvent"),m.initCustomEvent(h,y,!1,b)),l.dispatchEvent(m),m}function i(l,h,b){Cn(l,function(m){m&&Cn(h,function(y){y.split(" ").forEach(function(T){var _=T.split(".");b(m,_[0],_[1])})})})}function u(){a.forEach(function(l){l[4]()}),or(a)}return{bind:r,unbind:n,dispatch:s,destroy:u}}var Er="mounted",pl="ready",Xn="move",Ir="moved",$i="click",fs="active",ds="inactive",vs="visible",gs="hidden",It="refresh",Yt="updated",aa="resize",Hi="resized",Ef="drag",Sf="dragging",Af="dragged",Gi="scroll",Nr="scrolled",Eg="overflow",zs="destroy",hs="arrows:mounted",ms="arrows:updated",ps="pagination:mounted",_s="pagination:updated",Ni="navigation:mounted",qs="autoplay:play",ys="autoplay:playing",Ys="autoplay:pause",Li="lazyload:loaded",Tf="sk",Rf="sh",Ui="ei";function St(a){var r=a?a.event.bus:document.createDocumentFragment(),n=wf();function s(u,l){n.bind(r,Ka(u).join(" "),function(h){l.apply(l,Bs(h.detail)?h.detail:[])})}function i(u){n.dispatch(r,u,wr(arguments,1))}return a&&a.event.on(zs,n.destroy),Ia(n,{bus:r,on:s,off:pt(n.unbind,r),emit:i})}function ji(a,r,n,s){var i=Date.now,u,l=0,h,b=!0,m=0;function y(){if(!b){if(l=a?br((i()-u)/a,1):1,n&&n(l),l>=1&&(r(),u=i(),s&&++m>=s))return _();h=vl(y)}}function T(I){I||p(),u=i()-(I?l*a:0),b=!1,h=vl(y)}function _(){b=!0}function A(){u=i(),l=0,n&&n(l)}function p(){h&&cancelAnimationFrame(h),l=0,h=0,b=!0}function S(I){a=I}function P(){return b}return{start:T,rewind:A,pause:_,cancel:p,set:S,isPaused:P}}function Sg(a){var r=a;function n(i){r=i}function s(i){return Vs(Ka(i),r)}return{set:n,is:s}}function Ag(a,r){var n=ji(0,a,null,1);return function(){n.isPaused()&&n.start()}}function Tg(a,r,n){var s=a.state,i=n.breakpoints||{},u=n.reducedMotion||{},l=wf(),h=[];function b(){var p=n.mediaQuery==="min";Ma(i).sort(function(S,P){return p?+S-+P:+P-+S}).forEach(function(S){y(i[S],"("+(p?"min":"max")+"-width:"+S+"px)")}),y(u,dl),T()}function m(p){p&&l.destroy()}function y(p,S){var P=matchMedia(S);l.bind(P,"change",T),h.push([p,P])}function T(){var p=s.is(Ci),S=n.direction,P=h.reduce(function(I,R){return pr(I,R[1].matches?R[0]:{})},{});gl(n),A(P),n.destroy?a.destroy(n.destroy==="completely"):p?(m(!0),a.mount()):S!==n.direction&&a.refresh()}function _(p){matchMedia(dl).matches&&(p?pr(n,u):gl(n,Ma(u)))}function A(p,S,P){pr(n,p),S&&pr(Object.getPrototypeOf(n),p),(P||!s.is(qr))&&a.emit(Yt,n)}return{setup:b,destroy:m,reduce:_,set:A}}var Wi="Arrow",zi=Wi+"Left",qi=Wi+"Right",xf=Wi+"Up",Pf=Wi+"Down",_l="rtl",Yi="ttb",Lo={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[xf,qi],ArrowRight:[Pf,zi]};function Rg(a,r,n){function s(u,l,h){h=h||n.direction;var b=h===_l&&!l?1:h===Yi?0:-1;return Lo[u]&&Lo[u][b]||u.replace(/width|left|right/i,function(m,y){var T=Lo[m.toLowerCase()][b]||m;return y>0?T.charAt(0).toUpperCase()+T.slice(1):T})}function i(u){return u*(n.direction===_l?1:-1)}return{resolve:s,orient:i}}var ir="role",Zr="tabindex",xg="disabled",Bn="aria-",ja=Bn+"controls",Df=Bn+"current",yl=Bn+"selected",On=Bn+"label",Xs=Bn+"labelledby",Of=Bn+"hidden",Zs=Bn+"orientation",La=Bn+"roledescription",bl=Bn+"live",wl=Bn+"busy",El=Bn+"atomic",Qs=[ir,Zr,xg,ja,Df,On,Xs,Of,Zs,La],Zn=Ga+"__",Sr="is-",Uo=Ga,Sl=Zn+"track",Pg=Zn+"list",Xi=Zn+"slide",kf=Xi+"--clone",Dg=Xi+"__container",Js=Zn+"arrows",Zi=Zn+"arrow",Cf=Zi+"--prev",Mf=Zi+"--next",Qi=Zn+"pagination",If=Qi+"__page",Og=Zn+"progress",kg=Og+"__bar",Cg=Zn+"toggle",Mg=Zn+"spinner",Ig=Zn+"sr",$g=Sr+"initialized",$r=Sr+"active",$f=Sr+"prev",Nf=Sr+"next",bs=Sr+"visible",ws=Sr+"loading",Lf=Sr+"focus-in",Uf=Sr+"overflow",Ng=[$r,bs,$f,Nf,ws,Lf,Uf],Lg={slide:Xi,clone:kf,arrows:Js,arrow:Zi,prev:Cf,next:Mf,pagination:Qi,page:If,spinner:Mg};function Ug(a,r){if(gf(a.closest))return a.closest(r);for(var n=a;n&&n.nodeType===1&&!Ca(n,r);)n=n.parentElement;return n}var Fg=5,Al=200,Ff="touchstart mousedown",Fo="touchmove mousemove",Bo="touchend touchcancel mouseup click";function Bg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=a.root,h=n.i18n,b={},m=[],y=[],T=[],_,A,p;function S(){x(),v(),R()}function P(){i(It,I),i(It,S),i(Yt,R),u(document,Ff+" keydown",function(D){p=D.type==="keydown"},{capture:!0}),u(l,"focusin",function(){rr(l,Lf,!!p)})}function I(D){var U=Qs.concat("style");or(m),ar(l,y),ar(_,T),Yn([_,A],U),Yn(l,D?U:["style",La])}function R(){ar(l,y),ar(_,T),y=j(Uo),T=j(Sl),qn(l,y),qn(_,T),et(l,On,n.label),et(l,Xs,n.labelledby)}function x(){_=$("."+Sl),A=Ha(_,"."+Pg),Ra(_&&A,"A track/list element is missing."),Ei(m,mf(A,"."+Xi+":not(."+kf+")")),Cr({arrows:Js,pagination:Qi,prev:Cf,next:Mf,bar:kg,toggle:Cg},function(D,U){b[U]=$("."+D)}),Ia(b,{root:l,track:_,list:A,slides:m})}function v(){var D=l.id||wg(Ga),U=n.role;l.id=D,_.id=_.id||D+"-track",A.id=A.id||D+"-list",!Fn(l,ir)&&l.tagName!=="SECTION"&&U&&et(l,ir,U),et(l,La,h.carousel),et(A,ir,"presentation")}function $(D){var U=yf(l,D);return U&&Ug(U,"."+Uo)===l?U:void 0}function j(D){return[D+"--"+n.type,D+"--"+n.direction,n.drag&&D+"--draggable",n.isNavigation&&D+"--nav",D===Uo&&$r]}return Ia(b,{setup:S,mount:P,destroy:I})}var ia="slide",ca="loop",Wa="fade";function Kg(a,r,n,s){var i=St(a),u=i.on,l=i.emit,h=i.bind,b=a.Components,m=a.root,y=a.options,T=y.isNavigation,_=y.updateOnMove,A=y.i18n,p=y.pagination,S=y.slideFocus,P=b.Direction.resolve,I=Fn(s,"style"),R=Fn(s,On),x=n>-1,v=Ha(s,"."+Dg),$;function j(){x||(s.id=m.id+"-slide"+Ws(r+1),et(s,ir,p?"tabpanel":"group"),et(s,La,A.slide),et(s,On,R||ls(A.slideLabel,[r+1,a.length]))),D()}function D(){h(s,"click",pt(l,$i,ge)),h(s,"keydown",pt(l,Tf,ge)),u([Ir,Rf,Nr],X),u(Ni,te),_&&u(Xn,ie)}function U(){$=!0,i.destroy(),ar(s,Ng),Yn(s,Qs),et(s,"style",I),et(s,On,R||"")}function te(){var Se=a.splides.map(function(Q){var re=Q.splide.Components.Slides.getAt(r);return re?re.slide.id:""}).join(" ");et(s,On,ls(A.slideX,(x?n:r)+1)),et(s,ja,Se),et(s,ir,S?"button":""),S&&Yn(s,La)}function ie(){$||X()}function X(){if(!$){var Se=a.index;q(),ne(),rr(s,$f,r===Se-1),rr(s,Nf,r===Se+1)}}function q(){var Se=he();Se!==hl(s,$r)&&(rr(s,$r,Se),et(s,Df,T&&Se||""),l(Se?fs:ds,ge))}function ne(){var Se=Te(),Q=!Se&&(!he()||x);if(a.state.is([ua,Fa])||et(s,Of,Q||""),et(Gs(s,y.focusableNodes||""),Zr,Q?-1:""),S&&et(s,Zr,Q?-1:0),Se!==hl(s,bs)&&(rr(s,bs,Se),l(Se?vs:gs,ge)),!Se&&document.activeElement===s){var re=b.Slides.getAt(a.index);re&&pf(re.slide)}}function pe(Se,Q,re){Ln(re&&v||s,Se,Q)}function he(){var Se=a.index;return Se===r||y.cloneStatus&&Se===n}function Te(){if(a.is(Wa))return he();var Se=Pn(b.Elements.track),Q=Pn(s),re=P("left",!0),de=P("right",!0);return Ii(Se[re])<=Na(Q[re])&&Ii(Q[de])<=Na(Se[de])}function Pe(Se,Q){var re=rn(Se-r);return!x&&(y.rewind||a.is(ca))&&(re=br(re,a.length-re)),re<=Q}var ge={index:r,slideIndex:n,slide:s,container:v,isClone:x,mount:j,destroy:U,update:X,style:pe,isWithin:Pe};return ge}function Vg(a,r,n){var s=St(a),i=s.on,u=s.emit,l=s.bind,h=r.Elements,b=h.slides,m=h.list,y=[];function T(){_(),i(It,A),i(It,_)}function _(){b.forEach(function(X,q){S(X,q,-1)})}function A(){$(function(X){X.destroy()}),or(y)}function p(){$(function(X){X.update()})}function S(X,q,ne){var pe=Kg(a,q,ne,X);pe.mount(),y.push(pe),y.sort(function(he,Te){return he.index-Te.index})}function P(X){return X?j(function(q){return!q.isClone}):y}function I(X){var q=r.Controller,ne=q.toIndex(X),pe=q.hasFocus()?1:n.perPage;return j(function(he){return Si(he.index,ne,ne+pe-1)})}function R(X){return j(X)[0]}function x(X,q){Cn(X,function(ne){if(yr(ne)&&(ne=_f(ne)),hf(ne)){var pe=b[q];pe?Hs(ne,pe):Va(m,ne),qn(ne,n.classes.slide),U(ne,pt(u,aa))}}),u(It)}function v(X){Mr(j(X).map(function(q){return q.slide})),u(It)}function $(X,q){P(q).forEach(X)}function j(X){return y.filter(gf(X)?X:function(q){return yr(X)?Ca(q.slide,X):Vs(Ka(X),q.index)})}function D(X,q,ne){$(function(pe){pe.style(X,q,ne)})}function U(X,q){var ne=Gs(X,"img"),pe=ne.length;pe?ne.forEach(function(he){l(he,"load error",function(){--pe||q()})}):q()}function te(X){return X?b.length:y.length}function ie(){return y.length>n.perPage}return{mount:T,destroy:A,update:p,register:S,get:P,getIn:I,getAt:R,add:x,remove:v,forEach:$,filter:j,style:D,getLength:te,isEnough:ie}}function Hg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.emit,h=r.Slides,b=r.Direction.resolve,m=r.Elements,y=m.root,T=m.track,_=m.list,A=h.getAt,p=h.style,S,P,I;function R(){x(),u(window,"resize load",Ag(pt(l,aa))),i([Yt,It],x),i(aa,v)}function x(){S=n.direction===Yi,Ln(y,"maxWidth",kr(n.width)),Ln(T,b("paddingLeft"),$(!1)),Ln(T,b("paddingRight"),$(!0)),v(!0)}function v(ge){var Se=Pn(y);(ge||P.width!==Se.width||P.height!==Se.height)&&(Ln(T,"height",j()),p(b("marginRight"),kr(n.gap)),p("width",U()),p("height",te(),!0),P=Se,l(Hi),I!==(I=Pe())&&(rr(y,Uf,I),l(Eg,I)))}function $(ge){var Se=n.padding,Q=b(ge?"right":"left");return Se&&kr(Se[Q]||(ka(Se)?0:Se))||"0px"}function j(){var ge="";return S&&(ge=D(),Ra(ge,"height or heightRatio is missing."),ge="calc("+ge+" - "+$(!1)+" - "+$(!0)+")"),ge}function D(){return kr(n.height||Pn(_).width*n.heightRatio)}function U(){return n.autoWidth?null:kr(n.fixedWidth)||(S?"":ie())}function te(){return kr(n.fixedHeight)||(S?n.autoHeight?null:ie():D())}function ie(){var ge=kr(n.gap);return"calc((100%"+(ge&&" + "+ge)+")/"+(n.perPage||1)+(ge&&" - "+ge)+")"}function X(){return Pn(_)[b("width")]}function q(ge,Se){var Q=A(ge||0);return Q?Pn(Q.slide)[b("width")]+(Se?0:he()):0}function ne(ge,Se){var Q=A(ge);if(Q){var re=Pn(Q.slide)[b("right")],de=Pn(_)[b("left")];return rn(re-de)+(Se?0:he())}return 0}function pe(ge){return ne(a.length-1)-ne(0)+q(0,ge)}function he(){var ge=A(0);return ge&&parseFloat(Ln(ge.slide,b("marginRight")))||0}function Te(ge){return parseFloat(Ln(T,b("padding"+(ge?"Right":"Left"))))||0}function Pe(){return a.is(Wa)||pe(!0)>X()}return{mount:R,resize:v,listSize:X,slideSize:q,sliderSize:pe,totalSize:ne,getPadding:Te,isOverflow:Pe}}var Gg=2;function jg(a,r,n){var s=St(a),i=s.on,u=r.Elements,l=r.Slides,h=r.Direction.resolve,b=[],m;function y(){i(It,T),i([Yt,aa],A),(m=P())&&(p(m),r.Layout.resize(!0))}function T(){_(),y()}function _(){Mr(b),or(b),s.destroy()}function A(){var I=P();m!==I&&(m<I||!I)&&s.emit(It)}function p(I){var R=l.get().slice(),x=R.length;if(x){for(;R.length<I;)Ei(R,R);Ei(R.slice(-I),R.slice(0,I)).forEach(function(v,$){var j=$<I,D=S(v.slide,$);j?Hs(D,R[0].slide):Va(u.list,D),Ei(b,D),l.register(D,$-I+(j?0:x),v.index)})}}function S(I,R){var x=I.cloneNode(!0);return qn(x,n.classes.clone),x.id=a.root.id+"-clone"+Ws(R+1),x}function P(){var I=n.clones;if(!a.is(ca))I=0;else if(Ba(I)){var R=n[h("fixedWidth")]&&r.Layout.slideSize(0),x=R&&Na(Pn(u.track)[h("width")]/R);I=x||n[h("autoWidth")]&&a.length||n.perPage*Gg}return I}return{mount:y,destroy:_}}function Wg(a,r,n){var s=St(a),i=s.on,u=s.emit,l=a.state.set,h=r.Layout,b=h.slideSize,m=h.getPadding,y=h.totalSize,T=h.listSize,_=h.sliderSize,A=r.Direction,p=A.resolve,S=A.orient,P=r.Elements,I=P.list,R=P.track,x;function v(){x=r.Transition,i([Er,Hi,Yt,It],$)}function $(){r.Controller.isBusy()||(r.Scroll.cancel(),D(a.index),r.Slides.update())}function j(Q,re,de,be){Q!==re&&ge(Q>de)&&(X(),U(ie(pe(),Q>de),!0)),l(ua),u(Xn,re,de,Q),x.start(re,function(){l(ra),u(Ir,re,de,Q),be&&be()})}function D(Q){U(ne(Q,!0))}function U(Q,re){if(!a.is(Wa)){var de=re?Q:te(Q);Ln(I,"transform","translate"+p("X")+"("+de+"px)"),Q!==de&&u(Rf)}}function te(Q){if(a.is(ca)){var re=q(Q),de=re>r.Controller.getEnd(),be=re<0;(be||de)&&(Q=ie(Q,de))}return Q}function ie(Q,re){var de=Q-Pe(re),be=_();return Q-=S(be*(Na(rn(de)/be)||1))*(re?1:-1),Q}function X(){U(pe(),!0),x.cancel()}function q(Q){for(var re=r.Slides.get(),de=0,be=1/0,Ie=0;Ie<re.length;Ie++){var Ce=re[Ie].index,ue=rn(ne(Ce,!0)-Q);if(ue<=be)be=ue,de=Ce;else break}return de}function ne(Q,re){var de=S(y(Q-1)-Te(Q));return re?he(de):de}function pe(){var Q=p("left");return Pn(I)[Q]-Pn(R)[Q]+S(m(!1))}function he(Q){return n.trimSpace&&a.is(ia)&&(Q=Gr(Q,0,S(_(!0)-T()))),Q}function Te(Q){var re=n.focus;return re==="center"?(T()-b(Q,!0))/2:+re*b(Q)||0}function Pe(Q){return ne(Q?r.Controller.getEnd():0,!!n.trimSpace)}function ge(Q){var re=S(ie(pe(),Q));return Q?re>=0:re<=I[p("scrollWidth")]-Pn(R)[p("width")]}function Se(Q,re){re=Ba(re)?pe():re;var de=Q!==!0&&S(re)<S(Pe(!1)),be=Q!==!1&&S(re)>S(Pe(!0));return de||be}return{mount:v,move:j,jump:D,translate:U,shift:ie,cancel:X,toIndex:q,toPosition:ne,getPosition:pe,getLimit:Pe,exceededLimit:Se,reposition:$}}function zg(a,r,n){var s=St(a),i=s.on,u=s.emit,l=r.Move,h=l.getPosition,b=l.getLimit,m=l.toPosition,y=r.Slides,T=y.isEnough,_=y.getLength,A=n.omitEnd,p=a.is(ca),S=a.is(ia),P=pt(pe,!1),I=pt(pe,!0),R=n.start||0,x,v=R,$,j,D;function U(){te(),i([Yt,It,Ui],te),i(Hi,ie)}function te(){$=_(!0),j=n.perMove,D=n.perPage,x=ge();var ue=Gr(R,0,A?x:$-1);ue!==R&&(R=ue,l.reposition())}function ie(){x!==ge()&&u(Ui)}function X(ue,Re,Ke){if(!Ce()){var M=ne(ue),Ve=Pe(M);Ve>-1&&(Re||Ve!==R)&&(de(Ve),l.move(M,Ve,v,Ke))}}function q(ue,Re,Ke,M){r.Scroll.scroll(ue,Re,Ke,function(){var Ve=Pe(l.toIndex(h()));de(A?br(Ve,x):Ve),M&&M()})}function ne(ue){var Re=R;if(yr(ue)){var Ke=ue.match(/([+\-<>])(\d+)?/)||[],M=Ke[1],Ve=Ke[2];M==="+"||M==="-"?Re=he(R+ +(""+M+(+Ve||1)),R):M===">"?Re=Ve?Se(+Ve):P(!0):M==="<"&&(Re=I(!0))}else Re=p?ue:Gr(ue,0,x);return Re}function pe(ue,Re){var Ke=j||(Ie()?1:D),M=he(R+Ke*(ue?-1:1),R,!(j||Ie()));return M===-1&&S&&!bf(h(),b(!ue),1)?ue?0:x:Re?M:Pe(M)}function he(ue,Re,Ke){if(T()||Ie()){var M=Te(ue);M!==ue&&(Re=ue,ue=M,Ke=!1),ue<0||ue>x?!j&&(Si(0,ue,Re,!0)||Si(x,Re,ue,!0))?ue=Se(Q(ue)):p?ue=Ke?ue<0?-($%D||D):$:ue:n.rewind?ue=ue<0?x:0:ue=-1:Ke&&ue!==Re&&(ue=Se(Q(Re)+(ue<Re?-1:1)))}else ue=-1;return ue}function Te(ue){if(S&&n.trimSpace==="move"&&ue!==R)for(var Re=h();Re===m(ue,!0)&&Si(ue,0,a.length-1,!n.rewind);)ue<R?--ue:++ue;return ue}function Pe(ue){return p?(ue+$)%$||0:ue}function ge(){for(var ue=$-(Ie()||p&&j?1:D);A&&ue-- >0;)if(m($-1,!0)!==m(ue,!0)){ue++;break}return Gr(ue,0,$-1)}function Se(ue){return Gr(Ie()?ue:D*ue,0,x)}function Q(ue){return Ie()?br(ue,x):Ii((ue>=x?$-1:ue)/D)}function re(ue){var Re=l.toIndex(ue);return S?Gr(Re,0,x):Re}function de(ue){ue!==R&&(v=R,R=ue)}function be(ue){return ue?v:R}function Ie(){return!Ba(n.focus)||n.isNavigation}function Ce(){return a.state.is([ua,Fa])&&!!n.waitForTransition}return{mount:U,go:X,scroll:q,getNext:P,getPrev:I,getAdjacent:pe,getEnd:ge,setIndex:de,getIndex:be,toIndex:Se,toPage:Q,toDest:re,hasFocus:Ie,isBusy:Ce}}var qg="http://www.w3.org/2000/svg",Yg="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",mi=40;function Xg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.emit,h=n.classes,b=n.i18n,m=r.Elements,y=r.Controller,T=m.arrows,_=m.track,A=T,p=m.prev,S=m.next,P,I,R={};function x(){$(),i(Yt,v)}function v(){j(),x()}function $(){var q=n.arrows;q&&!(p&&S)&&te(),p&&S&&(Ia(R,{prev:p,next:S}),$a(A,q?"":"none"),qn(A,I=Js+"--"+n.direction),q&&(D(),X(),et([p,S],ja,_.id),l(hs,p,S)))}function j(){s.destroy(),ar(A,I),P?(Mr(T?[p,S]:A),p=S=null):Yn([p,S],Qs)}function D(){i([Er,Ir,It,Nr,Ui],X),u(S,"click",pt(U,">")),u(p,"click",pt(U,"<"))}function U(q){y.go(q,!0)}function te(){A=T||Xr("div",h.arrows),p=ie(!0),S=ie(!1),P=!0,Va(A,[p,S]),!T&&Hs(A,_)}function ie(q){var ne='<button class="'+h.arrow+" "+(q?h.prev:h.next)+'" type="button"><svg xmlns="'+qg+'" viewBox="0 0 '+mi+" "+mi+'" width="'+mi+'" height="'+mi+'" focusable="false"><path d="'+(n.arrowPath||Yg)+'" />';return _f(ne)}function X(){if(p&&S){var q=a.index,ne=y.getPrev(),pe=y.getNext(),he=ne>-1&&q<ne?b.last:b.prev,Te=pe>-1&&q>pe?b.first:b.next;p.disabled=ne<0,S.disabled=pe<0,et(p,On,he),et(S,On,Te),l(ms,p,S,ne,pe)}}return{arrows:R,mount:x,destroy:j,update:X}}var Zg=js+"-interval";function Qg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.emit,h=ji(n.interval,a.go.bind(a,">"),D),b=h.isPaused,m=r.Elements,y=r.Elements,T=y.root,_=y.toggle,A=n.autoplay,p,S,P=A==="pause";function I(){A&&(R(),_&&et(_,ja,m.track.id),P||x(),j())}function R(){n.pauseOnHover&&u(T,"mouseenter mouseleave",function(te){p=te.type==="mouseenter",$()}),n.pauseOnFocus&&u(T,"focusin focusout",function(te){S=te.type==="focusin",$()}),_&&u(_,"click",function(){P?x():v(!0)}),i([Xn,Gi,It],h.rewind),i(Xn,U)}function x(){b()&&r.Slides.isEnough()&&(h.start(!n.resetProgress),S=p=P=!1,j(),l(qs))}function v(te){te===void 0&&(te=!0),P=!!te,j(),b()||(h.pause(),l(Ys))}function $(){P||(p||S?v(!1):x())}function j(){_&&(rr(_,$r,!P),et(_,On,n.i18n[P?"play":"pause"]))}function D(te){var ie=m.bar;ie&&Ln(ie,"width",te*100+"%"),l(ys,te)}function U(te){var ie=r.Slides.getAt(te);h.set(ie&&+Fn(ie.slide,Zg)||n.interval)}return{mount:I,destroy:h.cancel,play:x,pause:v,isPaused:b}}function Jg(a,r,n){var s=St(a),i=s.on;function u(){n.cover&&(i(Li,pt(h,!0)),i([Er,Yt,It],pt(l,!0)))}function l(b){r.Slides.forEach(function(m){var y=Ha(m.container||m.slide,"img");y&&y.src&&h(b,y,m)})}function h(b,m,y){y.style("background",b?'center/cover no-repeat url("'+m.src+'")':"",!0),$a(m,b?"none":"")}return{mount:u,destroy:pt(l,!1)}}var eh=10,th=600,nh=.6,rh=1.5,ah=800;function ih(a,r,n){var s=St(a),i=s.on,u=s.emit,l=a.state.set,h=r.Move,b=h.getPosition,m=h.getLimit,y=h.exceededLimit,T=h.translate,_=a.is(ia),A,p,S=1;function P(){i(Xn,v),i([Yt,It],$)}function I(D,U,te,ie,X){var q=b();if(v(),te&&(!_||!y())){var ne=r.Layout.sliderSize(),pe=cs(D)*ne*Ii(rn(D)/ne)||0;D=h.toPosition(r.Controller.toDest(D%ne))+pe}var he=bf(q,D,1);S=1,U=he?0:U||Mi(rn(D-q)/rh,ah),p=ie,A=ji(U,R,pt(x,q,D,X),1),l(Fa),u(Gi),A.start()}function R(){l(ra),p&&p(),u(Nr)}function x(D,U,te,ie){var X=b(),q=D+(U-D)*j(ie),ne=(q-X)*S;T(X+ne),_&&!te&&y()&&(S*=nh,rn(ne)<eh&&I(m(y(!0)),th,!1,p,!0))}function v(){A&&A.cancel()}function $(){A&&!A.isPaused()&&(v(),R())}function j(D){var U=n.easingFunc;return U?U(D):1-Math.pow(1-D,4)}return{mount:P,destroy:v,scroll:I,cancel:$}}var jr={passive:!1,capture:!0};function oh(a,r,n){var s=St(a),i=s.on,u=s.emit,l=s.bind,h=s.unbind,b=a.state,m=r.Move,y=r.Scroll,T=r.Controller,_=r.Elements.track,A=r.Media.reduce,p=r.Direction,S=p.resolve,P=p.orient,I=m.getPosition,R=m.exceededLimit,x,v,$,j,D,U=!1,te,ie,X;function q(){l(_,Fo,ss,jr),l(_,Bo,ss,jr),l(_,Ff,pe,jr),l(_,"click",Pe,{capture:!0}),l(_,"dragstart",tr),i([Er,Yt],ne)}function ne(){var ye=n.drag;ke(!ye),j=ye==="free"}function pe(ye){if(te=!1,!ie){var $e=Ve(ye);M(ye.target)&&($e||!ye.button)&&(T.isBusy()?tr(ye,!0):(X=$e?_:window,D=b.is([ua,Fa]),$=null,l(X,Fo,he,jr),l(X,Bo,Te,jr),m.cancel(),y.cancel(),ge(ye)))}}function he(ye){if(b.is(wi)||(b.set(wi),u(Ef)),ye.cancelable)if(D){m.translate(x+Ke(Ie(ye)));var $e=Ce(ye)>Al,tt=U!==(U=R());($e||tt)&&ge(ye),te=!0,u(Sf),tr(ye)}else re(ye)&&(D=Q(ye),tr(ye))}function Te(ye){b.is(wi)&&(b.set(ra),u(Af)),D&&(Se(ye),tr(ye)),h(X,Fo,he),h(X,Bo,Te),D=!1}function Pe(ye){!ie&&te&&tr(ye,!0)}function ge(ye){$=v,v=ye,x=I()}function Se(ye){var $e=de(ye),tt=be($e),vt=n.rewind&&n.rewindByDrag;A(!1),j?T.scroll(tt,0,n.snap):a.is(Wa)?T.go(P(cs($e))<0?vt?"<":"-":vt?">":"+"):a.is(ia)&&U&&vt?T.go(R(!0)?">":"<"):T.go(T.toDest(tt),!0),A(!0)}function Q(ye){var $e=n.dragMinThreshold,tt=ka($e),vt=tt&&$e.mouse||0,yt=(tt?$e.touch:+$e)||10;return rn(Ie(ye))>(Ve(ye)?yt:vt)}function re(ye){return rn(Ie(ye))>rn(Ie(ye,!0))}function de(ye){if(a.is(ca)||!U){var $e=Ce(ye);if($e&&$e<Al)return Ie(ye)/$e}return 0}function be(ye){return I()+cs(ye)*br(rn(ye)*(n.flickPower||600),j?1/0:r.Layout.listSize()*(n.flickMaxPages||1))}function Ie(ye,$e){return Re(ye,$e)-Re(ue(ye),$e)}function Ce(ye){return us(ye)-us(ue(ye))}function ue(ye){return v===ye&&$||v}function Re(ye,$e){return(Ve(ye)?ye.changedTouches[0]:ye)["page"+S($e?"Y":"X")]}function Ke(ye){return ye/(U&&a.is(ia)?Fg:1)}function M(ye){var $e=n.noDrag;return!Ca(ye,"."+If+", ."+Zi)&&(!$e||!Ca(ye,$e))}function Ve(ye){return typeof TouchEvent<"u"&&ye instanceof TouchEvent}function ct(){return D}function ke(ye){ie=ye}return{mount:q,disable:ke,isDragging:ct}}var sh={Spacebar:" ",Right:qi,Left:zi,Up:xf,Down:Pf};function eu(a){return a=yr(a)?a:a.key,sh[a]||a}var Tl="keydown";function uh(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.unbind,h=a.root,b=r.Direction.resolve,m,y;function T(){_(),i(Yt,A),i(Yt,_),i(Xn,S)}function _(){var I=n.keyboard;I&&(m=I==="global"?window:h,u(m,Tl,P))}function A(){l(m,Tl)}function p(I){y=I}function S(){var I=y;y=!0,vf(function(){y=I})}function P(I){if(!y){var R=eu(I);R===b(zi)?a.go("<"):R===b(qi)&&a.go(">")}}return{mount:T,destroy:A,disable:p}}var xa=js+"-lazy",Ai=xa+"-srcset",ch="["+xa+"], ["+Ai+"]";function lh(a,r,n){var s=St(a),i=s.on,u=s.off,l=s.bind,h=s.emit,b=n.lazyLoad==="sequential",m=[Ir,Nr],y=[];function T(){n.lazyLoad&&(_(),i(It,_))}function _(){or(y),A(),b?I():(u(m),i(m,p),p())}function A(){r.Slides.forEach(function(R){Gs(R.slide,ch).forEach(function(x){var v=Fn(x,xa),$=Fn(x,Ai);if(v!==x.src||$!==x.srcset){var j=n.classes.spinner,D=x.parentElement,U=Ha(D,"."+j)||Xr("span",j,D);y.push([x,R,U]),x.src||$a(x,"none")}})})}function p(){y=y.filter(function(R){var x=n.perPage*((n.preloadPages||1)+1)-1;return R[1].isWithin(a.index,x)?S(R):!0}),y.length||u(m)}function S(R){var x=R[0];qn(R[1].slide,ws),l(x,"load error",pt(P,R)),et(x,"src",Fn(x,xa)),et(x,"srcset",Fn(x,Ai)),Yn(x,xa),Yn(x,Ai)}function P(R,x){var v=R[0],$=R[1];ar($.slide,ws),x.type!=="error"&&(Mr(R[2]),$a(v,""),h(Li,v,$),h(aa)),b&&I()}function I(){y.length&&S(y.shift())}return{mount:T,destroy:pt(or,y),check:p}}function fh(a,r,n){var s=St(a),i=s.on,u=s.emit,l=s.bind,h=r.Slides,b=r.Elements,m=r.Controller,y=m.hasFocus,T=m.getIndex,_=m.go,A=r.Direction.resolve,p=b.pagination,S=[],P,I;function R(){x(),i([Yt,It,Ui],R);var ie=n.pagination;p&&$a(p,ie?"":"none"),ie&&(i([Xn,Gi,Nr],te),v(),te(),u(ps,{list:P,items:S},U(a.index)))}function x(){P&&(Mr(p?wr(P.children):P),ar(P,I),or(S),P=null),s.destroy()}function v(){var ie=a.length,X=n.classes,q=n.i18n,ne=n.perPage,pe=y()?m.getEnd()+1:Na(ie/ne);P=p||Xr("ul",X.pagination,b.track.parentElement),qn(P,I=Qi+"--"+D()),et(P,ir,"tablist"),et(P,On,q.select),et(P,Zs,D()===Yi?"vertical":"");for(var he=0;he<pe;he++){var Te=Xr("li",null,P),Pe=Xr("button",{class:X.page,type:"button"},Te),ge=h.getIn(he).map(function(Q){return Q.slide.id}),Se=!y()&&ne>1?q.pageX:q.slideX;l(Pe,"click",pt($,he)),n.paginationKeyboard&&l(Pe,"keydown",pt(j,he)),et(Te,ir,"presentation"),et(Pe,ir,"tab"),et(Pe,ja,ge.join(" ")),et(Pe,On,ls(Se,he+1)),et(Pe,Zr,-1),S.push({li:Te,button:Pe,page:he})}}function $(ie){_(">"+ie,!0)}function j(ie,X){var q=S.length,ne=eu(X),pe=D(),he=-1;ne===A(qi,!1,pe)?he=++ie%q:ne===A(zi,!1,pe)?he=(--ie+q)%q:ne==="Home"?he=0:ne==="End"&&(he=q-1);var Te=S[he];Te&&(pf(Te.button),_(">"+he),tr(X,!0))}function D(){return n.paginationDirection||n.direction}function U(ie){return S[m.toPage(ie)]}function te(){var ie=U(T(!0)),X=U(T());if(ie){var q=ie.button;ar(q,$r),Yn(q,yl),et(q,Zr,-1)}if(X){var ne=X.button;qn(ne,$r),et(ne,yl,!0),et(ne,Zr,"")}u(_s,{list:P,items:S},ie,X)}return{items:S,mount:R,destroy:x,getAt:U,update:te}}var dh=[" ","Enter"];function vh(a,r,n){var s=n.isNavigation,i=n.slideFocus,u=[];function l(){a.splides.forEach(function(p){p.isParent||(m(a,p.splide),m(p.splide,a))}),s&&y()}function h(){u.forEach(function(p){p.destroy()}),or(u)}function b(){h(),l()}function m(p,S){var P=St(p);P.on(Xn,function(I,R,x){S.go(S.is(ca)?x:I)}),u.push(P)}function y(){var p=St(a),S=p.on;S($i,_),S(Tf,A),S([Er,Yt],T),u.push(p),p.emit(Ni,a.splides)}function T(){et(r.Elements.list,Zs,n.direction===Yi?"vertical":"")}function _(p){a.go(p.index)}function A(p,S){Vs(dh,eu(S))&&(_(p),tr(S))}return{setup:pt(r.Media.set,{slideFocus:Ba(i)?s:i},!0),mount:l,destroy:h,remount:b}}function gh(a,r,n){var s=St(a),i=s.bind,u=0;function l(){n.wheel&&i(r.Elements.track,"wheel",h,jr)}function h(m){if(m.cancelable){var y=m.deltaY,T=y<0,_=us(m),A=n.wheelMinThreshold||0,p=n.wheelSleep||0;rn(y)>A&&_-u>p&&(a.go(T?"<":">"),u=_),b(T)&&tr(m)}}function b(m){return!n.releaseWheel||a.state.is(ua)||r.Controller.getAdjacent(m)!==-1}return{mount:l}}var hh=90;function mh(a,r,n){var s=St(a),i=s.on,u=r.Elements.track,l=n.live&&!n.isNavigation,h=Xr("span",Ig),b=ji(hh,pt(y,!1));function m(){l&&(_(!r.Autoplay.isPaused()),et(u,El,!0),h.textContent="â¦",i(qs,pt(_,!0)),i(Ys,pt(_,!1)),i([Ir,Nr],pt(y,!0)))}function y(A){et(u,wl,A),A?(Va(u,h),b.start()):(Mr(h),b.cancel())}function T(){Yn(u,[bl,El,wl]),Mr(h)}function _(A){l&&et(u,bl,A?"off":"polite")}return{mount:m,disable:_,destroy:T}}var ph=Object.freeze({__proto__:null,Media:Tg,Direction:Rg,Elements:Bg,Slides:Vg,Layout:Hg,Clones:jg,Move:Wg,Controller:zg,Arrows:Xg,Autoplay:Qg,Cover:Jg,Scroll:ih,Drag:oh,Keyboard:uh,LazyLoad:lh,Pagination:fh,Sync:vh,Wheel:gh,Live:mh}),_h={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},yh={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Lg,i18n:_h,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function bh(a,r,n){var s=r.Slides;function i(){St(a).on([Er,It],u)}function u(){s.forEach(function(h){h.style("transform","translateX(-"+100*h.index+"%)")})}function l(h,b){s.style("transition","opacity "+n.speed+"ms "+n.easing),vf(b)}return{mount:i,start:l,cancel:ss}}function wh(a,r,n){var s=r.Move,i=r.Controller,u=r.Scroll,l=r.Elements.list,h=pt(Ln,l,"transition"),b;function m(){St(a).bind(l,"transitionend",function(A){A.target===l&&b&&(T(),b())})}function y(A,p){var S=s.toPosition(A,!0),P=s.getPosition(),I=_(A);rn(S-P)>=1&&I>=1?n.useScroll?u.scroll(S,I,!1,p):(h("transform "+I+"ms "+n.easing),s.translate(S,!0),b=p):(s.jump(A),p())}function T(){h(""),u.cancel()}function _(A){var p=n.rewindSpeed;if(a.is(ia)&&p){var S=i.getIndex(!0),P=i.getEnd();if(S===0&&A>=P||S>=P&&A===0)return p}return n.speed}return{mount:m,start:y,cancel:T}}var Eh=function(){function a(n,s){this.event=St(),this.Components={},this.state=Sg(qr),this.splides=[],this._o={},this._E={};var i=yr(n)?yf(document,n):n;Ra(i,i+" is invalid."),this.root=i,s=pr({label:Fn(i,On)||"",labelledby:Fn(i,Xs)||""},yh,a.defaults,s||{});try{pr(s,JSON.parse(Fn(i,js)))}catch{Ra(!1,"Invalid JSON")}this._o=Object.create(pr({},s))}var r=a.prototype;return r.mount=function(s,i){var u=this,l=this.state,h=this.Components;Ra(l.is([qr,Ci]),"Already mounted!"),l.set(qr),this._C=h,this._T=i||this._T||(this.is(Wa)?bh:wh),this._E=s||this._E;var b=Ia({},ph,this._E,{Transition:this._T});return Cr(b,function(m,y){var T=m(u,h,u._o);h[y]=T,T.setup&&T.setup()}),Cr(h,function(m){m.mount&&m.mount()}),this.emit(Er),qn(this.root,$g),l.set(ra),this.emit(pl),this},r.sync=function(s){return this.splides.push({splide:s}),s.splides.push({splide:this,isParent:!0}),this.state.is(ra)&&(this._C.Sync.remount(),s.Components.Sync.remount()),this},r.go=function(s){return this._C.Controller.go(s),this},r.on=function(s,i){return this.event.on(s,i),this},r.off=function(s){return this.event.off(s),this},r.emit=function(s){var i;return(i=this.event).emit.apply(i,[s].concat(wr(arguments,1))),this},r.add=function(s,i){return this._C.Slides.add(s,i),this},r.remove=function(s){return this._C.Slides.remove(s),this},r.is=function(s){return this._o.type===s},r.refresh=function(){return this.emit(It),this},r.destroy=function(s){s===void 0&&(s=!0);var i=this.event,u=this.state;return u.is(qr)?St(this).on(pl,this.destroy.bind(this,s)):(Cr(this._C,function(l){l.destroy&&l.destroy(s)},!0),i.emit(zs),i.destroy(),s&&or(this.splides),u.set(Ci)),this},_g(a,[{key:"options",get:function(){return this._o},set:function(s){this._C.Media.set(s,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),a}(),tu=Eh;tu.defaults={};tu.STATES=bg;const Sh=[Er,It,aa,Hi,Ef,Sf,Af,Gi,Nr,zs,qs,Ys];function Ah(a,r){const n=(s,i={})=>{r(Th(s),{splide:a,...i})};a.on($i,(s,i)=>{n($i,{Slide:s,e:i})}),a.on(Xn,(s,i,u)=>{n(Xn,{index:s,prev:i,dest:u})}),a.on(Ir,(s,i,u)=>{n(Ir,{index:s,prev:i,dest:u})}),a.on(fs,s=>{n(fs,{Slide:s})}),a.on(ds,s=>{n(ds,{Slide:s})}),a.on(vs,s=>{n(vs,{Slide:s})}),a.on(gs,s=>{n(gs,{Slide:s})}),a.on(Yt,s=>{n(Yt,s)}),a.on(hs,(s,i)=>{n(hs,{prev:s,next:i})}),a.on(ms,(s,i)=>{n(ms,{prev:s,next:i})}),a.on(ps,(s,i)=>{n(ps,{data:s,item:i})}),a.on(_s,(s,i,u)=>{n(_s,{data:s,prev:i,curr:u})}),a.on(Ni,s=>{n(Ni,{splides:s})}),a.on(ys,s=>{n(ys,{rate:s})}),a.on(Li,(s,i)=>{n(Li,{img:s,Slide:i})}),Sh.forEach(s=>{a.on(s,()=>{n(s)})})}function Th(a){return a.split(":").map((r,n)=>n>0?r.charAt(0).toUpperCase()+r.slice(1):r).join("").replace("Lazyload","LazyLoad")}var Rh=Ae("<div><!></div>");function xh(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]),s=$t(n,["go","sync","class","options","splide","extensions","transition","hasTrack"]);at(r,!1);let i=me(r,"class",12,void 0),u=me(r,"options",28,()=>({})),l=me(r,"splide",12,void 0),h=me(r,"extensions",12,void 0),b=me(r,"transition",12,void 0),m=me(r,"hasTrack",12,!0);const y=Wd();let T=Rt(),_,A=Rt(bi({},u()));sr(()=>(l(new tu(d(T),u())),Ah(l(),y),l().mount(h(),b()),_=fl(l()),()=>l().destroy())),zd(()=>{if(l()){const v=fl(l());mg(_,v)||(l().refresh(),_=v.slice())}});function p(v){l()?.go(v)}function S(v){l()?.sync(v)}jn(()=>(Un(l()),d(A),Un(u()),bi),()=>{l()&&!os(d(A),u())&&(l(l().options=u(),!0),He(A,bi({},d(A))))}),oa(),Bt();var P=Rh();Ls(P,v=>({class:v,...s}),[()=>(Un(na),Un(i()),Wn(()=>na("splide",i())))]);var I=z(P);{var R=v=>{Dh(v,{children:($,j)=>{var D=Et(),U=ze(D);Oa(U,r,"default",{}),se($,D)},$$slots:{default:!0}})},x=v=>{var $=Et(),j=ze($);Oa(j,r,"default",{}),se(v,$)};Xe(I,v=>{m()?v(R):v(x,!1)})}return W(P),Lt(P,v=>He(T,v),()=>d(T)),se(a,P),Ye(r,"go",p),Ye(r,"sync",S),it({go:p,sync:S,get class(){return i()},set class(v){i(v),Vr()},get options(){return u()},set options(v){u(v),Vr()},get splide(){return l()},set splide(v){l(v),Vr()},get extensions(){return h()},set extensions(v){h(v),Vr()},get transition(){return b()},set transition(v){b(v),Vr()},get hasTrack(){return m()},set hasTrack(v){m(v),Vr()}})}var Ph=Ae('<div><ul class="splide__list"><!></ul></div>');function Dh(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]),s=$t(n,["class"]);at(r,!1);let i=me(r,"class",8,void 0);Bt();var u=Ph();Ls(u,b=>({class:b,...s}),[()=>(Un(na),Un(i()),Wn(()=>na("splide__track",i())))]);var l=z(u),h=z(l);Oa(h,r,"default",{}),W(l),W(u),se(a,u),it()}var Oh=Ae("<li><!></li>");function kh(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]),s=$t(n,["class"]);at(r,!1);let i=me(r,"class",8,void 0);Bt();var u=Oh();Ls(u,h=>({class:h,...s}),[()=>(Un(na),Un(i()),Wn(()=>na("splide__slide",i())))]);var l=z(u);Oa(l,r,"default",{}),W(u),se(a,u),it()}var Ch=Xt('<path d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path>');function Mh(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=Ch();se(s,u)},$$slots:{default:!0}}))}var Ih=Ae('<div class="absolute top-0 left-0 flex h-full w-full items-center justify-center"><div class="h-12 w-12 text-gray-200 opacity-70"><!></div></div>'),$h=Ae('<div><div class="relative p-1"><img/> <!></div> <div class="p-1"><div class="font-josefin justify-center text-xl"><div> </div></div></div></div>');function Nh(a,r){at(r,!0);let n=me(r,"title",7,"???"),s=me(r,"src",7,""),i=me(r,"active",7,!1),u=me(r,"locked",7,!1),l=Qe(()=>i()?"text-white":"text-gray-400"),h=Qe(()=>i()?"border-white border-2":"border-gray-700 border-2"),b=Qe(()=>i()?"brightness-125":""),m=Qe(()=>(i(),"opacity-100"));var y=$h(),T=z(y),_=z(T),A=Z(_,2);{var p=x=>{var v=Ih(),$=z(v),j=z($);Mh(j,{}),W($),W(v),se(x,v)};Xe(A,x=>{u()&&x(p)})}W(T);var S=Z(T,2),P=z(S),I=z(P),R=z(I,!0);return W(I),W(P),W(S),W(y),ut(()=>{We(_,1,`rounded border-solid ${d(h)??""} ${d(b)??""} ${d(m)??""}`),Ft(_,"src",s()),Ft(_,"alt",n()),We(I,1,`flex justify-center ${d(l)??""}`),At(R,n())}),se(a,y),it({get title(){return n()},set title(x){n(x)},get src(){return s()},set src(x){s(x)},get active(){return i()},set active(x){i(x)},get locked(){return u()},set locked(x){u(x)}})}var Lh=Ae('<div class="p-4"><!> <div class="py-2"></div></div>');function Ko(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(Ds,"$kickstarts",n);let u=me(r,"category",3,""),l=me(r,"items",19,()=>[]),h=me(r,"select",3,()=>{});const b={type:"slide",perPage:5,perMove:1,pagination:!1,gap:"1rem"};let m=Bi([]);function y(p){console.log("setActive: "+u()),m.forEach(S=>{console.log(S.title),S.active=S.title==p})}var T=Lh(),_=z(T);xh(_,{get options(){return b},$$events:{click:p=>{p&&(console.log("Carousel clicked",p,l()[p.detail.Slide.index]),h()(l()[p.detail.Slide.index]))}},children:(p,S)=>{var P=Et(),I=ze(P);ta(I,17,l,ea,(R,x,v)=>{kh(R,{children:($,j)=>{const D=Qe(()=>!i().map(U=>U.crc32).some(U=>d(x).roms.includes(U)));Lt(Nh($,{get src(){return`footage/${d(x).url??""}-small.jpg`},get title(){return d(x).title},get locked(){return d(D)}}),(U,te)=>m[te]=U,U=>m?.[U],()=>[v])},$$slots:{default:!0}})}),se(p,P)},$$slots:{default:!0}}),xs(2),W(T),xt(1,T,()=>Pt),se(a,T);var A=it({setActive:y});return s(),A}const Vo=1,Uh=313,Fh=Uh,Bh=227,Wr=313,zr=912,Kh=18,Vh=26,Rl={Escape:69,F1:80,F2:81,F3:82,F4:83,F5:84,F6:85,F7:86,F8:87,F9:88,F10:89,F11:102,F12:103,Backquote:0,Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6,Digit7:7,Digit8:8,Digit9:9,Digit0:10,Minus:11,Equal:12,Backspace:65,Tab:66,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Backslash:13,CapsLock:98,KeyA:32,KeyS:33,KeyD:34,KeyF:35,KeyG:36,KeyH:37,KeyJ:38,KeyK:39,KeyL:40,Semicolon:41,Quote:42,Enter:68,ShiftLeft:96,KeyZ:49,KeyX:50,KeyC:51,KeyV:52,KeyB:53,KeyN:54,KeyM:55,Comma:56,Period:57,Slash:58,ShiftRight:97,ControlLeft:99,AltLeft:100,MetaLeft:102,Space:64,AltRight:101,MetaRight:103,ControlRight:99,Delete:70,End:95,PageDown:69,ArrowUp:76,ArrowDown:77,ArrowRight:78,ArrowLeft:79,NumpadDivide:92,NumpadMultiply:93,NumpadSubtract:74,Numpad7:61,Numpad8:62,Numpad9:63,NumpadAdd:94,Numpad4:45,Numpad5:46,Numpad6:47,Numpad1:29,Numpad2:30,Numpad3:31,NumpadEnter:67,Numpad0:15,NumpadDecimal:60},lt={Aros:1062194186,Kick12:2798523958,Kick13:3304125791,DiagROM:2231503309},Bf=[{url:"batmanrises",title:"Batman Rises",subtitle:"The Batman Group",description:"Batman Rises is a demo released in December 2022 at the Posadas Party Autumn Edition. It quickly gained public attention and is widely regarded as one of the finest demos ever created for the Commodore Amiga.",adf:["BatmanRises1.adf","BatmanRises2.adf"],memory:[1024,512,0],roms:[lt.Aros],warp:Nt.never},{url:"stateart",title:"State of the Art",subtitle:"Spaceballs",description:"This demo was released in December 1992 and took 1st place in the Amiga Demo Competition at The Party 1992.",adf:["StateArt.adf"],memory:[512,512,0],roms:[lt.Aros],warp:Nt.never},{url:"rinkadink",title:"Rink a Dink - Redux",subtitle:"Lemon",description:"This demo was released by Lemon at Revision 2013 and has gained widespread popularity over time. We have used it extensively since the early days of vAmiga to test and validate the emulator.",adf:["RinkADink.adf"],memory:[512,512,0],roms:[lt.Aros],warp:Nt.never},{url:"desertdreams",title:"Desert Dreams",subtitle:"Kefrens",description:"This demo was released in April 1993 and won 1st place in the Amiga Demo Competition at The Gathering 1993.",adf:["DesertDream1.adf","DesertDream2.adf"],memory:[1024,512,0],roms:[lt.Aros],warp:Nt.never},{url:"inebriation",title:"Absolute Inebriation",subtitle:"Virtual Dreams & Fairlight",description:"This demo was released in December 1992 as the debut production of Virtual Dreams, a Finnish-based Amiga demo group. The group later rose to prominence during their time as the demo division of Fairlight.",adf:["AbsoluteInebriation1.adf"],memory:[512,512,0],roms:[lt.Aros],warp:Nt.never},{url:"eon",title:"Eon",subtitle:"The Black Lotus",description:"This demo is widely regarded as one of the finest ever created for the Commodore Amiga. It showcases the machineâs full potential through masterful use of its hardware capabilities.",adf:["Eon1.adf"],memory:[512,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"3ddemo",title:"3D Demo II",subtitle:"Anarchy",description:"This demo was released in December 1992 and placed 2nd in the Amiga Demo Competition at The Party 1992.",adf:["3Ddemo2.adf"],memory:[1024,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"hamazing",title:"HAMazing",subtitle:"Desire",description:"This demo won the 16-bit demo competition at SIGGRAPH Asia 2023 and was nominated for Outstanding Technical Achievement at The Meteoriks 2024. It showcases the impressive HAM (Hold-And-Modify) graphics capabilities of the Amiga.",adf:["Hamazing.adf"],memory:[1024,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"sushiboyz",title:"Sushi Boyz",subtitle:"Ghostown",description:"This demo was released in April 2015 and won 1st place in the Amiga Demo Competition at Revision 2015.",adf:["Sushiboyz.adf"],memory:[1024,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"kyrios",title:"Mental Scrollover",subtitle:"Kyrios",description:"This demo was released in August 1990. Iâve used it many times to test vAmiga and have grown fond of it over time.",adf:["Kyrios.adf"],memory:[1024,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never}],Hh=[{url:"traprunner",title:"Trap Runner",subtitle:"Night Owl Design",description:"Trap Runner is a classic platform game with a few clever twists. Navigate mind traps, dodge obstacles, and battle monsters as you collect items to boost your score, gain extra lives, or complete special missions. The game runs on any OCS/ECS Amiga with at least 1MB of RAM, starting from Kickstart 1.2.",adf:["TrapRunner.adf"],memory:[512,512,8192],roms:[lt.Aros],warp:Nt.never},{url:"celtic",title:"Celtic Heart",subtitle:"Night Owl Design",description:"This game was developed in early 2019, largely built on the Trap Runner engine. Set in a medieval world, you play as the Celtic knight Eric on a quest to save the kingdom from an evil force.",adf:["CelticHeart.adf"],memory:[512,512,8192],roms:[lt.Aros],warp:Nt.never},{url:"paccer",title:"Paccer",subtitle:"Dirk W. Hoffmann",description:"This game is a Pac-Man clone originally released on Fish Disk 223. I developed it myself many years ago on my Amiga 500 using the Aztec C compiler and DPaint. Unfortunately, I lost the source code when my parents cleaned out their attic, but fortunately, the game has survived and is still available on the Internet.",adf:["Paccer.adf"],memory:[512,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"china",title:"China Challenge II",subtitle:"Dirk W. Hoffmann",description:"This game is a Mahjong clone that I developed myself many years ago. The original version was released on Fish Disk 312, and this slightly improved sequel was later published on Fish Disk 444.",adf:["ChinaChallengeII.adf"],memory:[512,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"defender",title:"Defender of the Crown",subtitle:"Cinemaware",description:"Defender of the Crown is a strategy game designed by Kellyn Beck and was Cinemawareâs very first release. Originally launched for the Commodore Amiga in 1986, it set a new benchmark for graphic quality in home computer games.",adf:["DefenderOfTheCrown1.adf","DefenderOfTheCrown2.adf"],memory:[512,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never}],Gh=[{url:"sysinfo",title:"Sysinfo 4.4",subtitle:"Nic Wilson, Tobias Geijersson",description:"Sysinfo is a shareware program written entirely in Assembly for Motorola 68k-equipped Amiga computers to benchmark system performance. It displays the version of system software in ROM, the hardware present, and the current operating mode of the hardware.",adf:["SysInfo.adf"],memory:[1024,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"testkit",title:"Amiga Test Kit",subtitle:"Keir Fraser",description:"The Amiga Test Kit is a software-based tool designed to test and diagnose various components of a Commodore Amiga.",adf:["AmigaTestKit.adf"],memory:[512,512,0],roms:[lt.Kick12,lt.Kick13],warp:Nt.never},{url:"diagrom",title:"Amiga DiagROM",subtitle:"John Hertell",description:"The Amiga Diagnostic ROM is a hardware-based testing solution for Amiga computers. Installed as a replacement for the Kickstart ROM on the motherboard, it boots the system into a diagnostic menu upon power-up. The ROM provides a range of test routines to check various hardware components.",adf:[],memory:[512,512,0],roms:[lt.DiagROM],warp:Nt.never}];function jh(a,r){r(!1)}async function xl(a,r,n){r().runShowcase(n.selected)}var Wh=Ae('<div class="text-error font-josefin">Please install Kickstart 1.2 or Kickstart 1.3 to unlock this title.</div> <div class="mt-4 relative"><button class="btn btn-disabled bg-gray-500 text-white opacity-20">Start</button></div>',1),zh=Ae('<div class="mt-4 relative"><button class="btn btn-primary">Start</button></div>'),qh=Ae('<div><div class="absolute top-0 left-0 px-0 py-0 w-full h-full"><img class="w-full h-full object-cover brightness-90 blur-[2px]" alt="Bg"/></div> <div class="absolute top-0 left-0 px-0 py-0 w-full h-full"><img class="w-full h-full object-cover brightness-90 blur-[2px]" src="footage/blank-large.png" alt="Alt"/></div> <div class="relative border-0"><div class="absolute top-0 right-0"><button class="btn btn-sm btn-square flex p-0 border-2 border-white"><!></button></div> <div><div class="font-sofia-extra text-8xl"> </div> <div class="flex pb-10 items-center"><div class="text-xs p-0.5 mr-2 border-2 h-fit rounded-md font-azaret">PAL</div> <div class="font-sofia-semi text-2xl flex"> </div></div> <div class="flex font-josefin text-lg w-2/3 pb-5"> </div></div> <!></div></div>');function Yh(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(Ds,"$kickstarts",n),u=()=>k(Qr,"$proxy",n);let l=me(r,"show",15,!0),h=Qe(()=>"footage/"+(r.selected?.url??"")+"-large.jpg"),b=Qe(()=>i().map(A=>A.crc32).some(A=>r.selected?.roms.includes(A))),m=Qe(()=>!d(b));var y=Et(),T=ze(y);{var _=A=>{var p=qh(),S=z(p),P=z(S);W(S);var I=Z(S,4),R=z(I),x=z(R);x.__click=[jh,l];var v=z(x);ff(v,{}),W(x),W(R);var $=Z(R,2),j=z($),D=z(j,!0);W(j);var U=Z(j,2),te=Z(z(U),2),ie=z(te,!0);W(te),W(U);var X=Z(U,2),q=z(X,!0);W(X),W($);var ne=Z($,2);{var pe=Te=>{var Pe=Wh(),ge=Z(ze(Pe),2),Se=z(ge);Se.__click=[xl,u,r],W(ge),se(Te,Pe)},he=Te=>{var Pe=zh(),ge=z(Pe);ge.__click=[xl,u,r],W(Pe),se(Te,Pe)};Xe(ne,Te=>{d(m)?Te(pe):Te(he,!1)})}W(I),W(p),ut(()=>{Ft(P,"src",d(h)),At(D,r.selected.title),At(ie,r.selected.subtitle),At(q,r.selected.description)}),xt(1,p,()=>Pt),se(A,p)};Xe(T,A=>{r.selected&&A(_)})}se(a,y),it(),s()}an(["click"]);var Xh=Ae('<dialog><div class="modal-box w-11/12 max-w-6xl bg-black"><!></div></dialog> <div class="grow h-full flex flex-col justify-center overflow-auto"><div class="relative h-full"><div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Demos</div> <!> <div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Games</div> <!> <div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Tools</div> <!></div></div>',1);function Zh(a){let r=Rt(null),n=Rt(!1),s=Rt(),i=Rt(),u=Rt();function l(R){d(s).setActive(R.title),He(r,R)}function h(R){l(R),He(n,!0)}var b=Xh(),m=ze(b);let y;var T=z(m),_=z(T);Yh(_,{get selected(){return d(r)},get show(){return d(n)},set show(R){He(n,R)},$$legacy:!0}),W(T),W(m);var A=Z(m,2),p=z(A),S=Z(z(p),2);Lt(Ko(S,{category:"Demos",get items(){return Bf},select:h,$$legacy:!0}),R=>He(s,R),()=>d(s));var P=Z(S,4);Lt(Ko(P,{category:"Games",get items(){return Hh},select:h,$$legacy:!0}),R=>He(i,R),()=>d(i));var I=Z(P,4);Lt(Ko(I,{category:"Tools",get items(){return Gh},select:h,$$legacy:!0}),R=>He(u,R),()=>d(u)),W(p),W(A),ut(R=>y=We(m,1,"modal border-0",null,y,R),[()=>({"modal-open":d(n)})],_e),xt(1,A,()=>Pt),se(a,b)}var Qh=Ae('<div><div class="flex justify-center rounded"><img class="mt-3 h-24 p-2" src="va-icon.png" alt="vAmiga Icon"/> <div class="p-6 text-white"><div class="flex"><div class="font-sofia-extra mr-2 text-7xl">vAmiga<span class="opacity-75">.net</span></div></div> <div class="font-sofia-semi pb-10 pl-2 text-xl">Version 2.0 beta 2 (250723)</div> <div class="flex space-x-5"><div class="tooltip tooltip-primary" data-tip="Power On"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div> <div class="tooltip tooltip-primary" data-tip="Run Demo"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div> <div class="tooltip tooltip-primary" data-tip="Visit GitHub"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div></div></div></div></div>'),Jh=Ae("<div><!></div>"),em=Ae('<div class="p-1.5"><!></div>'),tm=Ae("<div>Kickstart</div>"),nm=Ae("<div><!></div>"),rm=Ae("<div>Showcases</div>"),am=Ae("<div><!></div>"),im=Ae("<div>Impressum</div>"),om=Ae('<div><div class="modal-box h-2/3 w-2/3 max-w-none"><!></div></div> <div><div class="modal-box"><!></div></div> <div><div><div class="absolute h-full"><div class="h-full w-screen bg-gradient-to-t from-indigo-400 to-indigo-800"></div></div> <div class="absolute h-full blur-xs"><img class="h-full w-screen object-fill opacity-60" src="matrix.jpg" alt="Background"/></div></div> <!> <div><!> <!> <!></div></div>',1);function sm(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Ut,"$layer",n),u=()=>k(Jr,"$audio",n),l=()=>k(kn,"$amiga",n),h=()=>k(Qr,"$proxy",n),b=()=>k(sa,"$poweredOn",n);let m="",y=Rt(!1),T=Rt(!1);sr(()=>{console.log("TitleScreen::onMount()"),new Image().src="footage/3ddemo-small.jpg",new Image().src="footage/batmanrises-small.jpg",new Image().src="footage/celtic-small.jpg",new Image().src="footage/china-small.jpg",new Image().src="footage/defender-small.jpg",new Image().src="footage/desertdreams-small.jpg",new Image().src="footage/diagrom-small.jpg",new Image().src="footage/eon-small.jpg",new Image().src="footage/inebriation-small.jpg",new Image().src="footage/kyrios-small.jpg",new Image().src="footage/paccer-small.jpg",new Image().src="footage/rinkadink-small.jpg",new Image().src="footage/sdi-small.jpg",new Image().src="footage/stateart-small.jpg",new Image().src="footage/sysinfo-small.jpg",new Image().src="footage/testkit-small.jpg",new Image().src="footage/traprunner-small.jpg"});async function _(){await u().setup(),l().run()}async function A(){await u().setup(),h().runShowcase(Bf[0])}function p(){window.location.href="https://github.com/dirkwhoffmann/vAmigaNet"}async function S(){console.log("openShowcases"),await u().setup(),le(Ut,i()===ft.showcases?ft.none:ft.showcases),le(Ki,!1)}async function P(){await u().setup(),He(y,!0)}function I(){He(T,!0)}jn(()=>(i(),ft),()=>{i()===ft.kickstart&&He(y,!0)}),oa(),Bt();var R=Et(),x=ze(R);{var v=$=>{var j=om(),D=ze(j);let U;var te=z(D),ie=z(te);gg(ie,{get show(){return d(y)},set show(Ie){He(y,Ie)},$$legacy:!0}),W(te),W(D);var X=Z(D,2);let q;var ne=z(X),pe=z(ne);Zv(pe,{get show(){return d(T)},set show(Ie){He(T,Ie)},$$legacy:!0}),W(ne),W(X);var he=Z(X,2);We(he,1,"flex h-full flex-col ");var Te=z(he),Pe=Z(Te,2);{var ge=Ie=>{Zh(Ie)},Se=Ie=>{var Ce=Jh();We(Ce,1,"relative flex grow flex-col items-center justify-center bg-transparent ");var ue=z(Ce);{var Re=Ke=>{var M=Qh();We(M,1,_r(m));var Ve=z(M),ct=Z(z(Ve),2),ke=Z(z(ct),4),ye=z(ke),$e=z(ye),tt=z($e);jv(tt,{}),W($e),W(ye);var vt=Z(ye,2),yt=z(vt),ve=z(yt);Hv(ve,{}),W(yt),W(vt);var fe=Z(vt,2),bt=z(fe),wt=z(bt);Fv(wt,{}),W(bt),W(fe),W(ke),W(ct),W(Ve),W(M),En("click",$e,_),En("click",yt,A),En("click",bt,p),se(Ke,M)};Xe(ue,Ke=>{i(),Un(ft),Wn(()=>i()===ft.none)&&Ke(Re)})}W(Ce),xt(1,Ce,()=>Pt),se(Ie,Ce)};Xe(Pe,Ie=>{i(),Un(ft),Wn(()=>i()===ft.showcases)?Ie(ge):Ie(Se,!1)})}var Q=Z(Pe,2);We(Q,1,"relative flex justify-center space-x-8 bg-gray-900/50 align-middle ");var re=z(Q);No(re,{onclick:P,icon:ue=>{var Re=em(),Ke=z(Re);Kv(Ke,{}),W(Re),se(ue,Re)},description:ue=>{var Re=tm();se(ue,Re)},$$slots:{icon:!0,description:!0}});var de=Z(re,2);No(de,{onclick:S,icon:ue=>{var Re=nm(),Ke=z(Re);Lv(Ke,{}),W(Re),se(ue,Re)},description:ue=>{var Re=rm();se(ue,Re)},$$slots:{icon:!0,description:!0}});var be=Z(de,2);No(be,{onclick:I,icon:ue=>{var Re=am(),Ke=z(Re);zv(Ke,{}),W(Re),se(ue,Re)},description:ue=>{var Re=im();se(ue,Re)},$$slots:{icon:!0,description:!0}}),W(Q),W(he),ut((Ie,Ce)=>{U=We(D,1,"modal",null,U,Ie),q=We(X,1,"modal",null,q,Ce)},[()=>({"modal-open":d(y)}),()=>({"modal-open":d(T)})],_e),xt(1,Te,()=>Pt,()=>({duration:2e3})),xt(3,he,()=>Pt),se($,j)};Xe(x,$=>{b()||$(v)})}se(a,R),it(),s()}class Yr{current=0;target=0;deltaStep=.005;constructor(r=0){this.current=r,this.target=r}animates(){return this.current!=this.target}clamped(){return this.current<0?0:this.current>1?1:this.current}set(r,n=25){this.target=r,this.deltaStep=Math.abs(this.target-this.current)/n}move(){this.current+this.deltaStep<=this.target?this.current+=this.deltaStep:this.current-this.deltaStep>=this.target?this.current-=this.deltaStep:this.current=this.target}}class um{x1=new Yr(.1);y1=new Yr(.1);x2=new Yr(.9);y2=new Yr(.9);texW=Vo*zr;texH=Wr;normalize(r){return{x:r.x/this.texW,y:r.y/this.texH,w:r.w/this.texW,h:r.h/this.texH}}entire(){return{x:0,y:0,w:this.texW,h:this.texH}}entireNormalized(){return this.normalize(this.entire())}largestVisible(){const r=4*Vo*Kh,n=4*Vo*Bh,s=Vh,i=Fh;return{x:r,y:s,w:n-r,h:i-s}}largestVisibleNormalized(){return this.normalize(this.largestVisible())}visible(r,n,s,i){const u=this.largestVisible(),l=1-.2*r,h=1-.2*n,b=l*u.w,m=h*u.h,y=u.x+s*(u.w-b),T=u.y+i*(u.h-m);return{x:y,y:T,w:b,h:m}}visibleNormalized(r,n,s,i){return this.normalize(this.visible(r,n,s,i))}animates(){return this.x1.animates()||this.y1.animates()||this.x2.animates()||this.y2.animates()}zoomIn(){this.x1.set(.188),this.y1.set(.106),this.x2.set(.188+.733),this.y2.set(.106+.867)}zoomOut(){this.x1.set(0),this.y1.set(0),this.x2.set(1),this.y2.set(1)}move(){this.x1.move(),this.y1.move(),this.x2.move(),this.y2.move()}}async function cm(a,r,n,s,i){if(!r())await n();else switch(a.button){case 0:s()?.trigger(i().PRESS_LEFT);break;case 1:s()?.trigger(i().PRESS_MIDDLE);break;case 2:s()?.trigger(i().PRESS_RIGHT);break}}function lm(a,r,n){switch(a.button){case 0:r()?.trigger(n().RELEASE_LEFT);break;case 1:r()?.trigger(n().RELEASE_MIDDLE);break;case 2:r()?.trigger(n().RELEASE_RIGHT);break}}var fm=Ae('<canvas class="h-full w-full focus:ring-0 focus:outline-none" tabindex="-1"></canvas>');function dm(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(kn,"$amiga",n),u=()=>k(Ll,"$denise",n),l=()=>k(Sn,"$wasm",n),h=()=>k(en,"$config",n),b=()=>k(Ps,"$running",n),m=()=>k(_n,"$port1",n),y=()=>k(Bl,"$keyset1",n),T=()=>k(Kl,"$keyset2",n),_=()=>k(yn,"$port2",n),A=()=>k(Os,"$joystick1",n),p=()=>k(ks,"$joystick2",n),S=()=>k(Ul,"$keyboard",n),P=()=>k(Nl,"$mouse1",n),I=()=>k(Fl,"$mouse2",n),R=()=>k(Wo,"$MsgShaking",n);let x=kt(void 0),v=kt(void 0);me(r,"x1",3,0),me(r,"y1",3,0),me(r,"x2",3,0),me(r,"y2",3,0);let $=me(r,"tx1",7,0),j=me(r,"ty1",7,0),D=me(r,"tx2",7,0),U=me(r,"ty2",7,0),te=me(r,"needsDisplay",15,!1),ie=!0,X=!0,q=0,ne=()=>document.pointerLockElement===d(x),pe=!1,he=!1,Te=!1,Pe=!1,ge=0,Se,Q,re,de,be,Ie,Ce,ue,Re,Ke,M;const Ve=`
    	attribute vec4 aVertexPosition;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
			vTextureCoord = gl_Position.xy * .5 + .5;
    	}
   	`,ct=`
		precision mediump float;

		varying highp vec2 vTextureCoord;
	   	uniform sampler2D u_lfSampler;
	   	uniform sampler2D u_sfSampler;

		void main()
		{
			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));

			vec4 color;
		    if (mod(coord.y, 2.0) == 0.0) {
		        // color = vec4(1.0, 0.0, 0.0, 1.0);
				color = texture2D(u_sfSampler, vTextureCoord);
		    } else {
		        // color = vec4(1.0, 1.0, 0.0, 1.0);
				color = texture2D(u_lfSampler, vTextureCoord);
		    }

		    gl_FragColor = color;
		}
   `,ke=`
    	attribute vec4 aVertexPosition;
    	attribute vec2 aTextureCoord;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
    		vTextureCoord = aTextureCoord;
    	}
   	`,ye=`
		precision mediump float;
    
		varying highp vec2 vTextureCoord;
    	uniform sampler2D sampler;
    	uniform float u_lweight;
		uniform float u_sweight;

    	void main()
    	{
    	    float w;

			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));
		    if (mod(coord.y, 2.0) == 0.0) {
		        w = u_lweight;
		        // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * vec4(w, w, w, 1.0);
		    } else {
		        w = u_sweight;
		        // gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0) * vec4(w, w, w, 1.0);
		    }

            gl_FragColor = texture2D(sampler, vTextureCoord) * vec4(w, w, w, 1.0);
    	}
   `;function $e(){const Ne={alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1};if(!(d(x).getContext("webgl2",Ne)instanceof WebGL2RenderingContext))throw new Error("vAmiga.net needs WebGL2 to run.");He(v,d(x).getContext("webgl2",Ne),!0),d(v).disable(d(v).BLEND),d(v).disable(d(v).DEPTH_TEST),d(v).disable(d(v).SCISSOR_TEST),d(v).disable(d(v).STENCIL_TEST),d(v).clearColor(0,0,0,1),d(v).clear(d(v).COLOR_BUFFER_BIT),be=yt(Ve,ct),Re=d(v).getUniformLocation(be,"u_lfSampler"),ue=d(v).getUniformLocation(be,"u_sfSampler"),Ke=yt(ke,ye),Ie=d(v).getUniformLocation(Ke,"u_lweight"),Ce=d(v).getUniformLocation(Ke,"u_sweight"),M=d(v).getUniformLocation(Ke,"sampler"),d(v).uniform1i(M,0);const oe=new Float32Array([-1,1,1,1,-1,-1,1,-1]);bt(oe),wt(Ke,"aVertexPosition");const Ge=new Float32Array([0,1,1,1,0,0,1,0]);Se=bt(Ge),wt(Ke,"aTextureCoord"),Q=fe(zr,Wr),re=fe(zr,Wr),de=fe(zr,2*Wr)}function tt(Ne,oe,Ge,ht){const Kt=new Float32Array([Ne,oe,Ge,oe,Ne,ht,Ge,ht]);d(v).bindBuffer(d(v).ARRAY_BUFFER,Se),d(v).bufferSubData(d(v).ARRAY_BUFFER,0,Kt)}function vt(){const Ne=d(x).clientWidth,oe=d(x).clientHeight;(d(x).width!==Ne||d(x).height!==oe)&&(d(x).width=Ne,d(x).height=oe)}function yt(Ne,oe){const Ge=ve(d(v).VERTEX_SHADER,Ne),ht=ve(d(v).FRAGMENT_SHADER,oe),Kt=d(v).createProgram();if(d(v).attachShader(Kt,Ge),d(v).attachShader(Kt,ht),d(v).linkProgram(Kt),!d(v).getProgramParameter(Kt,d(v).LINK_STATUS))throw new Error(`Shader link error: ${d(v).getProgramInfoLog(Kt)}`);return d(v).useProgram(Kt),Kt}function ve(Ne,oe){const Ge=d(v).createShader(Ne);if(!Ge)throw new Error("Failed to create shader.");if(d(v).shaderSource(Ge,oe),d(v).compileShader(Ge),!d(v).getShaderParameter(Ge,d(v).COMPILE_STATUS))throw new Error(`Shader compile error: ${d(v).getShaderInfoLog(Ge)}`);return Ge}function fe(Ne,oe,Ge=0){const ht=d(v).createTexture();if(!ht)throw new Error("Failed to create texture.");const Kt=Ge==0?d(v).NEAREST:d(v).LINEAR;return d(v).bindTexture(d(v).TEXTURE_2D,ht),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_WRAP_S,d(v).CLAMP_TO_EDGE),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_WRAP_T,d(v).CLAMP_TO_EDGE),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_MIN_FILTER,Kt),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_MAG_FILTER,Kt),d(v).texImage2D(d(v).TEXTURE_2D,0,d(v).RGBA,Ne,oe,0,d(v).RGBA,d(v).UNSIGNED_BYTE,null),ht}function bt(Ne){const oe=d(v).createBuffer();return d(v).bindBuffer(d(v).ARRAY_BUFFER,oe),d(v).bufferData(d(v).ARRAY_BUFFER,Ne,d(v).STATIC_DRAW),oe}function wt(Ne,oe){const Ge=d(v).getAttribLocation(Ne,oe);d(v).enableVertexAttribArray(Ge),d(v).vertexAttribPointer(Ge,2,d(v).FLOAT,!1,0,0)}function Zt(){vt(),un(),i().wakeUp()}function un(){const Ne=zr,oe=Wr;if(i().poweredOff()){const Ge=u().noise();X=ie,ie=!X;const ht=new Uint8Array(l().HEAPU8.buffer,Ge,Ne*oe*4);ie?(d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,Q),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Ne,oe,d(v).RGBA,d(v).UNSIGNED_BYTE,ht)):(d(v).activeTexture(d(v).TEXTURE1),d(v).bindTexture(d(v).TEXTURE_2D,re),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Ne,oe,d(v).RGBA,d(v).UNSIGNED_BYTE,ht))}else{const Ge=u().getEmulatorTexture();if(X=Ge.prevLof,ie=Ge.currLof,Ge.frameNr!=q+1&&Ge.frameNr==q)return;q=Ge.frameNr;const ht=new Uint8Array(l().HEAPU8.buffer,Ge.data,Ne*oe*4);ie?(d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,Q),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Ne,oe,d(v).RGBA,d(v).UNSIGNED_BYTE,ht)):(d(v).activeTexture(d(v).TEXTURE1),d(v).bindTexture(d(v).TEXTURE_2D,re),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Ne,oe,d(v).RGBA,d(v).UNSIGNED_BYTE,ht))}te(!0)}function Mn(){te()&&(cn(),ln(),te(!1))}function cn(){ie==X?ie?(d(v).useProgram(be),d(v).uniform1i(Re,0),d(v).uniform1i(ue,0)):(d(v).useProgram(be),d(v).uniform1i(Re,1),d(v).uniform1i(ue,1)):(d(v).useProgram(be),d(v).uniform1i(Re,1),d(v).uniform1i(ue,0));const Ne=d(v).createFramebuffer();d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,Q),d(v).activeTexture(d(v).TEXTURE1),d(v).bindTexture(d(v).TEXTURE_2D,re),d(v).bindFramebuffer(d(v).FRAMEBUFFER,Ne),d(v).viewport(0,0,zr,2*Wr),d(v).framebufferTexture2D(d(v).FRAMEBUFFER,d(v).COLOR_ATTACHMENT0,d(v).TEXTURE_2D,de,0),d(v).drawArrays(d(v).TRIANGLE_STRIP,0,4)}function ln(){if(d(v).bindFramebuffer(d(v).FRAMEBUFFER,null),d(v).viewport(0,0,d(v).canvas.width,d(v).canvas.height),d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,de),d(v).useProgram(Ke),d(v).uniform1f(Ie,1),d(v).uniform1f(Ce,1),ie!=X){let Ne=h().getNum(w.FLICKER_WEIGHT);if(Ne>0&&b()){const oe=1-Ne/100;d(v).uniform1f(Ie,ge%4>=2?1:oe),d(v).uniform1f(Ce,ge%4>=2?oe:1),ge+=1}}d(v).drawArrays(d(v).TRIANGLE_STRIP,0,4)}sr(()=>{console.log("GLCanvas::onMount()"),document.addEventListener("pointerlockchange",tn,!1),$e(),tt($(),j(),D(),U())}),qd(()=>{document.removeEventListener("pointerlockchange",tn)});function jt(Ne,oe){let Ge;switch(oe==1&&m()==nn.keyset1&&(Ge=y()[Ne]),oe==1&&m()==nn.keyset2&&(Ge=T()[Ne]),oe==2&&_()==nn.keyset1&&(Ge=y()[Ne]),oe==2&&_()==nn.keyset2&&(Ge=T()[Ne]),Ge){case void 0:return[];case l().PULL_UP:return pe=!0,[l().PULL_UP];case l().PULL_DOWN:return he=!0,[l().PULL_DOWN];case l().PULL_LEFT:return Te=!0,[l().PULL_LEFT];case l().PULL_RIGHT:return Pe=!0,[l().PULL_RIGHT];case l().PRESS_FIRE:return[l().PRESS_FIRE];case l().PRESS_FIRE2:return[l().PRESS_FIRE2];case l().PRESS_FIRE3:return[l().PRESS_FIRE3]}}function Kn(Ne,oe){let Ge;switch(oe==1&&m()==nn.keyset1&&(Ge=y()[Ne]),oe==1&&m()==nn.keyset2&&(Ge=T()[Ne]),oe==2&&_()==nn.keyset1&&(Ge=y()[Ne]),oe==2&&_()==nn.keyset2&&(Ge=T()[Ne]),Ge){case void 0:return[];case l().PULL_UP:return pe=!1,he?[l().PULL_DOWN]:[l().RELEASE_Y];case l().PULL_DOWN:return he=!1,pe?[l().PULL_UP]:[l().RELEASE_Y];case l().PULL_LEFT:return Te=!1,Pe?[l().PULL_RIGHT]:[l().RELEASE_X];case l().PULL_RIGHT:return Pe=!1,Te?[l().PULL_LEFT]:[l().RELEASE_X];case l().PRESS_FIRE:return[l().RELEASE_FIRE];case l().PRESS_FIRE2:return[l().RELEASE_FIRE2];case l().PRESS_FIRE3:return[l().RELEASE_FIRE3]}}function An(Ne){if(Ne.repeat)return;let oe=jt(Ne.code,1);if(oe?.length){oe?.forEach(ht=>A().trigger(ht));return}if(oe=jt(Ne.code,2),oe?.length){oe?.forEach(ht=>p().trigger(ht));return}const Ge=Rl[Ne.code];Ge!==void 0&&(S().pressKey(Ge),Ne.preventDefault(),Ne.stopPropagation())}function Qn(Ne){let oe=Kn(Ne.code,1);if(oe?.length){oe?.forEach(ht=>A().trigger(ht));return}if(oe=Kn(Ne.code,2),oe?.length){oe?.forEach(ht=>p().trigger(ht));return}const Ge=Rl[Ne.code];Ge!==void 0&&S().releaseKey(Ge)}function tn(){document.pointerLockElement===d(x)?document.addEventListener("mousemove",Qt,!1):document.removeEventListener("mousemove",Qt)}async function fn(){ne()||await d(x).requestPointerLock()}function Tn(){ne()&&document.exitPointerLock()}function dn(){return m()==nn.mouse?P():_()==nn.mouse?I():null}function Qt(Ne){const oe=Ne.movementX/2,Ge=Ne.movementY/2;P().detectShakeRel(oe,Ge),dn()?.setDxDy(oe,Ge)}let Fe=Qe(()=>h().getNum(w.RENDER_MODE)==Da.smooth?"image-rendering: auto":"image-rendering: pixelated");xi(()=>{d(v)&&tt($(),j(),D(),U())}),xi(()=>{R()&&h().getBool(w.SHAKING)&&Tn()});var Ht=fm();Ht.__keydown=An,Ht.__keyup=Qn,Ht.__mousedown=[cm,ne,fn,dn,l],Ht.__mouseup=[lm,dn,l],Lt(Ht,Ne=>He(x,Ne),()=>d(x)),ut(()=>Ns(Ht,d(Fe))),se(a,Ht);var In=it({update:Zt,render:Mn,get tx1(){return $()},set tx1(Ne){$(Ne)},get tx2(){return D()},set tx2(Ne){D(Ne)},get ty1(){return j()},set ty1(Ne){j(Ne)},get ty2(){return U()},set ty2(Ne){U(Ne)},get needsDisplay(){return te()},set needsDisplay(Ne){te(Ne)}});return s(),In}an(["keydown","keyup","mousedown","mouseup"]);var vm=Ae('<div class="relative flex h-full grow flex-col justify-center"><div class="flex h-full items-center justify-center"><div><!></div></div></div>');function gm(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(zo,"$canvasWidth",n),u=()=>k(qo,"$canvasHeight",n),l=()=>k(pi,"$aspectWidth",n),h=()=>k(_i,"$aspectHeight",n),b=()=>k(kn,"$amiga",n),m=()=>k(Sn,"$wasm",n),y=()=>k(sa,"$poweredOn",n),T=()=>k(Yo,"$gamepadManager",n),_=()=>k(Ta,"$layout",n),A=()=>k(en,"$config",n);let p=kt(void 0),S=kt(0),P=kt(0),I=kt(0),R=kt(0),x=kt(0),v=kt(0),$=kt(0),j=kt(0),D=me(r,"textureRect",23,()=>new um),U=new Yr(0),te=new Yr(0),ie=kt(0),X=kt(0);sr(()=>{console.log("Emulator::onMount()"),D().zoomIn()});function q(Q){if(Q=="full")U.set(i()),te.set(u());else if(Q=="aspect")U.set(l()),te.set(h());else if(Q=="fit"){const re=D().x1.current*D().texW,de=D().y1.current*D().texH,be=D().x2.current*D().texW,Ie=D().y2.current*D().texH;U.set(be-re+2),te.set(2*(Ie-de+2))}}function ne(Q,re){const de=[];for(b().lockMsgQueue();;){let be=b().readMessage();if(be.type==m().Msg.NONE)break;de.push(be)}b().unlockMsgQueue();for(const be of de)m().processMsg(be);y()&&(pe(),d(p)?.render())}function pe(Q){let re=D().animates(),de=U.animates()||te.animates();T().pollState(),re&&(D().move(),He(x,D().x1.current,!0),He(v,D().y1.current,!0),He($,D().x2.current,!0),He(j,D().y2.current,!0),He(S,D().x1.current*D().texW),He(P,D().y1.current*D().texH),He(I,D().x2.current*D().texW),He(R,D().y2.current*D().texH),_()=="fit"&&(He(ie,U.current=U.target=d(I)-d(S)+2,!0),He(X,te.current=te.target=2*(d(R)-d(P)+2),!0)),d(p)&&(d(p).needsDisplay=!0)),de&&(U.move(),te.move(),He(ie,U.current,!0),He(X,te.current,!0),d(p)&&(d(p).needsDisplay=!0)),d(p)?.update()}let he=Qe(()=>A()?.getBool(w.CANVAS_BORDER)?"border-2 border-primary border-opacity-100":"");xi(()=>{const Q=_();if(Q==="full")U.set(i()),te.set(u());else if(Q==="aspect")U.set(l()),te.set(h());else if(Q==="fit"){const re=D().x1.current*D().texW,de=D().y1.current*D().texH,be=D().x2.current*D().texW,Ie=D().y2.current*D().texH;U.set(be-re+2),te.set(2*(Ie-de+2))}});var Te=Et(),Pe=ze(Te);{var ge=Q=>{var re=vm(),de=z(re),be=z(de),Ie=z(be);Lt(dm(Ie,{get x1(){return d(S)},get x2(){return d(I)},get y1(){return d(P)},get y2(){return d(R)},get tx1(){return d(x)},get tx2(){return d($)},get ty1(){return d(v)},get ty2(){return d(j)}}),Ce=>He(p,Ce,!0),()=>d(p)),W(be),W(de),W(re),ut(()=>{We(be,1,_r(d(he))),Ns(be,`height:${d(X)??""}px; width:${d(ie)??""}px`)}),xt(3,re,()=>Pt),se(Q,re)};Xe(Pe,Q=>{y()&&Q(ge)})}se(a,Te);var Se=it({updateRect:q,doAnimationFrame:ne,get textureRect(){return D()},set textureRect(Q){D(Q)}});return s(),Se}var hm=Ae("<button> </button>");function Sa(a,r){let n=me(r,"name",3,""),s=me(r,"active",3,""),i=me(r,"style",3,"text-3xl");var u=hm();u.__click=function(...h){r.onclick?.apply(this,h)};var l=z(u,!0);W(u),ut(()=>{We(u,1,`btn btn-ghost p-0 font-thin ${s()===n()?"btn-active":""} ${i()??""}`),At(l,n())}),se(a,u)}an(["click"]);var mm=Ae('<div class="px-0 py-0.5"><div class="w-full flex"><div class="text-xl text-base-content"> </div></div> <!></div>');function Mt(a,r){let n=me(r,"name",3,"");var s=mm(),i=z(s),u=z(i),l=z(u,!0);W(u),W(i);var h=Z(i,2);zn(h,()=>r.children??wn),W(s),ut(()=>At(l,n())),se(a,s)}var pm=Xt('<path d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path>');function _m(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 14 16"},()=>n,{children:(s,i)=>{var u=pm();se(s,u)},$$slots:{default:!0}}))}var ym=Xt('<path d="M254.28 17.313c-81.048 0-146.624 65.484-146.624 146.406V236h49.594v-69.094c0-53.658 43.47-97.187 97.03-97.187 53.563 0 97.032 44.744 97.032 97.186V236h49.594v-72.28c0-78.856-65.717-146.407-146.625-146.407zM85.157 254.688c-14.61 22.827-22.844 49.148-22.844 76.78 0 88.358 84.97 161.5 191.97 161.5 106.998 0 191.968-73.142 191.968-161.5 0-27.635-8.26-53.95-22.875-76.78H85.155zM254 278.625c22.34 0 40.875 17.94 40.875 40.28 0 16.756-10.6 31.23-25.125 37.376l32.72 98.126h-96.376l32.125-98.125c-14.526-6.145-24.532-20.62-24.532-37.374 0-22.338 17.972-40.28 40.312-40.28z"></path>');function bm(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=ym();se(s,u)},$$slots:{default:!0}}))}var wm=(a,r)=>r(!0),Em=(a,r)=>r(a),Sm=Ae('<ul tabindex="0" class="dropdown-content menu bg-base-100 text-base-content mt-1 w-full"><input type="range" class="range range-accent h-12 rounded-none px-4"/></ul>'),Am=Ae('<div class="dropdown dropdown-bottom"><button type="button" tabindex="0"><!></button> <!></div>');function Tm(a,r){at(r,!0);let n=me(r,"value",7,0),s=me(r,"locked",3,!1),i=me(r,"min",3,0),u=me(r,"max",3,0),l=me(r,"open",7,!0),h=me(r,"select",3,()=>{});function b(p){p.preventDefault(),n(Number(p.target.value)),h()(n())}var m=Am(),y=z(m);y.__click=[wm,l];var T=z(y);zn(T,()=>r.children??wn),W(y);var _=Z(y,2);{var A=p=>{var S=Sm(),P=z(S);fv(P),P.__input=[Em,b],W(S),ut(()=>{Ft(P,"min",i()),Ft(P,"max",u()),dv(P,n())}),se(p,S)};Xe(_,p=>{l()&&p(A)})}W(m),ut(()=>We(y,1,_r(s()?"pointer-events-none":""))),se(a,m),it()}an(["click","input"]);var Rm=Ae('<div class="w-4">&#10003</div>'),xm=Ae('<div class="w-4"></div>');function Pm(a,r){var n=Et(),s=ze(n);{var i=u=>{var l=Et(),h=ze(l);{var b=y=>{var T=Rm();se(y,T)},m=y=>{var T=xm();se(y,T)};Xe(h,y=>{r.visible?y(b):y(m,!1)})}se(u,l)};Xe(s,u=>{u(i)})}se(a,n)}var Dm=Ae('<li class="divider"></li>'),Om=(a,r,n)=>r(a,d(n).tag),km=Ae("<li><button><!> </button></li>"),Cm=Ae('<div><label tabindex="0"><!></label>  <ul tabindex="0"><!></ul></div>');function nu(a,r){at(r,!0);let n=me(r,"items",19,()=>[]),s=me(r,"isEnabled",3,!0),i=me(r,"checkmarks",3,!1),u=me(r,"dropdownStyle",3,""),l=me(r,"listStyle",3,""),h=me(r,"select",3,()=>{});const b=(p,S)=>{p.preventDefault(),document.activeElement&&document.activeElement.blur(),h()(S)};var m=Cm(),y=z(m),T=z(y);zn(T,()=>r.children??wn),W(y);var _=Z(y,2),A=z(_);Di(A,n,p=>{var S=Et(),P=ze(S);ta(P,17,n,ea,(I,R)=>{var x=Et(),v=ze(x);{var $=D=>{var U=Dm();se(D,U)},j=(D,U)=>{{var te=ie=>{var X=km(),q=z(X);q.__click=[Om,b,R];var ne=z(q);{var pe=Te=>{Pm(Te,{get visible(){return d(R).isSelected}})};Xe(ne,Te=>{i()&&Te(pe)})}var he=Z(ne);W(q),W(X),ut(()=>{q.disabled=!d(R).isEnabled,We(q,1,_r(d(R).isEnabled?"":"hover:bg-base-100 opacity-40")),At(he,` ${d(R).title??""}`)}),se(ie,X)};Xe(D,ie=>{d(R).isHidden||ie(te)},U)}};Xe(v,D=>{d(R)instanceof Jd?D($):D(j,!1)})}se(I,x)}),se(p,S)}),W(_),W(m),ut(()=>{We(m,1,`dropdown ${u()??""}`),We(y,1,_r(s()?"":"pointer-events-none")),We(_,1,`dropdown-content menu bg-base-100 ${l()??""}`)}),se(a,m),it()}an(["click"]);function Kf(a,r){let n=me(r,"items",19,()=>[]),s=me(r,"isEnabled",3,!0),i=me(r,"dropdownStyle",3,""),u=me(r,"listStyle",3,""),l=me(r,"selectedTag",3,0),h=me(r,"select",3,()=>{}),b=Qe(()=>{let T=n(),_=l();for(const A of T)A.isSelected=A.tag==_;return T});var m=Et(),y=ze(m);Di(y,n,T=>{var _=Et(),A=ze(_);Di(A,l,p=>{nu(p,{get items(){return d(b)},get isEnabled(){return s()},checkmarks:!0,get dropdownStyle(){return i()},get listStyle(){return u()},select:h(),children:(S,P)=>{var I=Et(),R=ze(I);zn(R,()=>r.children??wn),se(S,I)},$$slots:{default:!0}})}),se(T,_)}),se(a,m)}var Mm=Xt('<path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"></path>');function Im(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=Mm();se(s,u)},$$slots:{default:!0}}))}var $m=Ae('<div class="flex w-full items-center justify-between"><div class="flex grow justify-center"><!></div> <div class="h-4 w-4"><!></div></div>');function Nm(a,r){var n=$m(),s=z(n),i=z(s);zn(i,()=>r.children??wn),W(s);var u=Z(s,2),l=z(u);Im(l,{}),W(u),W(n),se(a,n)}const Lm=a=>{console.log("infoAction",a),a.preventDefault()};var Um=Ae("<button> </button>"),Fm=Ae('<button class="btn btn-primary w-[18rem] rounded-none border-0 text-xl font-normal"><!></button>'),Bm=Ae("<button> </button>"),Km=Ae('<div class="px-0 py-0.5"><div class="flex w-full items-center justify-between space-x-1 text-xl"><div class="bg-primary flex h-12 w-full grow overflow-hidden border-0"><div><div class="mx-2 flex grow overflow-hidden border-0 whitespace-nowrap"> </div></div></div> <div><button><!></button></div> <div><button><!></button></div> <div class="bg-primary h-12 border-0"><!></div></div></div>');function je(a,r){at(r,!0);let n=me(r,"name",3,""),s=me(r,"min",3,0),i=me(r,"max",3,0),u=me(r,"locked",3,!1),l=me(r,"selectedTag",7,0),h=me(r,"items",19,()=>[]),b=me(r,"select",3,()=>{}),m=me(r,"info",3,void 0);const y=Qe(()=>u()?"opacity-50":""),T=Qe(()=>{for(const q of h())if(q.tag==l())return q.title;return"???"});var _=Km(),A=z(_),p=z(A),S=z(p),P=z(S),I=z(P,!0);W(P),W(S),W(p);var R=Z(p,2),x=z(R),v=z(x);bm(v,{}),W(x),W(R);var $=Z(R,2),j=z($);j.__click=[Lm];var D=z(j);_m(D,{}),W(j),W($);var U=Z($,2),te=z(U);{var ie=q=>{const ne=Qe(()=>!u());Kf(q,{get isEnabled(){return d(ne)},get items(){return h()},select:pe=>{l(pe),b()(l())},get selectedTag(){return l()},listStyle:"w-[18rem] mt-2 text-xl bg-accent text-accent-content",children:(pe,he)=>{var Te=Et(),Pe=ze(Te);{var ge=Q=>{var re=Um(),de=z(re,!0);W(re),ut(()=>{We(re,1,`btn btn-primary ${d(y)??""} w-[18rem] rounded-none border-0 text-xl font-normal`),At(de,d(T))}),se(Q,re)},Se=Q=>{var re=Fm(),de=z(re);Nm(de,{children:(be,Ie)=>{xs();var Ce=Yd();ut(()=>At(Ce,d(T))),se(be,Ce)}}),W(re),se(Q,re)};Xe(Pe,Q=>{u()?Q(ge):Q(Se,!1)})}se(pe,Te)},$$slots:{default:!0}})},X=q=>{Tm(q,{get min(){return s()},get max(){return i()},get locked(){return u()},get value(){return l()},select:b(),children:(ne,pe)=>{var he=Bm(),Te=z(he,!0);W(he),ut(()=>{We(he,1,`btn btn-primary ${d(y)??""} w-[18rem] rounded-none border-0 text-xl font-normal`),At(Te,l())}),se(ne,he)},$$slots:{default:!0}})};Xe(te,q=>{s()===i()?q(ie):q(X,!1)})}W(U),W(A),W(_),ut(()=>{We(S,1,`w-full border-0 text-xl ${d(y)??""} text-primary-content flex items-center justify-between`),At(I,n()),We(R,1,`bg-primary flex h-12 w-20 items-center justify-center border-0 ${u()?"":"hidden"}`),We(x,1,`text-primary-content h-7 w-7 ${d(y)??""}`),We($,1,`bg-primary flex h-12 w-20 items-center justify-center border-0 ${m()?"":"hidden"}`),We(j,1,`text-primary-content h-7 w-7 ${d(y)??""}`)}),se(a,_),it()}an(["click"]);var Vm=Ae("<!> <!>",1),Hm=Ae("<div><!> <!> <!></div>");function Gm(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(en,"$config",n);Bt();var u=Hm(),l=z(u);Mt(l,{name:"Warp mode",children:(m,y)=>{const T=_e(()=>[new ae("During Disk Accesses",0),new ae("Never",1),new ae("Always",2)]),_=_e(()=>i().getNum(w.WARP_MODE));je(m,{get items(){return d(T)},name:"Enable warp mode",select:A=>i().setNum(w.WARP_MODE,A),get selectedTag(){return d(_)}})},$$slots:{default:!0}});var h=Z(l,2);Mt(h,{name:"Appearance",children:(m,y)=>{var T=Vm(),_=ze(T);const A=_e(()=>[new ae("Default",Ct.default),new ae("Light",Ct.light),new ae("Dark",Ct.dark),new ae("Coffee",Ct.coffee),new ae("Cupcake",Ct.cupcake),new ae("Forest",Ct.forest),new ae("Aqua",Ct.aqua),new ae("Garden",Ct.garden),new ae("Pastel",Ct.pastel)]),p=_e(()=>i().getNum(w.THEME));je(_,{get items(){return d(A)},name:"Color theme",select:R=>i().setNum(w.THEME,R),get selectedTag(){return d(p)}});var S=Z(_,2);const P=_e(()=>[new ae("Yes",1),new ae("No",0)]),I=_e(()=>i().getNum(w.CANVAS_BORDER));je(S,{get items(){return d(P)},name:"Draw Canvas Border",select:R=>i().setNum(w.CANVAS_BORDER,R),get selectedTag(){return d(I)}}),se(m,T)},$$slots:{default:!0}});var b=Z(h,2);Mt(b,{name:"Peripherals",children:(m,y)=>{const T=_e(()=>[new ae("Yes",1),new ae("No",0)]),_=_e(()=>i().getNum(w.SHAKING));je(m,{get items(){return d(T)},name:"Release Mouse by Shaking",select:A=>i().setNum(w.SHAKING,A),get selectedTag(){return d(_)}})},$$slots:{default:!0}}),W(u),xt(1,u,()=>Pt),se(a,u),it(),s()}var jm=Ae("<!> <!>",1),Wm=Ae("<!> <!> <!>",1),zm=Ae("<!> <!> <!> <!> <!> <!> <!> <!>",1),qm=Ae("<!> <!> <!> <!>",1),Ym=Ae("<!> <!> <!> <!>",1),Xm=Ae("<div> </div> <!> <!> <!> <!> <!>",1),Zm=Ae("<div><!></div>");function Qm(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Xo,"$MsgConfig",n),u=()=>k(Sn,"$wasm",n),l=()=>k(en,"$config",n),h=()=>k(sa,"$poweredOn",n);Bt();var b=Zm(),m=z(b);Di(m,i,y=>{var T=Xm(),_=ze(T),A=z(_);W(_);var p=Z(_,2);Mt(p,{name:"CPU",children:(x,v)=>{var $=jm(),j=ze($);const D=_e(()=>[new ae("68000",u().CPU_68000),new ae("68010",u().CPU_68010),new ae("68020",u().CPU_68EC020)]),U=_e(()=>l().getNum(w.CPU_REVISION));je(j,{name:"CPU",get items(){return d(D)},get selectedTag(){return d(U)},select:q=>l().setNum(w.CPU_REVISION,q)});var te=Z(j,2);const ie=_e(()=>[new ae("7 Mhz",0),new ae("14 Mhz",2),new ae("21 Mhz",3),new ae("28 Mhz",4),new ae("35 Mhz",5),new ae("42 Mhz",6),new ae("84 Mhz",12)]),X=_e(()=>l().getNum(w.CPU_SPEED));je(te,{name:"Frequency",get items(){return d(ie)},get selectedTag(){return d(X)},select:q=>l().setNum(w.CPU_SPEED,q)}),se(x,$)},$$slots:{default:!0}});var S=Z(p,2);Mt(S,{name:"Custom Chipset",children:(x,v)=>{var $=Wm(),j=ze($);const D=_e(()=>[new ae("Early OCS",u().AGNUS_OCS_OLD),new ae("OCS",u().AGNUS_OCS),new ae("ECS (1MB)",u().AGNUS_ECS_1MB),new ae("ECS (2MB)",u().AGNUS_ECS_2MB)]),U=_e(()=>l().getNum(w.AGNUS_REVISION));je(j,{name:"Agnus Revision",get items(){return d(D)},get selectedTag(){return d(U)},select:he=>l().setNum(w.AGNUS_REVISION,he),get locked(){return h()}});var te=Z(j,2);const ie=_e(()=>[new ae("OCS",u().DENISE_OCS),new ae("ECS",u().DENISE_ECS)]),X=_e(()=>l().getNum(w.DENISE_REVISION));je(te,{name:"Denise Revision",get items(){return d(ie)},get selectedTag(){return d(X)},select:he=>l().setNum(w.DENISE_REVISION,he),get locked(){return h()}});var q=Z(te,2);const ne=_e(()=>[new ae("NONE",u().RTC_NONE),new ae("OKI",u().RTC_OKI),new ae("RICOH",u().RTC_RICOH)]),pe=_e(()=>l().getNum(w.RTC_MODEL));je(q,{name:"Real-time Clock",get items(){return d(ne)},get selectedTag(){return d(pe)},select:he=>l().setNum(w.RTC_MODEL,he),get locked(){return h()}}),se(x,$)},$$slots:{default:!0}});var P=Z(S,2);Mt(P,{name:"Memory",children:(x,v)=>{var $=zm(),j=ze($);const D=_e(()=>[new ae("256 KB",256),new ae("512 KB",512),new ae("1024 KB",1024),new ae("2048 KB",2048)]),U=_e(()=>l().getNum(w.CHIP_RAM));je(j,{name:"Chip RAM",get items(){return d(D)},get selectedTag(){return d(U)},select:Ve=>l().setNum(w.CHIP_RAM,Ve),get locked(){return h()}});var te=Z(j,2);const ie=_e(()=>[new ae("0 KB",0),new ae("512 KB",512),new ae("1 MB",1024),new ae("1.5 MB",1536)]),X=_e(()=>l().getNum(w.SLOW_RAM));je(te,{name:"Slow RAM",get items(){return d(ie)},get selectedTag(){return d(X)},select:Ve=>l().setNum(w.SLOW_RAM,Ve),get locked(){return h()}});var q=Z(te,2);const ne=_e(()=>[new ae("0 KB",0),new ae("64 KB",64),new ae("128 KB",128),new ae("256 KB",256),new ae("512 KB",512),new ae("1 MB",1024),new ae("2 MB",2048),new ae("4 MB",4096),new ae("8 MB",8192)]),pe=_e(()=>l().getNum(w.FAST_RAM));je(q,{name:"Fast RAM",get items(){return d(ne)},get selectedTag(){return d(pe)},select:Ve=>l().setNum(w.FAST_RAM,Ve),get locked(){return h()}});var he=Z(q,2);const Te=_e(()=>[new ae("Amiga 500",u().BANK_MAP_A500),new ae("Amiga 1000",u().BANK_MAP_A1000),new ae("Amiga 2000A",u().BANK_MAP_A2000A),new ae("Amiga 2000B",u().BANK_MAP_A2000B)]),Pe=_e(()=>l().getNum(w.BANK_MAP));je(he,{name:"Memory Layout",get items(){return d(Te)},get selectedTag(){return d(Pe)},select:Ve=>l().setNum(w.BANK_MAP,Ve),get locked(){return h()}});var ge=Z(he,2);const Se=_e(()=>[new ae("All Zeroes",u().RAM_INIT_ALL_ZEROES),new ae("All Ones",u().RAM_INIT_ALL_ONES),new ae("Random",u().RAM_INIT_RANDOMIZED)]),Q=_e(()=>l().getNum(w.INIT_PATTERN));je(ge,{name:"Memory Startup Pattern",get items(){return d(Se)},get selectedTag(){return d(Q)},select:Ve=>l().setNum(w.INIT_PATTERN,Ve),get locked(){return h()}});var re=Z(ge,2);const de=_e(()=>[new ae("Floating",u().UNMAPPED_FLOATING),new ae("All Zeroes",u().UNMAPPED_ALL_ZEROES),new ae("All Ones",u().UNMAPPED_ALL_ONES)]),be=_e(()=>l().getNum(w.UNMAPPED));je(re,{name:"Unmapped Memory Area",get items(){return d(de)},get selectedTag(){return d(be)},select:Ve=>l().setNum(w.UNMAPPED,Ve),get locked(){return h()}});var Ie=Z(re,2);const Ce=_e(()=>[new ae("Yes",1),new ae("No",0)]),ue=_e(()=>l().getNum(w.SLOW_RAM_MIRROR));je(Ie,{name:"Emulate Slow RAM Mirror",get items(){return d(Ce)},get selectedTag(){return d(ue)},select:Ve=>l().setNum(w.SLOW_RAM_MIRROR,Ve)});var Re=Z(Ie,2);const Ke=_e(()=>[new ae("Yes",1),new ae("No",0)]),M=_e(()=>l().getNum(w.SLOW_RAM_DELAY));je(Re,{name:"Emulate Slow RAM Bus Delays",get items(){return d(Ke)},get selectedTag(){return d(M)},select:Ve=>l().setNum(w.SLOW_RAM_DELAY,Ve)}),se(x,$)},$$slots:{default:!0}});var I=Z(P,2);Mt(I,{name:"Floppy Drives",children:(x,v)=>{var $=qm(),j=ze($);const D=_e(()=>[new ae("Internal Drive",1)]),U=_e(()=>l().getNum(w.DF0));je(j,{name:"DF0",get items(){return d(D)},get selectedTag(){return d(U)},select:Q=>l().setNum(w.DF0,Q),get locked(){return h()}});var te=Z(j,2);const ie=_e(()=>[new ae("None",0),new ae("A1010",1)]),X=_e(()=>l().getNum(w.DF1));je(te,{name:"DF1",get items(){return d(ie)},get selectedTag(){return d(X)},select:Q=>l().setNum(w.DF1,Q),get locked(){return h()}});var q=Z(te,2);const ne=_e(()=>[new ae("None",0),new ae("A1010",1)]),pe=_e(()=>l().getNum(w.DF2)),he=_e(()=>h()||!l().getBool(w.DF1));je(q,{name:"DF2",get items(){return d(ne)},get selectedTag(){return d(pe)},select:Q=>l().setNum(w.DF2,Q),get locked(){return d(he)}});var Te=Z(q,2);const Pe=_e(()=>[new ae("None",0),new ae("A1010",1)]),ge=_e(()=>l().getNum(w.DF3)),Se=_e(()=>h()||!l().getBool(w.DF2));je(Te,{name:"DF3",get items(){return d(Pe)},get selectedTag(){return d(ge)},select:Q=>l().setNum(w.DF3,Q),get locked(){return d(Se)}}),se(x,$)},$$slots:{default:!0}});var R=Z(I,2);Mt(R,{name:"Hard Drives",children:(x,v)=>{var $=Ym(),j=ze($);const D=_e(()=>[new ae("None",0),new ae("Zorro Board",1)]),U=_e(()=>l().getNum(w.HD0));je(j,{name:"HD0",get items(){return d(D)},get selectedTag(){return d(U)},select:ge=>l().setNum(w.HD0,ge),get locked(){return h()}});var te=Z(j,2);const ie=_e(()=>[new ae("None",0),new ae("Zorro Board",1)]),X=_e(()=>l().getNum(w.HD1));je(te,{name:"HD1",get items(){return d(ie)},get selectedTag(){return d(X)},select:ge=>l().setNum(w.HD1,ge),get locked(){return h()}});var q=Z(te,2);const ne=_e(()=>[new ae("None",0),new ae("Zorro Board",1)]),pe=_e(()=>l().getNum(w.HD2));je(q,{name:"HD2",get items(){return d(ne)},get selectedTag(){return d(pe)},select:ge=>l().setNum(w.HD2,ge),get locked(){return h()}});var he=Z(q,2);const Te=_e(()=>[new ae("None",0),new ae("Zorro Board",1)]),Pe=_e(()=>l().getNum(w.HD3));je(he,{name:"HD3",get items(){return d(Te)},get selectedTag(){return d(Pe)},select:ge=>l().setNum(w.HD3,ge),get locked(){return h()}}),se(x,$)},$$slots:{default:!0}}),ut(()=>At(A,`Huhu ${i()??""}`)),se(y,T)}),W(b),xt(1,b,()=>Pt),se(a,b),it(),s()}var Jm=Ae("<!> <!>",1),ep=Ae("<!> <!> <!>",1),tp=Ae("<div><!> <!> <!> <!> <!> <!></div>");function np(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(en,"$config",n);Bt();var u=tp(),l=z(u);Mt(l,{name:"Blitter",children:(_,A)=>{const p=_e(()=>[new ae("Low",0),new ae("Medium",1),new ae("High",2)]),S=_e(()=>i().getNum(w.BLITTER_ACCURACY));je(_,{name:"Accuracy",get items(){return d(p)},select:P=>i().setNum(w.BLITTER_ACCURACY,P),get selectedTag(){return d(S)}})},$$slots:{default:!0}});var h=Z(l,2);Mt(h,{name:"Chipset Features",children:(_,A)=>{var p=Jm(),S=ze(p);const P=_e(()=>[new ae("Yes",1),new ae("No",0)]),I=_e(()=>i().getNum(w.TODBUG));je(S,{name:"Emulate TOD Bug",get items(){return d(P)},select:$=>i().setNum(w.TODBUG,$),get selectedTag(){return d(I)}});var R=Z(S,2);const x=_e(()=>[new ae("Yes",1),new ae("No",0)]),v=_e(()=>i().getNum(w.PTR_DROPS));je(R,{name:"Emulate Dropped Register Writes",get items(){return d(x)},select:$=>i().setNum(w.PTR_DROPS,$),get selectedTag(){return d(v)}}),se(_,p)},$$slots:{default:!0}});var b=Z(h,2);Mt(b,{name:"Timing",children:(_,A)=>{const p=_e(()=>[new ae("Yes",1),new ae("No",0)]),S=_e(()=>i().getNum(w.ECLOCK_SYNCING));je(_,{name:"Sync CIA Accesses With E-Clock",get items(){return d(p)},select:P=>i().setNum(w.ECLOCK_SYNCING,P),get selectedTag(){return d(S)}})},$$slots:{default:!0}});var m=Z(b,2);Mt(m,{name:"Floppy Drives",children:(_,A)=>{const p=_e(()=>[new ae("Original",1),new ae("Accelerated (2 x)",2),new ae("Accelerated (4 x)",4),new ae("Accelerated (8 x)",8),new ae("Infinite",-1)]),S=_e(()=>i().getNum(w.DRIVE_SPEED));je(_,{name:"Drive Speed",get items(){return d(p)},select:P=>i().setNum(w.DRIVE_SPEED,P),get selectedTag(){return d(S)}})},$$slots:{default:!0}});var y=Z(m,2);Mt(y,{name:"Sprites",children:(_,A)=>{var p=ep(),S=ze(p);const P=_e(()=>[new ae("Yes",1),new ae("No",0)]),I=_e(()=>i().getNum(w.CLX_SPR_SPR));je(S,{name:"Sprite-Sprite Collision Detection",get items(){return d(P)},select:U=>i().setNum(w.CLX_SPR_SPR,U),get selectedTag(){return d(I)}});var R=Z(S,2);const x=_e(()=>[new ae("Yes",1),new ae("No",0)]),v=_e(()=>i().getNum(w.CLX_SPR_PLF));je(R,{name:"Sprite-Playfield Collision Detection",get items(){return d(x)},select:U=>i().setNum(w.CLX_SPR_PLF,U),get selectedTag(){return d(v)}});var $=Z(R,2);const j=_e(()=>[new ae("Yes",1),new ae("No",0)]),D=_e(()=>i().getNum(w.CLX_PLF_PLF));je($,{name:"Playfield-Playfield Collision Detection",get items(){return d(j)},select:U=>i().setNum(w.CLX_PLF_PLF,U),get selectedTag(){return d(D)}}),se(_,p)},$$slots:{default:!0}});var T=Z(y,2);Mt(T,{name:"Keyboard",children:(_,A)=>{const p=_e(()=>[new ae("Yes",1),new ae("No",0)]),S=_e(()=>i().getNum(w.ACCURATE_KEYBOARD));je(_,{name:"Transmit Keycodes Bit by Bit",get items(){return d(p)},select:P=>i().setNum(w.ACCURATE_KEYBOARD,P),get selectedTag(){return d(S)}})},$$slots:{default:!0}}),W(u),xt(1,u,()=>Pt),se(a,u),it(),s()}var rp=Ae("<!> <!> <!> <!>",1),ap=Ae("<div><!> <!> <!></div>");function ip(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(en,"$config",n),u=()=>k(Sn,"$wasm",n);function l(P){i().set(w.RENDER_MODE,P),update()}function h(P){i().set(w.PALETTE,P),update()}function b(P){i().set(w.BRIGHTNESS,P),update()}function m(P){i().set(w.CONTRAST,P),update()}function y(P){i().set(w.SATURATION,P),update()}function T(P){i().set(w.FLICKER_WEIGHT,P),update()}Bt();var _=ap(),A=z(_);Mt(A,{name:"WebGL",children:(P,I)=>{const R=_e(()=>[new ae("Smooth",Da.smooth),new ae("Pixelated",Da.pixelated)]),x=_e(()=>i().getNum(w.RENDER_MODE));je(P,{name:"Render Mode",get items(){return d(R)},get selectedTag(){return d(x)},select:l})},$$slots:{default:!0}});var p=Z(A,2);Mt(p,{name:"Colors",children:(P,I)=>{var R=rp(),x=ze(R);const v=_e(()=>[new ae("Color",u().PALETTE_COLOR),new ae("Black and White",u().PALETTE_BLACK_WHITE),new ae("Paper White",u().PALETTE_PAPER_WHITE),new ae("Green",u().PALETTE_GREEN),new ae("Amber",u().PALETTE_AMBER),new ae("Sepia",u().PALETTE_SEPIA)]),$=_e(()=>i().getNum(w.PALETTE));je(x,{name:"Palette",get items(){return d(v)},get selectedTag(){return d($)},select:h});var j=Z(x,2);const D=_e(()=>i().getNum(w.BRIGHTNESS));je(j,{name:"Brightness",min:0,max:100,get tag(){return u().OPT_BRIGHTNESS},get selectedTag(){return d(D)},select:b});var U=Z(j,2);const te=_e(()=>i().getNum(w.CONTRAST));je(U,{name:"Contrast",min:0,max:100,get tag(){return u().OPT_CONTRAST},get selectedTag(){return d(te)},select:m});var ie=Z(U,2);const X=_e(()=>i().getNum(w.SATURATION));je(ie,{name:"Saturation",min:0,max:100,get tag(){return u().OPT_SATURATION},get selectedTag(){return d(X)},select:y}),se(P,R)},$$slots:{default:!0}});var S=Z(p,2);Mt(S,{name:"Interlace",children:(P,I)=>{const R=_e(()=>i().getNum(w.FLICKER_WEIGHT));je(P,{name:"Flicker Weight",min:0,max:100,tag:1e3,get selectedTag(){return d(R)},select:T})},$$slots:{default:!0}}),W(_),xt(1,_,()=>Pt),se(a,_),it(),s()}var op=Ae("<!> <!>",1),sp=Ae("<!> <!> <!> <!> <!> <!>",1),up=Ae("<!> <!> <!> <!>",1),cp=Ae("<div><!> <!> <!></div>");function lp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(en,"$config",n);Bt();var u=cp(),l=z(u);Mt(l,{name:"Sound Synthesis",children:(m,y)=>{var T=op(),_=ze(T);const A=_e(()=>[new ae("None",0),new ae("Nearest",1),new ae("Linear",2)]),p=_e(()=>i().getNum(w.SAMPLING_METHOD));je(_,{name:"Interpolation Method",get items(){return d(A)},select:R=>i().setNum(w.SAMPLING_METHOD,R),get selectedTag(){return d(p)}});var S=Z(_,2);const P=_e(()=>[new ae("None",0),new ae("A500",1),new ae("A1000",2),new ae("A1200",3),new ae("Legacy Filter",4),new ae("Low-pass only",5),new ae("LED filter only",6),new ae("High-pass only",7)]),I=_e(()=>i().get(w.FILTER_TYPE));je(S,{name:"Audio Filter",get items(){return d(P)},select:R=>i().set(w.FILTER_TYPE,R),get selectedTag(){return d(I)}}),se(m,T)},$$slots:{default:!0}});var h=Z(l,2);Mt(h,{name:"Speakers",children:(m,y)=>{var T=sp(),_=ze(T);const A=_e(()=>i().get(w.AUDVOLL));je(_,{name:"Left Speaker Volume",get selectedTag(){return d(A)},select:U=>i().set(w.AUDVOLL,U),min:0,max:100});var p=Z(_,2);const S=_e(()=>i().get(w.AUDVOLR));je(p,{name:"Right Speaker Volume",get selectedTag(){return d(S)},select:U=>i().set(w.AUDVOLR,U),min:0,max:100});var P=Z(p,2);const I=_e(()=>i().get(w.AUDVOL0));je(P,{name:"Paula Channel 0 Volume",get selectedTag(){return d(I)},select:U=>i().set(w.AUDVOL0,U),min:0,max:100});var R=Z(P,2);const x=_e(()=>i().get(w.AUDVOL1));je(R,{name:"Paula Channel 1 Volume",get selectedTag(){return d(x)},select:U=>i().set(w.AUDVOL1,U),min:0,max:100});var v=Z(R,2);const $=_e(()=>i().get(w.AUDVOL2));je(v,{name:"Paula Channel 2 Volume",get selectedTag(){return d($)},select:U=>i().set(w.AUDVOL2,U),min:0,max:100});var j=Z(v,2);const D=_e(()=>i().get(w.AUDVOL3));je(j,{name:"Paula Channel 3 Volume",get selectedTag(){return d(D)},select:U=>i().set(w.AUDVOL3,U),min:0,max:100}),se(m,T)},$$slots:{default:!0}});var b=Z(h,2);Mt(b,{name:"Drive Sounds",children:(m,y)=>{var T=up(),_=ze(T);const A=_e(()=>i().get(w.STEP_VOLUME));je(_,{name:"Head Step Volume",get selectedTag(){return d(A)},select:v=>i().set(w.STEP_VOLUME,v),min:0,max:100});var p=Z(_,2);const S=_e(()=>i().get(w.POLL_VOLUME));je(p,{name:"Poll Disk Volume",get selectedTag(){return d(S)},select:v=>i().set(w.POLL_VOLUME,v),min:0,max:100});var P=Z(p,2);const I=_e(()=>i().get(w.INSERT_VOLUME));je(P,{name:"Insert Disk Volume",get selectedTag(){return d(I)},select:v=>i().set(w.INSERT_VOLUME,v),min:0,max:100});var R=Z(P,2);const x=_e(()=>i().get(w.EJECT_VOLUME));je(R,{name:"Eject Disk Volume",get selectedTag(){return d(x)},select:v=>i().set(w.EJECT_VOLUME,v),min:0,max:100}),se(m,T)},$$slots:{default:!0}}),W(u),xt(1,u,()=>Pt),se(a,u),it(),s()}var fp=Ae('<div class="absolute top-0 left-0 w-full h-full flex overflow-auto text-base-content"><div class="w-16 mr-1"></div> <div class="bg-base-100/75 opacity-100 mt-0 p-4 grow h-full overflow-auto"><div class="font-sofia-extra"><div class="flex border-0 border-red-500 justify-between"><div class="text-5xl">SETTINGS</div></div> <div class="flex border-0 border-red-500 justify-between"><div class="float space-x-4 mb-6 border-0"><!> <!> <!> <!> <!></div> <div class="flex justify-between mb-6 border-0 w-[18rem]"><button class="btn btn-outline text-2xl font-normal w-[8.5rem]">Save</button> <button class="btn btn-outline text-2xl font-normal w-[8.5rem]">Reset</button></div></div></div> <!></div></div>');function dp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(en,"$config",n),u=()=>k(Ut,"$layer",n);let l=Rt("GENERAL");function h(){switch(d(l)){case"GENERAL":i().saveGeneralSettings();break;case"MACHINE":i().saveMachineSettings();break;case"COMPATIBILITY":i().saveCompatibilitySettings();break;case"AUDIO":i().saveAudioSettings();break;case"VIDEO":i().saveVideoSettings();break}}function b(){switch(d(l)){case"GENERAL":i().restoreGeneralDefaults();break;case"MACHINE":i().restoreMachineDefaults();break;case"COMPATIBILITY":i().restoreCompatibilityDefaults();break;case"AUDIO":i().restoreAudioDefaults();break;case"VIDEO":i().restoreVideoDefaults();break}}Bt();var m=Et(),y=ze(m);{var T=_=>{var A=fp(),p=Z(z(A),2),S=z(p),P=Z(z(S),2),I=z(P),R=z(I);Sa(R,{name:"GENERAL",get active(){return d(l)},onclick:()=>He(l,"GENERAL")});var x=Z(R,2);Sa(x,{name:"MACHINE",get active(){return d(l)},onclick:()=>He(l,"MACHINE")});var v=Z(x,2);Sa(v,{name:"COMPATIBILITY",get active(){return d(l)},onclick:()=>He(l,"COMPATIBILITY")});var $=Z(v,2);Sa($,{name:"VIDEO",get active(){return d(l)},onclick:()=>He(l,"VIDEO")});var j=Z($,2);Sa(j,{name:"AUDIO",get active(){return d(l)},onclick:()=>He(l,"AUDIO")}),W(I);var D=Z(I,2),U=z(D),te=Z(U,2);W(D),W(P),W(S);var ie=Z(S,2);{var X=ne=>{Gm(ne,{})},q=(ne,pe)=>{{var he=Pe=>{Qm(Pe,{})},Te=(Pe,ge)=>{{var Se=re=>{np(re,{})},Q=(re,de)=>{{var be=Ce=>{ip(Ce,{})},Ie=(Ce,ue)=>{{var Re=Ke=>{lp(Ke,{})};Xe(Ce,Ke=>{d(l)==="AUDIO"&&Ke(Re)},ue)}};Xe(re,Ce=>{d(l)==="VIDEO"?Ce(be):Ce(Ie,!1)},de)}};Xe(Pe,re=>{d(l)==="COMPATIBILITY"?re(Se):re(Q,!1)},ge)}};Xe(ne,Pe=>{d(l)==="MACHINE"?Pe(he):Pe(Te,!1)},pe)}};Xe(ie,ne=>{d(l)==="GENERAL"?ne(X):ne(q,!1)})}W(p),W(A),En("click",U,h),En("click",te,b),xt(3,A,()=>Pt),se(_,A)};Xe(y,_=>{u()===ft.settings&&_(T)})}se(a,m),it(),s()}var vp=Ae('<div class="flex h-8"><div><!></div> <div class="h-full w-1 bg-black"></div></div>');function ru(a,r){let n=me(r,"bg",3,"");var s=vp(),i=z(s),u=z(i);zn(u,()=>r.children??wn),W(i),xs(2),W(s),ut(()=>We(i,1,`flex h-full w-16 items-center justify-center ${n()??""}`)),se(a,s)}var gp=Ae('<img alt="Floppy icon"/> <div> </div>',1);function hp(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(bn,"$darkTheme",n),u=()=>k(xn,"$invert",n);let l=me(r,"tag",3,0),h=me(r,"cyl",3,0),b=me(r,"disk",3,!0),m=me(r,"motor",3,!1),y=me(r,"writing",3,!1),T=me(r,"unsaved",3,!1),_=me(r,"wp",3,!1),A=me(r,"select",3,()=>{});const p="",S="bg-gradient-to-b from-green-700 to-green-500",P="bg-gradient-to-b from-red-700 to-red-500",I=Qe(()=>_()?"icons/disk-protected.png":"icons/disk.png"),R="icons/floppy-drive.png",x=Qe(()=>b()?d(I):R),v=Qe(()=>m()?y()?P:S:p),$=Qe(()=>T()?"opacity-40":"opacity-70"),j=Qe(()=>i()?"text-gray-300":"text-black"),D=Qe(()=>{let U=[new ae("Insert",0),new ae("Eject",1)];return U[0].isEnabled=!0,U[0]=U[0],U[1].isEnabled=b(),U[1]=U[1],U});nu(a,{get items(){return d(D)},get tag(){return l()},select:A(),listStyle:"menu menu-compact rounded p-0 text-sm w-32",children:(U,te)=>{ru(U,{get bg(){return d(v)},children:(ie,X)=>{var q=gp(),ne=ze(q),pe=Z(ne,2),he=z(pe,!0);W(pe),ut(()=>{We(ne,1,`h-full border-0 object-scale-down py-1.5 pr-1 ${u()??""} ${d($)??""}`),Ft(ne,"src",d(x)),We(pe,1,`w-6 items-center border-0 pl-1 text-left text-sm leading-none ${d(j)??""}`),At(he,h())}),se(ie,q)},$$slots:{default:!0}})},$$slots:{default:!0}}),it(),s()}var mp=Ae('<img alt="Floppy icon"/> <div> </div>',1);function pp(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(bn,"$darkTheme",n),u=()=>k(sa,"$poweredOn",n),l=()=>k(xn,"$invert",n);let h=me(r,"tag",3,0),b=me(r,"cyl",3,0),m=me(r,"reading",3,!1),y=me(r,"writing",3,!1),T=me(r,"unsaved",3,!1),_=me(r,"select",3,()=>{});const A="",p="bg-gradient-to-b from-green-700 to-green-500",S="bg-gradient-to-b from-red-700 to-red-500",P="icons/hard-drive.png",I=Qe(()=>P),R=Qe(()=>m()?p:y()?S:A),x=Qe(()=>T()?"opacity-40":"opacity-70"),v=Qe(()=>i()?"text-gray-300":"text-black"),$=Qe(()=>{let j=[new ae("Attach",0)];return j[0].isEnabled=!u(),j[0]=j[0],j});nu(a,{get items(){return d($)},get tag(){return h()},select:_(),listStyle:"menu menu-compact rounded p-0 text-sm w-32",children:(j,D)=>{ru(j,{get bg(){return d(R)},children:(U,te)=>{var ie=mp(),X=ze(ie);Ft(X,"src",d(I));var q=Z(X,2),ne=z(q,!0);W(q),ut(()=>{We(X,1,`h-full border-0 object-scale-down py-1.5 pr-1 ${l()??""} ${d(x)??""}`),We(q,1,`w-6 items-center border-0 pl-1 text-left text-sm leading-none ${d(v)??""}`),At(ne,b())}),se(U,ie)},$$slots:{default:!0}})},$$slots:{default:!0}}),it(),s()}var _p=Ae('<div class="text-primary-content flex h-full w-20 items-center justify-center text-xs"> </div>'),yp=Ae('<div class="flex h-8"><div class="h-full w-1 bg-black"></div> <!></div>');function bp(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(Vl,"$cpu",n),u=()=>k(Hl,"$agnus",n),l=()=>k(kn,"$amiga",n),h=()=>k(Sn,"$wasm",n),b=()=>k(Cs,"$audioPort",n);let m=me(r,"acceleration",15,1),y=me(r,"mhz",15,0),T=me(r,"emuFps",15,0),_=me(r,"gpuFps",15,0),A=me(r,"latchedTimestamp",15,0),p=me(r,"latchedCycle",15,0),S=me(r,"latchedEmuFrame",15,0),P=me(r,"latchedGpuFrame",15,0),I=kt(0),R=kt(""),x=kt(Bi([new ae("Amiga Frequency",0),new ae("Amiga Refresh Rate",1),new ae("Host CPU Load",2),new ae("Host GPU Refresh Rate",3),new ae("Audio Buffer Fill Level",4)]));sr(()=>{A(Date.now()),d(x)[0].isSelected=!0});function v(ie,X){if(ie%10!=0)return;let q=Date.now(),ne=(q-A())/1e3,pe=i().getClock(),he=u().frameCount(),Te=ie;if(pe>=p()){const Pe=(pe-p())/1e6,ge=.5;y(ge*(Pe/ne)+(1-ge)*y())}if(ie%25==0&&he>=S()){const Pe=he-S(),ge=.9;T(ge*(Pe/ne)+(1-ge)*T())}if(ie%25==0&&Te>=P()){const Pe=Te-P(),ge=.9;_(ge*(Pe/ne)+(1-ge)*_())}ie%25==0&&$(),A(q),p(pe),S(he),P(Te)}function $(){switch(d(I)){case 0:m(l().getConfig(h().OPT_CPU_OVERCLOCKING)),m()==0&&m(1),He(R,(y()*m()).toFixed(2)+" MHz");break;case 1:He(R,T().toFixed(0)+" Hz");break;case 2:He(R,l().cpuLoad()+"%");break;case 3:He(R,_().toFixed(0)+" Hz");break;case 4:He(R,b().audioFillLevel()+"%");break;default:He(R,"---");break}}function j(ie){He(I,ie,!0),d(x).forEach(function(X){X.isSelected=X.tag==d(I)}),He(x,d(x),!0),$()}var D=yp(),U=Z(z(D),2);Kf(U,{get items(){return d(x)},get selectedTag(){return d(I)},select:j,dropdownStyle:"dropdown-end",listStyle:"menu menu-compact rounded text-sm w-64",children:(ie,X)=>{var q=_p(),ne=z(q,!0);W(q),ut(()=>At(ne,d(R))),se(ie,q)},$$slots:{default:!0}}),W(D),se(a,D);var te=it({update:v});return s(),te}var wp=Ae('<button type="button"><img alt="Status bar icon"/></button> <!>',1);function Ti(a,r){const[n,s]=dt(),i=()=>k(bn,"$darkTheme",n);let u=me(r,"src",3,""),l=me(r,"onclick",3,()=>{});var h=wp(),b=ze(h);b.__click=function(...T){l()?.apply(this,T)};var m=z(b);W(b);var y=Z(b,2);zn(y,()=>r.children??wn),ut(()=>{We(m,1,`h-8 w-8 border-0 object-scale-down p-1.5 ${i()?"invert":""} opacity-70`),Ft(m,"src",u())}),se(a,h),s()}an(["click"]);function Ep(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Gl,"$warpMode",n),u=()=>k(Pi,"$warp",n),l=()=>k(en,"$config",n),h=Rt();function b(y,T){switch(y){case 0:return T?"icons/warp-auto-on.png":"icons/warp-auto-off.png";case 1:return"icons/warp-never.png";case 2:return"icons/warp-always.png";default:return""}}function m(){let y=l().get(w.WARP_MODE);l().set(w.WARP_MODE,(y+1)%3)}jn(()=>(i(),u()),()=>{He(h,b(i(),u()))}),oa(),Bt(),Ti(a,{get src(){return d(h)},onclick:m}),it(),s()}function Sp(a,r,n,s){a.preventDefault(),r().setup(),le(Ki,!n()),n()||le(Ut,ft.none)}var Ap=Ae('<button type="button" class="flex h-full w-16 justify-center" id="vamigaButton"><img class="h-full" src="icons/vamigaIcon.png" alt="vAmiga Icon"/></button>'),Tp=Ae('<!> <div><!> <div class="flex grow border-0 border-red-500"><!> <!></div> <!> <!> <!> <!> <!></div>',1);function Rp(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(jl,"$muted",n),u=()=>k(Pi,"$warp",n),l=()=>k(Wl,"$track",n),h=()=>k(zl,"$halted",n),b=()=>k(Jr,"$audio",n),m=()=>k(Ki,"$showSidebar",n),y=()=>k(Ut,"$layer",n),T=()=>k(kn,"$amiga",n),_=()=>k(Ms,"$dfConnected",n),A=()=>k(Is,"$dfHasDisk",n),p=()=>k(Ql,"$dfCylinder",n),S=()=>k(Zl,"$dfMotor",n),P=()=>k(Xl,"$dfWriting",n),I=()=>k(Yl,"$dfUnsaved",n),R=()=>k(ql,"$dfProtected",n),x=()=>k($s,"$hdConnected",n),v=()=>k(tf,"$hdCylinder",n),$=()=>k(ef,"$hdReading",n),j=()=>k(Jl,"$hdWriting",n),D=()=>k(ev,"$hdUnsaved",n);let U,te,ie=Qe(()=>i()||u()),X=Qe(l),q=Qe(h);function ne(ke,ye){U?.update(ke,ye)}function pe(ke,ye){switch(ye){case 0:te.open().then(function($e){T().insertDisk($e,ke),T().running||T().run()},function($e){console.log("error",$e)});break;case 1:T().ejectDisk(ke);break;default:console.warn("Invalid menu item",ye)}}function he(ke,ye){switch(ye){case 0:te.open().then(function($e){console.log("Attaching hard drive",$e),T().attachHardDrive($e,ke)},function($e){console.log("error",$e)});break;default:console.warn("Invalid menu item",ye)}}var Te=Tp(),Pe=ze(Te);Lt(df(Pe,{}),ke=>te=ke,()=>te);var ge=Z(Pe,2);We(ge,1,"relative z-50 mb-1 flex h-8 bg-gradient-to-t from-primary to-primary/80");var Se=z(ge);ru(Se,{children:(ke,ye)=>{var $e=Ap();$e.__click=[Sp,b,m,y],se(ke,$e)},$$slots:{default:!0}});var Q=Z(Se,2),re=z(Q);ta(re,16,()=>Array(4),ea,(ke,ye,$e)=>{var tt=Et(),vt=ze(tt);{var yt=ve=>{hp(ve,{tag:$e,get disk(){return A()[$e]},get cyl(){return p()[$e]},get motor(){return S()[$e]},get writing(){return P()[$e]},get unsaved(){return I()[$e]},get wp(){return R()[$e]},select:fe=>pe($e,fe)})};Xe(vt,ve=>{_()[$e]&&ve(yt)})}se(ke,tt)});var de=Z(re,2);ta(de,16,()=>Array(4),ea,(ke,ye,$e)=>{var tt=Et(),vt=ze(tt);{var yt=ve=>{pp(ve,{tag:$e,get cyl(){return v()[$e]},get reading(){return $()[$e]},get writing(){return j()[$e]},get unsaved(){return D()[$e]},select:fe=>he($e,fe)})};Xe(vt,ve=>{x()[$e]&&ve(yt)})}se(ke,tt)}),W(Q);var be=Z(Q,2);{var Ie=ke=>{Ti(ke,{src:"icons/halt.png"})};Xe(be,ke=>{d(q)&&ke(Ie)})}var Ce=Z(be,2);{var ue=ke=>{Ti(ke,{src:"icons/debug.png"})};Xe(Ce,ke=>{d(X)&&ke(ue)})}var Re=Z(Ce,2);{var Ke=ke=>{Ti(ke,{src:"icons/mute.png"})};Xe(Re,ke=>{d(ie)&&ke(Ke)})}var M=Z(Re,2);Ep(M,{});var Ve=Z(M,2);Lt(bp(Ve,{}),ke=>U=ke,()=>U),W(ge),se(a,Te);var ct=it({update:ne});return s(),ct}an(["click"]);var xp=Ae('<div class="absolute top-0 left-0 w-full h-full flex overflow-auto"><div class="w-16 mr-1"></div> <div class="bg-gray-500/75 grow h-full overflow-auto"><textarea readonly="" style="resize: none; font-variant-ligatures: none" class="font-azeret text-base focus:border-transparent focus:outline-none focus:ring-0 text-white bg-transparent w-full h-full p-2"></textarea></div></div>');function Pp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Zo,"$MsgConsoleClose",n),u=()=>k(Ut,"$layer",n),l=()=>k(Qo,"$MsgConsoleUpdate",n),h=()=>k(nf,"$retroShell",n);let b=Rt();function m(A){if(A.preventDefault(),A.ctrlKey){switch(A.key){case"k":h().pressCut();break;case"a":h().pressHome();break}return}switch(A.key){case"ArrowUp":h().pressUp();break;case"ArrowDown":h().pressDown();break;case"ArrowLeft":h().pressLeft();break;case"ArrowRight":h().pressRight();break;case"Home":h().pressHome();break;case"End":h().pressEnd();break;case"Backspace":h().pressBackspace();break;case"Delete":h().pressDelete();break;case"Enter":A.shiftKey?h().pressShiftReturn():h().pressReturn();break;case"Tab":h().pressTab();break;default:A.key.length==1&&h().pressKey(A.key.charCodeAt(0))}}jn(()=>(i(),ft),()=>{i()&&le(Ut,ft.none)}),jn(()=>(l(),h(),d(b)),()=>{if(l()){let A=h().getCursorRel();d(b)&&(Go(b,d(b).value=h().getText()),d(b).focus(),d(b).setSelectionRange(d(b).value.length+A-1,d(b).value.length+A),Go(b,d(b).scrollTop=d(b).scrollHeight))}}),oa(),Bt();var y=Et(),T=ze(y);{var _=A=>{var p=xp(),S=Z(z(p),2),P=z(S);Lt(P,I=>He(b,I),()=>d(b)),W(S),W(p),En("keydown",P,m),xt(3,p,()=>Pt),se(A,p)};Xe(T,A=>{u(),Un(ft),Wn(()=>u()===ft.shell)&&A(_)})}se(a,y),it(),s()}var Dp=Ae('<div class="flex h-screen w-screen flex-grow flex-col overflow-clip" role="region"><!></div>');function Op(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(Sn,"$wasm",n),u=()=>k(kn,"$amiga",n),l=()=>k(Qr,"$proxy",n),h=()=>k(Pa,"$initialized",n);function b(R){R.preventDefault(),R.dataTransfer}function m(R){R.preventDefault()}function y(R){}async function T(R){if(R.preventDefault(),!R.dataTransfer||!R.dataTransfer.items||R.dataTransfer.items.length!==1)return;let x=R.dataTransfer.items[0];if(x.kind!=="file")return;const v=x.getAsFile();if(!v)return;const $=v.name;console.log("Dropped file:",$);let j=await v.arrayBuffer(),D=new Uint8Array(j);await v.arrayBuffer();let U=$;switch(console.log("tmp name:",U),console.log("WASM.FS",i().FS),i().FS.writeFile(U,D),console.log("Checking type..."),u().getFileType(U)){case i().FILETYPE_ROM:await _(D);return;case i().FILETYPE_ADF:case i().FILETYPE_EADF:case i().FILETYPE_DMS:case i().FILETYPE_EXE:A(D);return;case i().FILETYPE_HDF:p(D);return;default:console.warn("Unsupported file format");return}}async function _(R){l().addRom(R)}function A(R){le(Jo,R),le(es,"floppy"),le(Ut,ft.dropzone)}function p(R){le(Jo,R),le(es,"harddrive"),le(Ut,ft.dropzone)}var S=Dp(),P=z(S);{var I=R=>{var x=Et(),v=ze(x);zn(v,()=>r.children??wn),se(R,x)};Xe(P,R=>{h()&&R(I)})}W(S),En("dragenter",S,b),En("dragleave",S,y),En("dragover",S,m),En("drop",S,T),se(a,S),it(),s()}var kp=Xt('<path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path>');function Cp(a,r){const n=$t(r,["children","$$slots","$$events","$$legacy"]);sn(a,on({viewBox:"0 0 352 512"},()=>n,{children:(s,i)=>{var u=kp();se(s,u)},$$slots:{default:!0}}))}async function Mp(a,r,n,s){a.preventDefault(),await r().setup(),n()(s.name)}var Ip=Ae('<div class="text-primary-content h-full w-full opacity-50"><!></div>'),$p=Ae('<img alt="Icon"/>'),Np=Ae('<img alt="Icon"/>'),Lp=Ae('<div class="bg-primary/90 rounded-xl p-4"><div class="flex flex-col items-center"><div role="button" tabindex="0"><!></div> <div class="font-azaret text-primary-content text-xl"> </div></div></div>');function gr(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(Jr,"$audio",n),u=()=>k(xn,"$invert",n);let l=me(r,"enabled",3,!1),h=me(r,"selected",7,!1),b=me(r,"icon1",3,"icons/disk.png"),m=me(r,"icon2",3,"icons/disk.png");me(r,"opacity",3,"opacity-50");let y=me(r,"select",3,()=>{}),T=Qe(()=>h()?"opacity-100":"opacity-50"),_=Qe(()=>l()?"opacity-100":"opacity-50");function A(D){D.preventDefault(),l()&&h(!0)}function p(D){D.preventDefault(),h(!1)}var S=Lp(),P=z(S),I=z(P);I.__mousedown=[Mp,i,y,r];var R=z(I);{var x=D=>{var U=Ip(),te=z(U);Cp(te,{}),W(U),se(D,U)},v=(D,U)=>{{var te=X=>{var q=$p();ut(()=>{We(q,1,`${u()??""} ${d(T)??""}`),Ft(q,"src",b())}),se(X,q)},ie=(X,q)=>{{var ne=pe=>{var he=Np();ut(()=>{We(he,1,`${u()??""} ${d(T)??""}`),Ft(he,"src",m())}),se(pe,he)};Xe(X,pe=>{m()!==""&&pe(ne)},q)}};Xe(D,X=>{h()?X(te):X(ie,!1)},U)}};Xe(R,D=>{l()?D(v,!1):D(x)})}W(I);var $=Z(I,2),j=z($,!0);W($),W(P),W(S),ut(()=>{We(I,1,`border-primary-content h-32 w-32 rounded-xl border-2 p-5 ${d(_)??""}`),At(j,r.name)}),En("mouseenter",I,A),En("mouseleave",I,p),se(a,S),it(),s()}an(["mousedown"]);var Up=Ae("<!> <!> <!> <!>",1),Fp=Ae("<!> <!> <!> <!>",1),Bp=Ae('<div class="absolute top-10 left-0 flex w-screen justify-center"><div class="relative flex items-center justify-center space-x-4 rounded-xl p-4"><!></div></div>');function Kp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Jo,"$dragItem",n),u=()=>k(kn,"$amiga",n),l=()=>k(Ut,"$layer",n),h=()=>k(es,"$dragType",n),b=()=>k(Is,"$dfHasDisk",n),m=()=>k(Ms,"$dfConnected",n),y=()=>k($s,"$hdConnected",n);function T(P){i()&&(u().insertDisk(i(),P),u().running||u().run()),le(Ut,ft.none)}function _(P){i()&&(u().attachHardDrive(i(),P),u().running||u().run()),le(Ut,ft.none)}Bt();var A=Et(),p=ze(A);{var S=P=>{var I=Bp(),R=z(I),x=z(R);{var v=j=>{var D=Up(),U=ze(D);const te=_e(()=>b()[0]?"icons/disk.png":"");gr(U,{id:0,icon1:"icons/disk.png",get icon2(){return d(te)},name:"DF0",get enabled(){return m()[0]},select:()=>T(0)});var ie=Z(U,2);const X=_e(()=>b()[1]?"icons/disk.png":"");gr(ie,{id:1,icon1:"icons/disk.png",get icon2(){return d(X)},name:"DF1",get enabled(){return m()[1]},select:()=>T(1)});var q=Z(ie,2);const ne=_e(()=>b()[1]?"icons/disk.png":"");gr(q,{id:2,icon1:"icons/disk.png",get icon2(){return d(ne)},name:"DF2",get enabled(){return m()[2]},select:()=>T(2)});var pe=Z(q,2);const he=_e(()=>b()[1]?"icons/disk.png":"");gr(pe,{id:3,icon1:"icons/disk.png",get icon2(){return d(he)},name:"DF3",get enabled(){return m()[3]},select:()=>T(3)}),se(j,D)},$=j=>{var D=Fp(),U=ze(D);gr(U,{id:0,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD0",get enabled(){return y()[0]},select:()=>_(0)});var te=Z(U,2);gr(te,{id:1,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD1",get enabled(){return y()[1]},select:()=>_(1)});var ie=Z(te,2);gr(ie,{id:2,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD2",get enabled(){return y()[2]},select:()=>_(2)});var X=Z(ie,2);gr(X,{id:3,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD3",get enabled(){return y()[3]},select:()=>_(3)}),se(j,D)};Xe(x,j=>{h()==="floppy"?j(v):j($,!1)})}W(R),W(I),xt(3,I,()=>Pt),se(P,I)};Xe(p,P=>{l()===ft.dropzone&&P(S)})}se(a,A),it(),s()}var Vp=Ae('<div><div class="h-24 w-full border-none flex flex-col justify-center text-lg font-azeret text-center"><p class="p-1"> </p> <p class="p-1"> </p></div></div>');function Hp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Sn,"$wasm",n),u=()=>k(ts,"$errno",n),l=()=>k(rf,"$enums",n),h=()=>k(ns,"$what",n),b=Rt(),m=Rt();let y=Rt(!1),T=Rt(!0);jn(()=>i(),()=>{He(b,i()!=null)}),jn(()=>(u(),d(b),d(y),d(T)),()=>{u()&&d(b)&&!d(y)&&(He(y,!0),setInterval(()=>{He(T,!d(T))},800))}),jn(()=>d(T),()=>{He(m,d(T)?"border-red-600":"border-black")}),oa(),Bt();var _=Et(),A=ze(_);{var p=S=>{var P=Vp(),I=z(P),R=z(I),x=z(R);W(R);var v=Z(R,2),$=z(v,!0);W(v),W(I),W(P),ut(j=>{We(P,1,`relative flex justify-center bg-black text-red-600 border-[10px] ${d(m)??""}`),At(x,`Emulator failure. Uncaught exception ${u()??""} (${j??""})`),At($,h())},[()=>(l(),u(),Wn(()=>l().ErrorCodeKey(u())))],_e),se(S,P)};Xe(A,S=>{d(y)&&S(p)})}se(a,_),it(),s()}function Gp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Sn,"$wasm",n),u=()=>k(Jr,"$audio",n),l=()=>k(kn,"$amiga",n),h=()=>k(en,"$config",n),b=()=>k(jo,"$memory",n),m=()=>k(Mu,"$df0",n),y=()=>k(Iu,"$df1",n),T=()=>k($u,"$df2",n),_=()=>k(Nu,"$df3",n),A=()=>k(Lu,"$diskController",n),p=()=>k(Uu,"$hd0",n),S=()=>k(Fu,"$hd1",n),P=()=>k(Bu,"$hd2",n),I=()=>k(Ku,"$hd3",n),R=()=>k(Vu,"$paula",n),x=()=>k(Pa,"$initialized",n),v=()=>k(Pi,"$warp",n),$=()=>k(el,"$MsgNone",n),j=()=>k(Xo,"$MsgConfig",n),D=()=>k(Jc,"$MsgPower",n),U=()=>k(Qc,"$MsgRun",n),te=()=>k(Zc,"$MsgPause",n),ie=()=>k(Xc,"$MsgStep",n),X=()=>k(Yc,"$MsgReset",n),q=()=>k(qc,"$MsgShutdown",n),ne=()=>k(zc,"$MsgAbort",n),pe=()=>k(Wc,"$MsgWarp",n),he=()=>k(jc,"$MsgTrack",n),Te=()=>k(Gc,"$MsgMute",n),Pe=()=>k(Hc,"$MsgPowerLedOn",n),ge=()=>k(Vc,"$MsgPowerLedDim",n),Se=()=>k(Kc,"$MsgPowerLedOff",n),Q=()=>k(Zo,"$MsgConsoleClose",n),re=()=>k(Qo,"$MsgConsoleUpdate",n),de=()=>k(Bc,"$MsgConsoleDebugger",n),be=()=>k(Fc,"$MsgScriptDone",n),Ie=()=>k(Uc,"$MsgScriptPause",n),Ce=()=>k(Lc,"$MsgScriptAbort",n),ue=()=>k(Nc,"$MsgScriptWakeup",n),Re=()=>k($c,"$MsgVideoFormat",n),Ke=()=>k(Ic,"$MsgOverclocking",n),M=()=>k(Mc,"$MsgBreakpointReached",n),Ve=()=>k(Cc,"$MsgBreakpointUpdated",n),ct=()=>k(kc,"$MsgWatchpointReached",n),ke=()=>k(Oc,"$MsgWatchpointUpdated",n),ye=()=>k(Dc,"$MsgCatchpointReached",n),$e=()=>k(Pc,"$MsgCatchpointUpdated",n),tt=()=>k(xc,"$MsgSwTrapReached",n),vt=()=>k(Rc,"$MsgCpuHalt",n),yt=()=>k(Tc,"$MsgCopperBpReached",n),ve=()=>k(Ac,"$MsgCopperBpUpdated",n),fe=()=>k(Sc,"$MsgCopperWpReached",n),bt=()=>k(Ec,"$MsgCopperWpUpdated",n),wt=()=>k(wc,"$MsgViewport",n),Zt=()=>k(bc,"$MsgMemLayout",n),un=()=>k(yc,"$MsgDriveConnect",n),Mn=()=>k(_c,"$MsgDriveSelect",n),cn=()=>k(pc,"$MsgDriveRead",n),ln=()=>k(mc,"$MsgDriveWrite",n),jt=()=>k(hc,"$MsgDriveLed",n),Kn=()=>k(gc,"$MsgDriveMotor",n),An=()=>k(vc,"$MsgDriveStep",n),Qn=()=>k(dc,"$MsgDrivePoll",n),tn=()=>k(fc,"$MsgDiskInsert",n),fn=()=>k(lc,"$MsgDiskEject",n),Tn=()=>k(cc,"$MsgDiskProtected",n),dn=()=>k(uc,"$MsgHdcConnect",n),Qt=()=>k(sc,"$MsgHdcState",n),Fe=()=>k(oc,"$MsgHdrStep",n),Ht=()=>k(ic,"$MsgHdrRead",n),In=()=>k(ac,"$MsgHdrWrite",n),Ne=()=>k(rc,"$MsgHdrIdle",n),oe=()=>k(nc,"$MsgCtrlAmigaAmiga",n),Ge=()=>k(Wo,"$MsgShaking",n),ht=()=>k(tc,"$MsgSerIn",n),Kt=()=>k(ec,"$MsgSerOut",n),za=()=>k(Ju,"$MsgAutoSnapshotTaken",n),la=()=>k(Qu,"$MsgUserSnapshotTaken",n),Ji=()=>k(Zu,"$MsgSnapshotRestored",n),eo=()=>k(Xu,"$MsgRecordingStarted",n),ur=()=>k(Yu,"$MsgRecordingStopped",n),cr=()=>k(qu,"$MsgRecordingAborted",n),fa=()=>k(zu,"$MsgDmaDebug",n),Lr=()=>k(Wu,"$MsgSrvState",n),mt=()=>k(ju,"$MsgSrvReceive",n),Dt=()=>k(Gu,"$MsgSrvSend",n),to=()=>k(Hu,"$MsgAlarm",n);sr(()=>{console.log("Proxy::onMount()"),Qd(Sn,Wn(i).processMsg=Nn,Wn(i)),gn()});async function Ar(qe){await u().setup();try{console.log("Showcase:",qe.title),l().powerOff(),vn(qe.roms),h().set(w.CHIP_RAM,qe.memory[0]),h().set(w.SLOW_RAM,qe.memory[1]),h().set(w.FAST_RAM,qe.memory[2]),h().set(w.DF1,qe.adf.length>1);for(let Be=0;Be<qe.adf.length;Be++)await Vn(qe.adf[Be],Be);h().set(w.WARP_MODE,qe.warp),console.log("Launchine emulator..."),l().run(),qe.title=="Absolute Inebriation"&&(console.log("Scheduling disk change (inebriation)"),l().setAlarmAbs(3e3,1)),qe.title=="Eon"&&(console.log("Scheduling disk change (eon)"),l().setAlarmAbs(7600,2)),console.log("Done")}catch(Be){throw console.log("CATCHED "+Be),Be}}function lr(){console.error("Exception "+l().errorCode()+": "+l().what())}async function Vn(qe,Be){try{console.log("Fetching adf/"+qe);let hn=await(await fetch("adf/"+qe)).arrayBuffer(),Xa=new Uint8Array(hn);l().insertDisk(Xa,Be),console.log("Disk inserted")}catch{lr()}}async function Tr(qe){if(qe==0)return b().deleteRom(),b().deleteExt(),le(tl,qe),!0;try{const Be=await Dn.roms.get(qe);return Be?(Be?.rom?(b().loadRom(Be.rom,Be.rom.length),le(tl,qe)):b().deleteRom(),Be?.ext?b().loadExt(Be.ext,Be.ext.length):b().deleteExt(),!0):!1}catch(Be){return console.log("installRom failed: ",Be),!1}}async function vn(qe){for(const Be of qe)if(await Tr(Be))return!0;return!1}async function Jn(qe){let Be=b().analyzeRom(qe,qe.byteLength);if(Be.crc32){try{const Ot=Be.title,hn=await Dn.roms.add({crc32:Be.crc32,title:Be.title,version:Be.version,released:Be.released,model:Be.model,isAros:Be.vendor==i().RomVendor.AROS,isDiag:Be.vendor==i().RomVendor.DIAG,isCommodore:Be.vendor==i().RomVendor.COMMODORE,isHyperion:Be.vendor==i().RomVendor.HYPERION,isUnknown:Be.vendor==i().RomVendor.UNKNOWN,isPatched:Be.isPatched,rom:qe,ext:null,extStart:0});console.log(`${Ot} successfully added with id ${hn}`)}catch(Ot){throw console.log("Failed to add Kickstart",Ot),Ot}le(Ut,ft.kickstart)}}async function $n(){await Tr(lt.Aros)}async function Rr(){await Tr(lt.DiagROM)}function qa(){gn()}function gn(){console.log("Creating proxies..."),le(Hl,new(i()).AgnusProxy),le(Cs,new(i()).AudioPortProxy),le(Vl,new(i()).CPUProxy),le(Ll,new(i()).DeniseProxy),le(Mu,new(i()).DriveProxy(0)),le(Iu,new(i()).DriveProxy(1)),le($u,new(i()).DriveProxy(2)),le(Nu,new(i()).DriveProxy(3)),le(Lu,new(i()).DiskControllerProxy),le(rf,new(i()).EnumProxy),le(Uu,new(i()).HardDriveProxy(0)),le(Fu,new(i()).HardDriveProxy(1)),le(Bu,new(i()).HardDriveProxy(2)),le(Ku,new(i()).HardDriveProxy(3)),le(Os,new(i()).JoystickProxy(1)),le(ks,new(i()).JoystickProxy(2)),le(Ul,new(i()).KeyboardProxy),le(jo,new(i()).MemoryProxy),le(Nl,new(i()).MouseProxy(1)),le(Fl,new(i()).MouseProxy(2)),le(Vu,new(i()).PaulaProxy),le(nf,new(i()).RetroShellProxy),le(kn,new(i()).AmigaProxy),console.log("Launching the emulator..."),l().launch(),console.log("Configuring the emulator..."),l().configure(i().OPT_AGNUS_REVISION,i().AGNUS_ECS_2MB),le(Bl,{ArrowLeft:i().PULL_LEFT,ArrowRight:i().PULL_RIGHT,ArrowUp:i().PULL_UP,ArrowDown:i().PULL_DOWN,ControlRight:i().PRESS_FIRE,Space:i().PRESS_FIRE}),le(Kl,{KeyS:i().PULL_LEFT,KeyD:i().PULL_RIGHT,KeyE:i().PULL_UP,KeyX:i().PULL_DOWN,KeyC:i().RELEASE_FIRE}),(async()=>(console.log("Installing Roms..."),vn([3304125791,2798523958,3283989056,1062194186]),console.log("Initialization completed"),le(Pa,!0)))()}function gt(){if(!x())return;const qe=A().getState(),Be=A().getSelected(),Ot=qe==i().DRIVE_DMA_WRITE;le(sa,l().poweredOn()),le(Ps,l().isRunning()),le(Pi,l().isWarping()),le(Gl,h().getNum(w.WARP_MODE)),le(Wl,l().isTracking()),le(jl,R().isMuted()||v()),le(zl,l().isHalted()),le(Ms,[m().isConnected(),y().isConnected(),T().isConnected(),_().isConnected()]),le(Is,[m().hasDisk(),y().hasDisk(),T().hasDisk(),_().hasDisk()]),le(Zl,[m().motor(),y().motor(),T().motor(),_().motor()]),le(Xl,[Be==0&&Ot,Be==1&&Ot,Be==2&&Ot,Be==3&&Ot]),le(Yl,[m().hasModifiedDisk(),y().hasModifiedDisk(),T().hasModifiedDisk(),_().hasModifiedDisk()]),le(ql,[m().hasProtectedDisk(),y().hasProtectedDisk(),T().hasProtectedDisk(),_().hasProtectedDisk()]),le(Ql,[m().currentCyl(),y().currentCyl(),T().currentCyl(),_().currentCyl()]),le($s,[p().isConnected(),S().isConnected(),P().isConnected(),I().isConnected()]),le(tf,[p().currentCyl(),S().currentCyl(),P().currentCyl(),I().currentCyl()]),le(ef,[p().isReading(),S().isReading(),P().isReading(),I().isReading()]),le(Jl,[p().isWriting(),S().isWriting(),P().isWriting(),I().isWriting()])}function Nn(qe){switch(qe.type?.value){case i().MSG_NONE:Le(el,$());break;case i().MSG_CONFIG:Le(Xo,j()),le(en,h()),gt();break;case i().MSG_POWER:Le(Jc,D()),gt();break;case i().MSG_RUN:Le(Qc,U()),gt();break;case i().MSG_PAUSE:Le(Zc,te()),gt();break;case i().MSG_STEP:Le(Xc,ie());break;case i().MSG_RESET:Le(Yc,X()),gt();break;case i().MSG_SHUTDOWN:Le(qc,q());break;case i().MSG_ABORT:Le(zc,ne());break;case i().MSG_WARP:Le(Wc,pe()),gt();break;case i().MSG_TRACK:Le(jc,he()),gt();break;case i().MSG_MUTE:Le(Gc,Te()),gt();break;case i().MSG_POWER_LED_ON:Le(Hc,Pe());break;case i().MSG_POWER_LED_DIM:Le(Vc,ge());break;case i().MSG_POWER_LED_OFF:Le(Kc,Se());break;case i().MSG_CONSOLE_CLOSE:Le(Zo,Q());break;case i().MSG_CONSOLE_UPDATE:Le(Qo,re());break;case i().MSG_CONSOLE_DEBUGGER:Le(Bc,de());break;case i().MSG_SCRIPT_DONE:Le(Fc,be());break;case i().MSG_SCRIPT_PAUSE:Le(Uc,Ie());break;case i().MSG_SCRIPT_ABORT:Le(Lc,Ce());break;case i().MSG_SCRIPT_WAKEUP:Le(Nc,ue());break;case i().MSG_VIDEO_FORMAT:Le($c,Re());break;case i().MSG_OVERCLOCKING:Le(Ic,Ke());break;case i().MSG_BREAKPOINT_REACHED:Le(Mc,M());break;case i().MSG_BREAKPOINT_UPDATED:Le(Cc,Ve());break;case i().MSG_WATCHPOINT_REACHED:Le(kc,ct());break;case i().MSG_WATCHPOINT_UPDATED:Le(Oc,ke());break;case i().MSG_CATCHPOINT_REACHED:Le(Dc,ye());break;case i().MSG_CATCHPOINT_UPDATED:Le(Pc,$e());break;case i().MSG_SWTRAP_REACHED:Le(xc,tt());break;case i().MSG_CPU_HALT:Le(Rc,vt()),gt();break;case i().MSG_COPPERBP_REACHED:Le(Tc,yt());break;case i().MSG_COPPERBP_UPDATED:Le(Ac,ve());break;case i().MSG_COPPERWP_REACHED:Le(Sc,fe());break;case i().MSG_COPPERWP_UPDATED:Le(Ec,bt());break;case i().MSG_VIEWPORT:Le(wc,wt());break;case i().MSG_MEM_LAYOUT:Le(bc,Zt());break;case i().MSG_DRIVE_CONNECT:Le(yc,un()),gt();break;case i().MSG_DRIVE_SELECT:Le(_c,Mn());break;case i().MSG_DRIVE_READ:Le(pc,cn());break;case i().MSG_DRIVE_WRITE:Le(mc,ln()),gt();break;case i().MSG_DRIVE_LED:Le(hc,jt());break;case i().MSG_DRIVE_MOTOR:Le(gc,Kn()),gt();break;case i().MSG_DRIVE_STEP:Le(vc,An()),gt(),u().playStepSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DRIVE_POLL:Le(dc,Qn()),gt(),u().playStepSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DISK_INSERT:Le(fc,tn()),gt(),u().playInsertSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DISK_EJECT:Le(lc,fn()),gt(),u().playEjectSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DISK_PROTECTED:Le(cc,Tn()),gt();break;case i().MSG_HDC_CONNECT:Le(uc,dn()),gt();break;case i().MSG_HDC_STATE:Le(sc,Qt()),gt();break;case i().MSG_HDR_STEP:Le(oc,Fe()),u().playClickSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_HDR_READ:Le(ic,Ht()),gt();break;case i().MSG_HDR_WRITE:Le(ac,In()),gt();break;case i().MSG_HDR_IDLE:Le(rc,Ne()),gt();break;case i().MSG_CTRL_AMIGA_AMIGA:Le(nc,oe());break;case i().MSG_SHAKING:Le(Wo,Ge());break;case i().MSG_SER_IN:Le(tc,ht());break;case i().MSG_SER_OUT:Le(ec,Kt());break;case i().MSG_AUTO_SNAPSHOT_TAKEN:Le(Ju,za());break;case i().MSG_USER_SNAPSHOT_TAKEN:Le(Qu,la());break;case i().MSG_SNAPSHOT_RESTORED:Le(Zu,Ji()),gt();break;case i().MSG_RECORDING_STARTED:Le(Xu,eo());break;case i().MSG_RECORDING_STOPPED:Le(Yu,ur());break;case i().MSG_RECORDING_ABORTED:Le(qu,cr());break;case i().MSG_DMA_DEBUG:Le(zu,fa()),le($l,qe.value);break;case i().MSG_SRV_STATE:Le(Wu,Lr());break;case i().MSG_SRV_RECEIVE:Le(ju,mt());break;case i().MSG_SRV_SEND:Le(Gu,Dt());break;case i().MSG_ALARM:Le(Hu,to()),console.log("Alarm received: ",qe.value),qe.value==1&&(console.log("Inserting disk 2..."),Vn("AbsoluteInebriation2.adf",0)),qe.value==2&&(console.log("Inserting disk 2..."),Vn("Eon2.adf",0));break}}Bt(),Ye(r,"runShowcase",Ar),Ye(r,"reportException",lr),Ye(r,"insert",Vn),Ye(r,"installRom",Tr),Ye(r,"installRoms",vn),Ye(r,"addRom",Jn),Ye(r,"installAros",$n),Ye(r,"installDiagRom",Rr),Ye(r,"runtimeInitialized",qa),Ye(r,"onRuntimeInitialized",gn),Ye(r,"updateStateVariables",gt),Ye(r,"processMsg",Nn);var Ya=it({runShowcase:Ar,reportException:lr,insert:Vn,installRom:Tr,installRoms:vn,addRom:Jn,installAros:$n,installDiagRom:Rr,runtimeInitialized:qa,onRuntimeInitialized:gn,updateStateVariables:gt,processMsg:Nn});return s(),Ya}function jp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Cs,"$audioPort",n),u=()=>k(Sn,"$wasm",n);let l,h,b,m,y,T=0;async function _(){if(l)return;console.log("Setting up audio..."),l=new AudioContext,l.onstatechange=()=>console.log("Audio Context: state = "+l.state);let $=l.createGain();$.gain.value=1,$.connect(l.destination),console.log("Audio context: ",l.state),i().setSampleRate(l.sampleRate),await l.audioWorklet.addModule("js/audio-processor.js"),console.log("Audio Worklet module loaded");const j=new AudioWorkletNode(l,"audio-processor",{outputChannelCount:[2],processorOptions:{pointers:[i().leftChannelBuffer(),i().rightChannelBuffer()],buffer:u().HEAPF32.buffer,length:2048}});console.log("Audio Worklet Node created"),j.port.onmessage=D=>{i().updateAudio(D.data)},j.connect($),l.state==="suspended"&&await l.resume(),await A()}async function A(){console.log("Loading sounds..."),h||(h=await x("sounds/insert.mp3")),b||(b=await x("sounds/eject.mp3")),m||(m=await x("sounds/step.mp3")),y||(y=await x("sounds/stephd.mp3"))}function p($,j){R(h,$)}function S($,j){R(b,$)}function P($,j){R(m,$)}function I($,j){R(y,$)}async function R($,j,D){if($==null||T>=3)return;const U=l.createGain();U.gain.value=.004*j,U.connect(l.destination);const te=l.createBufferSource();te.buffer=$,te.addEventListener("ended",()=>{T--}),te.connect(U),te.start(),T++}async function x($){let D=await(await fetch($)).arrayBuffer();return await l.decodeAudioData(D)}Bt(),Ye(r,"setup",_),Ye(r,"playInsertSound",p),Ye(r,"playEjectSound",S),Ye(r,"playStepSound",P),Ye(r,"playClickSound",I);var v=it({setup:_,playInsertSound:p,playEjectSound:S,playStepSound:P,playClickSound:I});return s(),v}function Wp(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(kn,"$amiga",n),u=()=>k(Sn,"$wasm",n),l=()=>k(en,"$config",n);let h=[{opt:w.WARP_MODE,default:[Nt.auto].toString()},{opt:w.THEME,default:Ct.default.toString()},{opt:w.CANVAS_BORDER,default:"0"},{opt:w.SHAKING,default:"1"}],b=[{opt:w.CPU_REVISION,default:"0"},{opt:w.AGNUS_REVISION,default:"0"},{opt:w.DENISE_REVISION,default:"0"},{opt:w.RTC_MODEL,default:"0"},{opt:w.CHIP_RAM,default:"512"},{opt:w.SLOW_RAM,default:"512"},{opt:w.FAST_RAM,default:"0"},{opt:w.BANK_MAP,default:"0"},{opt:w.INIT_PATTERN,default:"0"},{opt:w.UNMAPPED,default:"0"},{opt:w.SLOW_RAM_MIRROR,default:"1"},{opt:w.SLOW_RAM_DELAY,default:"1"},{opt:w.DF0,default:"1"},{opt:w.DF1,default:"1"},{opt:w.DF2,default:"0"},{opt:w.DF3,default:"0"},{opt:w.HD0,default:"1"},{opt:w.HD1,default:"0"},{opt:w.HD2,default:"0"},{opt:w.HD3,default:"0"}],m=[{opt:w.BLITTER_ACCURACY,default:"2"},{opt:w.TODBUG,default:"1"},{opt:w.PTR_DROPS,default:"1"},{opt:w.ECLOCK_SYNCING,default:"1"},{opt:w.DRIVE_SPEED,default:"1"},{opt:w.DRIVE_MECHANICS,default:"1"},{opt:w.OPT_LOCK_DSKSYNC,default:"0"},{opt:w.OPT_AUTO_DSKSYNC,default:"0"},{opt:w.CLX_SPR_SPR,default:"0"},{opt:w.CLX_SPR_PLF,default:"0"},{opt:w.CLX_PLF_PLF,default:"0"},{opt:w.ACCURATE_KEYBOARD,default:"1"}],y=[{opt:w.ASR,default:"0"},{opt:w.BUFFER_SIZE,default:"16384"},{opt:w.AUDVOL0,default:"100"},{opt:w.AUDVOL1,default:"100"},{opt:w.AUDVOL2,default:"100"},{opt:w.AUDVOL3,default:"100"},{opt:w.AUDVOLL,default:"50"},{opt:w.AUDVOLR,default:"50"},{opt:w.STEP_VOLUME,default:"50"},{opt:w.POLL_VOLUME,default:"50"},{opt:w.INSERT_VOLUME,default:"50"},{opt:w.EJECT_VOLUME,default:"50"}],T=[{opt:w.RENDER_MODE,default:Da.smooth.toString()},{opt:w.FLICKER_WEIGHT,default:"0"},{opt:w.PALETTE,default:"0"},{opt:w.BRIGHTNESS,default:"50"},{opt:w.CONTRAST,default:"100"},{opt:w.SATURATION,default:"50"}],_=Ct.default,A=0,p=1,S=Da.smooth;Fs(()=>Dn.opts.toArray()).subscribe(ve=>{}),sr(()=>{console.log("Config::onMount()"),I(),he()});async function I(){await R(),await x(),await v(),await $(),await j()}async function R(){for(const ve of h)await D(ve.opt,ve.default)}async function x(){for(const ve of b)await D(ve.opt,ve.default)}async function v(){for(const ve of m)await D(ve.opt,ve.default)}async function $(){for(const ve of y)await D(ve.opt,ve.default)}async function j(){for(const ve of T)await D(ve.opt,ve.default)}async function D(ve,fe){try{await Dn.opts.add({key:ve,value:fe})}catch{}}async function U(){await te(),await ie(),await X(),await q(),await ne()}async function te(){for(const ve of h)await pe(ve.opt);await R(),await Te()}async function ie(){for(const ve of b)await pe(ve.opt);await x(),await Pe()}async function X(){for(const ve of m)await pe(ve.opt);await v(),await ge()}async function q(){for(const ve of y)await pe(ve.opt);await $(),await Se()}async function ne(){for(const ve of T)await pe(ve.opt);await j(),await Q()}async function pe(ve){try{const fe=await Dn.opts.delete(ve)}catch{console.log("Failed to remove entry",ve)}}async function he(){console.log("Loading settings..."),await Te(),await Pe(),await ge(),await Se(),await Q()}async function Te(){for(const ve of h)await re(ve.opt)}async function Pe(){for(const ve of b)await re(ve.opt)}async function ge(){for(const ve of m)await re(ve.opt)}async function Se(){for(const ve of y)await re(ve.opt)}async function Q(){for(const ve of T)await re(ve.opt)}async function re(ve){try{const fe=await Dn.opts.get(ve);fe!==void 0&&ye(ve,fe.value)}catch{}}async function de(){await be(),await Ie(),await Ce(),await ue(),await Re()}async function be(){for(const ve of h)await Ke(ve.opt)}async function Ie(){for(const ve of b)await Ke(ve.opt)}async function Ce(){for(const ve of m)await Ke(ve.opt)}async function ue(){for(const ve of y)await Ke(ve.opt)}async function Re(){for(const ve of T)await Ke(ve.opt)}async function Ke(ve){const fe=Ve(ve);try{const bt=await Dn.opts.put({key:ve,value:fe})}catch{}}function M(ve){if(ve==null)throw console.warn("Value is undefined or null"),new Error("Value is undefined or null");return ve}function Ve(ve){switch(ve){case w.THEME:return[_].toString();case w.CANVAS_BORDER:return A.toString();case w.SHAKING:return p.toString();case w.CPU_REVISION:return i().getConfig(M(u().OPT_CPU_REVISION)).toString();case w.CPU_SPEED:return i().getConfig(M(u().OPT_CPU_OVERCLOCKING)).toString();case w.WARP_MODE:return i().getConfig(M(u().OPT_AMIGA_WARP_MODE)).toString();case w.AGNUS_REVISION:return i().getConfig(M(u().OPT_AGNUS_REVISION)).toString();case w.DENISE_REVISION:return i().getConfig(M(u().OPT_DENISE_REVISION)).toString();case w.RTC_MODEL:return i().getConfig(M(u().OPT_RTC_MODEL)).toString();case w.CHIP_RAM:return i().getConfig(M(u().OPT_MEM_CHIP_RAM)).toString();case w.SLOW_RAM:return i().getConfig(M(u().OPT_MEM_SLOW_RAM)).toString();case w.FAST_RAM:return i().getConfig(M(u().OPT_MEM_FAST_RAM)).toString();case w.BANK_MAP:return i().getConfig(M(u().OPT_MEM_BANKMAP)).toString();case w.INIT_PATTERN:return i().getConfig(M(u().OPT_MEM_RAM_INIT_PATTERN)).toString();case w.UNMAPPED:return i().getConfig(M(u().OPT_MEM_UNMAPPING_TYPE)).toString();case w.SLOW_RAM_MIRROR:return i().getConfig(M(u().OPT_MEM_SLOW_RAM_MIRROR)).toString();case w.SLOW_RAM_DELAY:return i().getConfig(M(u().OPT_MEM_SLOW_RAM_DELAY)).toString();case w.DF0:return i().getConfigId(M(u().OPT_DRIVE_CONNECT),0).toString();case w.DF1:return i().getConfigId(M(u().OPT_DRIVE_CONNECT),1).toString();case w.DF2:return i().getConfigId(M(u().OPT_DRIVE_CONNECT),2).toString();case w.DF3:return i().getConfigId(M(u().OPT_DRIVE_CONNECT),3).toString();case w.HD0:return i().getConfigId(M(u().OPT_HDC_CONNECT),0).toString();case w.HD1:return i().getConfigId(M(u().OPT_HDC_CONNECT),1).toString();case w.HD2:return i().getConfigId(M(u().OPT_HDC_CONNECT),2).toString();case w.HD3:return i().getConfigId(M(u().OPT_HDC_CONNECT),3).toString();case w.BLITTER_ACCURACY:return i().getConfig(M(u().OPT_BLITTER_ACCURACY)).toString();case w.TODBUG:return i().getConfig(M(u().OPT_CIA_TODBUG)).toString();case w.PTR_DROPS:return i().getConfig(M(u().OPT_AGNUS_PTR_DROPS)).toString();case w.ECLOCK_SYNCING:return i().getConfig(M(u().OPT_CIA_ECLOCK_SYNCING)).toString();case w.DRIVE_SPEED:return i().getConfig(M(u().OPT_DC_SPEED)).toString();case w.DRIVE_MECHANICS:return i().getConfig(M(u().OPT_DRIVE_MECHANICS)).toString();case w.OPT_LOCK_DSKSYNC:return i().getConfig(M(u().OPT_DC_LOCK_DSKSYNC)).toString();case w.OPT_AUTO_DSKSYNC:return i().getConfig(M(u().OPT_DC_AUTO_DSKSYNC)).toString();case w.CLX_SPR_SPR:return i().getConfig(M(u().OPT_DENISE_CLX_SPR_SPR)).toString();case w.CLX_SPR_PLF:return i().getConfig(M(u().OPT_DENISE_CLX_SPR_PLF)).toString();case w.CLX_PLF_PLF:return i().getConfig(M(u().OPT_DENISE_CLX_PLF_PLF)).toString();case w.ACCURATE_KEYBOARD:return i().getConfig(M(u().OPT_KBD_ACCURACY)).toString();case w.SAMPLING_METHOD:return i().getConfig(M(u().OPT_AUD_SAMPLING_METHOD)).toString();case w.FILTER_TYPE:return i().getConfig(M(u().OPT_AUD_FILTER_TYPE)).toString();case w.BUFFER_SIZE:return i().getConfig(M(u().OPT_AUD_BUFFER_SIZE)).toString();case w.ASR:return i().getConfig(M(u().OPT_AUD_ASR)).toString();case w.AUDVOL0:return i().getConfig(M(u().OPT_AUD_VOL0)).toString();case w.AUDVOL1:return i().getConfig(M(u().OPT_AUD_VOL1)).toString();case w.AUDVOL2:return i().getConfig(M(u().OPT_AUD_VOL2)).toString();case w.AUDVOL3:return i().getConfig(M(u().OPT_AUD_VOL3)).toString();case w.AUDVOLL:return i().getConfig(M(u().OPT_AUD_VOLL)).toString();case w.AUDVOLR:return i().getConfig(M(u().OPT_AUD_VOLR)).toString();case w.STEP_VOLUME:return i().getConfigId(M(u().OPT_DRIVE_STEP_VOLUME),0).toString();case w.POLL_VOLUME:return i().getConfigId(M(u().OPT_DRIVE_POLL_VOLUME),0).toString();case w.INSERT_VOLUME:return i().getConfigId(M(u().OPT_DRIVE_INSERT_VOLUME),0).toString();case w.EJECT_VOLUME:return i().getConfigId(M(u().OPT_DRIVE_EJECT_VOLUME),0).toString();case w.RENDER_MODE:return S.toString();case w.PALETTE:return i().getConfig(M(u().OPT_MON_PALETTE)).toString();case w.BRIGHTNESS:return i().getConfig(M(u().OPT_MON_BRIGHTNESS)).toString();case w.CONTRAST:return i().getConfig(M(u().OPT_MON_CONTRAST)).toString();case w.SATURATION:return i().getConfig(M(u().OPT_MON_SATURATION)).toString();case w.FLICKER_WEIGHT:return i().getConfig(M(u().OPT_MON_FLICKER_WEIGHT)).toString();default:return console.warn("get: Invalid option: ",ve),"???"}}function ct(ve){return Number(Ve(ve))}function ke(ve){return ct(ve)!=0}function ye(ve,fe){switch(ve){case w.THEME:vt(Number(fe));break;case w.CANVAS_BORDER:A=Number(fe);break;case w.SHAKING:p=Number(fe);break;case w.CPU_REVISION:i().configure(M(u().OPT_CPU_REVISION),Number(fe));break;case w.CPU_SPEED:i().configure(M(u().OPT_CPU_OVERCLOCKING),Number(fe));break;case w.WARP_MODE:i().configure(M(u().OPT_AMIGA_WARP_MODE),Number(fe));break;case w.AGNUS_REVISION:i().configure(M(u().OPT_AGNUS_REVISION),Number(fe));break;case w.DENISE_REVISION:i().configure(M(u().OPT_DENISE_REVISION),Number(fe));break;case w.RTC_MODEL:i().configure(M(u().OPT_RTC_MODEL),Number(fe));break;case w.CHIP_RAM:i().configure(M(u().OPT_MEM_CHIP_RAM),Number(fe));break;case w.SLOW_RAM:i().configure(M(u().OPT_MEM_SLOW_RAM),Number(fe));break;case w.FAST_RAM:i().configure(M(u().OPT_MEM_FAST_RAM),Number(fe));break;case w.BANK_MAP:i().configure(M(u().OPT_MEM_BANKMAP),Number(fe));break;case w.INIT_PATTERN:i().configure(M(u().OPT_MEM_RAM_INIT_PATTERN),Number(fe));break;case w.UNMAPPED:i().configure(M(u().OPT_MEM_UNMAPPING_TYPE),Number(fe));break;case w.SLOW_RAM_MIRROR:i().configure(M(u().OPT_MEM_SLOW_RAM_MIRROR),Number(fe));break;case w.SLOW_RAM_DELAY:i().configure(M(u().OPT_MEM_SLOW_RAM_DELAY),Number(fe));break;case w.DF0:break;case w.DF1:i().configureId(M(u().OPT_DRIVE_CONNECT),Number(fe),1),Number(fe)==0&&i().configureId(M(u().OPT_DRIVE_CONNECT),0,2),Number(fe)==0&&i().configureId(M(u().OPT_DRIVE_CONNECT),0,3);break;case w.DF2:Number(fe)==1&&i().configureId(M(u().OPT_DRIVE_CONNECT),1,1),i().configureId(M(u().OPT_DRIVE_CONNECT),Number(fe),2),Number(fe)==0&&i().configureId(M(u().OPT_DRIVE_CONNECT),0,3);break;case w.DF3:Number(fe)==1&&i().configureId(M(u().OPT_DRIVE_CONNECT),1,1),Number(fe)==1&&i().configureId(M(u().OPT_DRIVE_CONNECT),1,2),i().configureId(M(u().OPT_DRIVE_CONNECT),Number(fe),3);break;case w.HD0:i().configureId(M(u().OPT_HDC_CONNECT),0,fe);break;case w.HD1:i().configureId(M(u().OPT_HDC_CONNECT),1,fe);break;case w.HD2:i().configureId(M(u().OPT_HDC_CONNECT),2,fe);break;case w.HD3:i().configureId(M(u().OPT_HDC_CONNECT),3,fe);break;case w.BLITTER_ACCURACY:i().configure(M(u().OPT_BLITTER_ACCURACY),Number(fe));break;case w.TODBUG:i().configure(M(u().OPT_CIA_TODBUG),Number(fe));break;case w.PTR_DROPS:i().configure(M(u().OPT_AGNUS_PTR_DROPS),Number(fe));break;case w.ECLOCK_SYNCING:i().configure(M(u().OPT_CIA_ECLOCK_SYNCING),Number(fe));break;case w.DRIVE_SPEED:i().configure(M(u().OPT_DC_SPEED),Number(fe));break;case w.DRIVE_MECHANICS:i().configureId(M(u().OPT_DRIVE_MECHANICS),0,Number(fe)),i().configureId(M(u().OPT_DRIVE_MECHANICS),1,Number(fe)),i().configureId(M(u().OPT_DRIVE_MECHANICS),2,Number(fe)),i().configureId(M(u().OPT_DRIVE_MECHANICS),3,Number(fe));break;case w.OPT_LOCK_DSKSYNC:i().configure(M(u().OPT_DC_LOCK_DSKSYNC),Number(fe));break;case w.OPT_AUTO_DSKSYNC:i().configure(M(u().OPT_DC_AUTO_DSKSYNC),Number(fe));break;case w.CLX_SPR_SPR:i().configure(M(u().OPT_DENISE_CLX_SPR_SPR),Number(fe));break;case w.CLX_SPR_PLF:i().configure(M(u().OPT_DENISE_CLX_SPR_PLF),Number(fe));break;case w.CLX_PLF_PLF:i().configure(M(u().OPT_DENISE_CLX_PLF_PLF),Number(fe));break;case w.ACCURATE_KEYBOARD:i().configure(M(u().OPT_KBD_ACCURACY),Number(fe));break;case w.SAMPLING_METHOD:i().configure(M(u().OPT_AUD_SAMPLING_METHOD),Number(fe));break;case w.FILTER_TYPE:i().configure(M(u().OPT_AUD_FILTER_TYPE),Number(fe));break;case w.BUFFER_SIZE:i().configure(M(u().OPT_AUD_BUFFER_SIZE),Number(fe));break;case w.ASR:i().configure(M(u().OPT_AUD_ASR),Number(fe));break;case w.AUDVOL0:i().configure(M(u().OPT_AUD_VOL0),Number(fe));break;case w.AUDVOL1:i().configure(M(u().OPT_AUD_VOL1),Number(fe));break;case w.AUDVOL2:i().configure(M(u().OPT_AUD_VOL2),Number(fe));break;case w.AUDVOL3:i().configure(M(u().OPT_AUD_VOL3),Number(fe));break;case w.AUDVOLL:i().configure(M(u().OPT_AUD_VOLL),Number(fe));break;case w.AUDVOLR:i().configure(M(u().OPT_AUD_VOLR),Number(fe));break;case w.STEP_VOLUME:i().configureId(M(u().OPT_DRIVE_STEP_VOLUME),Number(fe),0);break;case w.POLL_VOLUME:i().configureId(M(u().OPT_DRIVE_POLL_VOLUME),Number(fe),0);break;case w.INSERT_VOLUME:i().configureId(M(u().OPT_DRIVE_INSERT_VOLUME),Number(fe),0);break;case w.EJECT_VOLUME:i().configureId(M(u().OPT_DRIVE_EJECT_VOLUME),Number(fe),0);break;case w.RENDER_MODE:S=Number(fe);break;case w.PALETTE:i().configure(M(u().OPT_MON_PALETTE),Number(fe));break;case w.BRIGHTNESS:i().configure(M(u().OPT_MON_BRIGHTNESS),Number(fe));break;case w.CONTRAST:i().configure(M(u().OPT_MON_CONTRAST),Number(fe));break;case w.SATURATION:i().configure(M(u().OPT_MON_SATURATION),Number(fe));break;case w.FLICKER_WEIGHT:i().configure(M(u().OPT_MON_FLICKER_WEIGHT),Number(fe));break;default:console.warn("set: Invalid option: ",ve)}le(en,l())}function $e(ve,fe){ye(ve,fe.toString())}function tt(ve,fe){ye(ve,fe?"true":"false")}function vt(ve){_=ve;let fe="";switch(_){case Ct.default:fe="mytheme",le(bn,!0),le(xn,"invert");break;case Ct.light:fe="light",le(bn,!0),le(xn,"invert");break;case Ct.dark:fe="dark",le(bn,!0),le(xn,"invert");break;case Ct.coffee:fe="coffee",le(bn,!1),le(xn,"");break;case Ct.cupcake:fe="cupcake",le(bn,!1),le(xn,"");break;case Ct.forest:fe="forest",le(bn,!0),le(xn,"invert");break;case Ct.aqua:fe="aqua",le(bn,!1),le(xn,"");break;case Ct.garden:fe="garden",le(bn,!0),le(xn,"invert");break;case Ct.pastel:fe="pastel",le(bn,!1),le(xn,"");break;default:console.warn("Invalid theme")}document.querySelector("html")?.setAttribute("data-theme",fe)}Bt(),Ye(r,"restoreDefaults",U),Ye(r,"restoreGeneralDefaults",te),Ye(r,"restoreMachineDefaults",ie),Ye(r,"restoreCompatibilityDefaults",X),Ye(r,"restoreAudioDefaults",q),Ye(r,"restoreVideoDefaults",ne),Ye(r,"loadSettings",he),Ye(r,"loadGeneralSettings",Te),Ye(r,"loadMachineSettings",Pe),Ye(r,"loadCompatibilitySettings",ge),Ye(r,"loadAudioSettings",Se),Ye(r,"loadVideoSettings",Q),Ye(r,"saveSettings",de),Ye(r,"saveGeneralSettings",be),Ye(r,"saveMachineSettings",Ie),Ye(r,"saveCompatibilitySettings",Ce),Ye(r,"saveAudioSettings",ue),Ye(r,"saveVideoSettings",Re),Ye(r,"get",Ve),Ye(r,"getNum",ct),Ye(r,"getBool",ke),Ye(r,"set",ye),Ye(r,"setNum",$e),Ye(r,"setBool",tt);var yt=it({restoreDefaults:U,restoreGeneralDefaults:te,restoreMachineDefaults:ie,restoreCompatibilityDefaults:X,restoreAudioDefaults:q,restoreVideoDefaults:ne,loadSettings:he,loadGeneralSettings:Te,loadMachineSettings:Pe,loadCompatibilitySettings:ge,loadAudioSettings:Se,loadVideoSettings:Q,saveSettings:de,saveGeneralSettings:be,saveMachineSettings:Ie,saveCompatibilitySettings:Ce,saveAudioSettings:ue,saveVideoSettings:Re,get:Ve,getNum:ct,getBool:ke,set:ye,setNum:$e,setBool:tt});return s(),yt}function zp(a,r){at(r,!0);const[n,s]=dt(),i=()=>k(_n,"$port1",n),u=()=>k(Os,"$joystick1",n),l=()=>k(yn,"$port2",n),h=()=>k(ks,"$joystick2",n),b=()=>k(Sn,"$wasm",n);let m=me(r,"gamepads",31,()=>Bi({}));sr(()=>{console.log("GamePadManager::onMount()"),window.addEventListener("gamepadconnected",A=>{m(m()[A.gamepad.index]=A.gamepad,!0)},!1),window.addEventListener("gamepaddisconnected",A=>{delete m()[A.gamepad.index]},!1)});function y(){return i()==nn.gamepad1||i()==nn.gamepad2?u():l()==nn.gamepad1||l()==nn.gamepad2?h():null}function T(){const A=navigator.getGamepads();if(A.length==0)return;const p=A[0];if(!p)return;const S=p.buttons[0].pressed,P=p.axes[0].valueOf(),I=p.axes[1].valueOf();S?y()?.trigger(b().PRESS_FIRE):y()?.trigger(b().RELEASE_FIRE),P<-.5?y()?.trigger(b().PULL_LEFT):P>.5?y()?.trigger(b().PULL_RIGHT):y()?.trigger(b().RELEASE_X),I<-.5?y()?.trigger(b().PULL_UP):I>.5?y()?.trigger(b().PULL_DOWN):y()?.trigger(b().RELEASE_Y)}var _=it({pollState:T});return s(),_}var qp=Ae('<!> <div class="box relative grow border-none border-green-300 overflow-auto"><!> <!> <!> <!> <!> <!></div>',1),Yp=Ae("<!> <!> <!> <!>",1),Xp=Ae('<div class="h-screen overflow-y-auto scroll-smooth bg-black text-white"><!> <!> <!></div>');function v0(a,r){at(r,!1);const[n,s]=dt(),i=()=>k(Pa,"$initialized",n),u=()=>k(zo,"$canvasWidth",n),l=()=>k(qo,"$canvasHeight",n),h=()=>k(pi,"$aspectWidth",n),b=()=>k(_i,"$aspectHeight",n),m=()=>k(kn,"$amiga",n),y=()=>k(Ut,"$layer",n),T=()=>k(Sn,"$wasm",n),_=()=>k(_n,"$port1",n),A=()=>k(yn,"$port2",n),p=()=>k(Qr,"$proxy",n),S=()=>k(en,"$config",n),P=()=>k(Jr,"$audio",n),I=()=>k(Yo,"$gamepadManager",n);let R=0,x=Rt(),v=Rt(),$=Rt(),j;Fs(()=>Dn.roms.orderBy("title").toArray()).subscribe(re=>{le(Ds,re)}),sr(()=>{console.log("+page::onMount()"),window.addEventListener("resize",function(){clearTimeout(j),j=setTimeout(ie,250)}),window.addEventListener("error",X),window.addEventListener("unhandledrejection",q)});function U(re){R++,d(x)&&d(x).doAnimationFrame(R,re),d($)&&d($).update(R,re),window.requestAnimationFrame(U)}function te(){d(v)!=null&&(le(zo,d(v).clientWidth),le(qo,d(v).clientHeight),le(pi,u()),le(_i,h()*3/4),b()>l()&&(le(_i,l()),le(pi,b()*4/3)))}function ie(){te()}function X(re){m().what()!==0&&(le(ns,m().what()),le(ts,m().errorCode()))}function q(re){m().what()!==0&&(le(ns,m().what()),le(ts,m().errorCode()))}function ne(re,de){switch(re){case"shell":le(Ut,y()==ft.shell?ft.none:ft.shell);break;case"settings":le(Ut,y()==ft.settings?ft.none:ft.settings);break;case"monitor":m().getConfig(T().OPT_DMA_DEBUG_ENABLE)?(d(x).textureRect.zoomIn(),m().configure(T().OPT_DMA_DEBUG_ENABLE,0)):(d(x).textureRect.zoomOut(),m().configure(T().OPT_DMA_DEBUG_ENABLE,1));break;case"pause":try{m().isRunning()?(console.log("Pausing..."),m().pause()):(console.log("Running..:"),m().run())}catch(be){console.log(be),T().reportException()}break;case"power":try{m().poweredOn()?(m().powerOff(),m().hardReset()):m().run()}catch(be){console.log(be),T().reportException()}break;case"reset":try{m().hardReset()}catch(be){console.log(be),T().reportException()}break;case"fit":le(Ta,"fit");break;case"aspect":le(Ta,"aspect");break;case"full":le(Ta,"full");break;case"empty1":le(_n,0);break;case"mouse1":le(_n,1),A()==1&&le(yn,0);break;case"keyset11":le(_n,2),A()==2&&le(yn,0);break;case"keyset12":le(_n,3),A()==3&&le(yn,0);break;case"gamepad11":le(_n,4),A()==4&&le(yn,0);break;case"empty2":le(yn,0);break;case"mouse2":le(yn,1),_()==1&&le(_n,0);break;case"keyset21":le(yn,2),_()==2&&le(_n,0);break;case"keyset22":le(yn,3),_()==3&&le(_n,0);break;case"gamepad21":le(yn,4),_()==4&&le(_n,0);break;default:console.log("Unhandled sender: "+re)}}function pe(re){}jn(()=>d(v),()=>{d(v)&&te()}),jn(()=>i(),()=>{i()&&window.requestAnimationFrame(U)}),oa(),Bt();var he=Xp();Xd(re=>{Zd.title="vAmiga.net"});var Te=z(he);Hp(Te,{});var Pe=Z(Te,2);{var ge=re=>{Lt(Gp(re,{$$legacy:!0}),de=>le(Qr,de),()=>p())};Xe(Pe,re=>{T()&&re(ge)})}var Se=Z(Pe,2);{var Q=re=>{var de=Yp(),be=ze(de);Lt(Wp(be,{$$legacy:!0}),Re=>le(en,Re),()=>S());var Ie=Z(be,2);Lt(jp(Ie,{$$legacy:!0}),Re=>le(Jr,Re),()=>P());var Ce=Z(Ie,2);Lt(zp(Ce,{$$legacy:!0}),Re=>le(Yo,Re),()=>I());var ue=Z(Ce,2);Op(ue,{children:(Re,Ke)=>{var M=qp(),Ve=ze(M);Lt(Rp(Ve,{$$events:{push:pe},$$legacy:!0}),ve=>He($,ve),()=>d($));var ct=Z(Ve,2),ke=z(ct);sm(ke,{});var ye=Z(ke,2);Lt(gm(ye,{$$legacy:!0}),ve=>He(x,ve),()=>d(x));var $e=Z(ye,2);Pp($e,{});var tt=Z($e,2);dp(tt,{});var vt=Z(tt,2);Kp(vt,{});var yt=Z(vt,2);Mv(yt,{action:ne}),W(ct),Lt(ct,ve=>He(v,ve),()=>d(v)),se(Re,M)},$$slots:{default:!0}}),se(re,de)};Xe(Se,re=>{i()&&re(Q)})}W(he),se(a,he),it(),s()}export{v0 as component};
