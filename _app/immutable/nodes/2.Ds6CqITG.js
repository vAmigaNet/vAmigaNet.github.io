import"../chunks/NZTpNUN0.js";import{i as Bt}from"../chunks/DHhcLtQ9.js";import{S as Es,D as Gt,E as Ss,am as ud,an as cd,ao as ld,C as Fi,O as Pl,N as Ua,P as Gr,U as fd,a as d,Y as _e,G as dd,I as vd,J as ku,K as ko,L as Aa,ap as gd,aq as hd,M as Dl,ar as kl,as as Ol,m as Rt,a7 as Ou,at as Oo,$ as Ho,au as As,av as md,aw as pd,ax as _d,ay as Ri,az as Ts,aA as yd,aB as bd,aC as wd,aD as Cu,aE as Ed,aF as Cl,aG as Sd,Q as Rs,aH as Ad,aI as Td,t as Ml,aJ as Rd,aK as xd,aL as Pd,aM as Dd,j as kd,aN as Od,aO as Cd,aP as Md,aQ as on,aR as Id,aS as $d,aT as Nd,aU as Ld,F as Ud,aV as Fd,aW as Bd,f as Wn,aX as Kd,aY as Vd,aZ as Hd,a_ as Il,aa as Gd,n as En,V as jd,p as it,l as Re,y as W,z as j,q as lt,v as ie,x as ot,A as Q,ac as Et,o as ze,ak as Qe,b as He,ai as Ot,a$ as Xt,B as At,ad as zn,b0 as Sn,b1 as Go,Z as Bi,e as xi,b2 as Wd,ab as sr,b3 as zd,b4 as jn,i as Un,b5 as oa,ag as Hr,b6 as xs,b7 as qd,al as Yd,b8 as Xd,b9 as Zd}from"../chunks/CCYfz4d6.js";import{p as he,i as Xe,l as Nt,s as sn,b as Ut}from"../chunks/Q-tPc7B_.js";import{b as O,s as vt,a as fe,d as Qd,u as Ue}from"../chunks/B3TMqfdX.js";import{d as wn,s as Ki,p as sa,L as dt,l as Ft,a as yn,b as bn,c as $l,r as Ps,e as Ta,i as Pa,m as jo,f as Mr,g as On,k as Ds,W as Lt,h as Jr,O as w,w as rn,j as an,n as Nl,M as Wo,I as tn,R as Da,o as Ll,q as ks,t as Os,u as Ul,v as Fl,x as Bl,y as Kl,z as zo,A as qo,B as pi,C as _i,D as Yo,E as Jd,F as re,T as Ct,G as Xo,H as xn,J as Vl,K as Hl,N as Cs,P as Gl,Q as Pi,S as jl,U as Wl,V as zl,X as Ms,Y as ql,Z as Yl,_ as Xl,$ as Zl,a0 as Ql,a1 as Is,a2 as $s,a3 as ev,a4 as Jl,a5 as ef,a6 as tf,a7 as Zo,a8 as Qo,a9 as nf,aa as Jo,ab as es,ac as ts,ad as rf,ae as ns,af as Mu,ag as Iu,ah as $u,ai as Nu,aj as Lu,ak as Uu,al as Fu,am as Bu,an as Ku,ao as Vu,ap as Hu,aq as Gu,ar as ju,as as Wu,at as zu,au as qu,av as Yu,aw as Xu,ax as Zu,ay as Qu,az as Ju,aA as ec,aB as tc,aC as nc,aD as rc,aE as ac,aF as ic,aG as oc,aH as sc,aI as uc,aJ as cc,aK as lc,aL as fc,aM as dc,aN as vc,aO as gc,aP as hc,aQ as mc,aR as pc,aS as _c,aT as yc,aU as bc,aV as wc,aW as Ec,aX as Sc,aY as Ac,aZ as Tc,a_ as Rc,a$ as xc,b0 as Pc,b1 as Dc,b2 as kc,b3 as Oc,b4 as Cc,b5 as Mc,b6 as Ic,b7 as $c,b8 as Nc,b9 as Lc,ba as Uc,bb as Fc,bc as Bc,bd as Kc,be as Vc,bf as Hc,bg as Gc,bh as jc,bi as Wc,bj as zc,bk as qc,bl as Yc,bm as Xc,bn as Zc,bo as Qc,bp as Jc,bq as el,br as tl}from"../chunks/DvrEDmIj.js";import"../chunks/D40qi1X1.js";function tv(a,r){if(r){const n=document.body;a.autofocus=!0,Es(()=>{document.activeElement===n&&a.focus()})}}let nl=!1;function nv(){nl||(nl=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{if(!a.defaultPrevented)for(const r of a.target.elements)r.__on_r?.()})},{capture:!0}))}function Di(a,r,n){Gt&&Ss();var s=a,i=fd,u,l=ud()?cd:ld;Fi(()=>{l(i,i=r())&&(u&&Pl(u),u=Ua(()=>n(s)))}),Gt&&(s=Gr)}function ea(a,r){return r}function rv(a,r,n,s){for(var i=[],u=r.length,l=0;l<u;l++)md(r[l].e,i,!0);var h=u>0&&i.length===0&&n!==null;if(h){var _=n.parentNode;pd(_),_.append(n),s.clear(),hr(a,r[0].prev,r[u-1].next)}_d(i,()=>{for(var m=0;m<u;m++){var b=r[m];h||(s.delete(b.k),hr(a,b.prev,b.next)),Ri(b.e,!h)}})}function ta(a,r,n,s,i,u=null){var l=a,h={flags:r,items:new Map,first:null},_=(r&Cl)!==0;if(_){var m=a;l=Gt?ko(bd(m)):m.appendChild(wd())}Gt&&Ss();var b=null,T=!1,p=_e(()=>{var A=n();return Ol(A)?A:A==null?[]:kl(A)});Fi(()=>{var A=d(p),y=A.length;if(T&&y===0)return;T=y===0;let E=!1;if(Gt){var x=dd(l)===vd;x!==(y===0)&&(l=ku(),ko(l),Aa(!1),E=!0)}if(Gt){for(var M=null,P,R=0;R<y;R++){if(Gr.nodeType===gd&&Gr.data===hd){l=Gr,E=!0,Aa(!1);break}var v=A[R],I=s(v,R);P=af(Gr,h,M,null,v,I,R,i,r,n),h.items.set(I,P),M=P}y>0&&ko(ku())}Gt||av(A,h,l,i,r,s,n),u!==null&&(y===0?b?Dl(b):b=Ua(()=>u(l)):b!==null&&Pl(b,()=>{b=null})),E&&Aa(!0),d(p)}),Gt&&(l=Gr)}function av(a,r,n,s,i,u,l){var h=(i&Sd)!==0,_=(i&(Ts|As))!==0,m=a.length,b=r.items,T=r.first,p=T,A,y=null,E,x=[],M=[],P,R,v,I;if(h)for(I=0;I<m;I+=1)P=a[I],R=u(P,I),v=b.get(R),v!==void 0&&(v.a?.measure(),(E??=new Set).add(v));for(I=0;I<m;I+=1){if(P=a[I],R=u(P,I),v=b.get(R),v===void 0){var G=p?p.e.nodes_start:n;y=af(G,r,y,y===null?r.first:y.next,P,R,I,s,i,l),b.set(R,y),x=[],M=[],p=y.next;continue}if(_&&iv(v,P,I,i),(v.e.f&Oo)!==0&&(Dl(v.e),h&&(v.a?.unfix(),(E??=new Set).delete(v))),v!==p){if(A!==void 0&&A.has(v)){if(x.length<M.length){var k=M[0],U;y=k.prev;var X=x[0],oe=x[x.length-1];for(U=0;U<x.length;U+=1)rl(x[U],k,n);for(U=0;U<M.length;U+=1)A.delete(M[U]);hr(r,X.prev,oe.next),hr(r,y,X),hr(r,oe,k),p=k,y=oe,I-=1,x=[],M=[]}else A.delete(v),rl(v,p,n),hr(r,v.prev,v.next),hr(r,v,y===null?r.first:y.next),hr(r,y,v),y=v;continue}for(x=[],M=[];p!==null&&p.k!==R;)(p.e.f&Oo)===0&&(A??=new Set).add(p),M.push(p),p=p.next;if(p===null)continue;v=p}x.push(v),y=v,p=v.next}if(p!==null||A!==void 0){for(var Y=A===void 0?[]:kl(A);p!==null;)(p.e.f&Oo)===0&&Y.push(p),p=p.next;var Z=Y.length;if(Z>0){var J=(i&Cl)!==0&&m===0?n:null;if(h){for(I=0;I<Z;I+=1)Y[I].a?.measure();for(I=0;I<Z;I+=1)Y[I].a?.fix()}rv(r,Y,J,b)}}h&&Es(()=>{if(E!==void 0)for(v of E)v.a?.apply()}),Ho.first=r.first&&r.first.e,Ho.last=y&&y.e}function iv(a,r,n,s){(s&Ts)!==0&&Cu(a.v,r),(s&As)!==0?Cu(a.i,n):a.i=n}function af(a,r,n,s,i,u,l,h,_,m){var b=(_&Ts)!==0,T=(_&yd)===0,p=b?T?Rt(i,!1,!1):Ou(i):i,A=(_&As)===0?l:Ou(l),y={i:A,v:p,k:u,a:null,e:null,prev:n,next:s};try{return y.e=Ua(()=>h(a,p,A,m),Gt),y.e.prev=n&&n.e,y.e.next=s&&s.e,n===null?r.first=y:(n.next=y,n.e.next=y.e),s!==null&&(s.prev=y,s.e.prev=y.e),y}finally{}}function rl(a,r,n){for(var s=a.next?a.next.e.nodes_start:n,i=r?r.e.nodes_start:n,u=a.e.nodes_start;u!==s;){var l=Ed(u);i.before(u),u=l}}function hr(a,r,n){r===null?a.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}function ka(a,r,n,s,i){Gt&&Ss();var u=r.$$slots?.[n],l=!1;u===!0&&(u=r.children,l=!0),u===void 0||u(a,l?()=>s:s)}function ov(a,r){var n=void 0,s;Fi(()=>{n!==(n=r())&&(s&&(Ri(s),s=null),n&&(s=Ua(()=>{Rs(()=>n(a))})))})}function of(a){var r,n,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var i=a.length;for(r=0;r<i;r++)a[r]&&(n=of(a[r]))&&(s&&(s+=" "),s+=n)}else for(n in a)a[n]&&(s&&(s+=" "),s+=n);return s}function sv(){for(var a,r,n=0,s="",i=arguments.length;n<i;n++)(a=arguments[n])&&(r=of(a))&&(s&&(s+=" "),s+=r);return s}function _r(a){return typeof a=="object"?sv(a):a??""}const al=[...` 	
\r\f \v\uFEFF`];function uv(a,r,n){var s=a==null?"":""+a;if(r&&(s=s?s+" "+r:r),n){for(var i in n)if(n[i])s=s?s+" "+i:i;else if(s.length)for(var u=i.length,l=0;(l=s.indexOf(i,l))>=0;){var h=l+u;(l===0||al.includes(s[l-1]))&&(h===s.length||al.includes(s[h]))?s=(l===0?"":s.substring(0,l))+s.substring(h+1):l=h}}return s===""?null:s}function il(a,r=!1){var n=r?" !important;":";",s="";for(var i in a){var u=a[i];u!=null&&u!==""&&(s+=" "+i+": "+u+n)}return s}function Co(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function cv(a,r){if(r){var n="",s,i;if(Array.isArray(r)?(s=r[0],i=r[1]):s=r,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var u=!1,l=0,h=!1,_=[];s&&_.push(...Object.keys(s).map(Co)),i&&_.push(...Object.keys(i).map(Co));var m=0,b=-1;const E=a.length;for(var T=0;T<E;T++){var p=a[T];if(h?p==="/"&&a[T-1]==="*"&&(h=!1):u?u===p&&(u=!1):p==="/"&&a[T+1]==="*"?h=!0:p==='"'||p==="'"?u=p:p==="("?l++:p===")"&&l--,!h&&u===!1&&l===0){if(p===":"&&b===-1)b=T;else if(p===";"||T===E-1){if(b!==-1){var A=Co(a.substring(m,b).trim());if(!_.includes(A)){p!==";"&&T++;var y=a.substring(m,T).trim();n+=" "+y+";"}}m=T+1,b=-1}}}}return s&&(n+=il(s)),i&&(n+=il(i,!0)),n=n.trim(),n===""?null:n}return a==null?null:String(a)}function We(a,r,n,s,i,u){var l=a.__className;if(Gt||l!==n||l===void 0){var h=uv(n,s,u);(!Gt||h!==a.getAttribute("class"))&&(h==null?a.removeAttribute("class"):r?a.className=h:a.setAttribute("class",h)),a.__className=n}else if(u&&i!==u)for(var _ in u){var m=!!u[_];(i==null||m!==!!i[_])&&a.classList.toggle(_,m)}return u}function Mo(a,r={},n,s){for(var i in n){var u=n[i];r[i]!==u&&(n[i]==null?a.style.removeProperty(i):a.style.setProperty(i,u,s))}}function Ns(a,r,n,s){var i=a.__style;if(Gt||i!==r){var u=cv(r,s);(!Gt||u!==a.getAttribute("style"))&&(u==null?a.removeAttribute("style"):a.style.cssText=u),a.__style=r}else s&&(Array.isArray(s)?(Mo(a,n?.[0],s[0]),Mo(a,n?.[1],s[1],"important")):Mo(a,n,s));return s}function rs(a,r,n=!1){if(a.multiple){if(r==null)return;if(!Ol(r))return Ad();for(var s of a.options)s.selected=r.includes(ol(s));return}for(s of a.options){var i=ol(s);if(Td(i,r)){s.selected=!0;return}}(!n||r!==void 0)&&(a.selectedIndex=-1)}function lv(a){var r=new MutationObserver(()=>{rs(a,a.__value)});r.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ml(()=>{r.disconnect()})}function ol(a){return"__value"in a?a.__value:a.value}const wa=Symbol("class"),Ea=Symbol("style"),sf=Symbol("is custom element"),uf=Symbol("is html");function fv(a){if(Gt){var r=!1,n=()=>{if(!r){if(r=!0,a.hasAttribute("value")){var s=a.value;$t(a,"value",null),a.value=s}if(a.hasAttribute("checked")){var i=a.checked;$t(a,"checked",null),a.checked=i}}};a.__on_r=n,$d(n),nv()}}function dv(a,r){var n=Us(a);n.value===(n.value=r??void 0)||a.value===r&&(r!==0||a.nodeName!=="PROGRESS")||(a.value=r??"")}function vv(a,r){r?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}function $t(a,r,n,s){var i=Us(a);Gt&&(i[r]=a.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&a.nodeName==="LINK")||i[r]!==(i[r]=n)&&(r==="loading"&&(a[Pd]=n),n==null?a.removeAttribute(r):typeof n!="string"&&cf(a).includes(r)?a[r]=n:a.setAttribute(r,n))}function gv(a,r,n,s,i=!1){var u=Us(a),l=u[sf],h=!u[uf];let _=Gt&&l;_&&Aa(!1);var m=r||{},b=a.tagName==="OPTION";for(var T in r)T in n||(n[T]=null);n.class?n.class=_r(n.class):n[wa]&&(n.class=null),n[Ea]&&(n.style??=null);var p=cf(a);for(const R in n){let v=n[R];if(b&&R==="value"&&v==null){a.value=a.__value="",m[R]=v;continue}if(R==="class"){var A=a.namespaceURI==="http://www.w3.org/1999/xhtml";We(a,A,v,s,r?.[wa],n[wa]),m[R]=v,m[wa]=n[wa];continue}if(R==="style"){Ns(a,v,r?.[Ea],n[Ea]),m[R]=v,m[Ea]=n[Ea];continue}var y=m[R];if(!(v===y&&!(v===void 0&&a.hasAttribute(R)))){m[R]=v;var E=R[0]+R[1];if(E!=="$$")if(E==="on"){const I={},G="$$"+R;let k=R.slice(2);var x=Nd(k);if(Cd(k)&&(k=k.slice(0,-7),I.capture=!0),!x&&y){if(v!=null)continue;a.removeEventListener(k,m[G],I),m[G]=null}if(v!=null)if(x)a[`__${k}`]=v,on([k]);else{let U=function(X){m[R].call(this,X)};m[G]=Md(k,a,U,I)}else x&&(a[`__${k}`]=void 0)}else if(R==="style")$t(a,R,v);else if(R==="autofocus")tv(a,!!v);else if(!l&&(R==="__value"||R==="value"&&v!=null))a.value=a.__value=v;else if(R==="selected"&&b)vv(a,v);else{var M=R;h||(M=Id(M));var P=M==="defaultValue"||M==="defaultChecked";if(v==null&&!l&&!P)if(u[R]=null,M==="value"||M==="checked"){let I=a;const G=r===void 0;if(M==="value"){let k=I.defaultValue;I.removeAttribute(M),I.defaultValue=k,I.value=I.__value=G?k:null}else{let k=I.defaultChecked;I.removeAttribute(M),I.defaultChecked=k,I.checked=G?k:!1}}else a.removeAttribute(R);else P||p.includes(M)&&(l||typeof v!="string")?a[M]=v:typeof v!="function"&&$t(a,M,v)}}}return _&&Aa(!0),m}function Ls(a,r,n=[],s,i=!1,u=kd){const l=n.map(u);var h=void 0,_={},m=a.nodeName==="SELECT",b=!1;if(Fi(()=>{var p=r(...l.map(d)),A=gv(a,h,p,s,i);b&&m&&"value"in p&&rs(a,p.value);for(let E of Object.getOwnPropertySymbols(_))p[E]||Ri(_[E]);for(let E of Object.getOwnPropertySymbols(p)){var y=p[E];E.description===Od&&(!h||y!==h[E])&&(_[E]&&Ri(_[E]),_[E]=Ua(()=>ov(a,()=>y))),A[E]=y}h=A}),m){var T=a;Rs(()=>{rs(T,h.value,!0),lv(T)})}b=!0}function Us(a){return a.__attributes??={[sf]:a.nodeName.includes("-"),[uf]:a.namespaceURI===Rd}}var sl=new Map;function cf(a){var r=sl.get(a.nodeName);if(r)return r;sl.set(a.nodeName,r=[]);for(var n,s=a,i=Element.prototype;i!==s;){n=Dd(s);for(var u in n)n[u].set&&r.push(u);s=xd(s)}return r}const hv=()=>performance.now(),nr={tick:a=>requestAnimationFrame(a),now:()=>hv(),tasks:new Set};function lf(){const a=nr.now();nr.tasks.forEach(r=>{r.c(a)||(nr.tasks.delete(r),r.f())}),nr.tasks.size!==0&&nr.tick(lf)}function mv(a){let r;return nr.tasks.size===0&&nr.tick(lf),{promise:new Promise(n=>{nr.tasks.add(r={c:a,f:n})}),abort(){nr.tasks.delete(r)}}}function hi(a,r){Il(()=>{a.dispatchEvent(new CustomEvent(r))})}function pv(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const r=a.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ul(a){const r={},n=a.split(";");for(const s of n){const[i,u]=s.split(":");if(!i||u===void 0)break;const l=pv(i.trim());r[l]=u.trim()}return r}const _v=a=>a;function xt(a,r,n,s){var i=(a&Vd)!==0,u=(a&Hd)!==0,l=i&&u,h=(a&Kd)!==0,_=l?"both":i?"in":"out",m,b=r.inert,T=r.style.overflow,p,A;function y(){return Il(()=>m??=n()(r,s?.()??{},{direction:_}))}var E={is_global:h,in(){if(r.inert=b,!i){A?.abort(),A?.reset?.();return}u||p?.abort(),hi(r,"introstart"),p=as(r,y(),A,1,()=>{hi(r,"introend"),p?.abort(),p=m=void 0,r.style.overflow=T})},out(R){if(!u){R?.(),m=void 0;return}r.inert=!0,hi(r,"outrostart"),A=as(r,y(),p,0,()=>{hi(r,"outroend"),R?.()})},stop:()=>{p?.abort(),A?.abort()}},x=Ho;if((x.transitions??=[]).push(E),i&&Ld){var M=h;if(!M){for(var P=x.parent;P&&(P.f&Ud)!==0;)for(;(P=P.parent)&&(P.f&Fd)===0;);M=!P||(P.f&Bd)!==0}M&&Rs(()=>{Wn(()=>E.in())})}}function as(a,r,n,s,i){var u=s===1;if(Gd(r)){var l,h=!1;return Es(()=>{if(!h){var x=r({direction:u?"in":"out"});l=as(a,x,n,s,i)}}),{abort:()=>{h=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n?.deactivate(),!r?.duration)return i(),{abort:En,deactivate:En,reset:En,t:()=>s};const{delay:_=0,css:m,tick:b,easing:T=_v}=r;var p=[];if(u&&n===void 0&&(b&&b(0,1),m)){var A=ul(m(0,1));p.push(A,A)}var y=()=>1-s,E=a.animate(p,{duration:_,fill:"forwards"});return E.onfinish=()=>{E.cancel();var x=n?.t()??1-s;n?.abort();var M=s-x,P=r.duration*Math.abs(M),R=[];if(P>0){var v=!1;if(m)for(var I=Math.ceil(P/16.666666666666668),G=0;G<=I;G+=1){var k=x+M*T(G/I),U=ul(m(k,1-k));R.push(U),v||=U.overflow==="hidden"}v&&(a.style.overflow="hidden"),y=()=>{var X=E.currentTime;return x+M*T(X/P)},b&&mv(()=>{if(E.playState!=="running")return!1;var X=y();return b(X,1-X),!0})}E=a.animate(R,{duration:P,fill:"forwards"}),E.onfinish=()=>{y=()=>s,b?.(s,1-s),i()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=En)},deactivate:()=>{i=En},reset:()=>{s===0&&b?.(1,0)},t:()=>y()}}function Ye(a,r,n){var s=jd(a,r);s&&s.set&&(a[r]=n,Ml(()=>{a[r]=null}))}var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var yi={exports:{}},wv=yi.exports,cl;function Ev(){return cl||(cl=1,function(a,r){(function(n,s){a.exports=s()})(wv,function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(o[f]=c[f])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var f in t=arguments[o])Object.prototype.hasOwnProperty.call(t,f)&&(e[f]=t[f]);return e}).apply(this,arguments)};function i(e,t,o){for(var c,f=0,g=t.length;f<g;f++)!c&&f in t||((c=c||Array.prototype.slice.call(t,0,f))[f]=t[f]);return e.concat(c||Array.prototype.slice.call(t))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:yv,l=Object.keys,h=Array.isArray;function _(e,t){return typeof t!="object"||l(t).forEach(function(o){e[o]=t[o]}),e}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var m=Object.getPrototypeOf,b={}.hasOwnProperty;function T(e,t){return b.call(e,t)}function p(e,t){typeof t=="function"&&(t=t(m(e))),(typeof Reflect>"u"?l:Reflect.ownKeys)(t).forEach(function(o){y(e,o,t[o])})}var A=Object.defineProperty;function y(e,t,o,c){A(e,t,_(o&&T(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},c))}function E(e){return{from:function(t){return e.prototype=Object.create(t.prototype),y(e.prototype,"constructor",e),{extend:p.bind(null,e.prototype)}}}}var x=Object.getOwnPropertyDescriptor,M=[].slice;function P(e,t,o){return M.call(e,t,o)}function R(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function I(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function G(e,t){if(typeof t=="string"&&T(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var o=[],c=0,f=t.length;c<f;++c){var g=G(e,t[c]);o.push(g)}return o}var S=t.indexOf(".");if(S!==-1){var D=e[t.substr(0,S)];return D==null?void 0:G(D,t.substr(S+1))}}function k(e,t,o){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){v(typeof o!="string"&&"length"in o);for(var c=0,f=t.length;c<f;++c)k(e,t[c],o[c])}else{var g,S,D=t.indexOf(".");D!==-1?(g=t.substr(0,D),(S=t.substr(D+1))===""?o===void 0?h(e)&&!isNaN(parseInt(g))?e.splice(g,1):delete e[g]:e[g]=o:k(D=!(D=e[g])||!T(e,g)?e[g]={}:D,S,o)):o===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=o}}function U(e){var t,o={};for(t in e)T(e,t)&&(o[t]=e[t]);return o}var X=[].concat;function oe(e){return X.apply([],e)}var fn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(oe([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return u[e]}),Y=new Set(fn.map(function(e){return u[e]})),Z=null;function J(e){return Z=new WeakMap,e=function t(o){if(!o||typeof o!="object")return o;var c=Z.get(o);if(c)return c;if(h(o)){c=[],Z.set(o,c);for(var f=0,g=o.length;f<g;++f)c.push(t(o[f]))}else if(Y.has(o.constructor))c=o;else{var S,D=m(o);for(S in c=D===Object.prototype?{}:Object.create(D),Z.set(o,c),o)T(o,S)&&(c[S]=t(o[S]))}return c}(e),Z=null,e}var ye={}.toString;function de(e){return ye.call(e).slice(8,-1)}var xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof xe=="symbol"?function(e){var t;return e!=null&&(t=e[xe])&&t.apply(e)}:function(){return null};function ve(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Te={};function ne(e){var t,o,c,f;if(arguments.length===1){if(h(e))return e.slice();if(this===Te&&typeof e=="string")return[e];if(f=we(e)){for(o=[];!(c=f.next()).done;)o.push(c.value);return o}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(o=new Array(t);t--;)o[t]=e[t];return o}for(t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return o}var se=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ln=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Rn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ln),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ee(e,t){this.name=e,this.message=t}function Ie(e,t){return e+". Errors: "+Object.keys(t).map(function(o){return t[o].toString()}).filter(function(o,c,f){return f.indexOf(o)===c}).join(`
`)}function Ne(e,t,o,c){this.failures=t,this.failedKeys=c,this.successCount=o,this.message=Ie(e,t)}function ue(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(o){return t[o]}),this.failuresByPos=t,this.message=Ie(e,this.failures)}E(Ee).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(Ne).from(Ee),E(ue).from(Ee);var Pe=Rn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ve=Ee,me=Rn.reduce(function(e,t){var o=t+"Error";function c(f,g){this.name=o,f?typeof f=="string"?(this.message="".concat(f).concat(g?`
 `+g:""),this.inner=g||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=ce[t]||o,this.inner=null)}return E(c).from(Ve),e[t]=c,e},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var z=ln.reduce(function(e,t){return e[t+"Error"]=me[t],e},{}),ct=Rn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=me[t]),e},{});function Ce(){}function be(e){return e}function Me(e,t){return e==null||e===be?t:function(o){return t(e(o))}}function tt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function gt(e,t){return e===Ce?t:function(){var o=e.apply(this,arguments);o!==void 0&&(arguments[0]=o);var c=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var g=t.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?tt(c,this.onsuccess):c),f&&(this.onerror=this.onerror?tt(f,this.onerror):f),g!==void 0?g:o}}function wt(e,t){return e===Ce?t:function(){e.apply(this,arguments);var o=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?tt(o,this.onsuccess):o),c&&(this.onerror=this.onerror?tt(c,this.onerror):c)}}function nt(e,t){return e===Ce?t:function(o){var c=e.apply(this,arguments);_(o,c);var f=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,o=t.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?tt(f,this.onsuccess):f),g&&(this.onerror=this.onerror?tt(g,this.onerror):g),c===void 0?o===void 0?void 0:o:_(c,o)}}function pe(e,t){return e===Ce?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ge(e,t){return e===Ce?t:function(){var o=e.apply(this,arguments);if(o&&typeof o.then=="function"){for(var c=this,f=arguments.length,g=new Array(f);f--;)g[f]=arguments[f];return o.then(function(){return t.apply(c,g)})}return t.apply(this,arguments)}}ct.ModifyError=Ne,ct.DexieError=Ee,ct.BulkError=ue;var ht=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zt(e){ht=e}var cn={},Mn=100,fn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,m(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,m(t),e]}(),ln=fn[0],Rn=fn[1],fn=fn[2],Rn=Rn&&Rn.then,jt=ln&&ln.constructor,Kn=!!fn,An=function(e,t){Ht.push([e,t]),en&&(queueMicrotask(eo),en=!1)},Qn=!0,en=!0,dn=[],Tn=[],vn=be,Qt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ce,pgp:!1,env:{},finalize:Ce},Be=Qt,Ht=[],In=0,Le=[];function ae(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Be;if(typeof e!="function"){if(e!==cn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Kt(this,this._value))}this._state=null,this._value=null,++t.ref,function o(c,f){try{f(function(g){if(c._state===null){if(g===c)throw new TypeError("A promise cannot be resolved with itself.");var S=c._lib&&ur();g&&typeof g.then=="function"?o(c,function(D,$){g instanceof ae?g._then(D,$):g.then(D,$)}):(c._state=!0,c._value=g,za(c)),S&&cr()}},Kt.bind(null,c))}catch(g){Kt(c,g)}}(this,e)}var Ge={get:function(){var e=Be,t=Vn;function o(c,f){var g=this,S=!e.global&&(e!==Be||t!==Vn),D=S&&!$n(),$=new ae(function(L,K){la(g,new mt(Ya(c,e,S,D),Ya(f,e,S,D),L,K,e))});return this._consoleTask&&($._consoleTask=this._consoleTask),$}return o.prototype=cn,o},set:function(e){y(this,"then",e&&e.prototype===cn?Ge:{get:function(){return e},set:Ge.set})}};function mt(e,t,o,c,f){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=o,this.reject=c,this.psd=f}function Kt(e,t){var o,c;Tn.push(t),e._state===null&&(o=e._lib&&ur(),t=vn(t),e._state=!1,e._value=t,c=e,dn.some(function(f){return f._value===c._value})||dn.push(c),za(e),o&&cr())}function za(e){var t=e._listeners;e._listeners=[];for(var o=0,c=t.length;o<c;++o)la(e,t[o]);var f=e._PSD;--f.ref||f.finalize(),In===0&&(++In,An(function(){--In==0&&fa()},[]))}function la(e,t){if(e._state!==null){var o=e._state?t.onFulfilled:t.onRejected;if(o===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++In,An(Ji,[o,e,t])}else e._listeners.push(t)}function Ji(e,t,o){try{var c,f=t._value;!t._state&&Tn.length&&(Tn=[]),c=ht&&t._consoleTask?t._consoleTask.run(function(){return e(f)}):e(f),t._state||Tn.indexOf(f)!==-1||function(g){for(var S=dn.length;S;)if(dn[--S]._value===g._value)return dn.splice(S,1)}(t),o.resolve(c)}catch(g){o.reject(g)}finally{--In==0&&fa(),--o.psd.ref||o.psd.finalize()}}function eo(){Nn(Qt,function(){ur()&&cr()})}function ur(){var e=Qn;return en=Qn=!1,e}function cr(){var e,t,o;do for(;0<Ht.length;)for(e=Ht,Ht=[],o=e.length,t=0;t<o;++t){var c=e[t];c[0].apply(null,c[1])}while(0<Ht.length);en=Qn=!0}function fa(){var e=dn;dn=[],e.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var t=Le.slice(0),o=t.length;o;)t[--o]()}function Ur(e){return new ae(cn,!1,e)}function _t(e,t){var o=Be;return function(){var c=ur(),f=Be;try{return hn(o,!0),e.apply(this,arguments)}catch(g){t&&t(g)}finally{hn(f,!1),c&&cr()}}}p(ae.prototype,{then:Ge,_then:function(e,t){la(this,new mt(null,null,e,t,Be))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,o=arguments[1];return typeof t=="function"?this.then(null,function(c){return(c instanceof t?o:Ur)(c)}):this.then(null,function(c){return(c&&c.name===t?o:Ur)(c)})},finally:function(e){return this.then(function(t){return ae.resolve(e()).then(function(){return t})},function(t){return ae.resolve(e()).then(function(){return Ur(t)})})},timeout:function(e,t){var o=this;return e<1/0?new ae(function(c,f){var g=setTimeout(function(){return f(new me.Timeout(t))},e);o.then(c,f).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(ae.prototype,Symbol.toStringTag,"Dexie.Promise"),Qt.env=pt(),p(ae,{all:function(){var e=ne.apply(null,arguments).map(Rr);return new ae(function(t,o){e.length===0&&t([]);var c=e.length;e.forEach(function(f,g){return ae.resolve(f).then(function(S){e[g]=S,--c||t(e)},o)})})},resolve:function(e){return e instanceof ae?e:e&&typeof e.then=="function"?new ae(function(t,o){e.then(t,o)}):new ae(cn,!0,e)},reject:Ur,race:function(){var e=ne.apply(null,arguments).map(Rr);return new ae(function(t,o){e.map(function(c){return ae.resolve(c).then(t,o)})})},PSD:{get:function(){return Be},set:function(e){return Be=e}},totalEchoes:{get:function(){return Vn}},newPSD:gn,usePSD:Nn,scheduler:{get:function(){return An},set:function(e){An=e}},rejectionMapper:{get:function(){return vn},set:function(e){vn=e}},follow:function(e,t){return new ae(function(o,c){return gn(function(f,g){var S=Be;S.unhandleds=[],S.onunhandled=g,S.finalize=tt(function(){var D,$=this;D=function(){$.unhandleds.length===0?f():g($.unhandleds[0])},Le.push(function L(){D(),Le.splice(Le.indexOf(L),1)}),++In,An(function(){--In==0&&fa()},[])},S.finalize),e()},t,o,c)})}}),jt&&(jt.allSettled&&y(ae,"allSettled",function(){var e=ne.apply(null,arguments).map(Rr);return new ae(function(t){e.length===0&&t([]);var o=e.length,c=new Array(o);e.forEach(function(f,g){return ae.resolve(f).then(function(S){return c[g]={status:"fulfilled",value:S}},function(S){return c[g]={status:"rejected",reason:S}}).then(function(){return--o||t(c)})})})}),jt.any&&typeof AggregateError<"u"&&y(ae,"any",function(){var e=ne.apply(null,arguments).map(Rr);return new ae(function(t,o){e.length===0&&o(new AggregateError([]));var c=e.length,f=new Array(c);e.forEach(function(g,S){return ae.resolve(g).then(function(D){return t(D)},function(D){f[S]=D,--c||o(new AggregateError(f))})})})}),jt.withResolvers&&(ae.withResolvers=jt.withResolvers));var Dt={awaits:0,echoes:0,id:0},to=0,Ar=[],lr=0,Vn=0,Tr=0;function gn(e,t,o,c){var f=Be,g=Object.create(f);return g.parent=f,g.ref=0,g.global=!1,g.id=++Tr,Qt.env,g.env=Kn?{Promise:ae,PromiseProp:{value:ae,configurable:!0,writable:!0},all:ae.all,race:ae.race,allSettled:ae.allSettled,any:ae.any,resolve:ae.resolve,reject:ae.reject}:{},t&&_(g,t),++f.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Nn(g,e,o,c),g.ref===0&&g.finalize(),c}function Jn(){return Dt.id||(Dt.id=++to),++Dt.awaits,Dt.echoes+=Mn,Dt.id}function $n(){return!!Dt.awaits&&(--Dt.awaits==0&&(Dt.id=0),Dt.echoes=Dt.awaits*Mn,!0)}function Rr(e){return Dt.echoes&&e&&e.constructor===jt?(Jn(),e.then(function(t){return $n(),t},function(t){return $n(),Ke(t)})):e}function qa(){var e=Ar[Ar.length-1];Ar.pop(),hn(e,!1)}function hn(e,t){var o,c=Be;(t?!Dt.echoes||lr++&&e===Be:!lr||--lr&&e===Be)||queueMicrotask(t?(function(f){++Vn,Dt.echoes&&--Dt.echoes!=0||(Dt.echoes=Dt.awaits=Dt.id=0),Ar.push(Be),hn(f,!0)}).bind(null,e):qa),e!==Be&&(Be=e,c===Qt&&(Qt.env=pt()),Kn&&(o=Qt.env.Promise,t=e.env,(c.global||e.global)&&(Object.defineProperty(u,"Promise",t.PromiseProp),o.all=t.all,o.race=t.race,o.resolve=t.resolve,o.reject=t.reject,t.allSettled&&(o.allSettled=t.allSettled),t.any&&(o.any=t.any))))}function pt(){var e=u.Promise;return Kn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Nn(e,t,o,c,f){var g=Be;try{return hn(e,!0),t(o,c,f)}finally{hn(g,!1)}}function Ya(e,t,o,c){return typeof e!="function"?e:function(){var f=Be;o&&Jn(),hn(t,!0);try{return e.apply(this,arguments)}finally{hn(f,!1),c&&queueMicrotask($n)}}}function qe(e){Promise===jt&&Dt.echoes===0?lr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Rn).indexOf("[native code]")===-1&&(Jn=$n=Ce);var Ke=ae.reject,kt="￿",mn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xa="String expected.",Fr=[],Za="__dbnames",no="readonly",ro="readwrite";function xr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var au={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qa(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=J(t))[e],t}}function iu(){throw me.Type()}function st(e,t){try{var o=ou(e),c=ou(t);if(o!==c)return o==="Array"?1:c==="Array"?-1:o==="binary"?1:c==="binary"?-1:o==="string"?1:c==="string"?-1:o==="Date"?1:c!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(f,g){for(var S=f.length,D=g.length,$=S<D?S:D,L=0;L<$;++L)if(f[L]!==g[L])return f[L]<g[L]?-1:1;return S===D?0:S<D?-1:1}(su(e),su(t));case"Array":return function(f,g){for(var S=f.length,D=g.length,$=S<D?S:D,L=0;L<$;++L){var K=st(f[L],g[L]);if(K!==0)return K}return S===D?0:S<D?-1:1}(e,t)}}catch{}return NaN}function ou(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=de(e),e==="ArrayBuffer"?"binary":e)}function su(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var uu=(bt.prototype._trans=function(e,t,o){var c=this._tx||Be.trans,f=this.name,g=ht&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function S(L,K,C){if(!C.schema[f])throw new me.NotFound("Table "+f+" not part of transaction");return t(C.idbtrans,C)}var D=ur();try{var $=c&&c.db._novip===this.db._novip?c===Be.trans?c._promise(e,S,o):gn(function(){return c._promise(e,S,o)},{trans:c,transless:Be.transless||Be}):function L(K,C,H,N){if(K.idbdb&&(K._state.openComplete||Be.letThrough||K._vip)){var B=K._createTransaction(C,H,K._dbSchema);try{B.create(),K._state.PR1398_maxLoop=3}catch(V){return V.name===Pe.InvalidState&&K.isOpen()&&0<--K._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),K.close({disableAutoOpen:!1}),K.open().then(function(){return L(K,C,H,N)})):Ke(V)}return B._promise(C,function(V,F){return gn(function(){return Be.trans=B,N(V,F,B)})}).then(function(V){if(C==="readwrite")try{B.idbtrans.commit()}catch{}return C==="readonly"?V:B._completion.then(function(){return V})})}if(K._state.openComplete)return Ke(new me.DatabaseClosed(K._state.dbOpenError));if(!K._state.isBeingOpened){if(!K._state.autoOpen)return Ke(new me.DatabaseClosed);K.open().catch(Ce)}return K._state.dbReadyPromise.then(function(){return L(K,C,H,N)})}(this.db,e,[this.name],S);return g&&($._consoleTask=g,$=$.catch(function(L){return console.trace(L),Ke(L)})),$}finally{D&&cr()}},bt.prototype.get=function(e,t){var o=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Ke(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return o.core.get({trans:c,key:e}).then(function(f){return o.hook.reading.fire(f)})}).then(t)},bt.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=l(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&t.every(function(L){return 0<=D.keyPath.indexOf(L)})){for(var $=0;$<t.length;++$)if(t.indexOf(D.keyPath[$])===-1)return!1;return!0}return!1}).sort(function(D,$){return D.keyPath.length-$.keyPath.length})[0];if(o&&this.db._maxKey!==kt){var g=o.keyPath.slice(0,t.length);return this.where(g).equals(g.map(function($){return e[$]}))}!o&&ht&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var c=this.schema.idxByName;function f(D,$){return st(D,$)===0}var S=t.reduce(function(C,$){var L=C[0],K=C[1],C=c[$],H=e[$];return[L||C,L||!C?xr(K,C&&C.multi?function(N){return N=G(N,$),h(N)&&N.some(function(B){return f(H,B)})}:function(N){return f(H,G(N,$))}):K]},[null,null]),g=S[0],S=S[1];return g?this.where(g.name).equals(e[g.keyPath]).filter(S):o?this.filter(S):this.where(t).equals("")},bt.prototype.filter=function(e){return this.toCollection().and(e)},bt.prototype.count=function(e){return this.toCollection().count(e)},bt.prototype.offset=function(e){return this.toCollection().offset(e)},bt.prototype.limit=function(e){return this.toCollection().limit(e)},bt.prototype.each=function(e){return this.toCollection().each(e)},bt.prototype.toArray=function(e){return this.toCollection().toArray(e)},bt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},bt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},bt.prototype.reverse=function(){return this.toCollection().reverse()},bt.prototype.mapToClass=function(e){var t,o=this.db,c=this.name;function f(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof iu&&(function($,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function K(){this.constructor=$}n($,L),$.prototype=L===null?Object.create(L):(K.prototype=L.prototype,new K)}(f,t=e),Object.defineProperty(f.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),f.prototype.table=function(){return c},e=f);for(var g=new Set,S=e.prototype;S;S=m(S))Object.getOwnPropertyNames(S).forEach(function($){return g.add($)});function D($){if(!$)return $;var L,K=Object.create(e.prototype);for(L in $)if(!g.has(L))try{K[L]=$[L]}catch{}return K}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),e},bt.prototype.defineClass=function(){return this.mapToClass(function(e){_(this,e)})},bt.prototype.add=function(e,t){var o=this,c=this.schema.primKey,f=c.auto,g=c.keyPath,S=e;return g&&f&&(S=Qa(g)(e)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"add",keys:t!=null?[t]:null,values:[S]})}).then(function(D){return D.numFailures?ae.reject(D.failures[0]):D.lastResult}).then(function(D){if(g)try{k(e,g,D)}catch{}return D})},bt.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=G(e,this.schema.primKey.keyPath),e===void 0?Ke(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},bt.prototype.put=function(e,t){var o=this,c=this.schema.primKey,f=c.auto,g=c.keyPath,S=e;return g&&f&&(S=Qa(g)(e)),this._trans("readwrite",function(D){return o.core.mutate({trans:D,type:"put",values:[S],keys:t!=null?[t]:null})}).then(function(D){return D.numFailures?ae.reject(D.failures[0]):D.lastResult}).then(function(D){if(g)try{k(e,g,D)}catch{}return D})},bt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"delete",keys:[e]})}).then(function(o){return o.numFailures?ae.reject(o.failures[0]):void 0})},bt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:au})}).then(function(t){return t.numFailures?ae.reject(t.failures[0]):void 0})},bt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(o){return t.core.getMany({keys:e,trans:o}).then(function(c){return c.map(function(f){return t.hook.reading.fire(f)})})})},bt.prototype.bulkAdd=function(e,t,o){var c=this,f=Array.isArray(t)?t:void 0,g=(o=o||(f?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(S){var L=c.schema.primKey,D=L.auto,L=L.keyPath;if(L&&f)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==e.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var $=e.length,L=L&&D?e.map(Qa(L)):e;return c.core.mutate({trans:S,type:"add",keys:f,values:L,wantResults:g}).then(function(B){var C=B.numFailures,H=B.results,N=B.lastResult,B=B.failures;if(C===0)return g?H:N;throw new ue("".concat(c.name,".bulkAdd(): ").concat(C," of ").concat($," operations failed"),B)})})},bt.prototype.bulkPut=function(e,t,o){var c=this,f=Array.isArray(t)?t:void 0,g=(o=o||(f?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(S){var L=c.schema.primKey,D=L.auto,L=L.keyPath;if(L&&f)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==e.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var $=e.length,L=L&&D?e.map(Qa(L)):e;return c.core.mutate({trans:S,type:"put",keys:f,values:L,wantResults:g}).then(function(B){var C=B.numFailures,H=B.results,N=B.lastResult,B=B.failures;if(C===0)return g?H:N;throw new ue("".concat(c.name,".bulkPut(): ").concat(C," of ").concat($," operations failed"),B)})})},bt.prototype.bulkUpdate=function(e){var t=this,o=this.core,c=e.map(function(S){return S.key}),f=e.map(function(S){return S.changes}),g=[];return this._trans("readwrite",function(S){return o.getMany({trans:S,keys:c,cache:"clone"}).then(function(D){var $=[],L=[];e.forEach(function(C,H){var N=C.key,B=C.changes,V=D[H];if(V){for(var F=0,q=Object.keys(B);F<q.length;F++){var ee=q[F],te=B[ee];if(ee===t.schema.primKey.keyPath){if(st(te,N)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else k(V,ee,te)}g.push(H),$.push(N),L.push(V)}});var K=$.length;return o.mutate({trans:S,type:"put",keys:$,values:L,updates:{keys:c,changeSpecs:f}}).then(function(C){var H=C.numFailures,N=C.failures;if(H===0)return K;for(var B=0,V=Object.keys(N);B<V.length;B++){var F,q=V[B],ee=g[Number(q)];ee!=null&&(F=N[q],delete N[q],N[ee]=F)}throw new ue("".concat(t.name,".bulkUpdate(): ").concat(H," of ").concat(K," operations failed"),N)})})})},bt.prototype.bulkDelete=function(e){var t=this,o=e.length;return this._trans("readwrite",function(c){return t.core.mutate({trans:c,type:"delete",keys:e})}).then(function(S){var f=S.numFailures,g=S.lastResult,S=S.failures;if(f===0)return g;throw new ue("".concat(t.name,".bulkDelete(): ").concat(f," of ").concat(o," operations failed"),S)})},bt);function bt(){}function da(e){function t(S,D){if(D){for(var $=arguments.length,L=new Array($-1);--$;)L[$-1]=arguments[$];return o[S].subscribe.apply(null,L),e}if(typeof S=="string")return o[S]}var o={};t.addEventType=g;for(var c=1,f=arguments.length;c<f;++c)g(arguments[c]);return t;function g(S,D,$){if(typeof S!="object"){var L;D=D||pe;var K={subscribers:[],fire:$=$||Ce,subscribe:function(C){K.subscribers.indexOf(C)===-1&&(K.subscribers.push(C),K.fire=D(K.fire,C))},unsubscribe:function(C){K.subscribers=K.subscribers.filter(function(H){return H!==C}),K.fire=K.subscribers.reduce(D,$)}};return o[S]=t[S]=K}l(L=S).forEach(function(C){var H=L[C];if(h(H))g(C,L[C][0],L[C][1]);else{if(H!=="asap")throw new me.InvalidArgument("Invalid event config");var N=g(C,be,function(){for(var B=arguments.length,V=new Array(B);B--;)V[B]=arguments[B];N.subscribers.forEach(function(F){I(function(){F.apply(null,V)})})})}})}}function va(e,t){return E(t).from({prototype:e}),t}function Br(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ao(e,t){e.filter=xr(e.filter,t)}function io(e,t,o){var c=e.replayFilter;e.replayFilter=c?function(){return xr(c(),t())}:t,e.justLimit=o&&!c}function Ja(e,t){if(e.isPrimKey)return t.primaryKey;var o=t.getIndexByKeyPath(e.index);if(!o)throw new me.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return o}function cu(e,t,o){var c=Ja(e,t.schema);return t.openCursor({trans:o,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:c,range:e.range}})}function ei(e,t,o,c){var f=e.replayFilter?xr(e.filter,e.replayFilter()):e.filter;if(e.or){var g={},S=function(D,$,L){var K,C;f&&!f($,L,function(H){return $.stop(H)},function(H){return $.fail(H)})||((C=""+(K=$.primaryKey))=="[object ArrayBuffer]"&&(C=""+new Uint8Array(K)),T(g,C)||(g[C]=!0,t(D,$,L)))};return Promise.all([e.or._iterate(S,o),lu(cu(e,c,o),e.algorithm,S,!e.keysOnly&&e.valueMapper)])}return lu(cu(e,c,o),xr(e.algorithm,f),t,!e.keysOnly&&e.valueMapper)}function lu(e,t,o,c){var f=_t(c?function(g,S,D){return o(c(g),S,D)}:o);return e.then(function(g){if(g)return g.start(function(){var S=function(){return g.continue()};t&&!t(g,function(D){return S=D},function(D){g.stop(D),S=Ce},function(D){g.fail(D),S=Ce})||f(g.value,g,function(D){return S=D}),S()})})}var ga=(fu.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var o=t.add;if(h(o))return i(i([],h(e)?e:[],!0),o).sort();if(typeof o=="number")return(Number(e)||0)+o;if(typeof o=="bigint")try{return BigInt(e)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(t.remove!==void 0){var c=t.remove;if(h(c))return h(e)?e.filter(function(f){return!c.includes(f)}).sort():[];if(typeof c=="number")return Number(e)-c;if(typeof c=="bigint")try{return BigInt(e)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return o=(o=t.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof e=="string"&&e.startsWith(o)?t.replacePrefix[1]+e.substring(o.length):e},fu);function fu(e){this["@@propmod"]=e}var Vf=(ut.prototype._read=function(e,t){var o=this._ctx;return o.error?o.table._trans(null,Ke.bind(null,o.error)):o.table._trans("readonly",e).then(t)},ut.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ke.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ut.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=xr(t.algorithm,e)},ut.prototype._iterate=function(e,t){return ei(this._ctx,e,t,this._ctx.table.core)},ut.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&_(o,e),t._ctx=o,t},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(e){var t=this._ctx;return this._read(function(o){return ei(t,e,o,t.table.core)})},ut.prototype.count=function(e){var t=this;return this._read(function(o){var c=t._ctx,f=c.table.core;if(Br(c,!0))return f.count({trans:o,query:{index:Ja(c,f.schema),range:c.range}}).then(function(S){return Math.min(S,c.limit)});var g=0;return ei(c,function(){return++g,!1},o,f).then(function(){return g})}).then(e)},ut.prototype.sortBy=function(e,t){var o=e.split(".").reverse(),c=o[0],f=o.length-1;function g($,L){return L?g($[o[L]],L-1):$[c]}var S=this._ctx.dir==="next"?1:-1;function D($,L){return st(g($,f),g(L,f))*S}return this.toArray(function($){return $.sort(D)}).then(t)},ut.prototype.toArray=function(e){var t=this;return this._read(function(o){var c=t._ctx;if(c.dir==="next"&&Br(c,!0)&&0<c.limit){var f=c.valueMapper,g=Ja(c,c.table.core.schema);return c.table.core.query({trans:o,limit:c.limit,values:!0,query:{index:g,range:c.range}}).then(function(D){return D=D.result,f?D.map(f):D})}var S=[];return ei(c,function(D){return S.push(D)},o,c.table.core).then(function(){return S})},e)},ut.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Br(t)?io(t,function(){var o=e;return function(c,f){return o===0||(o===1?--o:f(function(){c.advance(o),o=0}),!1)}}):io(t,function(){var o=e;return function(){return--o<0}})),this},ut.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),io(this._ctx,function(){var t=e;return function(o,c,f){return--t<=0&&c(f),0<=t}},!0),this},ut.prototype.until=function(e,t){return ao(this._ctx,function(o,c,f){return!e(o.value)||(c(f),t)}),this},ut.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ut.prototype.last=function(e){return this.reverse().first(e)},ut.prototype.filter=function(e){var t;return ao(this._ctx,function(o){return e(o.value)}),(t=this._ctx).isMatch=xr(t.isMatch,e),this},ut.prototype.and=function(e){return this.filter(e)},ut.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,c){e(c.key,c)})},ut.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ut.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,c){e(c.primaryKey,c)})},ut.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var o=[];return this.each(function(c,f){o.push(f.key)}).then(function(){return o}).then(e)},ut.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Br(t,!0)&&0<t.limit)return this._read(function(c){var f=Ja(t,t.table.core.schema);return t.table.core.query({trans:c,values:!1,limit:t.limit,query:{index:f,range:t.range}})}).then(function(c){return c.result}).then(e);t.keysOnly=!t.isMatch;var o=[];return this.each(function(c,f){o.push(f.primaryKey)}).then(function(){return o}).then(e)},ut.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ut.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ut.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ut.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return ao(this._ctx,function(f){var c=f.primaryKey.toString(),f=T(t,c);return t[c]=!0,!f}),this},ut.prototype.modify=function(e){var t=this,o=this._ctx;return this._write(function(c){var f,g,S;S=typeof e=="function"?e:(f=l(e),g=f.length,function(F){for(var q=!1,ee=0;ee<g;++ee){var te=f[ee],le=e[te],Se=G(F,te);le instanceof ga?(k(F,te,le.execute(Se)),q=!0):Se!==le&&(k(F,te,le),q=!0)}return q});var D=o.table.core,C=D.schema.primaryKey,$=C.outbound,L=C.extractKey,K=200,C=t.db._options.modifyChunkSize;C&&(K=typeof C=="object"?C[D.name]||C["*"]||200:C);function H(F,te){var ee=te.failures,te=te.numFailures;B+=F-te;for(var le=0,Se=l(ee);le<Se.length;le++){var Oe=Se[le];N.push(ee[Oe])}}var N=[],B=0,V=[];return t.clone().primaryKeys().then(function(F){function q(te){var le=Math.min(K,F.length-te);return D.getMany({trans:c,keys:F.slice(te,te+le),cache:"immutable"}).then(function(Se){for(var Oe=[],Ae=[],De=$?[]:null,$e=[],ke=0;ke<le;++ke){var Fe=Se[ke],Je={value:J(Fe),primKey:F[te+ke]};S.call(Je,Je.value,Je)!==!1&&(Je.value==null?$e.push(F[te+ke]):$||st(L(Fe),L(Je.value))===0?(Ae.push(Je.value),$&&De.push(F[te+ke])):($e.push(F[te+ke]),Oe.push(Je.value)))}return Promise.resolve(0<Oe.length&&D.mutate({trans:c,type:"add",values:Oe}).then(function(rt){for(var at in rt.failures)$e.splice(parseInt(at),1);H(Oe.length,rt)})).then(function(){return(0<Ae.length||ee&&typeof e=="object")&&D.mutate({trans:c,type:"put",keys:De,values:Ae,criteria:ee,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<te}).then(function(rt){return H(Ae.length,rt)})}).then(function(){return(0<$e.length||ee&&e===oo)&&D.mutate({trans:c,type:"delete",keys:$e,criteria:ee,isAdditionalChunk:0<te}).then(function(rt){return H($e.length,rt)})}).then(function(){return F.length>te+le&&q(te+K)})})}var ee=Br(o)&&o.limit===1/0&&(typeof e!="function"||e===oo)&&{index:o.index,range:o.range};return q(0).then(function(){if(0<N.length)throw new Ne("Error modifying one or more objects",N,B,V);return F.length})})})},ut.prototype.delete=function(){var e=this._ctx,t=e.range;return Br(e)&&(e.isPrimKey||t.type===3)?this._write(function(o){var c=e.table.core.schema.primaryKey,f=t;return e.table.core.count({trans:o,query:{index:c,range:f}}).then(function(g){return e.table.core.mutate({trans:o,type:"deleteRange",range:f}).then(function(S){var D=S.failures;if(S.lastResult,S.results,S=S.numFailures,S)throw new Ne("Could not delete some values",Object.keys(D).map(function($){return D[$]}),g-S);return g-S})})}):this.modify(oo)},ut);function ut(){}var oo=function(e,t){return t.value=null};function Hf(e,t){return e<t?-1:e===t?0:1}function Gf(e,t){return t<e?-1:e===t?0:1}function pn(e,t,o){return e=e instanceof vu?new e.Collection(e):e,e._ctx.error=new(o||TypeError)(t),e}function Kr(e){return new e.Collection(e,function(){return du("")}).limit(0)}function ti(e,t,o,c){var f,g,S,D,$,L,K,C=o.length;if(!o.every(function(B){return typeof B=="string"}))return pn(e,Xa);function H(B){f=B==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},g=B==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},S=B==="next"?Hf:Gf;var V=o.map(function(F){return{lower:g(F),upper:f(F)}}).sort(function(F,q){return S(F.lower,q.lower)});D=V.map(function(F){return F.upper}),$=V.map(function(F){return F.lower}),K=(L=B)==="next"?"":c}H("next"),e=new e.Collection(e,function(){return fr(D[0],$[C-1]+c)}),e._ondirectionchange=function(B){H(B)};var N=0;return e._addAlgorithm(function(B,V,F){var q=B.key;if(typeof q!="string")return!1;var ee=g(q);if(t(ee,$,N))return!0;for(var te=null,le=N;le<C;++le){var Se=function(Oe,Ae,De,$e,ke,Fe){for(var Je=Math.min(Oe.length,$e.length),rt=-1,at=0;at<Je;++at){var _n=Ae[at];if(_n!==$e[at])return ke(Oe[at],De[at])<0?Oe.substr(0,at)+De[at]+De.substr(at+1):ke(Oe[at],$e[at])<0?Oe.substr(0,at)+$e[at]+De.substr(at+1):0<=rt?Oe.substr(0,rt)+Ae[rt]+De.substr(rt+1):null;ke(Oe[at],_n)<0&&(rt=at)}return Je<$e.length&&Fe==="next"?Oe+De.substr(Oe.length):Je<Oe.length&&Fe==="prev"?Oe.substr(0,De.length):rt<0?null:Oe.substr(0,rt)+$e[rt]+De.substr(rt+1)}(q,ee,D[le],$[le],S,L);Se===null&&te===null?N=le+1:(te===null||0<S(te,Se))&&(te=Se)}return V(te!==null?function(){B.continue(te+K)}:F),!1}),e}function fr(e,t,o,c){return{type:2,lower:e,upper:t,lowerOpen:o,upperOpen:c}}function du(e){return{type:1,lower:e,upper:e}}var vu=(Object.defineProperty(Vt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Vt.prototype.between=function(e,t,o,c){o=o!==!1,c=c===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(o||c)&&(!o||!c)?Kr(this):new this.Collection(this,function(){return fr(e,t,!o,!c)})}catch{return pn(this,mn)}},Vt.prototype.equals=function(e){return e==null?pn(this,mn):new this.Collection(this,function(){return du(e)})},Vt.prototype.above=function(e){return e==null?pn(this,mn):new this.Collection(this,function(){return fr(e,void 0,!0)})},Vt.prototype.aboveOrEqual=function(e){return e==null?pn(this,mn):new this.Collection(this,function(){return fr(e,void 0,!1)})},Vt.prototype.below=function(e){return e==null?pn(this,mn):new this.Collection(this,function(){return fr(void 0,e,!1,!0)})},Vt.prototype.belowOrEqual=function(e){return e==null?pn(this,mn):new this.Collection(this,function(){return fr(void 0,e)})},Vt.prototype.startsWith=function(e){return typeof e!="string"?pn(this,Xa):this.between(e,e+kt,!0,!0)},Vt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):ti(this,function(t,o){return t.indexOf(o[0])===0},[e],kt)},Vt.prototype.equalsIgnoreCase=function(e){return ti(this,function(t,o){return t===o[0]},[e],"")},Vt.prototype.anyOfIgnoreCase=function(){var e=ne.apply(Te,arguments);return e.length===0?Kr(this):ti(this,function(t,o){return o.indexOf(t)!==-1},e,"")},Vt.prototype.startsWithAnyOfIgnoreCase=function(){var e=ne.apply(Te,arguments);return e.length===0?Kr(this):ti(this,function(t,o){return o.some(function(c){return t.indexOf(c)===0})},e,kt)},Vt.prototype.anyOf=function(){var e=this,t=ne.apply(Te,arguments),o=this._cmp;try{t.sort(o)}catch{return pn(this,mn)}if(t.length===0)return Kr(this);var c=new this.Collection(this,function(){return fr(t[0],t[t.length-1])});c._ondirectionchange=function(g){o=g==="next"?e._ascending:e._descending,t.sort(o)};var f=0;return c._addAlgorithm(function(g,S,D){for(var $=g.key;0<o($,t[f]);)if(++f===t.length)return S(D),!1;return o($,t[f])===0||(S(function(){g.continue(t[f])}),!1)}),c},Vt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Vt.prototype.noneOf=function(){var e=ne.apply(Te,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return pn(this,mn)}var t=e.reduce(function(o,c){return o?o.concat([[o[o.length-1][1],c]]):[[-1/0,c]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Vt.prototype.inAnyRange=function(q,t){var o=this,c=this._cmp,f=this._ascending,g=this._descending,S=this._min,D=this._max;if(q.length===0)return Kr(this);if(!q.every(function(ee){return ee[0]!==void 0&&ee[1]!==void 0&&f(ee[0],ee[1])<=0}))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var $=!t||t.includeLowers!==!1,L=t&&t.includeUppers===!0,K,C=f;function H(ee,te){return C(ee[0],te[0])}try{(K=q.reduce(function(ee,te){for(var le=0,Se=ee.length;le<Se;++le){var Oe=ee[le];if(c(te[0],Oe[1])<0&&0<c(te[1],Oe[0])){Oe[0]=S(Oe[0],te[0]),Oe[1]=D(Oe[1],te[1]);break}}return le===Se&&ee.push(te),ee},[])).sort(H)}catch{return pn(this,mn)}var N=0,B=L?function(ee){return 0<f(ee,K[N][1])}:function(ee){return 0<=f(ee,K[N][1])},V=$?function(ee){return 0<g(ee,K[N][0])}:function(ee){return 0<=g(ee,K[N][0])},F=B,q=new this.Collection(this,function(){return fr(K[0][0],K[K.length-1][1],!$,!L)});return q._ondirectionchange=function(ee){C=ee==="next"?(F=B,f):(F=V,g),K.sort(H)},q._addAlgorithm(function(ee,te,le){for(var Se,Oe=ee.key;F(Oe);)if(++N===K.length)return te(le),!1;return!B(Se=Oe)&&!V(Se)||(o._cmp(Oe,K[N][1])===0||o._cmp(Oe,K[N][0])===0||te(function(){C===f?ee.continue(K[N][0]):ee.continue(K[N][1])}),!1)}),q},Vt.prototype.startsWithAnyOf=function(){var e=ne.apply(Te,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Kr(this):this.inAnyRange(e.map(function(t){return[t,t+kt]})):pn(this,"startsWithAnyOf() only works with strings")},Vt);function Vt(){}function Hn(e){return _t(function(t){return ha(t),e(t.target.error),!1})}function ha(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ma="storagemutated",so="x-storagemutated-1",dr=da(null,ma),jf=(Gn.prototype._lock=function(){return v(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this},Gn.prototype._unlock=function(){if(v(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Nn(e[1],e[0])}catch{}}return this},Gn.prototype._locked=function(){return this._reculock&&Be.lockOwnerFor!==this},Gn.prototype.create=function(e){var t=this;if(!this.mode)return this;var o=this.db.idbdb,c=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!o)switch(c&&c.name){case"DatabaseClosedError":throw new me.DatabaseClosed(c);case"MissingAPIError":throw new me.MissingAPI(c.message,c);default:throw new me.OpenFailed(c)}if(!this.active)throw new me.TransactionInactive;return v(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_t(function(f){ha(f),t._reject(e.error)}),e.onabort=_t(function(f){ha(f),t.active&&t._reject(new me.Abort(e.error)),t.active=!1,t.on("abort").fire(f)}),e.oncomplete=_t(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&dr.storagemutated.fire(e.mutatedParts)}),this},Gn.prototype._promise=function(e,t,o){var c=this;if(e==="readwrite"&&this.mode!=="readwrite")return Ke(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Ke(new me.TransactionInactive);if(this._locked())return new ae(function(g,S){c._blockedFuncs.push([function(){c._promise(e,t,o).then(g,S)},Be])});if(o)return gn(function(){var g=new ae(function(S,D){c._lock();var $=t(S,D,c);$&&$.then&&$.then(S,D)});return g.finally(function(){return c._unlock()}),g._lib=!0,g});var f=new ae(function(g,S){var D=t(g,S,c);D&&D.then&&D.then(g,S)});return f._lib=!0,f},Gn.prototype._root=function(){return this.parent?this.parent._root():this},Gn.prototype.waitFor=function(e){var t,o=this._root(),c=ae.resolve(e);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return c}):(o._waitingFor=c,o._waitingQueue=[],t=o.idbtrans.objectStore(o.storeNames[0]),function g(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(t.get(-1/0).onsuccess=g)}());var f=o._waitingFor;return new ae(function(g,S){c.then(function(D){return o._waitingQueue.push(_t(g.bind(null,D)))},function(D){return o._waitingQueue.push(_t(S.bind(null,D)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},Gn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},Gn.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(T(t,e))return t[e];var o=this.schema[e];if(!o)throw new me.NotFound("Table "+e+" not part of transaction");return o=new this.db.Table(e,o,this),o.core=this.db.core.table(e),t[e]=o},Gn);function Gn(){}function uo(e,t,o,c,f,g,S){return{name:e,keyPath:t,unique:o,multi:c,auto:f,compound:g,src:(o&&!S?"&":"")+(c?"*":"")+(f?"++":"")+gu(t)}}function gu(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function co(e,t,o){return{name:e,primKey:t,indexes:o,mappedClass:null,idxByName:(c=function(f){return[f.name,f]},o.reduce(function(f,g,S){return S=c(g,S),S&&(f[S[0]]=S[1]),f},{}))};var c}var pa=function(e){try{return e.only([[]]),pa=function(){return[[]]},[[]]}catch{return pa=function(){return kt},kt}};function lo(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(o){return o[t]}:function(o){return G(o,t)}:function(o){return G(o,e)};var t}function hu(e){return[].slice.call(e)}var Wf=0;function _a(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function zf(e,t,$){function c(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=F.lower,B=F.upper,V=F.lowerOpen,F=F.upperOpen;return N===void 0?B===void 0?null:t.upperBound(B,!!F):B===void 0?t.lowerBound(N,!!V):t.bound(N,B,!!V,!!F)}function f(H){var N,B=H.name;return{name:B,schema:H,mutate:function(V){var F=V.trans,q=V.type,ee=V.keys,te=V.values,le=V.range;return new Promise(function(Se,Oe){Se=_t(Se);var Ae=F.objectStore(B),De=Ae.keyPath==null,$e=q==="put"||q==="add";if(!$e&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var ke,Fe=(ee||te||{length:1}).length;if(ee&&te&&ee.length!==te.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Se({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(Jt){++_n,ha(Jt)}var rt=[],at=[],_n=0;if(q==="deleteRange"){if(le.type===4)return Se({numFailures:_n,failures:at,results:[],lastResult:void 0});le.type===3?rt.push(ke=Ae.clear()):rt.push(ke=Ae.delete(c(le)))}else{var De=$e?De?[te,ee]:[te,null]:[ee,null],Ze=De[0],zt=De[1];if($e)for(var qt=0;qt<Fe;++qt)rt.push(ke=zt&&zt[qt]!==void 0?Ae[q](Ze[qt],zt[qt]):Ae[q](Ze[qt])),ke.onerror=Je;else for(qt=0;qt<Fe;++qt)rt.push(ke=Ae[q](Ze[qt])),ke.onerror=Je}function gi(Jt){Jt=Jt.target.result,rt.forEach(function(kr,Do){return kr.error!=null&&(at[Do]=kr.error)}),Se({numFailures:_n,failures:at,results:q==="delete"?ee:rt.map(function(kr){return kr.result}),lastResult:Jt})}ke.onerror=function(Jt){Je(Jt),gi(Jt)},ke.onsuccess=gi})},getMany:function(V){var F=V.trans,q=V.keys;return new Promise(function(ee,te){ee=_t(ee);for(var le,Se=F.objectStore(B),Oe=q.length,Ae=new Array(Oe),De=0,$e=0,ke=function(rt){rt=rt.target,Ae[rt._pos]=rt.result,++$e===De&&ee(Ae)},Fe=Hn(te),Je=0;Je<Oe;++Je)q[Je]!=null&&((le=Se.get(q[Je]))._pos=Je,le.onsuccess=ke,le.onerror=Fe,++De);De===0&&ee(Ae)})},get:function(V){var F=V.trans,q=V.key;return new Promise(function(ee,te){ee=_t(ee);var le=F.objectStore(B).get(q);le.onsuccess=function(Se){return ee(Se.target.result)},le.onerror=Hn(te)})},query:(N=L,function(V){return new Promise(function(F,q){F=_t(F);var ee,te,le,De=V.trans,Se=V.values,Oe=V.limit,ke=V.query,Ae=Oe===1/0?void 0:Oe,$e=ke.index,ke=ke.range,De=De.objectStore(B),$e=$e.isPrimaryKey?De:De.index($e.name),ke=c(ke);if(Oe===0)return F({result:[]});N?((Ae=Se?$e.getAll(ke,Ae):$e.getAllKeys(ke,Ae)).onsuccess=function(Fe){return F({result:Fe.target.result})},Ae.onerror=Hn(q)):(ee=0,te=!Se&&"openKeyCursor"in $e?$e.openKeyCursor(ke):$e.openCursor(ke),le=[],te.onsuccess=function(Fe){var Je=te.result;return Je?(le.push(Se?Je.value:Je.primaryKey),++ee===Oe?F({result:le}):void Je.continue()):F({result:le})},te.onerror=Hn(q))})}),openCursor:function(V){var F=V.trans,q=V.values,ee=V.query,te=V.reverse,le=V.unique;return new Promise(function(Se,Oe){Se=_t(Se);var $e=ee.index,Ae=ee.range,De=F.objectStore(B),De=$e.isPrimaryKey?De:De.index($e.name),$e=te?le?"prevunique":"prev":le?"nextunique":"next",ke=!q&&"openKeyCursor"in De?De.openKeyCursor(c(Ae),$e):De.openCursor(c(Ae),$e);ke.onerror=Hn(Oe),ke.onsuccess=_t(function(Fe){var Je,rt,at,_n,Ze=ke.result;Ze?(Ze.___id=++Wf,Ze.done=!1,Je=Ze.continue.bind(Ze),rt=(rt=Ze.continuePrimaryKey)&&rt.bind(Ze),at=Ze.advance.bind(Ze),_n=function(){throw new Error("Cursor not stopped")},Ze.trans=F,Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=function(){throw new Error("Cursor not started")},Ze.fail=_t(Oe),Ze.next=function(){var zt=this,qt=1;return this.start(function(){return qt--?zt.continue():zt.stop()}).then(function(){return zt})},Ze.start=function(zt){function qt(){if(ke.result)try{zt()}catch(Jt){Ze.fail(Jt)}else Ze.done=!0,Ze.start=function(){throw new Error("Cursor behind last entry")},Ze.stop()}var gi=new Promise(function(Jt,kr){Jt=_t(Jt),ke.onerror=Hn(kr),Ze.fail=kr,Ze.stop=function(Do){Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=_n,Jt(Do)}});return ke.onsuccess=_t(function(Jt){ke.onsuccess=qt,qt()}),Ze.continue=Je,Ze.continuePrimaryKey=rt,Ze.advance=at,qt(),gi},Se(Ze)):Se(null)},Oe)})},count:function(V){var F=V.query,q=V.trans,ee=F.index,te=F.range;return new Promise(function(le,Se){var Oe=q.objectStore(B),Ae=ee.isPrimaryKey?Oe:Oe.index(ee.name),Oe=c(te),Ae=Oe?Ae.count(Oe):Ae.count();Ae.onsuccess=_t(function(De){return le(De.target.result)}),Ae.onerror=Hn(Se)})}}}var g,S,D,K=(S=$,D=hu((g=e).objectStoreNames),{schema:{name:g.name,tables:D.map(function(H){return S.objectStore(H)}).map(function(H){var N=H.keyPath,F=H.autoIncrement,B=h(N),V={},F={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:B,keyPath:N,autoIncrement:F,unique:!0,extractKey:lo(N)},indexes:hu(H.indexNames).map(function(q){return H.index(q)}).map(function(le){var ee=le.name,te=le.unique,Se=le.multiEntry,le=le.keyPath,Se={name:ee,compound:h(le),keyPath:le,unique:te,multiEntry:Se,extractKey:lo(le)};return V[_a(le)]=Se}),getIndexByKeyPath:function(q){return V[_a(q)]}};return V[":id"]=F.primaryKey,N!=null&&(V[_a(N)]=F.primaryKey),F})},hasGetAll:0<D.length&&"getAll"in S.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),$=K.schema,L=K.hasGetAll,K=$.tables.map(f),C={};return K.forEach(function(H){return C[H.name]=H}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(H){if(!C[H])throw new Error("Table '".concat(H,"' not found"));return C[H]},MIN_KEY:-1/0,MAX_KEY:pa(t),schema:$}}function qf(e,t,o,c){var f=o.IDBKeyRange;return o.indexedDB,{dbcore:(c=zf(t,f,c),e.dbcore.reduce(function(g,S){return S=S.create,s(s({},g),S(g))},c))}}function ni(e,c){var o=c.db,c=qf(e._middlewares,o,e._deps,c);e.core=c.dbcore,e.tables.forEach(function(f){var g=f.name;e.core.schema.tables.some(function(S){return S.name===g})&&(f.core=e.core.table(g),e[g]instanceof e.Table&&(e[g].core=f.core))})}function ri(e,t,o,c){o.forEach(function(f){var g=c[f];t.forEach(function(S){var D=function $(L,K){return x(L,K)||(L=m(L))&&$(L,K)}(S,f);(!D||"value"in D&&D.value===void 0)&&(S===e.Transaction.prototype||S instanceof e.Transaction?y(S,f,{get:function(){return this.table(f)},set:function($){A(this,f,{value:$,writable:!0,configurable:!0,enumerable:!0})}}):S[f]=new e.Table(f,g))})})}function fo(e,t){t.forEach(function(o){for(var c in o)o[c]instanceof e.Table&&delete o[c]})}function Yf(e,t){return e._cfg.version-t._cfg.version}function Xf(e,t,o,c){var f=e._dbSchema;o.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=co("$meta",pu("")[0],[]),e._storeNames.push("$meta"));var g=e._createTransaction("readwrite",e._storeNames,f);g.create(o),g._completion.catch(c);var S=g._reject.bind(g),D=Be.transless||Be;gn(function(){return Be.trans=g,Be.transless=D,t!==0?(ni(e,o),L=t,(($=g).storeNames.includes("$meta")?$.table("$meta").get("version").then(function(K){return K??L}):ae.resolve(L)).then(function(K){return H=K,N=g,B=o,V=[],K=(C=e)._versions,F=C._dbSchema=ii(0,C.idbdb,B),(K=K.filter(function(q){return q._cfg.version>=H})).length!==0?(K.forEach(function(q){V.push(function(){var ee=F,te=q._cfg.dbschema;oi(C,ee,B),oi(C,te,B),F=C._dbSchema=te;var le=vo(ee,te);le.add.forEach(function($e){go(B,$e[0],$e[1].primKey,$e[1].indexes)}),le.change.forEach(function($e){if($e.recreate)throw new me.Upgrade("Not yet support for changing primary key");var ke=B.objectStore($e.name);$e.add.forEach(function(Fe){return ai(ke,Fe)}),$e.change.forEach(function(Fe){ke.deleteIndex(Fe.name),ai(ke,Fe)}),$e.del.forEach(function(Fe){return ke.deleteIndex(Fe)})});var Se=q._cfg.contentUpgrade;if(Se&&q._cfg.version>H){ni(C,B),N._memoizedTables={};var Oe=U(te);le.del.forEach(function($e){Oe[$e]=ee[$e]}),fo(C,[C.Transaction.prototype]),ri(C,[C.Transaction.prototype],l(Oe),Oe),N.schema=Oe;var Ae,De=se(Se);return De&&Jn(),le=ae.follow(function(){var $e;(Ae=Se(N))&&De&&($e=$n.bind(null,null),Ae.then($e,$e))}),Ae&&typeof Ae.then=="function"?ae.resolve(Ae):le.then(function(){return Ae})}}),V.push(function(ee){var te,le,Se=q._cfg.dbschema;te=Se,le=ee,[].slice.call(le.db.objectStoreNames).forEach(function(Oe){return te[Oe]==null&&le.db.deleteObjectStore(Oe)}),fo(C,[C.Transaction.prototype]),ri(C,[C.Transaction.prototype],C._storeNames,C._dbSchema),N.schema=C._dbSchema}),V.push(function(ee){C.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(C.idbdb.version/10)===q._cfg.version?(C.idbdb.deleteObjectStore("$meta"),delete C._dbSchema.$meta,C._storeNames=C._storeNames.filter(function(te){return te!=="$meta"})):ee.objectStore("$meta").put(q._cfg.version,"version"))})}),function q(){return V.length?ae.resolve(V.shift()(N.idbtrans)).then(q):ae.resolve()}().then(function(){mu(F,B)})):ae.resolve();var C,H,N,B,V,F}).catch(S)):(l(f).forEach(function(K){go(o,K,f[K].primKey,f[K].indexes)}),ni(e,o),void ae.follow(function(){return e.on.populate.fire(g)}).catch(S));var $,L})}function Zf(e,t){mu(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var o=ii(0,e.idbdb,t);oi(e,e._dbSchema,t);for(var c=0,f=vo(o,e._dbSchema).change;c<f.length;c++){var g=function(S){if(S.change.length||S.recreate)return console.warn("Unable to patch indexes of table ".concat(S.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=t.objectStore(S.name);S.add.forEach(function($){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(S.name,".").concat($.src)),ai(D,$)})}(f[c]);if(typeof g=="object")return g.value}}function vo(e,t){var o,c={del:[],add:[],change:[]};for(o in e)t[o]||c.del.push(o);for(o in t){var f=e[o],g=t[o];if(f){var S={name:o,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||f.primKey.auto!==g.primKey.auto)S.recreate=!0,c.change.push(S);else{var D=f.idxByName,$=g.idxByName,L=void 0;for(L in D)$[L]||S.del.push(L);for(L in $){var K=D[L],C=$[L];K?K.src!==C.src&&S.change.push(C):S.add.push(C)}(0<S.del.length||0<S.add.length||0<S.change.length)&&c.change.push(S)}}else c.add.push([o,g])}return c}function go(e,t,o,c){var f=e.db.createObjectStore(t,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return c.forEach(function(g){return ai(f,g)}),f}function mu(e,t){l(e).forEach(function(o){t.db.objectStoreNames.contains(o)||(ht&&console.debug("Dexie: Creating missing table",o),go(t,o,e[o].primKey,e[o].indexes))})}function ai(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ii(e,t,o){var c={};return P(t.objectStoreNames,0).forEach(function(f){for(var g=o.objectStore(f),S=uo(gu(L=g.keyPath),L||"",!0,!1,!!g.autoIncrement,L&&typeof L!="string",!0),D=[],$=0;$<g.indexNames.length;++$){var K=g.index(g.indexNames[$]),L=K.keyPath,K=uo(K.name,L,!!K.unique,!!K.multiEntry,!1,L&&typeof L!="string",!1);D.push(K)}c[f]=co(f,S,D)}),c}function oi(e,t,o){for(var c=o.db.objectStoreNames,f=0;f<c.length;++f){var g=c[f],S=o.objectStore(g);e._hasGetAll="getAll"in S;for(var D=0;D<S.indexNames.length;++D){var $=S.indexNames[D],L=S.index($).keyPath,K=typeof L=="string"?L:"["+P(L).join("+")+"]";!t[g]||(L=t[g].idxByName[K])&&(L.name=$,delete t[g].idxByName[K],t[g].idxByName[$]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function pu(e){return e.split(",").map(function(t,o){var c=(t=t.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return uo(c,f||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(f),o===0)})}var Qf=(si.prototype._parseStoresSpec=function(e,t){l(e).forEach(function(o){if(e[o]!==null){var c=pu(e[o]),f=c.shift();if(f.unique=!0,f.multi)throw new me.Schema("Primary key cannot be multi-valued");c.forEach(function(g){if(g.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),t[o]=co(o,f,c)}})},si.prototype.stores=function(o){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,o):o;var o=t._versions,c={},f={};return o.forEach(function(g){_(c,g._cfg.storesSource),f=g._cfg.dbschema={},g._parseStoresSpec(c,f)}),t._dbSchema=f,fo(t,[t._allTables,t,t.Transaction.prototype]),ri(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],l(f),f),t._storeNames=l(f),this},si.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ge(this._cfg.contentUpgrade||Ce,e),this},si);function si(){}function ho(e,t){var o=e._dbNamesDB;return o||(o=e._dbNamesDB=new er(Za,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function mo(e){return e&&typeof e.databases=="function"}function po(e){return gn(function(){return Be.letThrough=!0,e()})}function _o(e){return!("from"in e)}var Wt=function(e,t){if(!this){var o=new Wt;return e&&"d"in e&&_(o,e),o}_(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function ya(e,t,o){var c=st(t,o);if(!isNaN(c)){if(0<c)throw RangeError();if(_o(e))return _(e,{from:t,to:o,d:1});var f=e.l,c=e.r;if(st(o,e.from)<0)return f?ya(f,t,o):e.l={from:t,to:o,d:1,l:null,r:null},yu(e);if(0<st(t,e.to))return c?ya(c,t,o):e.r={from:t,to:o,d:1,l:null,r:null},yu(e);st(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),0<st(o,e.to)&&(e.to=o,e.r=null,e.d=e.l?e.l.d+1:1),o=!e.r,f&&!e.l&&ba(e,f),c&&o&&ba(e,c)}}function ba(e,t){_o(t)||function o(c,$){var g=$.from,S=$.to,D=$.l,$=$.r;ya(c,g,S),D&&o(c,D),$&&o(c,$)}(e,t)}function _u(e,t){var o=ui(t),c=o.next();if(c.done)return!1;for(var f=c.value,g=ui(e),S=g.next(f.from),D=S.value;!c.done&&!S.done;){if(st(D.from,f.to)<=0&&0<=st(D.to,f.from))return!0;st(f.from,D.from)<0?f=(c=o.next(D.from)).value:D=(S=g.next(f.from)).value}return!1}function ui(e){var t=_o(e)?null:{s:0,n:e};return{next:function(o){for(var c=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,c)for(;t.n.l&&st(o,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!c||st(o,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function yu(e){var t,o,c=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((o=e.l)===null||o===void 0?void 0:o.d)||0),f=1<c?"r":c<-1?"l":"";f&&(t=f=="r"?"l":"r",o=s({},e),c=e[f],e.from=c.from,e.to=c.to,e[f]=c[f],o[f]=c[t],(e[t]=o).d=bu(o)),e.d=bu(e)}function bu(o){var t=o.r,o=o.l;return(t?o?Math.max(t.d,o.d):t.d:o?o.d:0)+1}function ci(e,t){return l(t).forEach(function(o){e[o]?ba(e[o],t[o]):e[o]=function c(f){var g,S,D={};for(g in f)T(f,g)&&(S=f[g],D[g]=!S||typeof S!="object"||Y.has(S.constructor)?S:c(S));return D}(t[o])}),e}function yo(e,t){return e.all||t.all||Object.keys(e).some(function(o){return t[o]&&_u(t[o],e[o])})}p(Wt.prototype,((Rn={add:function(e){return ba(this,e),this},addKey:function(e){return ya(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(o){return ya(t,o,o)}),this},hasKey:function(e){var t=ui(this).next(e).value;return t&&st(t.from,e)<=0&&0<=st(t.to,e)}})[xe]=function(){return ui(this)},Rn));var Pr={},bo={},wo=!1;function li(e){ci(bo,e),wo||(wo=!0,setTimeout(function(){wo=!1,Eo(bo,!(bo={}))},0))}function Eo(e,t){t===void 0&&(t=!1);var o=new Set;if(e.all)for(var c=0,f=Object.values(Pr);c<f.length;c++)wu(S=f[c],e,o,t);else for(var g in e){var S,D=/^idb\:\/\/(.*)\/(.*)\//.exec(g);D&&(g=D[1],D=D[2],(S=Pr["idb://".concat(g,"/").concat(D)])&&wu(S,e,o,t))}o.forEach(function($){return $()})}function wu(e,t,o,c){for(var f=[],g=0,S=Object.entries(e.queries.query);g<S.length;g++){for(var D=S[g],$=D[0],L=[],K=0,C=D[1];K<C.length;K++){var H=C[K];yo(t,H.obsSet)?H.subscribers.forEach(function(F){return o.add(F)}):c&&L.push(H)}c&&f.push([$,L])}if(c)for(var N=0,B=f;N<B.length;N++){var V=B[N],$=V[0],L=V[1];e.queries.query[$]=L}}function Jf(e){var t=e._state,o=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ke(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var c=t.openCanceller,f=Math.round(10*e.verno),g=!1;function S(){if(t.openCanceller!==c)throw new me.DatabaseClosed("db.open() was cancelled")}function D(){return new ae(function(H,N){if(S(),!o)throw new me.MissingAPI;var B=e.name,V=t.autoSchema||!f?o.open(B):o.open(B,f);if(!V)throw new me.MissingAPI;V.onerror=Hn(N),V.onblocked=_t(e._fireOnBlocked),V.onupgradeneeded=_t(function(F){var q;K=V.transaction,t.autoSchema&&!e._options.allowEmptyDB?(V.onerror=ha,K.abort(),V.result.close(),(q=o.deleteDatabase(B)).onsuccess=q.onerror=_t(function(){N(new me.NoSuchDatabase("Database ".concat(B," doesnt exist")))})):(K.onerror=Hn(N),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,C=F<1,e.idbdb=V.result,g&&Zf(e,K),Xf(e,F/10,K,N))},N),V.onsuccess=_t(function(){K=null;var F,q,ee,te,le,Se=e.idbdb=V.result,Oe=P(Se.objectStoreNames);if(0<Oe.length)try{var Ae=Se.transaction((te=Oe).length===1?te[0]:te,"readonly");if(t.autoSchema)q=Se,ee=Ae,(F=e).verno=q.version/10,ee=F._dbSchema=ii(0,q,ee),F._storeNames=P(q.objectStoreNames,0),ri(F,[F._allTables],l(ee),ee);else if(oi(e,e._dbSchema,Ae),((le=vo(ii(0,(le=e).idbdb,Ae),le._dbSchema)).add.length||le.change.some(function(De){return De.add.length||De.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),f=Se.version+1,g=!0,H(D());ni(e,Ae)}catch{}Fr.push(e),Se.onversionchange=_t(function(De){t.vcFired=!0,e.on("versionchange").fire(De)}),Se.onclose=_t(function(De){e.on("close").fire(De)}),C&&(le=e._deps,Ae=B,Se=le.indexedDB,le=le.IDBKeyRange,mo(Se)||Ae===Za||ho(Se,le).put({name:Ae}).catch(Ce)),H()},N)}).catch(function(H){switch(H?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<f)return f=0,D()}return ae.reject(H)})}var $,L=t.dbReadyResolve,K=null,C=!1;return ae.race([c,(typeof navigator>"u"?ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(H){function N(){return indexedDB.databases().finally(H)}$=setInterval(N,100),N()}).finally(function(){return clearInterval($)}):Promise.resolve()).then(D)]).then(function(){return S(),t.onReadyBeingFired=[],ae.resolve(po(function(){return e.on.ready.fire(e.vip)})).then(function H(){if(0<t.onReadyBeingFired.length){var N=t.onReadyBeingFired.reduce(ge,Ce);return t.onReadyBeingFired=[],ae.resolve(po(function(){return N(e.vip)})).then(H)}})}).finally(function(){t.openCanceller===c&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(H){t.dbOpenError=H;try{K&&K.abort()}catch{}return c===t.openCanceller&&e._close(),Ke(H)}).finally(function(){t.openComplete=!0,L()}).then(function(){var H;return C&&(H={},e.tables.forEach(function(N){N.schema.indexes.forEach(function(B){B.name&&(H["idb://".concat(e.name,"/").concat(N.name,"/").concat(B.name)]=new Wt(-1/0,[[[]]]))}),H["idb://".concat(e.name,"/").concat(N.name,"/")]=H["idb://".concat(e.name,"/").concat(N.name,"/:dels")]=new Wt(-1/0,[[[]]])}),dr(ma).fire(H),Eo(H,!0)),e})}function So(e){function t(g){return e.next(g)}var o=f(t),c=f(function(g){return e.throw(g)});function f(g){return function($){var D=g($),$=D.value;return D.done?$:$&&typeof $.then=="function"?$.then(o,c):h($)?Promise.all($).then(o,c):o($)}}return f(t)()}function fi(e,t,o){for(var c=h(e)?e.slice():[e],f=0;f<o;++f)c.push(t);return c}var ed={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var o=e.table(t),c=o.schema,f={},g=[];function S(C,H,N){var B=_a(C),V=f[B]=f[B]||[],F=C==null?0:typeof C=="string"?1:C.length,q=0<H,q=s(s({},N),{name:q?"".concat(B,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:q,keyTail:H,keyLength:F,extractKey:lo(C),unique:!q&&N.unique});return V.push(q),q.isPrimaryKey||g.push(q),1<F&&S(F===2?C[0]:C.slice(0,F-1),H+1,N),V.sort(function(ee,te){return ee.keyTail-te.keyTail}),q}t=S(c.primaryKey.keyPath,0,c.primaryKey),f[":id"]=[t];for(var D=0,$=c.indexes;D<$.length;D++){var L=$[D];S(L.keyPath,0,L)}function K(C){var H,N=C.query.index;return N.isVirtual?s(s({},C),{query:{index:N.lowLevelIndex,range:(H=C.query.range,N=N.keyTail,{type:H.type===1?2:H.type,lower:fi(H.lower,H.lowerOpen?e.MAX_KEY:e.MIN_KEY,N),lowerOpen:!0,upper:fi(H.upper,H.upperOpen?e.MIN_KEY:e.MAX_KEY,N),upperOpen:!0})}}):C}return s(s({},o),{schema:s(s({},c),{primaryKey:t,indexes:g,getIndexByKeyPath:function(C){return(C=f[_a(C)])&&C[0]}}),count:function(C){return o.count(K(C))},query:function(C){return o.query(K(C))},openCursor:function(C){var H=C.query.index,N=H.keyTail,B=H.isVirtual,V=H.keyLength;return B?o.openCursor(K(C)).then(function(q){return q&&F(q)}):o.openCursor(C);function F(q){return Object.create(q,{continue:{value:function(ee){ee!=null?q.continue(fi(ee,C.reverse?e.MAX_KEY:e.MIN_KEY,N)):C.unique?q.continue(q.key.slice(0,V).concat(C.reverse?e.MIN_KEY:e.MAX_KEY,N)):q.continue()}},continuePrimaryKey:{value:function(ee,te){q.continuePrimaryKey(fi(ee,e.MAX_KEY,N),te)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var ee=q.key;return V===1?ee[0]:ee.slice(0,V)}},value:{get:function(){return q.value}}})}}})}})}};function Ao(e,t,o,c){return o=o||{},c=c||"",l(e).forEach(function(f){var g,S,D;T(t,f)?(g=e[f],S=t[f],typeof g=="object"&&typeof S=="object"&&g&&S?(D=de(g))!==de(S)?o[c+f]=t[f]:D==="Object"?Ao(g,S,o,c+f+"."):g!==S&&(o[c+f]=t[f]):g!==S&&(o[c+f]=t[f])):o[c+f]=void 0}),l(t).forEach(function(f){T(e,f)||(o[c+f]=t[f])}),o}function To(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var td={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var o=e.table(t),c=o.schema.primaryKey;return s(s({},o),{mutate:function(f){var g=Be.trans,S=g.table(t).hook,D=S.deleting,$=S.creating,L=S.updating;switch(f.type){case"add":if($.fire===Ce)break;return g._promise("readwrite",function(){return K(f)},!0);case"put":if($.fire===Ce&&L.fire===Ce)break;return g._promise("readwrite",function(){return K(f)},!0);case"delete":if(D.fire===Ce)break;return g._promise("readwrite",function(){return K(f)},!0);case"deleteRange":if(D.fire===Ce)break;return g._promise("readwrite",function(){return function C(H,N,B){return o.query({trans:H,values:!1,query:{index:c,range:N},limit:B}).then(function(V){var F=V.result;return K({type:"delete",keys:F,trans:H}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):F.length<B?{failures:[],numFailures:0,lastResult:void 0}:C(H,s(s({},N),{lower:F[F.length-1],lowerOpen:!0}),B)})})}(f.trans,f.range,1e4)},!0)}return o.mutate(f);function K(C){var H,N,B,V=Be.trans,F=C.keys||To(c,C);if(!F)throw new Error("Keys missing");return(C=C.type==="add"||C.type==="put"?s(s({},C),{keys:F}):s({},C)).type!=="delete"&&(C.values=i([],C.values)),C.keys&&(C.keys=i([],C.keys)),H=o,B=F,((N=C).type==="add"?Promise.resolve([]):H.getMany({trans:N.trans,keys:B,cache:"immutable"})).then(function(q){var ee=F.map(function(te,le){var Se,Oe,Ae,De=q[le],$e={onerror:null,onsuccess:null};return C.type==="delete"?D.fire.call($e,te,De,V):C.type==="add"||De===void 0?(Se=$.fire.call($e,te,C.values[le],V),te==null&&Se!=null&&(C.keys[le]=te=Se,c.outbound||k(C.values[le],c.keyPath,te))):(Se=Ao(De,C.values[le]),(Oe=L.fire.call($e,Se,te,De,V))&&(Ae=C.values[le],Object.keys(Oe).forEach(function(ke){T(Ae,ke)?Ae[ke]=Oe[ke]:k(Ae,ke,Oe[ke])}))),$e});return o.mutate(C).then(function(te){for(var le=te.failures,Se=te.results,Oe=te.numFailures,te=te.lastResult,Ae=0;Ae<F.length;++Ae){var De=(Se||F)[Ae],$e=ee[Ae];De==null?$e.onerror&&$e.onerror(le[Ae]):$e.onsuccess&&$e.onsuccess(C.type==="put"&&q[Ae]?C.values[Ae]:De)}return{failures:le,results:Se,numFailures:Oe,lastResult:te}}).catch(function(te){return ee.forEach(function(le){return le.onerror&&le.onerror(te)}),Promise.reject(te)})})}}})}})}};function Eu(e,t,o){try{if(!t||t.keys.length<e.length)return null;for(var c=[],f=0,g=0;f<t.keys.length&&g<e.length;++f)st(t.keys[f],e[g])===0&&(c.push(o?J(t.values[f]):t.values[f]),++g);return c.length===e.length?c:null}catch{return null}}var nd={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var o=e.table(t);return s(s({},o),{getMany:function(c){if(!c.cache)return o.getMany(c);var f=Eu(c.keys,c.trans._cache,c.cache==="clone");return f?ae.resolve(f):o.getMany(c).then(function(g){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?J(g):g},g})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),o.mutate(c)}})}}}};function Su(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Au(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rd={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,o=new Wt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(c,f,g){if(Be.subscr&&f!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Be.querier));return e.transaction(c,f,g)},table:function(c){var f=e.table(c),g=f.schema,S=g.primaryKey,C=g.indexes,D=S.extractKey,$=S.outbound,L=S.autoIncrement&&C.filter(function(N){return N.compound&&N.keyPath.includes(S.keyPath)}),K=s(s({},f),{mutate:function(N){function B(ke){return ke="idb://".concat(t,"/").concat(c,"/").concat(ke),te[ke]||(te[ke]=new Wt)}var V,F,q,ee=N.trans,te=N.mutatedParts||(N.mutatedParts={}),le=B(""),Se=B(":dels"),Oe=N.type,$e=N.type==="deleteRange"?[N.range]:N.type==="delete"?[N.keys]:N.values.length<50?[To(S,N).filter(function(ke){return ke}),N.values]:[],Ae=$e[0],De=$e[1],$e=N.trans._cache;return h(Ae)?(le.addKeys(Ae),($e=Oe==="delete"||Ae.length===De.length?Eu(Ae,$e):null)||Se.addKeys(Ae),($e||De)&&(V=B,F=$e,q=De,g.indexes.forEach(function(ke){var Fe=V(ke.name||"");function Je(at){return at!=null?ke.extractKey(at):null}function rt(at){return ke.multiEntry&&h(at)?at.forEach(function(_n){return Fe.addKey(_n)}):Fe.addKey(at)}(F||q).forEach(function(at,zt){var Ze=F&&Je(F[zt]),zt=q&&Je(q[zt]);st(Ze,zt)!==0&&(Ze!=null&&rt(Ze),zt!=null&&rt(zt))})}))):Ae?(De={from:(De=Ae.lower)!==null&&De!==void 0?De:e.MIN_KEY,to:(De=Ae.upper)!==null&&De!==void 0?De:e.MAX_KEY},Se.add(De),le.add(De)):(le.add(o),Se.add(o),g.indexes.forEach(function(ke){return B(ke.name).add(o)})),f.mutate(N).then(function(ke){return!Ae||N.type!=="add"&&N.type!=="put"||(le.addKeys(ke.results),L&&L.forEach(function(Fe){for(var Je=N.values.map(function(Ze){return Fe.extractKey(Ze)}),rt=Fe.keyPath.findIndex(function(Ze){return Ze===S.keyPath}),at=0,_n=ke.results.length;at<_n;++at)Je[at][rt]=ke.results[at];B(Fe.name).addKeys(Je)})),ee.mutatedParts=ci(ee.mutatedParts||{},te),ke})}}),C=function(B){var V=B.query,B=V.index,V=V.range;return[B,new Wt((B=V.lower)!==null&&B!==void 0?B:e.MIN_KEY,(V=V.upper)!==null&&V!==void 0?V:e.MAX_KEY)]},H={get:function(N){return[S,new Wt(N.key)]},getMany:function(N){return[S,new Wt().addKeys(N.keys)]},count:C,query:C,openCursor:C};return l(H).forEach(function(N){K[N]=function(B){var V=Be.subscr,F=!!V,q=Su(Be,f)&&Au(N,B)?B.obsSet={}:V;if(F){var ee=function(De){return De="idb://".concat(t,"/").concat(c,"/").concat(De),q[De]||(q[De]=new Wt)},te=ee(""),le=ee(":dels"),V=H[N](B),F=V[0],V=V[1];if((N==="query"&&F.isPrimaryKey&&!B.values?le:ee(F.name||"")).add(V),!F.isPrimaryKey){if(N!=="count"){var Se=N==="query"&&$&&B.values&&f.query(s(s({},B),{values:!1}));return f[N].apply(this,arguments).then(function(De){if(N==="query"){if($&&B.values)return Se.then(function(Je){return Je=Je.result,te.addKeys(Je),De});var $e=B.values?De.result.map(D):De.result;(B.values?te:le).addKeys($e)}else if(N==="openCursor"){var ke=De,Fe=B.values;return ke&&Object.create(ke,{key:{get:function(){return le.addKey(ke.primaryKey),ke.key}},primaryKey:{get:function(){var Je=ke.primaryKey;return le.addKey(Je),Je}},value:{get:function(){return Fe&&te.addKey(ke.primaryKey),ke.value}}})}return De})}le.add(o)}}return f[N].apply(this,arguments)}}),K}})}};function Tu(e,t,o){if(o.numFailures===0)return t;if(t.type==="deleteRange")return null;var c=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return o.numFailures===c?null:(t=s({},t),h(t.keys)&&(t.keys=t.keys.filter(function(f,g){return!(g in o.failures)})),"values"in t&&h(t.values)&&(t.values=t.values.filter(function(f,g){return!(g in o.failures)})),t)}function Ro(e,t){return o=e,((c=t).lower===void 0||(c.lowerOpen?0<st(o,c.lower):0<=st(o,c.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?st(e,t.upper)<0:st(e,t.upper)<=0));var o,c}function Ru(e,t,H,c,f,g){if(!H||H.length===0)return e;var S=t.query.index,D=S.multiEntry,$=t.query.range,L=c.schema.primaryKey.extractKey,K=S.extractKey,C=(S.lowLevelIndex||S).extractKey,H=H.reduce(function(N,B){var V=N,F=[];if(B.type==="add"||B.type==="put")for(var q=new Wt,ee=B.values.length-1;0<=ee;--ee){var te,le=B.values[ee],Se=L(le);q.hasKey(Se)||(te=K(le),(D&&h(te)?te.some(function(ke){return Ro(ke,$)}):Ro(te,$))&&(q.addKey(Se),F.push(le)))}switch(B.type){case"add":var Oe=new Wt().addKeys(t.values?N.map(function(Fe){return L(Fe)}):N),V=N.concat(t.values?F.filter(function(Fe){return Fe=L(Fe),!Oe.hasKey(Fe)&&(Oe.addKey(Fe),!0)}):F.map(function(Fe){return L(Fe)}).filter(function(Fe){return!Oe.hasKey(Fe)&&(Oe.addKey(Fe),!0)}));break;case"put":var Ae=new Wt().addKeys(B.values.map(function(Fe){return L(Fe)}));V=N.filter(function(Fe){return!Ae.hasKey(t.values?L(Fe):Fe)}).concat(t.values?F:F.map(function(Fe){return L(Fe)}));break;case"delete":var De=new Wt().addKeys(B.keys);V=N.filter(function(Fe){return!De.hasKey(t.values?L(Fe):Fe)});break;case"deleteRange":var $e=B.range;V=N.filter(function(Fe){return!Ro(L(Fe),$e)})}return V},e);return H===e?e:(H.sort(function(N,B){return st(C(N),C(B))||st(L(N),L(B))}),t.limit&&t.limit<1/0&&(H.length>t.limit?H.length=t.limit:e.length===t.limit&&H.length<t.limit&&(f.dirty=!0)),g?Object.freeze(H):H)}function xu(e,t){return st(e.lower,t.lower)===0&&st(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ad(e,t){return function(o,c,f,g){if(o===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=st(o,c))===0){if(f&&g)return 0;if(f)return 1;if(g)return-1}return c}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(o,c,f,g){if(o===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=st(o,c))===0){if(f&&g)return 0;if(f)return-1;if(g)return 1}return c}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function id(e,t,o,c){e.subscribers.add(o),c.addEventListener("abort",function(){var f,g;e.subscribers.delete(o),e.subscribers.size===0&&(f=e,g=t,setTimeout(function(){f.subscribers.size===0&&ve(g,f)},3e3))})}var od={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(o,c,f){var g,S,D=e.transaction(o,c,f);return c==="readwrite"&&(S=(g=new AbortController).signal,f=function($){return function(){if(g.abort(),c==="readwrite"){for(var L=new Set,K=0,C=o;K<C.length;K++){var H=C[K],N=Pr["idb://".concat(t,"/").concat(H)];if(N){var B=e.table(H),V=N.optimisticOps.filter(function(Fe){return Fe.trans===D});if(D._explicit&&$&&D.mutatedParts)for(var F=0,q=Object.values(N.queries.query);F<q.length;F++)for(var ee=0,te=(Oe=q[F]).slice();ee<te.length;ee++)yo((Ae=te[ee]).obsSet,D.mutatedParts)&&(ve(Oe,Ae),Ae.subscribers.forEach(function(Fe){return L.add(Fe)}));else if(0<V.length){N.optimisticOps=N.optimisticOps.filter(function(Fe){return Fe.trans!==D});for(var le=0,Se=Object.values(N.queries.query);le<Se.length;le++)for(var Oe,Ae,De,$e=0,ke=(Oe=Se[le]).slice();$e<ke.length;$e++)(Ae=ke[$e]).res!=null&&D.mutatedParts&&($&&!Ae.dirty?(De=Object.isFrozen(Ae.res),De=Ru(Ae.res,Ae.req,V,B,Ae,De),Ae.dirty?(ve(Oe,Ae),Ae.subscribers.forEach(function(Fe){return L.add(Fe)})):De!==Ae.res&&(Ae.res=De,Ae.promise=ae.resolve({result:De}))):(Ae.dirty&&ve(Oe,Ae),Ae.subscribers.forEach(function(Fe){return L.add(Fe)})))}}}L.forEach(function(Fe){return Fe()})}}},D.addEventListener("abort",f(!1),{signal:S}),D.addEventListener("error",f(!1),{signal:S}),D.addEventListener("complete",f(!0),{signal:S})),D},table:function(o){var c=e.table(o),f=c.schema.primaryKey;return s(s({},c),{mutate:function(g){var S=Be.trans;if(f.outbound||S.db._options.cache==="disabled"||S.explicit||S.idbtrans.mode!=="readwrite")return c.mutate(g);var D=Pr["idb://".concat(t,"/").concat(o)];return D?(S=c.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||To(f,g).some(function($){return $==null}))?(D.optimisticOps.push(g),g.mutatedParts&&li(g.mutatedParts),S.then(function($){0<$.numFailures&&(ve(D.optimisticOps,g),($=Tu(0,g,$))&&D.optimisticOps.push($),g.mutatedParts&&li(g.mutatedParts))}),S.catch(function(){ve(D.optimisticOps,g),g.mutatedParts&&li(g.mutatedParts)})):S.then(function($){var L=Tu(0,s(s({},g),{values:g.values.map(function(K,C){var H;return $.failures[C]?K:(K=(H=f.keyPath)!==null&&H!==void 0&&H.includes(".")?J(K):s({},K),k(K,f.keyPath,$.results[C]),K)})}),$);D.optimisticOps.push(L),queueMicrotask(function(){return g.mutatedParts&&li(g.mutatedParts)})}),S):c.mutate(g)},query:function(g){if(!Su(Be,c)||!Au("query",g))return c.query(g);var S=((L=Be.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",C=Be,D=C.requery,$=C.signal,L=function(B,V,F,q){var ee=Pr["idb://".concat(B,"/").concat(V)];if(!ee)return[];if(!(V=ee.queries[F]))return[null,!1,ee,null];var te=V[(q.query?q.query.index.name:null)||""];if(!te)return[null,!1,ee,null];switch(F){case"query":var le=te.find(function(Se){return Se.req.limit===q.limit&&Se.req.values===q.values&&xu(Se.req.query.range,q.query.range)});return le?[le,!0,ee,te]:[te.find(function(Se){return("limit"in Se.req?Se.req.limit:1/0)>=q.limit&&(!q.values||Se.req.values)&&ad(Se.req.query.range,q.query.range)}),!1,ee,te];case"count":return le=te.find(function(Se){return xu(Se.req.query.range,q.query.range)}),[le,!!le,ee,te]}}(t,o,"query",g),K=L[0],C=L[1],H=L[2],N=L[3];return K&&C?K.obsSet=g.obsSet:(C=c.query(g).then(function(B){var V=B.result;if(K&&(K.res=V),S){for(var F=0,q=V.length;F<q;++F)Object.freeze(V[F]);Object.freeze(V)}else B.result=J(V);return B}).catch(function(B){return N&&K&&ve(N,K),Promise.reject(B)}),K={obsSet:g.obsSet,promise:C,subscribers:new Set,type:"query",req:g,dirty:!1},N?N.push(K):(N=[K],(H=H||(Pr["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=N)),id(K,N,D,$),K.promise.then(function(B){return{result:Ru(B.result,g,H?.optimisticOps,c,K,S)}})}})}})}};function di(e,t){return new Proxy(e,{get:function(o,c,f){return c==="db"?t:Reflect.get(o,c,f)}})}var er=(Tt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new me.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,o=t.filter(function(c){return c._cfg.version===e})[0];return o||(o=new this.Version(e),t.push(o),t.sort(Yf),o.stores({}),this._state.autoSchema=!1,o)},Tt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?e():new ae(function(o,c){if(t._state.openComplete)return c(new me.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void c(new me.DatabaseClosed);t.open().catch(Ce)}t._state.dbReadyPromise.then(o,c)}).then(e)},Tt.prototype.use=function(e){var t=e.stack,o=e.create,c=e.level,f=e.name;return f&&this.unuse({stack:t,name:f}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:o,level:c??10,name:f}),e.sort(function(g,S){return g.level-S.level}),this},Tt.prototype.unuse=function(e){var t=e.stack,o=e.name,c=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(f){return c?f.create!==c:!!o&&f.name!==o})),this},Tt.prototype.open=function(){var e=this;return Nn(Qt,function(){return Jf(e)})},Tt.prototype._close=function(){var e=this._state,t=Fr.indexOf(this);if(0<=t&&Fr.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ae(function(o){e.dbReadyResolve=o}),e.openCanceller=new ae(function(o,c){e.cancelOpen=c}))},Tt.prototype.close=function(o){var t=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;t?(o.isBeingOpened&&o.cancelOpen(new me.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new me.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Tt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new ae(function(f,g){function S(){t.close(e);var D=t._deps.indexedDB.deleteDatabase(t.name);D.onsuccess=_t(function(){var $,L,K;$=t._deps,L=t.name,K=$.indexedDB,$=$.IDBKeyRange,mo(K)||L===Za||ho(K,$).delete(L).catch(Ce),f()}),D.onerror=Hn(g),D.onblocked=t._fireOnBlocked}if(o)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(S):S()})},Tt.prototype.backendDB=function(){return this.idbdb},Tt.prototype.isOpen=function(){return this.idbdb!==null},Tt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Tt.prototype,"tables",{get:function(){var e=this;return l(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Tt.prototype.transaction=function(){var e=(function(t,o,c){var f=arguments.length;if(f<2)throw new me.InvalidArgument("Too few arguments");for(var g=new Array(f-1);--f;)g[f-1]=arguments[f];return c=g.pop(),[t,oe(g),c]}).apply(this,arguments);return this._transaction.apply(this,e)},Tt.prototype._transaction=function(e,t,o){var c=this,f=Be.trans;f&&f.db===this&&e.indexOf("!")===-1||(f=null);var g,S,D=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(S=t.map(function(L){if(L=L instanceof c.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),e=="r"||e===no)g=no;else{if(e!="rw"&&e!=ro)throw new me.InvalidArgument("Invalid transaction mode: "+e);g=ro}if(f){if(f.mode===no&&g===ro){if(!D)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f=null}f&&S.forEach(function(L){if(f&&f.storeNames.indexOf(L)===-1){if(!D)throw new me.SubTransaction("Table "+L+" not included in parent transaction.");f=null}}),D&&f&&!f.active&&(f=null)}}catch(L){return f?f._promise(null,function(K,C){C(L)}):Ke(L)}var $=(function L(K,C,H,N,B){return ae.resolve().then(function(){var V=Be.transless||Be,F=K._createTransaction(C,H,K._dbSchema,N);if(F.explicit=!0,V={trans:F,transless:V},N)F.idbtrans=N.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,K._state.PR1398_maxLoop=3}catch(te){return te.name===Pe.InvalidState&&K.isOpen()&&0<--K._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),K.close({disableAutoOpen:!1}),K.open().then(function(){return L(K,C,H,null,B)})):Ke(te)}var q,ee=se(B);return ee&&Jn(),V=ae.follow(function(){var te;(q=B.call(F,F))&&(ee?(te=$n.bind(null,null),q.then(te,te)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=So(q)))},V),(q&&typeof q.then=="function"?ae.resolve(q).then(function(te){return F.active?te:Ke(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):V.then(function(){return q})).then(function(te){return N&&F._resolve(),F._completion.then(function(){return te})}).catch(function(te){return F._reject(te),Ke(te)})})}).bind(null,this,g,S,f,o);return f?f._promise(g,$,"lock"):Be.trans?Nn(Be.transless,function(){return c._whenReady($)}):this._whenReady($)},Tt.prototype.table=function(e){if(!T(this._allTables,e))throw new me.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Tt);function Tt(e,t){var o=this;this._middlewares={},this.verno=0;var c=Tt.dependencies;this._options=t=s({addons:Tt.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},c=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,g,S,D,$,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ce,dbReadyPromise:null,cancelOpen:Ce,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};L.dbReadyPromise=new ae(function(C){L.dbReadyResolve=C}),L.openCanceller=new ae(function(C,H){L.cancelOpen=H}),this._state=L,this.name=e,this.on=da(this,"populate","blocked","versionchange","close",{ready:[ge,Ce]}),this.on.ready.subscribe=R(this.on.ready.subscribe,function(C){return function(H,N){Tt.vip(function(){var B,V=o._state;V.openComplete?(V.dbOpenError||ae.resolve().then(H),N&&C(H)):V.onReadyBeingFired?(V.onReadyBeingFired.push(H),N&&C(H)):(C(H),B=o,N||C(function F(){B.on.ready.unsubscribe(H),B.on.ready.unsubscribe(F)}))})}}),this.Collection=(f=this,va(Vf.prototype,function(q,F){this.db=f;var N=au,B=null;if(F)try{N=F()}catch(ee){B=ee}var V=q._ctx,F=V.table,q=F.hook.reading.fire;this._ctx={table:F,index:V.index,isPrimKey:!V.index||F.schema.primKey.keyPath&&V.index===F.schema.primKey.name,range:N,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:B,or:V.or,valueMapper:q!==be?q:null}})),this.Table=(g=this,va(uu.prototype,function(C,H,N){this.db=g,this._tx=N,this.name=C,this.schema=H,this.hook=g._allTables[C]?g._allTables[C].hook:da(null,{creating:[gt,Ce],reading:[Me,be],updating:[nt,Ce],deleting:[wt,Ce]})})),this.Transaction=(S=this,va(jf.prototype,function(C,H,N,B,V){var F=this;this.db=S,this.mode=C,this.storeNames=H,this.schema=N,this.chromeTransactionDurability=B,this.idbtrans=null,this.on=da(this,"complete","error","abort"),this.parent=V||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ae(function(q,ee){F._resolve=q,F._reject=ee}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(q){var ee=F.active;return F.active=!1,F.on.error.fire(q),F.parent?F.parent._reject(q):ee&&F.idbtrans&&F.idbtrans.abort(),Ke(q)})})),this.Version=(D=this,va(Qf.prototype,function(C){this.db=D,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=($=this,va(vu.prototype,function(C,H,N){if(this.db=$,this._ctx={table:C,index:H===":id"?null:H,or:N},this._cmp=this._ascending=st,this._descending=function(B,V){return st(V,B)},this._max=function(B,V){return 0<st(B,V)?B:V},this._min=function(B,V){return st(B,V)<0?B:V},this._IDBKeyRange=$._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(C){0<C.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(C){!C.newVersion||C.newVersion<C.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(C.oldVersion/10))}),this._maxKey=pa(t.IDBKeyRange),this._createTransaction=function(C,H,N,B){return new o.Transaction(C,H,N,o._options.chromeTransactionDurability,B)},this._fireOnBlocked=function(C){o.on("blocked").fire(C),Fr.filter(function(H){return H.name===o.name&&H!==o&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(C)})},this.use(nd),this.use(od),this.use(rd),this.use(ed),this.use(td);var K=new Proxy(this,{get:function(C,H,N){if(H==="_vip")return!0;if(H==="table")return function(V){return di(o.table(V),K)};var B=Reflect.get(C,H,N);return B instanceof uu?di(B,K):H==="tables"?B.map(function(V){return di(V,K)}):H==="_createTransaction"?function(){return di(B.apply(this,arguments),K)}:B}});this.vip=K,c.forEach(function(C){return C(o)})}var vi,Rn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",sd=(xo.prototype.subscribe=function(e,t,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:o})},xo.prototype[Rn]=function(){return this},xo);function xo(e){this._subscribe=e}try{vi={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{vi={indexedDB:null,IDBKeyRange:null}}function Pu(e){var t,o=!1,c=new sd(function(f){var g=se(e),S,D=!1,$={},L={},K={get closed(){return D},unsubscribe:function(){D||(D=!0,S&&S.abort(),C&&dr.storagemutated.unsubscribe(N))}};f.start&&f.start(K);var C=!1,H=function(){return qe(B)},N=function(V){ci($,V),yo(L,$)&&H()},B=function(){var V,F,q;!D&&vi.indexedDB&&($={},V={},S&&S.abort(),S=new AbortController,q=function(ee){var te=ur();try{g&&Jn();var le=gn(e,ee);return le=g?le.finally($n):le}finally{te&&cr()}}(F={subscr:V,signal:S.signal,requery:H,querier:e,trans:null}),Promise.resolve(q).then(function(ee){o=!0,t=ee,D||F.signal.aborted||($={},function(te){for(var le in te)if(T(te,le))return;return 1}(L=V)||C||(dr(ma,N),C=!0),qe(function(){return!D&&f.next&&f.next(ee)}))},function(ee){o=!1,["DatabaseClosedError","AbortError"].includes(ee?.name)||D||qe(function(){D||f.error&&f.error(ee)})}))};return setTimeout(H,0),K});return c.hasValue=function(){return o},c.getValue=function(){return t},c}var Dr=er;function Po(e){var t=vr;try{vr=!0,dr.storagemutated.fire(e),Eo(e,!0)}finally{vr=t}}p(Dr,s(s({},ct),{delete:function(e){return new Dr(e,{addons:[]}).delete()},exists:function(e){return new Dr(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Dr.dependencies,o=t.indexedDB,t=t.IDBKeyRange,(mo(o)?Promise.resolve(o.databases()).then(function(c){return c.map(function(f){return f.name}).filter(function(f){return f!==Za})}):ho(o,t).toCollection().primaryKeys()).then(e)}catch{return Ke(new me.MissingAPI)}var t,o},defineClass:function(){return function(e){_(this,e)}},ignoreTransaction:function(e){return Be.trans?Nn(Be.transless,e):e()},vip:po,async:function(e){return function(){try{var t=So(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ae.resolve(t)}catch(o){return Ke(o)}}},spawn:function(e,t,o){try{var c=So(e.apply(o,t||[]));return c&&typeof c.then=="function"?c:ae.resolve(c)}catch(f){return Ke(f)}},currentTransaction:{get:function(){return Be.trans||null}},waitFor:function(e,t){return t=ae.resolve(typeof e=="function"?Dr.ignoreTransaction(e):e).timeout(t||6e4),Be.trans?Be.trans.waitFor(t):t},Promise:ae,debug:{get:function(){return ht},set:function(e){Zt(e)}},derive:E,extend:_,props:p,override:R,Events:da,on:dr,liveQuery:Pu,extendObservabilitySet:ci,getByKeyPath:G,setByKeyPath:k,delByKeyPath:function(e,t){typeof t=="string"?k(e,t,void 0):"length"in t&&[].map.call(t,function(o){k(e,o,void 0)})},shallowClone:U,deepClone:J,getObjectDiff:Ao,cmp:st,asap:I,minKey:-1/0,addons:[],connections:Fr,errnames:Pe,dependencies:vi,cache:Pr,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,o){return e+t/Math.pow(10,2*o)})})),Dr.maxKey=pa(Dr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(dr(ma,function(e){vr||(e=new CustomEvent(so,{detail:e}),vr=!0,dispatchEvent(e),vr=!1)}),addEventListener(so,function(e){e=e.detail,vr||Po(e)}));var Vr,vr=!1,Du=function(){};return typeof BroadcastChannel<"u"&&((Du=function(){(Vr=new BroadcastChannel(so)).onmessage=function(e){return e.data&&Po(e.data)}})(),typeof Vr.unref=="function"&&Vr.unref(),dr(ma,function(e){vr||Vr.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!er.disableBfCache&&e.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),Vr?.close();for(var t=0,o=Fr;t<o.length;t++)o[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!er.disableBfCache&&e.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),Du(),Po({all:new Wt(-1/0,[[]])}))})),ae.rejectionMapper=function(e,t){return!e||e instanceof Ee||e instanceof TypeError||e instanceof SyntaxError||!e.name||!z[e.name]?e:(t=new z[e.name](t||e.message,e),"stack"in e&&y(t,"stack",{get:function(){return this.inner.stack}}),t)},Zt(ht),s(er,Object.freeze({__proto__:null,Dexie:er,liveQuery:Pu,Entity:iu,cmp:st,PropModification:ga,replacePrefix:function(e,t){return new ga({replacePrefix:[e,t]})},add:function(e){return new ga({add:e})},remove:function(e){return new ga({remove:e})},default:er,RangeSet:Wt,mergeRanges:ba,rangesOverlap:_u}),{default:er}),er})}(yi)),yi.exports}var Sv=Ev();const is=bv(Sv),ll=Symbol.for("Dexie"),ki=globalThis[ll]||(globalThis[ll]=is);if(is.semVer!==ki.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${is.semVer} and ${ki.semVer}`);const{liveQuery:Fs,mergeRanges:a0,rangesOverlap:i0,RangeSet:o0,cmp:s0,Entity:u0,PropModification:c0,replacePrefix:l0,add:f0,remove:d0}=ki;class Av extends ki{roms;opts;constructor(){super("myDatabase"),this.version(3).stores({roms:"crc32, title",opts:"key"})}}const Dn=new Av;var Tv=Re('<button type="button"><img/></button>');function mr(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(wn,"$darkTheme",n);let u=he(r,"item",19,()=>({id:"",icon:""})),l=he(r,"alt",3,"Icon"),h=he(r,"toggle",3,!1),_=he(r,"active",3,!1),m=he(r,"select",3,()=>{}),b=!1;function T(y){y.preventDefault(),b=h()?!b:!0,m()(y.target.id,b)}var p=Tv();p.__click=T;var A=W(p);j(p),lt(()=>{We(p,1,`btn btn-lg btn-primary btn-square p-1.5 ${_()?"btn-active":""}`),We(A,1,_r(i()?"invert":"")),$t(A,"id",u().id),$t(A,"src",u().icon),$t(A,"alt",l())}),ie(a,p),ot(),s()}on(["click"]);const Rv=a=>a;function Pt(a,{delay:r=0,duration:n=400,easing:s=Rv}={}){const i=+getComputedStyle(a).opacity;return{delay:r,duration:n,easing:s,css:u=>`opacity: ${u*i}`}}var xv=Re('<div><div class="mx-1 flex space-x-1"></div></div>'),Pv=Re('<div class="flex border-0"><div><div class="border-0"><!></div></div> <!></div>');function Io(a,r){let n=he(r,"expanded",3,!1),s=he(r,"item",19,()=>({id:"",icon:""})),i=he(r,"subitems",19,()=>[{id:"",icon:""}]),u=he(r,"select",3,()=>{});var l=Pv(),h=W(l),_=W(h),m=W(_);mr(m,{select:u(),get active(){return n()},get item(){return s()}}),j(_),j(h);var b=Q(h,2);{var T=p=>{var A=xv(),y=W(A);ta(y,21,i,ea,(E,x,M,P)=>{mr(E,{select:u(),get item(){return d(x)}})}),j(y),j(A),xt(3,A,()=>Pt,()=>({duration:200})),ie(p,A)};Xe(b,p=>{n()&&p(T)})}j(l),ie(a,l)}var Dv=Re('<div class="h-2"></div>');function $o(a){var r=Dv();ie(a,r)}var kv=Re("<!> <!>",1),Ov=Re("<!> <!>",1),Cv=Re('<div><div class="bg-base-100/75 absolute top-0 left-0 z-40 flex w-16 flex-col pl-2"><div class="mt-1.5 mb-2 flex flex-col space-y-1.5 border-0"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function Mv(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(Ps,"$running",n),u=()=>O(yn,"$port1",n),l=()=>O(bn,"$port2",n),h=()=>O(Ta,"$layout",n),_=()=>O(Ki,"$showSidebar",n),m=()=>O(sa,"$poweredOn",n),b=()=>O(Ft,"$layer",n),T=()=>O($l,"$debugDma",n);let p=he(r,"action",3,()=>{}),A=Ot(""),y=200;function E(xe,we){He(A,xe==d(A)?"":xe,!0),p()(xe,we)}const x=["icons/device-none.png","icons/device-mouse.png","icons/device-keyset-1.png","icons/device-keyset-2.png","icons/device-usb-1.png","icons/device-usb-2.png"];let M="icons/powerIcon.png",P="icons/resetIcon.png",R="icons/settingsIcon.png",v="icons/retroShellIcon.png",I="icons/monitorIcon.png",G=Qe(()=>i()?"icons/pauseIcon.png":"icons/runIcon.png"),k=Qe(()=>x[u()]),U=Qe(()=>x[l()]),X=Qe(()=>h()=="full"?"icons/layoutFullIcon.png":h()=="aspect"?"icons/layoutAspectIcon.png":"icons/layoutFitIcon.png");const oe=[{id:"empty1",icon:x[0]},{id:"mouse1",icon:x[1]},{id:"keyset11",icon:x[2]},{id:"keyset12",icon:x[3]},{id:"gamepad11",icon:x[4]}],Y=[{id:"empty2",icon:x[0]},{id:"mouse2",icon:x[1]},{id:"keyset21",icon:x[2]},{id:"keyset22",icon:x[3]},{id:"gamepad21",icon:x[4]}],Z=[{id:"aspect",icon:"icons/layoutAspectIcon.png"},{id:"fit",icon:"icons/layoutFitIcon.png"},{id:"full",icon:"icons/layoutFullIcon.png"}];var J=Et(),ye=ze(J);{var de=xe=>{var we=Cv(),ve=W(we),Te=W(ve),ne=W(Te);mr(ne,{select:E,item:{id:"power",icon:M}});var se=Q(ne,2);{var ce=nt=>{var pe=kv(),ge=ze(pe);const ht=Qe(()=>({id:"pause",icon:d(G)}));mr(ge,{select:E,get item(){return d(ht)}});var Zt=Q(ge,2);mr(Zt,{select:E,item:{id:"reset",icon:P}}),ie(nt,pe)};Xe(se,nt=>{m()&&nt(ce)})}var Ee=Q(se,2);$o(Ee);var Ie=Q(Ee,2);const Ne=Qe(()=>d(A)==="port1"),ue=Qe(()=>({id:"port1",icon:d(k)}));Io(Ie,{select:E,get expanded(){return d(Ne)},get item(){return d(ue)},get subitems(){return oe}});var Pe=Q(Ie,2);const Ve=Qe(()=>d(A)==="port2"),me=Qe(()=>({id:"port2",icon:d(U)}));Io(Pe,{select:E,get expanded(){return d(Ve)},get item(){return d(me)},get subitems(){return Y}});var z=Q(Pe,2);$o(z);var ct=Q(z,2);const Ce=Qe(()=>b()===dt.settings);mr(ct,{select:E,item:{id:"settings",icon:R},get active(){return d(Ce)}});var be=Q(ct,2);const Me=Qe(()=>b()===dt.shell);mr(be,{select:E,item:{id:"shell",icon:v},get active(){return d(Me)}});var tt=Q(be,2);$o(tt);var gt=Q(tt,2);{var wt=nt=>{var pe=Ov(),ge=ze(pe);const ht=Qe(()=>d(A)==="layout"),Zt=Qe(()=>({id:"layout",icon:d(X)}));Io(ge,{select:E,get expanded(){return d(ht)},get item(){return d(Zt)},get subitems(){return Z}});var cn=Q(ge,2);mr(cn,{select:E,item:{id:"monitor",icon:I},get active(){return T()}}),ie(nt,pe)};Xe(gt,nt=>{m()&&nt(wt)})}j(Te),j(ve),j(we),xt(3,we,()=>Pt,()=>({duration:y})),ie(xe,we)};Xe(ye,xe=>{_()&&xe(de)})}ie(a,J),ot(),s()}var Iv=Xt("<title> </title>"),$v=Xt('<svg xmlns="http://www.w3.org/2000/svg" class="svelte-c8tyih"><!><!></svg>');function un(a,r){let n=he(r,"title",8,null),s=he(r,"viewBox",8);var i=$v(),u=W(i);{var l=_=>{var m=Iv(),b=W(m,!0);j(m),lt(()=>At(b,n())),ie(_,m)};Xe(u,_=>{n()&&_(l)})}var h=Q(u);ka(h,r,"default",{}),j(i),lt(()=>$t(i,"viewBox",s())),ie(a,i)}var Nv=Xt('<path d="M16.922 2.029c-7.716 0-13.971 6.255-13.971 13.971s6.255 13.971 13.971 13.971c7.716 0 13.971-6.255 13.971-13.971s-6.255-13.971-13.971-13.971zM13.224 17.246c-0.178 0.106-0.35 0.178-0.568 0.238-0.172 0.047-0.344 0.106-0.382 0.13-0.107 0.068-0.289 0.377-0.391 0.66-0.127 0.354-0.172 0.721-0.131 1.061 0.038 0.314 0.168 0.915 0.252 1.172 0.070 0.213 0.387 0.889 0.543 1.158 0.13 0.224 0.136 0.299 0.030 0.426-0.17 0.204-0.53 0.356-1.030 0.435-0.43 0.068-0.788 0.079-1.134 0.035-0.639-0.082-1.090-0.234-1.243-0.418-0.141-0.169-0.136-0.193 0.193-0.857 0.321-0.649 0.408-0.879 0.535-1.414 0.066-0.279 0.079-0.4 0.079-0.755-0.001-0.497-0.046-0.706-0.222-1.034-0.219-0.41-0.313-0.484-0.79-0.617-0.574-0.161-1.346-0.682-2.049-1.383-0.353-0.353-0.701-0.895-0.918-1.432-0.18-0.446-0.341-1.379-0.248-1.439 0.024-0.015 0.807-0.024 1.594-0.026s1.579 0.004 1.618 0.019c0.028 0.011 0.077 0.081 0.109 0.158 0.114 0.268 0.827 1.233 1.161 1.569 0.644 0.649 1.003 0.929 1.793 1.405 0.397 0.239 0.823 0.432 1.287 0.584 0.242 0.079 0.227 0.136-0.091 0.325zM18.266 19.632c0.002 0.639 0.009 0.721 0.080 1.026 0.080 0.342 0.401 1.328 0.546 1.675 0.147 0.353 0.633 1.369 0.744 1.555 0.131 0.219 0.135 0.294 0.023 0.472-0.231 0.367-1.026 0.654-2.126 0.765-0.539 0.055-0.84 0.054-1.343-0.002-0.515-0.057-0.838-0.122-1.186-0.238-0.164-0.055-0.334-0.108-0.377-0.118-0.127-0.031-0.43-0.251-0.515-0.374-0.157-0.229-0.162-0.213 0.329-1.205 0.446-0.902 0.499-1.033 0.723-1.791 0.189-0.64 0.244-0.886 0.278-1.263 0.043-0.474 0.018-1.226-0.049-1.514-0.116-0.492-0.405-1.018-0.778-1.415-0.253-0.27-0.493-0.436-0.793-0.548-0.851-0.32-1.748-0.824-2.393-1.348-0.333-0.27-0.967-0.893-1.217-1.196-0.674-0.816-1.265-1.984-1.475-2.914-0.107-0.473-0.185-1.038-0.173-1.249l0.008-0.159v0.001h16.568l0.010 0.136c0.025 0.344-0.182 1.371-0.374 1.855-0.059 0.149-0.145 0.384-0.191 0.522s-0.109 0.288-0.14 0.333c-0.031 0.045-0.115 0.192-0.186 0.324-0.585 1.092-1.713 2.248-2.903 2.974-0.404 0.247-1.073 0.571-1.433 0.694-0.156 0.053-0.324 0.133-0.374 0.176-0.247 0.217-0.587 0.583-0.704 0.758-0.072 0.108-0.146 0.206-0.166 0.218-0.064 0.040-0.304 0.635-0.362 0.899-0.046 0.211-0.056 0.38-0.054 0.951zM26.404 16.568c-0.493 0.432-0.947 0.692-1.574 0.905-0.391 0.132-0.406 0.141-0.511 0.282-0.159 0.213-0.353 0.615-0.387 0.802-0.051 0.279-0.036 0.824 0.032 1.161 0.135 0.673 0.285 1.093 0.626 1.758 0.21 0.41 0.217 0.428 0.182 0.533-0.079 0.242-0.524 0.448-1.154 0.534-0.75 0.103-1.525 0.016-2.012-0.226-0.209-0.104-0.395-0.288-0.395-0.391 0-0.020 0.135-0.303 0.299-0.629 0.43-0.856 0.63-1.556 0.636-2.224 0.003-0.378-0.048-0.6-0.221-0.972-0.184-0.392-0.306-0.485-0.868-0.658-0.178-0.055-0.291-0.111-0.644-0.32-0.201-0.119-0.171-0.153 0.291-0.311 0.536-0.184 1.214-0.563 1.851-1.037 0.339-0.252 1.16-1.058 1.437-1.411 0.242-0.307 0.532-0.741 0.641-0.957 0.043-0.087 0.105-0.171 0.136-0.189 0.039-0.021 1.287-0.034 2.238-0.032 0.57 0.002 1.034 0.006 1.066 0.019 0.037 0.014 0.047 0.066 0.047 0.245 0 0.294-0.225 1.175-0.364 1.424-0.462 0.829-0.69 1.115-1.351 1.693z"></path>');function Lv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 34 32"},()=>n,{children:(s,i)=>{var u=Nv();ie(s,u)},$$slots:{default:!0}}))}var Uv=Xt('<path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>');function Fv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 496 512"},()=>n,{children:(s,i)=>{var u=Uv();ie(s,u)},$$slots:{default:!0}}))}var Bv=Xt('<path d="M416 48v416c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h224c26.51 0 48 21.49 48 48zm96 58v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42V88h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zm0 96v12a6 6 0 0 1-6 6h-18v6a6 6 0 0 1-6 6h-42v-48h42a6 6 0 0 1 6 6v6h18a6 6 0 0 1 6 6zM30 376h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6zm0-96h42v48H30a6 6 0 0 1-6-6v-6H6a6 6 0 0 1-6-6v-12a6 6 0 0 1 6-6h18v-6a6 6 0 0 1 6-6z"></path>');function Kv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=Bv();ie(s,u)},$$slots:{default:!0}}))}var Vv=Xt('<path d="M384 16c48 32 64 80 64 112 0 128 0 256-32 368l-16-112c-48 32-112 64-144 64s-96-32-144-64L96 496C64 384 64 256 64 128c0-32 16-80 64-112-16 48-16 96 0 128 64-32 192-32 256 0 16-32 16-80 0-128zm0 256c-33.7 46.8-52 57.2-112 80 33.5 32 95.5 21.5 128-16 14.1-16.3 6.8-44.6-16-64zm-256 0c-22.8 19.4-30.1 47.7-16 64 32.5 37.5 94.5 48 128 16-60-22.8-78.3-33.2-112-80z"></path>');function Hv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=Vv();ie(s,u)},$$slots:{default:!0}}))}var Gv=Xt('<path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path>');function jv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 24 24"},()=>n,{children:(s,i)=>{var u=Gv();ie(s,u)},$$slots:{default:!0}}))}var Wv=Xt('<path d="M7 4c-.83 0-1.5-.67-1.5-1.5S6.17 1 7 1s1.5.67 1.5 1.5S7.83 4 7 4zm7 6c0 1.11-.89 2-2 2h-1c-1.11 0-2-.89-2-2l2-4h-1c-.55 0-1-.45-1-1H8v8c.42 0 1 .45 1 1h1c.42 0 1 .45 1 1H3c0-.55.58-1 1-1h1c0-.55.58-1 1-1h.03L6 5H5c0 .55-.45 1-1 1H3l2 4c0 1.11-.89 2-2 2H2c-1.11 0-2-.89-2-2l2-4H1V5h3c0-.55.45-1 1-1h4c.55 0 1 .45 1 1h3v1h-1l2 4zM2.5 7L1 10h3L2.5 7zM13 10l-1.5-3-1.5 3h3z"></path>');function zv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 14 16"},()=>n,{children:(s,i)=>{var u=Wv();ie(s,u)},$$slots:{default:!0}}))}var qv=Re('<div class="my-4 flex w-28 flex-col items-center justify-center border-0"><button class="flex h-16 w-16 flex-col items-center justify-center text-gray-300"><!></button> <div class="font-josefin flex border-none text-xl text-gray-300"><!></div></div>');function No(a,r){let n=he(r,"onclick",3,()=>{});var s=qv(),i=W(s);i.__click=function(..._){n()?.apply(this,_)};var u=W(i);zn(u,()=>r.icon),j(i);var l=Q(i,2),h=W(l);zn(h,()=>r.description),j(l),j(s),ie(a,s)}on(["click"]);function Yv(a,r){console.log("close"),r(!1)}var Xv=Re(`<div><div class="font-josefin flex h-[500px] flex-col"><div class="w-full text-center text-3xl font-semibold text-white">Impressum</div> <hr class="my-4 h-px border-0 bg-gray-200 dark:bg-gray-700"/> <div class="grow overflow-auto border-blue-500 px-4"><div><article class="prose mx-1"><h2>Kontakt</h2> <address>Prof. Dr. Dirk W. Hoffmann<br/> Hochschule Karlsruhe<br/> Moltkestraße 30<br/> D - 76133 Karlsruhe<br/> Germany</address> <h2>Datenschutz</h2> <p>Durch die Nutzung unserer Website erklären Sie sich mit der Erhebung, Verarbeitung und
						Nutzung von Daten gemäß der nachfolgenden Beschreibung einverstanden. Unsere Website
						kann grundsätzlich ohne Registrierung besucht werden. Dabei werden Daten wie
						beispielsweise aufgerufene Seiten bzw. Namen der abgerufenen Datei, Datum und Uhrzeit zu
						statistischen Zwecken auf dem Server gespeichert, ohne dass diese Daten unmittelbar auf
						Ihre Person bezogen werden. Personenbezogene Daten, insbesondere Name, Adresse oder
						E-Mail-Adresse werden soweit möglich auf freiwilliger Basis erhoben. Ohne Ihre
						Einwilligung erfolgt keine Weitergabe der Daten an Dritte.</p> <h2>Hosting</h2> <p>Diese Webseite wird gehostet auf Servern der Github Inc., 88 Colin P Kelly Jr. Street,
						San Francisco, CA 94107, USA. GitHub kann beim Aufruf dieser Webseiten technische
						Informationen inklusive ihrer IP Adresse aufzeichnen. Weitere Informationen zum Umgang
						mit Nutzerdaten finden Sie in der <a href="https://help.github.com/articles/github-privacy-policy">Datenschutzerklärung von GitHub</a>.</p></article></div></div> <hr class="my-4 h-px border-0 bg-gray-200 dark:bg-gray-700"/> <div class="flex w-full justify-center"><button class="btn btn-primary">Close</button></div></div></div>`);function Zv(a,r){it(r,!0);let n=he(r,"show",15,!1);var s=Xv(),i=W(s),u=Q(W(i),4),l=W(u),h=W(l);j(l),j(u);var _=Q(u,4),m=W(_);m.__click=[Yv,n],j(_),j(i),j(s),xt(1,h,()=>Pt),xt(3,s,()=>Pt),ie(a,s),ot()}on(["click"]);var Qv=Xt('<path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path>');function Jv(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=Qv();ie(s,u)},$$slots:{default:!0}}))}var eg=Xt('<path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path>');function tg(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=eg();ie(s,u)},$$slots:{default:!0}}))}var ng=Xt('<path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path>');function ff(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=ng();ie(s,u)},$$slots:{default:!0}}))}var rg=Re('<input type="file" class="hidden"/>');function df(a,r){it(r,!1);let n=Rt(),s,i;function u(){return d(n).click(),new Promise(function(m,b){s=m,i=b})}async function l(){if(d(n).files&&d(n).files.length>0){let m=d(n).files[0],b=await h(m);s(b)}else i();Go(n,d(n).value="")}function h(m){return new Promise(async(b,T)=>{try{let p=new FileReader;p.onload=function(A){b(new Uint8Array(this.result))},p.readAsArrayBuffer(m)}catch(p){T(p)}})}Bt();var _=rg();return Ut(_,m=>He(n,m),()=>d(n)),Sn("change",_,l),ie(a,_),Ye(r,"open",u),ot({open:u})}function ag(a,r,n){console.log("close"),r(!1),fe(Ft,dt.none)}var ig=(a,r)=>He(r,0),og=(a,r)=>He(r,1),sg=(a,r,n)=>r(a,d(n).crc32),ug=(a,r,n)=>r(a,d(n).crc32),cg=Re('<tr><td><div class="flex h-[5.5rem] space-x-4"><div><img class="h-full w-full" alt="Rom Chip Icon"/></div> <div><div class="font-bold"> </div> <div class="opacity-60"> </div> <div class="opacity-60"> </div></div> <div><button class="btn btn-primary btn-outline btn-sm">Install</button></div> <div><button class="btn btn-primary btn-outline btn-sm w-8 p-1.5"><!></button></div></div></td></tr>'),lg=(a,r)=>r(),fg=Re(`<table class="table-compact table-zebra table w-full"><tbody><!><tr><td><div class="flex h-[5.5rem] space-x-4"><div><p>Use drag-and-drop or press the 'Plus' button</p> <p>to add additional ROMs.</p></div> <div><button class="btn btn-primary btn-outline btn-sm w-8 p-1.5"><!></button></div></div></td></tr></tbody></table>`),dg=Re(`<article><h3>Kickstart</h3> <p>To run the emulator, a Kickstart ROM is required. The original Amiga ROMs are the
					intellectual property of Cloanto™ and cannot be freely distributed. If you own a legal
					Kickstart ROM, you can add the ROM image to vAmiga.net via drag and drop. Once a supported
					image is detected, it becomes available in the ROM database. The ROMs are stored in the
					browser's memory and will remain available in future sessions.</p> <h3>Encrypted ROMs</h3> <p>If you have purchased an older version of Amiga Forever™, you may possess encrypted ROM
					files. These are accompanied by a <code>.key</code> file required to decrypt the ROM. Encrypted
					ROMs are not yet supported by the emulator. They must be decrypted manually before they can
					be used in vAmiga.net.</p> <h3>AROS</h3> <p>If you don’t have access to an original Kickstart ROM, you may use the Amiga Research
					Operating System ROM (AROS) instead. AROS is an open-source Kickstart replacement and can
					be freely redistributed. However, not all Amiga programs are compatible with AROS, so we
					strongly recommend using vAmiga.net with original ROMs whenever possible.</p></article>`),vg=Re('<!> <div><div class="mx-2 flex items-center space-x-2"><div><button>Installed Roms</button> <button>Legal Information</button> <div class="flex grow items-center justify-end"><button class="btn btn-sm btn-primary flex w-8 p-0"><!></button></div></div></div> <div><!></div></div>',1);function gg(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(jo,"$memory",n),u=()=>O(Pa,"$initialized",n),l=()=>O(Ft,"$layer",n),h=()=>O(On,"$amiga",n),_=()=>O(Mr,"$proxy",n);let m=Ot(Bi([]));Fs(()=>Dn.roms.orderBy("title").toArray()).subscribe(ce=>{He(m,ce,!0)});let T=he(r,"show",15,!0);async function p(ce,Ee=null,Ie=0){let Ne=i().analyzeRom(ce,ce.length);if(Ne.crc32)try{const ue=Ne.title,Pe=await Dn.roms.where("crc32").equals(Ne.crc32).first();if(Pe){console.log(`ROM with CRC32 ${Ne.crc32} already exists: ${Pe.title}`);return}const Ve=await Dn.roms.add({crc32:Ne.crc32,title:Ne.title,version:Ne.version,released:Ne.released,model:Ne.model,isAros:Ne.isAros,isDiag:Ne.isDiag,isCommodore:Ne.isCommodore,isHyperion:Ne.isHyperion,isPatched:Ne.isPatched,isUnknown:Ne.isUnknown,rom:ce,ext:Ee,extStart:Ie});console.log(`${ue} successfully added with id ${Ve}`)}catch(ue){console.warn("Failed to add Kickstart",ue)}}async function A(){try{let ce=await fetch("roms/aros-svn55696-rom.bin"),Ee=await ce.arrayBuffer(),Ie=new Uint8Array(Ee);ce=await fetch("roms/aros-svn55696-ext.bin"),Ee=await ce.arrayBuffer();let Ne=new Uint8Array(Ee);await p(Ie,Ne),ce=await fetch("roms/diagrom-121.bin"),Ee=await ce.arrayBuffer();let ue=new Uint8Array(Ee);await p(ue)}catch{console.error("Cannot install default Roms")}}function y(ce){return ce.isUnknown?"CRC "+ce.crc32.toString():ce.version}xi(()=>{u()&&A()});function E(ce){return ce.isHyperion?"rom-hyperion.png":ce.isAros?"rom-aros.png":ce.isDiag?"rom-diag.png":ce.isCommodore?"rom-commodore.png":"rom-unknown.png"}async function x(ce,Ee){try{await Dn.roms.delete(Ee),console.log("Kickstart {id} deleted")}catch(Ie){console.log("Failed to delete Kickstart",Ie)}}async function M(ce,Ee){console.log("Installing ROM ",Ee,"..."),h().powerOff(),await _().installRom(Ee),h().hardReset(),h().run()}const P="";let R=Ot(0),v=Ot(void 0);function I(){d(v)?.open().then(function(ce){console.log("open file dialog",ce),_().addRom(ce)},function(ce){console.log("error",ce)})}var G=vg(),k=ze(G);Ut(df(k,{}),ce=>He(v,ce,!0),()=>d(v));var U=Q(k,2);We(U,1," flex h-full flex-col border-green-500");var X=W(U),oe=W(X);We(oe,1," tabs tabs-box flex grow");var Y=W(oe);let Z;Y.__click=[ig,R];var J=Q(Y,2);let ye;J.__click=[og,R];var de=Q(J,2),xe=W(de);xe.__click=[ag,T,l];var we=W(xe);ff(we,{}),j(xe),j(de),j(oe),j(X);var ve=Q(X,2);We(ve,1,"mt-4 flex overflow-auto  text-base-content p-1");var Te=W(ve);{var ne=ce=>{var Ee=fg(),Ie=W(Ee);We(Ie,1,_r(P));var Ne=W(Ie);{var ue=Me=>{var tt=Et(),gt=ze(tt);ta(gt,17,()=>d(m),ea,(wt,nt)=>{var pe=cg();We(pe,1,"h-8  border-0 border-purple-400");var ge=W(pe),ht=W(ge),Zt=W(ht);We(Zt,1," h-full w-[4.5rem]");var cn=W(Zt);j(Zt);var Mn=Q(Zt,2);We(Mn,1," flex h-full grow flex-col overflow-hidden");var ln=W(Mn),fn=W(ln,!0);j(ln);var jt=Q(ln,2),Kn=W(jt,!0);j(jt);var An=Q(jt,2),Qn=W(An,!0);j(An),j(Mn);var en=Q(Mn,2);We(en,1," flex h-full items-center");var dn=W(en);dn.__click=[sg,M,nt],j(en);var Tn=Q(en,2);We(Tn,1," flex h-full items-center");var vn=W(Tn);vn.__click=[ug,x,nt];var Qt=W(vn);tg(Qt,{}),j(vn),j(Tn),j(ht),j(ge),j(pe),lt((Be,Ht)=>{$t(cn,"src",Be),At(fn,d(nt).title),At(Kn,Ht),At(Qn,d(nt).model)},[()=>"icons/"+E(d(nt)),()=>y(d(nt))]),ie(wt,pe)}),ie(Me,tt)};Xe(Ne,Me=>{d(m)&&Me(ue)})}var Pe=Q(Ne);We(Pe,1,"h-8  border-0 border-purple-400");var Ve=W(Pe),me=W(Ve),z=W(me);We(z,1," text-base-content font-josefin flex h-full grow flex-col justify-center overflow-hidden border-0 text-center text-base");var ct=Q(z,2);We(ct,1," flex h-full items-center");var Ce=W(ct);Ce.__click=[lg,I];var be=W(Ce);Jv(be,{}),j(Ce),j(ct),j(me),j(Ve),j(Pe),j(Ie),j(Ee),xt(1,Ee,()=>Pt),ie(ce,Ee)},se=ce=>{var Ee=dg();We(Ee,1,"prose mx-1 "),xt(1,Ee,()=>Pt),ie(ce,Ee)};Xe(Te,ce=>{d(R)===0?ce(ne):ce(se,!1)})}j(ve),j(U),lt((ce,Ee)=>{Z=We(Y,1,"tab",null,Z,ce),ye=We(J,1,"tab",null,ye,Ee)},[()=>({"tab-active":d(R)===0}),()=>({"tab-active":d(R)===1})]),ie(a,G),ot(),s()}on(["click"]);function na(...a){return a.filter(Boolean).join(" ")}function hg(a,r){if(a){const n=Object.keys(a);for(let s=0;s<n.length;s++){const i=n[s];if(i!=="__proto__"&&r(a[i],i)===!1)break}}return a}function fl(a){const r=a.Components.Elements?.list.children;return r&&Array.prototype.slice.call(r)||[]}function Oi(a){return a!==null&&typeof a=="object"}function os(a,r){if(Array.isArray(a)&&Array.isArray(r))return a.length===r.length&&!a.some((n,s)=>!os(n,r[s]));if(Oi(a)&&Oi(r)){const n=Object.keys(a),s=Object.keys(r);return n.length===s.length&&!n.some(i=>!Object.prototype.hasOwnProperty.call(r,i)||!os(a[i],r[i]))}return a===r}function mg(a,r){return a.length===r.length&&!a.some((n,s)=>n!==r[s])}function bi(a,r){const n=a;return hg(r,(s,i)=>{Array.isArray(s)?n[i]=s.slice():Oi(s)?n[i]=bi(Oi(n[i])?n[i]:{},s):n[i]=s}),n}function pg(a,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,s.key,s)}}function _g(a,r,n){return r&&pg(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var dl="(prefers-reduced-motion: reduce)",Yr=1,yg=2,ra=3,ua=4,Fa=5,wi=6,Ci=7,bg={CREATED:Yr,MOUNTED:yg,IDLE:ra,MOVING:ua,SCROLLING:Fa,DRAGGING:wi,DESTROYED:Ci};function or(a){a.length=0}function wr(a,r,n){return Array.prototype.slice.call(a,r,n)}function yt(a){return a.bind.apply(a,[null].concat(wr(arguments,1)))}var vf=setTimeout,ss=function(){};function vl(a){return requestAnimationFrame(a)}function Vi(a,r){return typeof r===a}function Oa(a){return!Ks(a)&&Vi("object",a)}var Bs=Array.isArray,gf=yt(Vi,"function"),yr=yt(Vi,"string"),Ba=yt(Vi,"undefined");function Ks(a){return a===null}function hf(a){try{return a instanceof(a.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function Ka(a){return Bs(a)?a:[a]}function Cn(a,r){Ka(a).forEach(r)}function Vs(a,r){return a.indexOf(r)>-1}function Ei(a,r){return a.push.apply(a,Ka(r)),a}function rr(a,r,n){a&&Cn(r,function(s){s&&a.classList[n?"add":"remove"](s)})}function qn(a,r){rr(a,yr(r)?r.split(" "):r,!0)}function Va(a,r){Cn(r,a.appendChild.bind(a))}function Hs(a,r){Cn(a,function(n){var s=(r||n).parentNode;s&&s.insertBefore(n,r)})}function Ca(a,r){return hf(a)&&(a.msMatchesSelector||a.matches).call(a,r)}function mf(a,r){var n=a?wr(a.children):[];return r?n.filter(function(s){return Ca(s,r)}):n}function Ha(a,r){return r?mf(a,r)[0]:a.firstElementChild}var Ma=Object.keys;function Cr(a,r,n){return a&&(n?Ma(a).reverse():Ma(a)).forEach(function(s){s!=="__proto__"&&r(a[s],s)}),a}function Ia(a){return wr(arguments,1).forEach(function(r){Cr(r,function(n,s){a[s]=r[s]})}),a}function pr(a){return wr(arguments,1).forEach(function(r){Cr(r,function(n,s){Bs(n)?a[s]=n.slice():Oa(n)?a[s]=pr({},Oa(a[s])?a[s]:{},n):a[s]=n})}),a}function gl(a,r){Cn(r||Ma(a),function(n){delete a[n]})}function Yn(a,r){Cn(a,function(n){Cn(r,function(s){n&&n.removeAttribute(s)})})}function et(a,r,n){Oa(r)?Cr(r,function(s,i){et(a,i,s)}):Cn(a,function(s){Ks(n)||n===""?Yn(s,r):s.setAttribute(r,String(n))})}function Zr(a,r,n){var s=document.createElement(a);return r&&(yr(r)?qn(s,r):et(s,r)),n&&Va(n,s),s}function Ln(a,r,n){if(Ba(n))return getComputedStyle(a)[r];Ks(n)||(a.style[r]=""+n)}function $a(a,r){Ln(a,"display",r)}function pf(a){a.setActive&&a.setActive()||a.focus({preventScroll:!0})}function Fn(a,r){return a.getAttribute(r)}function hl(a,r){return a&&a.classList.contains(r)}function Pn(a){return a.getBoundingClientRect()}function Ir(a){Cn(a,function(r){r&&r.parentNode&&r.parentNode.removeChild(r)})}function _f(a){return Ha(new DOMParser().parseFromString(a,"text/html").body)}function tr(a,r){a.preventDefault(),r&&(a.stopPropagation(),a.stopImmediatePropagation())}function yf(a,r){return a&&a.querySelector(r)}function Gs(a,r){return r?wr(a.querySelectorAll(r)):[]}function ar(a,r){rr(a,r,!1)}function us(a){return a.timeStamp}function Or(a){return yr(a)?a:a?a+"px":""}var Ga="splide",js="data-"+Ga;function Ra(a,r){if(!a)throw new Error("["+Ga+"] "+(r||""))}var br=Math.min,Mi=Math.max,Ii=Math.floor,Na=Math.ceil,nn=Math.abs;function bf(a,r,n){return nn(a-r)<n}function Si(a,r,n,s){var i=br(r,n),u=Mi(r,n);return s?i<a&&a<u:i<=a&&a<=u}function jr(a,r,n){var s=br(r,n),i=Mi(r,n);return br(Mi(s,a),i)}function cs(a){return+(a>0)-+(a<0)}function ls(a,r){return Cn(r,function(n){a=a.replace("%s",""+n)}),a}function Ws(a){return a<10?"0"+a:""+a}var ml={};function wg(a){return""+a+Ws(ml[a]=(ml[a]||0)+1)}function wf(){var a=[];function r(l,h,_,m){i(l,h,function(b,T,p){var A="addEventListener"in b,y=A?b.removeEventListener.bind(b,T,_,m):b.removeListener.bind(b,_);A?b.addEventListener(T,_,m):b.addListener(_),a.push([b,T,p,_,y])})}function n(l,h,_){i(l,h,function(m,b,T){a=a.filter(function(p){return p[0]===m&&p[1]===b&&p[2]===T&&(!_||p[3]===_)?(p[4](),!1):!0})})}function s(l,h,_){var m,b=!0;return typeof CustomEvent=="function"?m=new CustomEvent(h,{bubbles:b,detail:_}):(m=document.createEvent("CustomEvent"),m.initCustomEvent(h,b,!1,_)),l.dispatchEvent(m),m}function i(l,h,_){Cn(l,function(m){m&&Cn(h,function(b){b.split(" ").forEach(function(T){var p=T.split(".");_(m,p[0],p[1])})})})}function u(){a.forEach(function(l){l[4]()}),or(a)}return{bind:r,unbind:n,dispatch:s,destroy:u}}var Er="mounted",pl="ready",Xn="move",$r="moved",$i="click",fs="active",ds="inactive",vs="visible",gs="hidden",It="refresh",Yt="updated",aa="resize",Hi="resized",Ef="drag",Sf="dragging",Af="dragged",Gi="scroll",Lr="scrolled",Eg="overflow",zs="destroy",hs="arrows:mounted",ms="arrows:updated",ps="pagination:mounted",_s="pagination:updated",Ni="navigation:mounted",qs="autoplay:play",ys="autoplay:playing",Ys="autoplay:pause",Li="lazyload:loaded",Tf="sk",Rf="sh",Ui="ei";function St(a){var r=a?a.event.bus:document.createDocumentFragment(),n=wf();function s(u,l){n.bind(r,Ka(u).join(" "),function(h){l.apply(l,Bs(h.detail)?h.detail:[])})}function i(u){n.dispatch(r,u,wr(arguments,1))}return a&&a.event.on(zs,n.destroy),Ia(n,{bus:r,on:s,off:yt(n.unbind,r),emit:i})}function ji(a,r,n,s){var i=Date.now,u,l=0,h,_=!0,m=0;function b(){if(!_){if(l=a?br((i()-u)/a,1):1,n&&n(l),l>=1&&(r(),u=i(),s&&++m>=s))return p();h=vl(b)}}function T(M){M||y(),u=i()-(M?l*a:0),_=!1,h=vl(b)}function p(){_=!0}function A(){u=i(),l=0,n&&n(l)}function y(){h&&cancelAnimationFrame(h),l=0,h=0,_=!0}function E(M){a=M}function x(){return _}return{start:T,rewind:A,pause:p,cancel:y,set:E,isPaused:x}}function Sg(a){var r=a;function n(i){r=i}function s(i){return Vs(Ka(i),r)}return{set:n,is:s}}function Ag(a,r){var n=ji(0,a,null,1);return function(){n.isPaused()&&n.start()}}function Tg(a,r,n){var s=a.state,i=n.breakpoints||{},u=n.reducedMotion||{},l=wf(),h=[];function _(){var y=n.mediaQuery==="min";Ma(i).sort(function(E,x){return y?+E-+x:+x-+E}).forEach(function(E){b(i[E],"("+(y?"min":"max")+"-width:"+E+"px)")}),b(u,dl),T()}function m(y){y&&l.destroy()}function b(y,E){var x=matchMedia(E);l.bind(x,"change",T),h.push([y,x])}function T(){var y=s.is(Ci),E=n.direction,x=h.reduce(function(M,P){return pr(M,P[1].matches?P[0]:{})},{});gl(n),A(x),n.destroy?a.destroy(n.destroy==="completely"):y?(m(!0),a.mount()):E!==n.direction&&a.refresh()}function p(y){matchMedia(dl).matches&&(y?pr(n,u):gl(n,Ma(u)))}function A(y,E,x){pr(n,y),E&&pr(Object.getPrototypeOf(n),y),(x||!s.is(Yr))&&a.emit(Yt,n)}return{setup:_,destroy:m,reduce:p,set:A}}var Wi="Arrow",zi=Wi+"Left",qi=Wi+"Right",xf=Wi+"Up",Pf=Wi+"Down",_l="rtl",Yi="ttb",Lo={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[xf,qi],ArrowRight:[Pf,zi]};function Rg(a,r,n){function s(u,l,h){h=h||n.direction;var _=h===_l&&!l?1:h===Yi?0:-1;return Lo[u]&&Lo[u][_]||u.replace(/width|left|right/i,function(m,b){var T=Lo[m.toLowerCase()][_]||m;return b>0?T.charAt(0).toUpperCase()+T.slice(1):T})}function i(u){return u*(n.direction===_l?1:-1)}return{resolve:s,orient:i}}var ir="role",Qr="tabindex",xg="disabled",Bn="aria-",ja=Bn+"controls",Df=Bn+"current",yl=Bn+"selected",kn=Bn+"label",Xs=Bn+"labelledby",kf=Bn+"hidden",Zs=Bn+"orientation",La=Bn+"roledescription",bl=Bn+"live",wl=Bn+"busy",El=Bn+"atomic",Qs=[ir,Qr,xg,ja,Df,kn,Xs,kf,Zs,La],Zn=Ga+"__",Sr="is-",Uo=Ga,Sl=Zn+"track",Pg=Zn+"list",Xi=Zn+"slide",Of=Xi+"--clone",Dg=Xi+"__container",Js=Zn+"arrows",Zi=Zn+"arrow",Cf=Zi+"--prev",Mf=Zi+"--next",Qi=Zn+"pagination",If=Qi+"__page",kg=Zn+"progress",Og=kg+"__bar",Cg=Zn+"toggle",Mg=Zn+"spinner",Ig=Zn+"sr",$g=Sr+"initialized",Nr=Sr+"active",$f=Sr+"prev",Nf=Sr+"next",bs=Sr+"visible",ws=Sr+"loading",Lf=Sr+"focus-in",Uf=Sr+"overflow",Ng=[Nr,bs,$f,Nf,ws,Lf,Uf],Lg={slide:Xi,clone:Of,arrows:Js,arrow:Zi,prev:Cf,next:Mf,pagination:Qi,page:If,spinner:Mg};function Ug(a,r){if(gf(a.closest))return a.closest(r);for(var n=a;n&&n.nodeType===1&&!Ca(n,r);)n=n.parentElement;return n}var Fg=5,Al=200,Ff="touchstart mousedown",Fo="touchmove mousemove",Bo="touchend touchcancel mouseup click";function Bg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=a.root,h=n.i18n,_={},m=[],b=[],T=[],p,A,y;function E(){R(),v(),P()}function x(){i(It,M),i(It,E),i(Yt,P),u(document,Ff+" keydown",function(k){y=k.type==="keydown"},{capture:!0}),u(l,"focusin",function(){rr(l,Lf,!!y)})}function M(k){var U=Qs.concat("style");or(m),ar(l,b),ar(p,T),Yn([p,A],U),Yn(l,k?U:["style",La])}function P(){ar(l,b),ar(p,T),b=G(Uo),T=G(Sl),qn(l,b),qn(p,T),et(l,kn,n.label),et(l,Xs,n.labelledby)}function R(){p=I("."+Sl),A=Ha(p,"."+Pg),Ra(p&&A,"A track/list element is missing."),Ei(m,mf(A,"."+Xi+":not(."+Of+")")),Cr({arrows:Js,pagination:Qi,prev:Cf,next:Mf,bar:Og,toggle:Cg},function(k,U){_[U]=I("."+k)}),Ia(_,{root:l,track:p,list:A,slides:m})}function v(){var k=l.id||wg(Ga),U=n.role;l.id=k,p.id=p.id||k+"-track",A.id=A.id||k+"-list",!Fn(l,ir)&&l.tagName!=="SECTION"&&U&&et(l,ir,U),et(l,La,h.carousel),et(A,ir,"presentation")}function I(k){var U=yf(l,k);return U&&Ug(U,"."+Uo)===l?U:void 0}function G(k){return[k+"--"+n.type,k+"--"+n.direction,n.drag&&k+"--draggable",n.isNavigation&&k+"--nav",k===Uo&&Nr]}return Ia(_,{setup:E,mount:x,destroy:M})}var ia="slide",ca="loop",Wa="fade";function Kg(a,r,n,s){var i=St(a),u=i.on,l=i.emit,h=i.bind,_=a.Components,m=a.root,b=a.options,T=b.isNavigation,p=b.updateOnMove,A=b.i18n,y=b.pagination,E=b.slideFocus,x=_.Direction.resolve,M=Fn(s,"style"),P=Fn(s,kn),R=n>-1,v=Ha(s,"."+Dg),I;function G(){R||(s.id=m.id+"-slide"+Ws(r+1),et(s,ir,y?"tabpanel":"group"),et(s,La,A.slide),et(s,kn,P||ls(A.slideLabel,[r+1,a.length]))),k()}function k(){h(s,"click",yt(l,$i,ve)),h(s,"keydown",yt(l,Tf,ve)),u([$r,Rf,Lr],Y),u(Ni,X),p&&u(Xn,oe)}function U(){I=!0,i.destroy(),ar(s,Ng),Yn(s,Qs),et(s,"style",M),et(s,kn,P||"")}function X(){var Te=a.splides.map(function(ne){var se=ne.splide.Components.Slides.getAt(r);return se?se.slide.id:""}).join(" ");et(s,kn,ls(A.slideX,(R?n:r)+1)),et(s,ja,Te),et(s,ir,E?"button":""),E&&Yn(s,La)}function oe(){I||Y()}function Y(){if(!I){var Te=a.index;Z(),J(),rr(s,$f,r===Te-1),rr(s,Nf,r===Te+1)}}function Z(){var Te=de();Te!==hl(s,Nr)&&(rr(s,Nr,Te),et(s,Df,T&&Te||""),l(Te?fs:ds,ve))}function J(){var Te=xe(),ne=!Te&&(!de()||R);if(a.state.is([ua,Fa])||et(s,kf,ne||""),et(Gs(s,b.focusableNodes||""),Qr,ne?-1:""),E&&et(s,Qr,ne?-1:0),Te!==hl(s,bs)&&(rr(s,bs,Te),l(Te?vs:gs,ve)),!Te&&document.activeElement===s){var se=_.Slides.getAt(a.index);se&&pf(se.slide)}}function ye(Te,ne,se){Ln(se&&v||s,Te,ne)}function de(){var Te=a.index;return Te===r||b.cloneStatus&&Te===n}function xe(){if(a.is(Wa))return de();var Te=Pn(_.Elements.track),ne=Pn(s),se=x("left",!0),ce=x("right",!0);return Ii(Te[se])<=Na(ne[se])&&Ii(ne[ce])<=Na(Te[ce])}function we(Te,ne){var se=nn(Te-r);return!R&&(b.rewind||a.is(ca))&&(se=br(se,a.length-se)),se<=ne}var ve={index:r,slideIndex:n,slide:s,container:v,isClone:R,mount:G,destroy:U,update:Y,style:ye,isWithin:we};return ve}function Vg(a,r,n){var s=St(a),i=s.on,u=s.emit,l=s.bind,h=r.Elements,_=h.slides,m=h.list,b=[];function T(){p(),i(It,A),i(It,p)}function p(){_.forEach(function(Y,Z){E(Y,Z,-1)})}function A(){I(function(Y){Y.destroy()}),or(b)}function y(){I(function(Y){Y.update()})}function E(Y,Z,J){var ye=Kg(a,Z,J,Y);ye.mount(),b.push(ye),b.sort(function(de,xe){return de.index-xe.index})}function x(Y){return Y?G(function(Z){return!Z.isClone}):b}function M(Y){var Z=r.Controller,J=Z.toIndex(Y),ye=Z.hasFocus()?1:n.perPage;return G(function(de){return Si(de.index,J,J+ye-1)})}function P(Y){return G(Y)[0]}function R(Y,Z){Cn(Y,function(J){if(yr(J)&&(J=_f(J)),hf(J)){var ye=_[Z];ye?Hs(J,ye):Va(m,J),qn(J,n.classes.slide),U(J,yt(u,aa))}}),u(It)}function v(Y){Ir(G(Y).map(function(Z){return Z.slide})),u(It)}function I(Y,Z){x(Z).forEach(Y)}function G(Y){return b.filter(gf(Y)?Y:function(Z){return yr(Y)?Ca(Z.slide,Y):Vs(Ka(Y),Z.index)})}function k(Y,Z,J){I(function(ye){ye.style(Y,Z,J)})}function U(Y,Z){var J=Gs(Y,"img"),ye=J.length;ye?J.forEach(function(de){l(de,"load error",function(){--ye||Z()})}):Z()}function X(Y){return Y?_.length:b.length}function oe(){return b.length>n.perPage}return{mount:T,destroy:A,update:y,register:E,get:x,getIn:M,getAt:P,add:R,remove:v,forEach:I,filter:G,style:k,getLength:X,isEnough:oe}}function Hg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.emit,h=r.Slides,_=r.Direction.resolve,m=r.Elements,b=m.root,T=m.track,p=m.list,A=h.getAt,y=h.style,E,x,M;function P(){R(),u(window,"resize load",Ag(yt(l,aa))),i([Yt,It],R),i(aa,v)}function R(){E=n.direction===Yi,Ln(b,"maxWidth",Or(n.width)),Ln(T,_("paddingLeft"),I(!1)),Ln(T,_("paddingRight"),I(!0)),v(!0)}function v(ve){var Te=Pn(b);(ve||x.width!==Te.width||x.height!==Te.height)&&(Ln(T,"height",G()),y(_("marginRight"),Or(n.gap)),y("width",U()),y("height",X(),!0),x=Te,l(Hi),M!==(M=we())&&(rr(b,Uf,M),l(Eg,M)))}function I(ve){var Te=n.padding,ne=_(ve?"right":"left");return Te&&Or(Te[ne]||(Oa(Te)?0:Te))||"0px"}function G(){var ve="";return E&&(ve=k(),Ra(ve,"height or heightRatio is missing."),ve="calc("+ve+" - "+I(!1)+" - "+I(!0)+")"),ve}function k(){return Or(n.height||Pn(p).width*n.heightRatio)}function U(){return n.autoWidth?null:Or(n.fixedWidth)||(E?"":oe())}function X(){return Or(n.fixedHeight)||(E?n.autoHeight?null:oe():k())}function oe(){var ve=Or(n.gap);return"calc((100%"+(ve&&" + "+ve)+")/"+(n.perPage||1)+(ve&&" - "+ve)+")"}function Y(){return Pn(p)[_("width")]}function Z(ve,Te){var ne=A(ve||0);return ne?Pn(ne.slide)[_("width")]+(Te?0:de()):0}function J(ve,Te){var ne=A(ve);if(ne){var se=Pn(ne.slide)[_("right")],ce=Pn(p)[_("left")];return nn(se-ce)+(Te?0:de())}return 0}function ye(ve){return J(a.length-1)-J(0)+Z(0,ve)}function de(){var ve=A(0);return ve&&parseFloat(Ln(ve.slide,_("marginRight")))||0}function xe(ve){return parseFloat(Ln(T,_("padding"+(ve?"Right":"Left"))))||0}function we(){return a.is(Wa)||ye(!0)>Y()}return{mount:P,resize:v,listSize:Y,slideSize:Z,sliderSize:ye,totalSize:J,getPadding:xe,isOverflow:we}}var Gg=2;function jg(a,r,n){var s=St(a),i=s.on,u=r.Elements,l=r.Slides,h=r.Direction.resolve,_=[],m;function b(){i(It,T),i([Yt,aa],A),(m=x())&&(y(m),r.Layout.resize(!0))}function T(){p(),b()}function p(){Ir(_),or(_),s.destroy()}function A(){var M=x();m!==M&&(m<M||!M)&&s.emit(It)}function y(M){var P=l.get().slice(),R=P.length;if(R){for(;P.length<M;)Ei(P,P);Ei(P.slice(-M),P.slice(0,M)).forEach(function(v,I){var G=I<M,k=E(v.slide,I);G?Hs(k,P[0].slide):Va(u.list,k),Ei(_,k),l.register(k,I-M+(G?0:R),v.index)})}}function E(M,P){var R=M.cloneNode(!0);return qn(R,n.classes.clone),R.id=a.root.id+"-clone"+Ws(P+1),R}function x(){var M=n.clones;if(!a.is(ca))M=0;else if(Ba(M)){var P=n[h("fixedWidth")]&&r.Layout.slideSize(0),R=P&&Na(Pn(u.track)[h("width")]/P);M=R||n[h("autoWidth")]&&a.length||n.perPage*Gg}return M}return{mount:b,destroy:p}}function Wg(a,r,n){var s=St(a),i=s.on,u=s.emit,l=a.state.set,h=r.Layout,_=h.slideSize,m=h.getPadding,b=h.totalSize,T=h.listSize,p=h.sliderSize,A=r.Direction,y=A.resolve,E=A.orient,x=r.Elements,M=x.list,P=x.track,R;function v(){R=r.Transition,i([Er,Hi,Yt,It],I)}function I(){r.Controller.isBusy()||(r.Scroll.cancel(),k(a.index),r.Slides.update())}function G(ne,se,ce,Ee){ne!==se&&ve(ne>ce)&&(Y(),U(oe(ye(),ne>ce),!0)),l(ua),u(Xn,se,ce,ne),R.start(se,function(){l(ra),u($r,se,ce,ne),Ee&&Ee()})}function k(ne){U(J(ne,!0))}function U(ne,se){if(!a.is(Wa)){var ce=se?ne:X(ne);Ln(M,"transform","translate"+y("X")+"("+ce+"px)"),ne!==ce&&u(Rf)}}function X(ne){if(a.is(ca)){var se=Z(ne),ce=se>r.Controller.getEnd(),Ee=se<0;(Ee||ce)&&(ne=oe(ne,ce))}return ne}function oe(ne,se){var ce=ne-we(se),Ee=p();return ne-=E(Ee*(Na(nn(ce)/Ee)||1))*(se?1:-1),ne}function Y(){U(ye(),!0),R.cancel()}function Z(ne){for(var se=r.Slides.get(),ce=0,Ee=1/0,Ie=0;Ie<se.length;Ie++){var Ne=se[Ie].index,ue=nn(J(Ne,!0)-ne);if(ue<=Ee)Ee=ue,ce=Ne;else break}return ce}function J(ne,se){var ce=E(b(ne-1)-xe(ne));return se?de(ce):ce}function ye(){var ne=y("left");return Pn(M)[ne]-Pn(P)[ne]+E(m(!1))}function de(ne){return n.trimSpace&&a.is(ia)&&(ne=jr(ne,0,E(p(!0)-T()))),ne}function xe(ne){var se=n.focus;return se==="center"?(T()-_(ne,!0))/2:+se*_(ne)||0}function we(ne){return J(ne?r.Controller.getEnd():0,!!n.trimSpace)}function ve(ne){var se=E(oe(ye(),ne));return ne?se>=0:se<=M[y("scrollWidth")]-Pn(P)[y("width")]}function Te(ne,se){se=Ba(se)?ye():se;var ce=ne!==!0&&E(se)<E(we(!1)),Ee=ne!==!1&&E(se)>E(we(!0));return ce||Ee}return{mount:v,move:G,jump:k,translate:U,shift:oe,cancel:Y,toIndex:Z,toPosition:J,getPosition:ye,getLimit:we,exceededLimit:Te,reposition:I}}function zg(a,r,n){var s=St(a),i=s.on,u=s.emit,l=r.Move,h=l.getPosition,_=l.getLimit,m=l.toPosition,b=r.Slides,T=b.isEnough,p=b.getLength,A=n.omitEnd,y=a.is(ca),E=a.is(ia),x=yt(ye,!1),M=yt(ye,!0),P=n.start||0,R,v=P,I,G,k;function U(){X(),i([Yt,It,Ui],X),i(Hi,oe)}function X(){I=p(!0),G=n.perMove,k=n.perPage,R=ve();var ue=jr(P,0,A?R:I-1);ue!==P&&(P=ue,l.reposition())}function oe(){R!==ve()&&u(Ui)}function Y(ue,Pe,Ve){if(!Ne()){var me=J(ue),z=we(me);z>-1&&(Pe||z!==P)&&(ce(z),l.move(me,z,v,Ve))}}function Z(ue,Pe,Ve,me){r.Scroll.scroll(ue,Pe,Ve,function(){var z=we(l.toIndex(h()));ce(A?br(z,R):z),me&&me()})}function J(ue){var Pe=P;if(yr(ue)){var Ve=ue.match(/([+\-<>])(\d+)?/)||[],me=Ve[1],z=Ve[2];me==="+"||me==="-"?Pe=de(P+ +(""+me+(+z||1)),P):me===">"?Pe=z?Te(+z):x(!0):me==="<"&&(Pe=M(!0))}else Pe=y?ue:jr(ue,0,R);return Pe}function ye(ue,Pe){var Ve=G||(Ie()?1:k),me=de(P+Ve*(ue?-1:1),P,!(G||Ie()));return me===-1&&E&&!bf(h(),_(!ue),1)?ue?0:R:Pe?me:we(me)}function de(ue,Pe,Ve){if(T()||Ie()){var me=xe(ue);me!==ue&&(Pe=ue,ue=me,Ve=!1),ue<0||ue>R?!G&&(Si(0,ue,Pe,!0)||Si(R,Pe,ue,!0))?ue=Te(ne(ue)):y?ue=Ve?ue<0?-(I%k||k):I:ue:n.rewind?ue=ue<0?R:0:ue=-1:Ve&&ue!==Pe&&(ue=Te(ne(Pe)+(ue<Pe?-1:1)))}else ue=-1;return ue}function xe(ue){if(E&&n.trimSpace==="move"&&ue!==P)for(var Pe=h();Pe===m(ue,!0)&&Si(ue,0,a.length-1,!n.rewind);)ue<P?--ue:++ue;return ue}function we(ue){return y?(ue+I)%I||0:ue}function ve(){for(var ue=I-(Ie()||y&&G?1:k);A&&ue-- >0;)if(m(I-1,!0)!==m(ue,!0)){ue++;break}return jr(ue,0,I-1)}function Te(ue){return jr(Ie()?ue:k*ue,0,R)}function ne(ue){return Ie()?br(ue,R):Ii((ue>=R?I-1:ue)/k)}function se(ue){var Pe=l.toIndex(ue);return E?jr(Pe,0,R):Pe}function ce(ue){ue!==P&&(v=P,P=ue)}function Ee(ue){return ue?v:P}function Ie(){return!Ba(n.focus)||n.isNavigation}function Ne(){return a.state.is([ua,Fa])&&!!n.waitForTransition}return{mount:U,go:Y,scroll:Z,getNext:x,getPrev:M,getAdjacent:ye,getEnd:ve,setIndex:ce,getIndex:Ee,toIndex:Te,toPage:ne,toDest:se,hasFocus:Ie,isBusy:Ne}}var qg="http://www.w3.org/2000/svg",Yg="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",mi=40;function Xg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.emit,h=n.classes,_=n.i18n,m=r.Elements,b=r.Controller,T=m.arrows,p=m.track,A=T,y=m.prev,E=m.next,x,M,P={};function R(){I(),i(Yt,v)}function v(){G(),R()}function I(){var Z=n.arrows;Z&&!(y&&E)&&X(),y&&E&&(Ia(P,{prev:y,next:E}),$a(A,Z?"":"none"),qn(A,M=Js+"--"+n.direction),Z&&(k(),Y(),et([y,E],ja,p.id),l(hs,y,E)))}function G(){s.destroy(),ar(A,M),x?(Ir(T?[y,E]:A),y=E=null):Yn([y,E],Qs)}function k(){i([Er,$r,It,Lr,Ui],Y),u(E,"click",yt(U,">")),u(y,"click",yt(U,"<"))}function U(Z){b.go(Z,!0)}function X(){A=T||Zr("div",h.arrows),y=oe(!0),E=oe(!1),x=!0,Va(A,[y,E]),!T&&Hs(A,p)}function oe(Z){var J='<button class="'+h.arrow+" "+(Z?h.prev:h.next)+'" type="button"><svg xmlns="'+qg+'" viewBox="0 0 '+mi+" "+mi+'" width="'+mi+'" height="'+mi+'" focusable="false"><path d="'+(n.arrowPath||Yg)+'" />';return _f(J)}function Y(){if(y&&E){var Z=a.index,J=b.getPrev(),ye=b.getNext(),de=J>-1&&Z<J?_.last:_.prev,xe=ye>-1&&Z>ye?_.first:_.next;y.disabled=J<0,E.disabled=ye<0,et(y,kn,de),et(E,kn,xe),l(ms,y,E,J,ye)}}return{arrows:P,mount:R,destroy:G,update:Y}}var Zg=js+"-interval";function Qg(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.emit,h=ji(n.interval,a.go.bind(a,">"),k),_=h.isPaused,m=r.Elements,b=r.Elements,T=b.root,p=b.toggle,A=n.autoplay,y,E,x=A==="pause";function M(){A&&(P(),p&&et(p,ja,m.track.id),x||R(),G())}function P(){n.pauseOnHover&&u(T,"mouseenter mouseleave",function(X){y=X.type==="mouseenter",I()}),n.pauseOnFocus&&u(T,"focusin focusout",function(X){E=X.type==="focusin",I()}),p&&u(p,"click",function(){x?R():v(!0)}),i([Xn,Gi,It],h.rewind),i(Xn,U)}function R(){_()&&r.Slides.isEnough()&&(h.start(!n.resetProgress),E=y=x=!1,G(),l(qs))}function v(X){X===void 0&&(X=!0),x=!!X,G(),_()||(h.pause(),l(Ys))}function I(){x||(y||E?v(!1):R())}function G(){p&&(rr(p,Nr,!x),et(p,kn,n.i18n[x?"play":"pause"]))}function k(X){var oe=m.bar;oe&&Ln(oe,"width",X*100+"%"),l(ys,X)}function U(X){var oe=r.Slides.getAt(X);h.set(oe&&+Fn(oe.slide,Zg)||n.interval)}return{mount:M,destroy:h.cancel,play:R,pause:v,isPaused:_}}function Jg(a,r,n){var s=St(a),i=s.on;function u(){n.cover&&(i(Li,yt(h,!0)),i([Er,Yt,It],yt(l,!0)))}function l(_){r.Slides.forEach(function(m){var b=Ha(m.container||m.slide,"img");b&&b.src&&h(_,b,m)})}function h(_,m,b){b.style("background",_?'center/cover no-repeat url("'+m.src+'")':"",!0),$a(m,_?"none":"")}return{mount:u,destroy:yt(l,!1)}}var eh=10,th=600,nh=.6,rh=1.5,ah=800;function ih(a,r,n){var s=St(a),i=s.on,u=s.emit,l=a.state.set,h=r.Move,_=h.getPosition,m=h.getLimit,b=h.exceededLimit,T=h.translate,p=a.is(ia),A,y,E=1;function x(){i(Xn,v),i([Yt,It],I)}function M(k,U,X,oe,Y){var Z=_();if(v(),X&&(!p||!b())){var J=r.Layout.sliderSize(),ye=cs(k)*J*Ii(nn(k)/J)||0;k=h.toPosition(r.Controller.toDest(k%J))+ye}var de=bf(Z,k,1);E=1,U=de?0:U||Mi(nn(k-Z)/rh,ah),y=oe,A=ji(U,P,yt(R,Z,k,Y),1),l(Fa),u(Gi),A.start()}function P(){l(ra),y&&y(),u(Lr)}function R(k,U,X,oe){var Y=_(),Z=k+(U-k)*G(oe),J=(Z-Y)*E;T(Y+J),p&&!X&&b()&&(E*=nh,nn(J)<eh&&M(m(b(!0)),th,!1,y,!0))}function v(){A&&A.cancel()}function I(){A&&!A.isPaused()&&(v(),P())}function G(k){var U=n.easingFunc;return U?U(k):1-Math.pow(1-k,4)}return{mount:x,destroy:v,scroll:M,cancel:I}}var Wr={passive:!1,capture:!0};function oh(a,r,n){var s=St(a),i=s.on,u=s.emit,l=s.bind,h=s.unbind,_=a.state,m=r.Move,b=r.Scroll,T=r.Controller,p=r.Elements.track,A=r.Media.reduce,y=r.Direction,E=y.resolve,x=y.orient,M=m.getPosition,P=m.exceededLimit,R,v,I,G,k,U=!1,X,oe,Y;function Z(){l(p,Fo,ss,Wr),l(p,Bo,ss,Wr),l(p,Ff,ye,Wr),l(p,"click",we,{capture:!0}),l(p,"dragstart",tr),i([Er,Yt],J)}function J(){var be=n.drag;Ce(!be),G=be==="free"}function ye(be){if(X=!1,!oe){var Me=z(be);me(be.target)&&(Me||!be.button)&&(T.isBusy()?tr(be,!0):(Y=Me?p:window,k=_.is([ua,Fa]),I=null,l(Y,Fo,de,Wr),l(Y,Bo,xe,Wr),m.cancel(),b.cancel(),ve(be)))}}function de(be){if(_.is(wi)||(_.set(wi),u(Ef)),be.cancelable)if(k){m.translate(R+Ve(Ie(be)));var Me=Ne(be)>Al,tt=U!==(U=P());(Me||tt)&&ve(be),X=!0,u(Sf),tr(be)}else se(be)&&(k=ne(be),tr(be))}function xe(be){_.is(wi)&&(_.set(ra),u(Af)),k&&(Te(be),tr(be)),h(Y,Fo,de),h(Y,Bo,xe),k=!1}function we(be){!oe&&X&&tr(be,!0)}function ve(be){I=v,v=be,R=M()}function Te(be){var Me=ce(be),tt=Ee(Me),gt=n.rewind&&n.rewindByDrag;A(!1),G?T.scroll(tt,0,n.snap):a.is(Wa)?T.go(x(cs(Me))<0?gt?"<":"-":gt?">":"+"):a.is(ia)&&U&&gt?T.go(P(!0)?">":"<"):T.go(T.toDest(tt),!0),A(!0)}function ne(be){var Me=n.dragMinThreshold,tt=Oa(Me),gt=tt&&Me.mouse||0,wt=(tt?Me.touch:+Me)||10;return nn(Ie(be))>(z(be)?wt:gt)}function se(be){return nn(Ie(be))>nn(Ie(be,!0))}function ce(be){if(a.is(ca)||!U){var Me=Ne(be);if(Me&&Me<Al)return Ie(be)/Me}return 0}function Ee(be){return M()+cs(be)*br(nn(be)*(n.flickPower||600),G?1/0:r.Layout.listSize()*(n.flickMaxPages||1))}function Ie(be,Me){return Pe(be,Me)-Pe(ue(be),Me)}function Ne(be){return us(be)-us(ue(be))}function ue(be){return v===be&&I||v}function Pe(be,Me){return(z(be)?be.changedTouches[0]:be)["page"+E(Me?"Y":"X")]}function Ve(be){return be/(U&&a.is(ia)?Fg:1)}function me(be){var Me=n.noDrag;return!Ca(be,"."+If+", ."+Zi)&&(!Me||!Ca(be,Me))}function z(be){return typeof TouchEvent<"u"&&be instanceof TouchEvent}function ct(){return k}function Ce(be){oe=be}return{mount:Z,disable:Ce,isDragging:ct}}var sh={Spacebar:" ",Right:qi,Left:zi,Up:xf,Down:Pf};function eu(a){return a=yr(a)?a:a.key,sh[a]||a}var Tl="keydown";function uh(a,r,n){var s=St(a),i=s.on,u=s.bind,l=s.unbind,h=a.root,_=r.Direction.resolve,m,b;function T(){p(),i(Yt,A),i(Yt,p),i(Xn,E)}function p(){var M=n.keyboard;M&&(m=M==="global"?window:h,u(m,Tl,x))}function A(){l(m,Tl)}function y(M){b=M}function E(){var M=b;b=!0,vf(function(){b=M})}function x(M){if(!b){var P=eu(M);P===_(zi)?a.go("<"):P===_(qi)&&a.go(">")}}return{mount:T,destroy:A,disable:y}}var xa=js+"-lazy",Ai=xa+"-srcset",ch="["+xa+"], ["+Ai+"]";function lh(a,r,n){var s=St(a),i=s.on,u=s.off,l=s.bind,h=s.emit,_=n.lazyLoad==="sequential",m=[$r,Lr],b=[];function T(){n.lazyLoad&&(p(),i(It,p))}function p(){or(b),A(),_?M():(u(m),i(m,y),y())}function A(){r.Slides.forEach(function(P){Gs(P.slide,ch).forEach(function(R){var v=Fn(R,xa),I=Fn(R,Ai);if(v!==R.src||I!==R.srcset){var G=n.classes.spinner,k=R.parentElement,U=Ha(k,"."+G)||Zr("span",G,k);b.push([R,P,U]),R.src||$a(R,"none")}})})}function y(){b=b.filter(function(P){var R=n.perPage*((n.preloadPages||1)+1)-1;return P[1].isWithin(a.index,R)?E(P):!0}),b.length||u(m)}function E(P){var R=P[0];qn(P[1].slide,ws),l(R,"load error",yt(x,P)),et(R,"src",Fn(R,xa)),et(R,"srcset",Fn(R,Ai)),Yn(R,xa),Yn(R,Ai)}function x(P,R){var v=P[0],I=P[1];ar(I.slide,ws),R.type!=="error"&&(Ir(P[2]),$a(v,""),h(Li,v,I),h(aa)),_&&M()}function M(){b.length&&E(b.shift())}return{mount:T,destroy:yt(or,b),check:y}}function fh(a,r,n){var s=St(a),i=s.on,u=s.emit,l=s.bind,h=r.Slides,_=r.Elements,m=r.Controller,b=m.hasFocus,T=m.getIndex,p=m.go,A=r.Direction.resolve,y=_.pagination,E=[],x,M;function P(){R(),i([Yt,It,Ui],P);var oe=n.pagination;y&&$a(y,oe?"":"none"),oe&&(i([Xn,Gi,Lr],X),v(),X(),u(ps,{list:x,items:E},U(a.index)))}function R(){x&&(Ir(y?wr(x.children):x),ar(x,M),or(E),x=null),s.destroy()}function v(){var oe=a.length,Y=n.classes,Z=n.i18n,J=n.perPage,ye=b()?m.getEnd()+1:Na(oe/J);x=y||Zr("ul",Y.pagination,_.track.parentElement),qn(x,M=Qi+"--"+k()),et(x,ir,"tablist"),et(x,kn,Z.select),et(x,Zs,k()===Yi?"vertical":"");for(var de=0;de<ye;de++){var xe=Zr("li",null,x),we=Zr("button",{class:Y.page,type:"button"},xe),ve=h.getIn(de).map(function(ne){return ne.slide.id}),Te=!b()&&J>1?Z.pageX:Z.slideX;l(we,"click",yt(I,de)),n.paginationKeyboard&&l(we,"keydown",yt(G,de)),et(xe,ir,"presentation"),et(we,ir,"tab"),et(we,ja,ve.join(" ")),et(we,kn,ls(Te,de+1)),et(we,Qr,-1),E.push({li:xe,button:we,page:de})}}function I(oe){p(">"+oe,!0)}function G(oe,Y){var Z=E.length,J=eu(Y),ye=k(),de=-1;J===A(qi,!1,ye)?de=++oe%Z:J===A(zi,!1,ye)?de=(--oe+Z)%Z:J==="Home"?de=0:J==="End"&&(de=Z-1);var xe=E[de];xe&&(pf(xe.button),p(">"+de),tr(Y,!0))}function k(){return n.paginationDirection||n.direction}function U(oe){return E[m.toPage(oe)]}function X(){var oe=U(T(!0)),Y=U(T());if(oe){var Z=oe.button;ar(Z,Nr),Yn(Z,yl),et(Z,Qr,-1)}if(Y){var J=Y.button;qn(J,Nr),et(J,yl,!0),et(J,Qr,"")}u(_s,{list:x,items:E},oe,Y)}return{items:E,mount:P,destroy:R,getAt:U,update:X}}var dh=[" ","Enter"];function vh(a,r,n){var s=n.isNavigation,i=n.slideFocus,u=[];function l(){a.splides.forEach(function(y){y.isParent||(m(a,y.splide),m(y.splide,a))}),s&&b()}function h(){u.forEach(function(y){y.destroy()}),or(u)}function _(){h(),l()}function m(y,E){var x=St(y);x.on(Xn,function(M,P,R){E.go(E.is(ca)?R:M)}),u.push(x)}function b(){var y=St(a),E=y.on;E($i,p),E(Tf,A),E([Er,Yt],T),u.push(y),y.emit(Ni,a.splides)}function T(){et(r.Elements.list,Zs,n.direction===Yi?"vertical":"")}function p(y){a.go(y.index)}function A(y,E){Vs(dh,eu(E))&&(p(y),tr(E))}return{setup:yt(r.Media.set,{slideFocus:Ba(i)?s:i},!0),mount:l,destroy:h,remount:_}}function gh(a,r,n){var s=St(a),i=s.bind,u=0;function l(){n.wheel&&i(r.Elements.track,"wheel",h,Wr)}function h(m){if(m.cancelable){var b=m.deltaY,T=b<0,p=us(m),A=n.wheelMinThreshold||0,y=n.wheelSleep||0;nn(b)>A&&p-u>y&&(a.go(T?"<":">"),u=p),_(T)&&tr(m)}}function _(m){return!n.releaseWheel||a.state.is(ua)||r.Controller.getAdjacent(m)!==-1}return{mount:l}}var hh=90;function mh(a,r,n){var s=St(a),i=s.on,u=r.Elements.track,l=n.live&&!n.isNavigation,h=Zr("span",Ig),_=ji(hh,yt(b,!1));function m(){l&&(p(!r.Autoplay.isPaused()),et(u,El,!0),h.textContent="…",i(qs,yt(p,!0)),i(Ys,yt(p,!1)),i([$r,Lr],yt(b,!0)))}function b(A){et(u,wl,A),A?(Va(u,h),_.start()):(Ir(h),_.cancel())}function T(){Yn(u,[bl,El,wl]),Ir(h)}function p(A){l&&et(u,bl,A?"off":"polite")}return{mount:m,disable:p,destroy:T}}var ph=Object.freeze({__proto__:null,Media:Tg,Direction:Rg,Elements:Bg,Slides:Vg,Layout:Hg,Clones:jg,Move:Wg,Controller:zg,Arrows:Xg,Autoplay:Qg,Cover:Jg,Scroll:ih,Drag:oh,Keyboard:uh,LazyLoad:lh,Pagination:fh,Sync:vh,Wheel:gh,Live:mh}),_h={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},yh={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Lg,i18n:_h,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function bh(a,r,n){var s=r.Slides;function i(){St(a).on([Er,It],u)}function u(){s.forEach(function(h){h.style("transform","translateX(-"+100*h.index+"%)")})}function l(h,_){s.style("transition","opacity "+n.speed+"ms "+n.easing),vf(_)}return{mount:i,start:l,cancel:ss}}function wh(a,r,n){var s=r.Move,i=r.Controller,u=r.Scroll,l=r.Elements.list,h=yt(Ln,l,"transition"),_;function m(){St(a).bind(l,"transitionend",function(A){A.target===l&&_&&(T(),_())})}function b(A,y){var E=s.toPosition(A,!0),x=s.getPosition(),M=p(A);nn(E-x)>=1&&M>=1?n.useScroll?u.scroll(E,M,!1,y):(h("transform "+M+"ms "+n.easing),s.translate(E,!0),_=y):(s.jump(A),y())}function T(){h(""),u.cancel()}function p(A){var y=n.rewindSpeed;if(a.is(ia)&&y){var E=i.getIndex(!0),x=i.getEnd();if(E===0&&A>=x||E>=x&&A===0)return y}return n.speed}return{mount:m,start:b,cancel:T}}var Eh=function(){function a(n,s){this.event=St(),this.Components={},this.state=Sg(Yr),this.splides=[],this._o={},this._E={};var i=yr(n)?yf(document,n):n;Ra(i,i+" is invalid."),this.root=i,s=pr({label:Fn(i,kn)||"",labelledby:Fn(i,Xs)||""},yh,a.defaults,s||{});try{pr(s,JSON.parse(Fn(i,js)))}catch{Ra(!1,"Invalid JSON")}this._o=Object.create(pr({},s))}var r=a.prototype;return r.mount=function(s,i){var u=this,l=this.state,h=this.Components;Ra(l.is([Yr,Ci]),"Already mounted!"),l.set(Yr),this._C=h,this._T=i||this._T||(this.is(Wa)?bh:wh),this._E=s||this._E;var _=Ia({},ph,this._E,{Transition:this._T});return Cr(_,function(m,b){var T=m(u,h,u._o);h[b]=T,T.setup&&T.setup()}),Cr(h,function(m){m.mount&&m.mount()}),this.emit(Er),qn(this.root,$g),l.set(ra),this.emit(pl),this},r.sync=function(s){return this.splides.push({splide:s}),s.splides.push({splide:this,isParent:!0}),this.state.is(ra)&&(this._C.Sync.remount(),s.Components.Sync.remount()),this},r.go=function(s){return this._C.Controller.go(s),this},r.on=function(s,i){return this.event.on(s,i),this},r.off=function(s){return this.event.off(s),this},r.emit=function(s){var i;return(i=this.event).emit.apply(i,[s].concat(wr(arguments,1))),this},r.add=function(s,i){return this._C.Slides.add(s,i),this},r.remove=function(s){return this._C.Slides.remove(s),this},r.is=function(s){return this._o.type===s},r.refresh=function(){return this.emit(It),this},r.destroy=function(s){s===void 0&&(s=!0);var i=this.event,u=this.state;return u.is(Yr)?St(this).on(pl,this.destroy.bind(this,s)):(Cr(this._C,function(l){l.destroy&&l.destroy(s)},!0),i.emit(zs),i.destroy(),s&&or(this.splides),u.set(Ci)),this},_g(a,[{key:"options",get:function(){return this._o},set:function(s){this._C.Media.set(s,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),a}(),tu=Eh;tu.defaults={};tu.STATES=bg;const Sh=[Er,It,aa,Hi,Ef,Sf,Af,Gi,Lr,zs,qs,Ys];function Ah(a,r){const n=(s,i={})=>{r(Th(s),{splide:a,...i})};a.on($i,(s,i)=>{n($i,{Slide:s,e:i})}),a.on(Xn,(s,i,u)=>{n(Xn,{index:s,prev:i,dest:u})}),a.on($r,(s,i,u)=>{n($r,{index:s,prev:i,dest:u})}),a.on(fs,s=>{n(fs,{Slide:s})}),a.on(ds,s=>{n(ds,{Slide:s})}),a.on(vs,s=>{n(vs,{Slide:s})}),a.on(gs,s=>{n(gs,{Slide:s})}),a.on(Yt,s=>{n(Yt,s)}),a.on(hs,(s,i)=>{n(hs,{prev:s,next:i})}),a.on(ms,(s,i)=>{n(ms,{prev:s,next:i})}),a.on(ps,(s,i)=>{n(ps,{data:s,item:i})}),a.on(_s,(s,i,u)=>{n(_s,{data:s,prev:i,curr:u})}),a.on(Ni,s=>{n(Ni,{splides:s})}),a.on(ys,s=>{n(ys,{rate:s})}),a.on(Li,(s,i)=>{n(Li,{img:s,Slide:i})}),Sh.forEach(s=>{a.on(s,()=>{n(s)})})}function Th(a){return a.split(":").map((r,n)=>n>0?r.charAt(0).toUpperCase()+r.slice(1):r).join("").replace("Lazyload","LazyLoad")}var Rh=Re("<div><!></div>");function xh(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]),s=Nt(n,["go","sync","class","options","splide","extensions","transition","hasTrack"]);it(r,!1);let i=he(r,"class",12,void 0),u=he(r,"options",28,()=>({})),l=he(r,"splide",12,void 0),h=he(r,"extensions",12,void 0),_=he(r,"transition",12,void 0),m=he(r,"hasTrack",12,!0);const b=Wd();let T=Rt(),p,A=Rt(bi({},u()));sr(()=>(l(new tu(d(T),u())),Ah(l(),b),l().mount(h(),_()),p=fl(l()),()=>l().destroy())),zd(()=>{if(l()){const v=fl(l());mg(p,v)||(l().refresh(),p=v.slice())}});function y(v){l()?.go(v)}function E(v){l()?.sync(v)}jn(()=>(Un(l()),d(A),Un(u()),bi),()=>{l()&&!os(d(A),u())&&(l(l().options=u(),!0),He(A,bi({},d(A))))}),oa(),Bt();var x=Rh();Ls(x,v=>({class:v,...s}),[()=>(Un(na),Un(i()),Wn(()=>na("splide",i())))]);var M=W(x);{var P=v=>{Dh(v,{children:(I,G)=>{var k=Et(),U=ze(k);ka(U,r,"default",{}),ie(I,k)},$$slots:{default:!0}})},R=v=>{var I=Et(),G=ze(I);ka(G,r,"default",{}),ie(v,I)};Xe(M,v=>{m()?v(P):v(R,!1)})}return j(x),Ut(x,v=>He(T,v),()=>d(T)),ie(a,x),Ye(r,"go",y),Ye(r,"sync",E),ot({go:y,sync:E,get class(){return i()},set class(v){i(v),Hr()},get options(){return u()},set options(v){u(v),Hr()},get splide(){return l()},set splide(v){l(v),Hr()},get extensions(){return h()},set extensions(v){h(v),Hr()},get transition(){return _()},set transition(v){_(v),Hr()},get hasTrack(){return m()},set hasTrack(v){m(v),Hr()}})}var Ph=Re('<div><ul class="splide__list"><!></ul></div>');function Dh(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]),s=Nt(n,["class"]);it(r,!1);let i=he(r,"class",8,void 0);Bt();var u=Ph();Ls(u,_=>({class:_,...s}),[()=>(Un(na),Un(i()),Wn(()=>na("splide__track",i())))]);var l=W(u),h=W(l);ka(h,r,"default",{}),j(l),j(u),ie(a,u),ot()}var kh=Re("<li><!></li>");function Oh(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]),s=Nt(n,["class"]);it(r,!1);let i=he(r,"class",8,void 0);Bt();var u=kh();Ls(u,h=>({class:h,...s}),[()=>(Un(na),Un(i()),Wn(()=>na("splide__slide",i())))]);var l=W(u);ka(l,r,"default",{}),j(u),ie(a,u),ot()}var Ch=Xt('<path d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path>');function Mh(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=Ch();ie(s,u)},$$slots:{default:!0}}))}var Ih=Re('<div class="absolute top-0 left-0 flex h-full w-full items-center justify-center"><div class="h-12 w-12 text-gray-200 opacity-70"><!></div></div>'),$h=Re('<div><div class="relative p-1"><img/> <!></div> <div class="p-1"><div class="font-josefin justify-center text-xl"><div> </div></div></div></div>');function Nh(a,r){it(r,!0);let n=he(r,"title",7,"???"),s=he(r,"src",7,""),i=he(r,"active",7,!1),u=he(r,"locked",7,!1),l=Qe(()=>i()?"text-white":"text-gray-400"),h=Qe(()=>i()?"border-white border-2":"border-gray-700 border-2"),_=Qe(()=>i()?"brightness-125":""),m=Qe(()=>(i(),"opacity-100"));var b=$h(),T=W(b),p=W(T),A=Q(p,2);{var y=R=>{var v=Ih(),I=W(v),G=W(I);Mh(G,{}),j(I),j(v),ie(R,v)};Xe(A,R=>{u()&&R(y)})}j(T);var E=Q(T,2),x=W(E),M=W(x),P=W(M,!0);return j(M),j(x),j(E),j(b),lt(()=>{We(p,1,`rounded border-solid ${d(h)??""} ${d(_)??""} ${d(m)??""}`),$t(p,"src",s()),$t(p,"alt",n()),We(M,1,`flex justify-center ${d(l)??""}`),At(P,n())}),ie(a,b),ot({get title(){return n()},set title(R){n(R)},get src(){return s()},set src(R){s(R)},get active(){return i()},set active(R){i(R)},get locked(){return u()},set locked(R){u(R)}})}var Lh=Re('<div class="p-4"><!> <div class="py-2"></div></div>');function Ko(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(Ds,"$kickstarts",n);let u=he(r,"category",3,""),l=he(r,"items",19,()=>[]),h=he(r,"select",3,()=>{});const _={type:"slide",perPage:5,perMove:1,pagination:!1,gap:"1rem"};let m=Bi([]);function b(y){console.log("setActive: "+u()),m.forEach(E=>{console.log(E.title),E.active=E.title==y})}var T=Lh(),p=W(T);xh(p,{get options(){return _},$$events:{click:y=>{y&&(console.log("Carousel clicked",y,l()[y.detail.Slide.index]),h()(l()[y.detail.Slide.index]))}},children:(y,E)=>{var x=Et(),M=ze(x);ta(M,17,l,ea,(P,R,v)=>{Oh(P,{children:(I,G)=>{const k=Qe(()=>!i().map(U=>U.crc32).some(U=>d(R).roms.includes(U)));Ut(Nh(I,{get src(){return`footage/${d(R).url??""}-small.jpg`},get title(){return d(R).title},get locked(){return d(k)}}),(U,X)=>m[X]=U,U=>m?.[U],()=>[v])},$$slots:{default:!0}})}),ie(y,x)},$$slots:{default:!0}}),xs(2),j(T),xt(1,T,()=>Pt),ie(a,T);var A=ot({setActive:b});return s(),A}const Vo=1,Uh=313,Fh=Uh,Bh=227,zr=313,qr=912,Kh=18,Vh=26,Rl={Escape:69,F1:80,F2:81,F3:82,F4:83,F5:84,F6:85,F7:86,F8:87,F9:88,F10:89,F11:102,F12:103,Backquote:0,Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6,Digit7:7,Digit8:8,Digit9:9,Digit0:10,Minus:11,Equal:12,Backspace:65,Tab:66,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Backslash:13,CapsLock:98,KeyA:32,KeyS:33,KeyD:34,KeyF:35,KeyG:36,KeyH:37,KeyJ:38,KeyK:39,KeyL:40,Semicolon:41,Quote:42,Enter:68,ShiftLeft:96,KeyZ:49,KeyX:50,KeyC:51,KeyV:52,KeyB:53,KeyN:54,KeyM:55,Comma:56,Period:57,Slash:58,ShiftRight:97,ControlLeft:99,AltLeft:100,MetaLeft:102,Space:64,AltRight:101,MetaRight:103,ControlRight:99,Delete:70,End:95,PageDown:69,ArrowUp:76,ArrowDown:77,ArrowRight:78,ArrowLeft:79,NumpadDivide:92,NumpadMultiply:93,NumpadSubtract:74,Numpad7:61,Numpad8:62,Numpad9:63,NumpadAdd:94,Numpad4:45,Numpad5:46,Numpad6:47,Numpad1:29,Numpad2:30,Numpad3:31,NumpadEnter:67,Numpad0:15,NumpadDecimal:60},ft={Aros:1062194186,Kick12:2798523958,Kick13:3304125791,DiagROM:2231503309},Bf=[{url:"batmanrises",title:"Batman Rises",subtitle:"The Batman Group",description:"Batman Rises is a demo released in December 2022 at the Posadas Party Autumn Edition. It quickly gained public attention and is widely regarded as one of the finest demos ever created for the Commodore Amiga.",adf:["BatmanRises1.adf","BatmanRises2.adf"],memory:[1024,512,0],roms:[ft.Aros],warp:Lt.never},{url:"stateart",title:"State of the Art",subtitle:"Spaceballs",description:"This demo was released in December 1992 and took 1st place in the Amiga Demo Competition at The Party 1992.",adf:["StateArt.adf"],memory:[512,512,0],roms:[ft.Aros],warp:Lt.never},{url:"rinkadink",title:"Rink a Dink - Redux",subtitle:"Lemon",description:"This demo was released by Lemon at Revision 2013 and has gained widespread popularity over time. We have used it extensively since the early days of vAmiga to test and validate the emulator.",adf:["RinkADink.adf"],memory:[512,512,0],roms:[ft.Aros],warp:Lt.never},{url:"desertdreams",title:"Desert Dreams",subtitle:"Kefrens",description:"This demo was released in April 1993 and won 1st place in the Amiga Demo Competition at The Gathering 1993.",adf:["DesertDream1.adf","DesertDream2.adf"],memory:[1024,512,0],roms:[ft.Aros],warp:Lt.never},{url:"inebriation",title:"Absolute Inebriation",subtitle:"Virtual Dreams & Fairlight",description:"This demo was released in December 1992 as the debut production of Virtual Dreams, a Finnish-based Amiga demo group. The group later rose to prominence during their time as the demo division of Fairlight.",adf:["AbsoluteInebriation1.adf"],memory:[512,512,0],roms:[ft.Aros],warp:Lt.never},{url:"eon",title:"Eon",subtitle:"The Black Lotus",description:"This demo is widely regarded as one of the finest ever created for the Commodore Amiga. It showcases the machine’s full potential through masterful use of its hardware capabilities.",adf:["Eon1.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"3ddemo",title:"3D Demo II",subtitle:"Anarchy",description:"This demo was released in December 1992 and placed 2nd in the Amiga Demo Competition at The Party 1992.",adf:["3Ddemo2.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"hamazing",title:"HAMazing",subtitle:"Desire",description:"This demo won the 16-bit demo competition at SIGGRAPH Asia 2023 and was nominated for Outstanding Technical Achievement at The Meteoriks 2024. It showcases the impressive HAM (Hold-And-Modify) graphics capabilities of the Amiga.",adf:["Hamazing.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"sushiboyz",title:"Sushi Boyz",subtitle:"Ghostown",description:"This demo was released in April 2015 and won 1st place in the Amiga Demo Competition at Revision 2015.",adf:["Sushiboyz.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"kyrios",title:"Mental Scrollover",subtitle:"Kyrios",description:"This demo was released in August 1990. I’ve used it many times to test vAmiga and have grown fond of it over time.",adf:["Kyrios.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never}],Hh=[{url:"traprunner",title:"Trap Runner",subtitle:"Night Owl Design",description:"Trap Runner is a classic platform game with a few clever twists. Navigate mind traps, dodge obstacles, and battle monsters as you collect items to boost your score, gain extra lives, or complete special missions. The game runs on any OCS/ECS Amiga with at least 1MB of RAM, starting from Kickstart 1.2.",adf:["TrapRunner.adf"],memory:[512,512,8192],roms:[ft.Aros],warp:Lt.never},{url:"celtic",title:"Celtic Heart",subtitle:"Night Owl Design",description:"This game was developed in early 2019, largely built on the Trap Runner engine. Set in a medieval world, you play as the Celtic knight Eric on a quest to save the kingdom from an evil force.",adf:["CelticHeart.adf"],memory:[512,512,8192],roms:[ft.Aros],warp:Lt.never},{url:"paccer",title:"Paccer",subtitle:"Dirk W. Hoffmann",description:"This game is a Pac-Man clone originally released on Fish Disk 223. I developed it myself many years ago on my Amiga 500 using the Aztec C compiler and DPaint. Unfortunately, I lost the source code when my parents cleaned out their attic, but fortunately, the game has survived and is still available on the Internet.",adf:["Paccer.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"china",title:"China Challenge II",subtitle:"Dirk W. Hoffmann",description:"This game is a Mahjong clone that I developed myself many years ago. The original version was released on Fish Disk 312, and this slightly improved sequel was later published on Fish Disk 444.",adf:["ChinaChallengeII.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"defender",title:"Defender of the Crown",subtitle:"Cinemaware",description:"Defender of the Crown is a strategy game designed by Kellyn Beck and was Cinemaware’s very first release. Originally launched for the Commodore Amiga in 1986, it set a new benchmark for graphic quality in home computer games.",adf:["DefenderOfTheCrown1.adf","DefenderOfTheCrown2.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never}],Gh=[{url:"sysinfo",title:"Sysinfo 4.4",subtitle:"Nic Wilson, Tobias Geijersson",description:"Sysinfo is a shareware program written entirely in Assembly for Motorola 68k-equipped Amiga computers to benchmark system performance. It displays the version of system software in ROM, the hardware present, and the current operating mode of the hardware.",adf:["SysInfo.adf"],memory:[1024,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"testkit",title:"Amiga Test Kit",subtitle:"Keir Fraser",description:"The Amiga Test Kit is a software-based tool designed to test and diagnose various components of a Commodore Amiga.",adf:["AmigaTestKit.adf"],memory:[512,512,0],roms:[ft.Kick12,ft.Kick13],warp:Lt.never},{url:"diagrom",title:"Amiga DiagROM",subtitle:"John Hertell",description:"The Amiga Diagnostic ROM is a hardware-based testing solution for Amiga computers. Installed as a replacement for the Kickstart ROM on the motherboard, it boots the system into a diagnostic menu upon power-up. The ROM provides a range of test routines to check various hardware components.",adf:[],memory:[512,512,0],roms:[ft.DiagROM],warp:Lt.never}];function jh(a,r){r(!1)}async function xl(a,r,n){r().runShowcase(n.selected)}var Wh=Re('<div class="text-error font-josefin">Please install Kickstart 1.2 or Kickstart 1.3 to unlock this title.</div> <div class="mt-4 relative"><button class="btn btn-disabled bg-gray-500 text-white opacity-20">Start</button></div>',1),zh=Re('<div class="mt-4 relative"><button class="btn btn-primary">Start</button></div>'),qh=Re('<div><div class="absolute top-0 left-0 px-0 py-0 w-full h-full"><img class="w-full h-full object-cover brightness-90 blur-[2px]" alt="Bg"/></div> <div class="absolute top-0 left-0 px-0 py-0 w-full h-full"><img class="w-full h-full object-cover brightness-90 blur-[2px]" src="footage/blank-large.png" alt="Alt"/></div> <div class="relative border-0"><div class="absolute top-0 right-0"><button class="btn btn-sm btn-square flex p-0 border-2 border-white"><!></button></div> <div><div class="font-sofia-extra text-8xl"> </div> <div class="flex pb-10 items-center"><div class="text-xs p-0.5 mr-2 border-2 h-fit rounded-md font-azaret">PAL</div> <div class="font-sofia-semi text-2xl flex"> </div></div> <div class="flex font-josefin text-lg w-2/3 pb-5"> </div></div> <!></div></div>');function Yh(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(Ds,"$kickstarts",n),u=()=>O(Mr,"$proxy",n);let l=he(r,"show",15,!0),h=Qe(()=>"footage/"+(r.selected?.url??"")+"-large.jpg"),_=Qe(()=>i().map(A=>A.crc32).some(A=>r.selected?.roms.includes(A))),m=Qe(()=>!d(_));var b=Et(),T=ze(b);{var p=A=>{var y=qh(),E=W(y),x=W(E);j(E);var M=Q(E,4),P=W(M),R=W(P);R.__click=[jh,l];var v=W(R);ff(v,{}),j(R),j(P);var I=Q(P,2),G=W(I),k=W(G,!0);j(G);var U=Q(G,2),X=Q(W(U),2),oe=W(X,!0);j(X),j(U);var Y=Q(U,2),Z=W(Y,!0);j(Y),j(I);var J=Q(I,2);{var ye=xe=>{var we=Wh(),ve=Q(ze(we),2),Te=W(ve);Te.__click=[xl,u,r],j(ve),ie(xe,we)},de=xe=>{var we=zh(),ve=W(we);ve.__click=[xl,u,r],j(we),ie(xe,we)};Xe(J,xe=>{d(m)?xe(ye):xe(de,!1)})}j(M),j(y),lt(()=>{$t(x,"src",d(h)),At(k,r.selected.title),At(oe,r.selected.subtitle),At(Z,r.selected.description)}),xt(1,y,()=>Pt),ie(A,y)};Xe(T,A=>{r.selected&&A(p)})}ie(a,b),ot(),s()}on(["click"]);var Xh=Re('<dialog><div class="modal-box w-11/12 max-w-6xl bg-black"><!></div></dialog> <div class="grow h-full flex flex-col justify-center overflow-auto"><div class="relative h-full"><div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Demos</div> <!> <div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Games</div> <!> <div class="w-hull bg-gray-500/50 text-2xl p-1 font-josefin">Tools</div> <!></div></div>',1);function Zh(a){let r=Rt(null),n=Rt(!1),s=Rt(),i=Rt(),u=Rt();function l(P){d(s).setActive(P.title),He(r,P)}function h(P){l(P),He(n,!0)}var _=Xh(),m=ze(_);let b;var T=W(m),p=W(T);Yh(p,{get selected(){return d(r)},get show(){return d(n)},set show(P){He(n,P)},$$legacy:!0}),j(T),j(m);var A=Q(m,2),y=W(A),E=Q(W(y),2);Ut(Ko(E,{category:"Demos",get items(){return Bf},select:h,$$legacy:!0}),P=>He(s,P),()=>d(s));var x=Q(E,4);Ut(Ko(x,{category:"Games",get items(){return Hh},select:h,$$legacy:!0}),P=>He(i,P),()=>d(i));var M=Q(x,4);Ut(Ko(M,{category:"Tools",get items(){return Gh},select:h,$$legacy:!0}),P=>He(u,P),()=>d(u)),j(y),j(A),lt(P=>b=We(m,1,"modal border-0",null,b,P),[()=>({"modal-open":d(n)})],_e),xt(1,A,()=>Pt),ie(a,_)}var Qh=Re('<div><div class="flex justify-center rounded"><img class="mt-3 h-24 p-2" src="va-icon.png" alt="vAmiga Icon"/> <div class="p-6 text-white"><div class="flex"><div class="font-sofia-extra mr-2 text-7xl">vAmiga<span class="opacity-75">.net</span></div></div> <div class="font-sofia-semi pb-10 pl-2 text-xl">Version 2.0 beta 1</div> <div class="flex space-x-5"><div class="tooltip tooltip-primary" data-tip="Power On"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div> <div class="tooltip tooltip-primary" data-tip="Run Demo"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div> <div class="tooltip tooltip-primary" data-tip="Visit GitHub"><button class="btn btn-lg btn-outline btn-square p-1.5"><!></button></div></div></div></div></div>'),Jh=Re("<div><!></div>"),em=Re('<div class="p-1.5"><!></div>'),tm=Re("<div>Kickstart</div>"),nm=Re("<div><!></div>"),rm=Re("<div>Showcases</div>"),am=Re("<div><!></div>"),im=Re("<div>Impressum</div>"),om=Re('<div><div class="modal-box h-2/3 w-2/3 max-w-none"><!></div></div> <div><div class="modal-box"><!></div></div> <div><div><div class="absolute h-full"><div class="h-full w-screen bg-gradient-to-t from-indigo-400 to-indigo-800"></div></div> <div class="absolute h-full blur-xs"><img class="h-full w-screen object-fill opacity-60" src="matrix.jpg" alt="Background"/></div></div> <!> <div><!> <!> <!></div></div>',1);function sm(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Ft,"$layer",n),u=()=>O(Jr,"$audio",n),l=()=>O(On,"$amiga",n),h=()=>O(Mr,"$proxy",n),_=()=>O(sa,"$poweredOn",n);let m="",b=Rt(!1),T=Rt(!1);sr(()=>{console.log("TitleScreen::onMount()"),new Image().src="footage/3ddemo-small.jpg",new Image().src="footage/batmanrises-small.jpg",new Image().src="footage/celtic-small.jpg",new Image().src="footage/china-small.jpg",new Image().src="footage/defender-small.jpg",new Image().src="footage/desertdreams-small.jpg",new Image().src="footage/diagrom-small.jpg",new Image().src="footage/eon-small.jpg",new Image().src="footage/inebriation-small.jpg",new Image().src="footage/kyrios-small.jpg",new Image().src="footage/paccer-small.jpg",new Image().src="footage/rinkadink-small.jpg",new Image().src="footage/sdi-small.jpg",new Image().src="footage/stateart-small.jpg",new Image().src="footage/sysinfo-small.jpg",new Image().src="footage/testkit-small.jpg",new Image().src="footage/traprunner-small.jpg"});async function p(){await u().setup(),l().run()}async function A(){await u().setup(),h().runShowcase(Bf[0])}function y(){window.location.href="https://github.com/dirkwhoffmann/vAmigaNet"}async function E(){console.log("openShowcases"),await u().setup(),fe(Ft,i()===dt.showcases?dt.none:dt.showcases),fe(Ki,!1)}async function x(){await u().setup(),He(b,!0)}function M(){He(T,!0)}jn(()=>(i(),dt),()=>{i()===dt.kickstart&&He(b,!0)}),oa(),Bt();var P=Et(),R=ze(P);{var v=I=>{var G=om(),k=ze(G);let U;var X=W(k),oe=W(X);gg(oe,{get show(){return d(b)},set show(Ie){He(b,Ie)},$$legacy:!0}),j(X),j(k);var Y=Q(k,2);let Z;var J=W(Y),ye=W(J);Zv(ye,{get show(){return d(T)},set show(Ie){He(T,Ie)},$$legacy:!0}),j(J),j(Y);var de=Q(Y,2);We(de,1,"flex h-full flex-col ");var xe=W(de),we=Q(xe,2);{var ve=Ie=>{Zh(Ie)},Te=Ie=>{var Ne=Jh();We(Ne,1,"relative flex grow flex-col items-center justify-center bg-transparent ");var ue=W(Ne);{var Pe=Ve=>{var me=Qh();We(me,1,_r(m));var z=W(me),ct=Q(W(z),2),Ce=Q(W(ct),4),be=W(Ce),Me=W(be),tt=W(Me);jv(tt,{}),j(Me),j(be);var gt=Q(be,2),wt=W(gt),nt=W(wt);Hv(nt,{}),j(wt),j(gt);var pe=Q(gt,2),ge=W(pe),ht=W(ge);Fv(ht,{}),j(ge),j(pe),j(Ce),j(ct),j(z),j(me),Sn("click",Me,p),Sn("click",wt,A),Sn("click",ge,y),ie(Ve,me)};Xe(ue,Ve=>{i(),Un(dt),Wn(()=>i()===dt.none)&&Ve(Pe)})}j(Ne),xt(1,Ne,()=>Pt),ie(Ie,Ne)};Xe(we,Ie=>{i(),Un(dt),Wn(()=>i()===dt.showcases)?Ie(ve):Ie(Te,!1)})}var ne=Q(we,2);We(ne,1,"relative flex justify-center space-x-8 bg-gray-900/50 align-middle ");var se=W(ne);No(se,{onclick:x,icon:ue=>{var Pe=em(),Ve=W(Pe);Kv(Ve,{}),j(Pe),ie(ue,Pe)},description:ue=>{var Pe=tm();ie(ue,Pe)},$$slots:{icon:!0,description:!0}});var ce=Q(se,2);No(ce,{onclick:E,icon:ue=>{var Pe=nm(),Ve=W(Pe);Lv(Ve,{}),j(Pe),ie(ue,Pe)},description:ue=>{var Pe=rm();ie(ue,Pe)},$$slots:{icon:!0,description:!0}});var Ee=Q(ce,2);No(Ee,{onclick:M,icon:ue=>{var Pe=am(),Ve=W(Pe);zv(Ve,{}),j(Pe),ie(ue,Pe)},description:ue=>{var Pe=im();ie(ue,Pe)},$$slots:{icon:!0,description:!0}}),j(ne),j(de),lt((Ie,Ne)=>{U=We(k,1,"modal",null,U,Ie),Z=We(Y,1,"modal",null,Z,Ne)},[()=>({"modal-open":d(b)}),()=>({"modal-open":d(T)})],_e),xt(1,xe,()=>Pt,()=>({duration:2e3})),xt(3,de,()=>Pt),ie(I,G)};Xe(R,I=>{_()||I(v)})}ie(a,P),ot(),s()}class Xr{current=0;target=0;deltaStep=.005;constructor(r=0){this.current=r,this.target=r}animates(){return this.current!=this.target}clamped(){return this.current<0?0:this.current>1?1:this.current}set(r,n=25){this.target=r,this.deltaStep=Math.abs(this.target-this.current)/n}move(){this.current+this.deltaStep<=this.target?this.current+=this.deltaStep:this.current-this.deltaStep>=this.target?this.current-=this.deltaStep:this.current=this.target}}class um{x1=new Xr(.1);y1=new Xr(.1);x2=new Xr(.9);y2=new Xr(.9);texW=Vo*qr;texH=zr;normalize(r){return{x:r.x/this.texW,y:r.y/this.texH,w:r.w/this.texW,h:r.h/this.texH}}entire(){return{x:0,y:0,w:this.texW,h:this.texH}}entireNormalized(){return this.normalize(this.entire())}largestVisible(){const r=4*Vo*Kh,n=4*Vo*Bh,s=Vh,i=Fh;return{x:r,y:s,w:n-r,h:i-s}}largestVisibleNormalized(){return this.normalize(this.largestVisible())}visible(r,n,s,i){const u=this.largestVisible(),l=1-.2*r,h=1-.2*n,_=l*u.w,m=h*u.h,b=u.x+s*(u.w-_),T=u.y+i*(u.h-m);return{x:b,y:T,w:_,h:m}}visibleNormalized(r,n,s,i){return this.normalize(this.visible(r,n,s,i))}animates(){return this.x1.animates()||this.y1.animates()||this.x2.animates()||this.y2.animates()}zoomIn(){this.x1.set(.188),this.y1.set(.106),this.x2.set(.188+.733),this.y2.set(.106+.867)}zoomOut(){this.x1.set(0),this.y1.set(0),this.x2.set(1),this.y2.set(1)}move(){this.x1.move(),this.y1.move(),this.x2.move(),this.y2.move()}}async function cm(a,r,n,s,i){if(!r())await n();else switch(a.button){case 0:s()?.trigger(i().PRESS_LEFT);break;case 1:s()?.trigger(i().PRESS_MIDDLE);break;case 2:s()?.trigger(i().PRESS_RIGHT);break}}function lm(a,r,n){switch(a.button){case 0:r()?.trigger(n().RELEASE_LEFT);break;case 1:r()?.trigger(n().RELEASE_MIDDLE);break;case 2:r()?.trigger(n().RELEASE_RIGHT);break}}var fm=Re('<canvas class="h-full w-full focus:ring-0 focus:outline-none" tabindex="-1"></canvas>');function dm(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(On,"$amiga",n),u=()=>O(Ll,"$denise",n),l=()=>O(rn,"$wasm",n),h=()=>O(an,"$config",n),_=()=>O(Ps,"$running",n),m=()=>O(yn,"$port1",n),b=()=>O(Bl,"$keyset1",n),T=()=>O(Kl,"$keyset2",n),p=()=>O(bn,"$port2",n),A=()=>O(ks,"$joystick1",n),y=()=>O(Os,"$joystick2",n),E=()=>O(Ul,"$keyboard",n),x=()=>O(Nl,"$mouse1",n),M=()=>O(Fl,"$mouse2",n),P=()=>O(Wo,"$MsgShaking",n);let R=Ot(void 0),v=Ot(void 0);he(r,"x1",3,0),he(r,"y1",3,0),he(r,"x2",3,0),he(r,"y2",3,0);let I=he(r,"tx1",7,0),G=he(r,"ty1",7,0),k=he(r,"tx2",7,0),U=he(r,"ty2",7,0),X=he(r,"needsDisplay",15,!1),oe=!0,Y=!0,Z=0,J=()=>document.pointerLockElement===d(R),ye=!1,de=!1,xe=!1,we=!1,ve=0,Te,ne,se,ce,Ee,Ie,Ne,ue,Pe,Ve,me;const z=`
    	attribute vec4 aVertexPosition;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
			vTextureCoord = gl_Position.xy * .5 + .5;
    	}
   	`,ct=`
		precision mediump float;

		varying highp vec2 vTextureCoord;
	   	uniform sampler2D u_lfSampler;
	   	uniform sampler2D u_sfSampler;

		void main()
		{
			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));

			vec4 color;
		    if (mod(coord.y, 2.0) == 0.0) {
		        // color = vec4(1.0, 0.0, 0.0, 1.0);
				color = texture2D(u_sfSampler, vTextureCoord);
		    } else {
		        // color = vec4(1.0, 1.0, 0.0, 1.0);
				color = texture2D(u_lfSampler, vTextureCoord);
		    }

		    gl_FragColor = color;
		}
   `,Ce=`
    	attribute vec4 aVertexPosition;
    	attribute vec2 aTextureCoord;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
    		vTextureCoord = aTextureCoord;
    	}
   	`,be=`
		precision mediump float;
    
		varying highp vec2 vTextureCoord;
    	uniform sampler2D sampler;
    	uniform float u_lweight;
		uniform float u_sweight;

    	void main()
    	{
    	    float w;

			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));
		    if (mod(coord.y, 2.0) == 0.0) {
		        w = u_lweight;
		        // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * vec4(w, w, w, 1.0);
		    } else {
		        w = u_sweight;
		        // gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0) * vec4(w, w, w, 1.0);
		    }

            gl_FragColor = texture2D(sampler, vTextureCoord) * vec4(w, w, w, 1.0);
    	}
   `;function Me(){const Le={alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1};if(!(d(R).getContext("webgl2",Le)instanceof WebGL2RenderingContext))throw new Error("vAmiga.net needs WebGL2 to run.");He(v,d(R).getContext("webgl2",Le),!0),d(v).disable(d(v).BLEND),d(v).disable(d(v).DEPTH_TEST),d(v).disable(d(v).SCISSOR_TEST),d(v).disable(d(v).STENCIL_TEST),d(v).clearColor(0,0,0,1),d(v).clear(d(v).COLOR_BUFFER_BIT),Ee=wt(z,ct),Pe=d(v).getUniformLocation(Ee,"u_lfSampler"),ue=d(v).getUniformLocation(Ee,"u_sfSampler"),Ve=wt(Ce,be),Ie=d(v).getUniformLocation(Ve,"u_lweight"),Ne=d(v).getUniformLocation(Ve,"u_sweight"),me=d(v).getUniformLocation(Ve,"sampler"),d(v).uniform1i(me,0);const ae=new Float32Array([-1,1,1,1,-1,-1,1,-1]);ge(ae),ht(Ve,"aVertexPosition");const Ge=new Float32Array([0,1,1,1,0,0,1,0]);Te=ge(Ge),ht(Ve,"aTextureCoord"),ne=pe(qr,zr),se=pe(qr,zr),ce=pe(qr,2*zr)}function tt(Le,ae,Ge,mt){const Kt=new Float32Array([Le,ae,Ge,ae,Le,mt,Ge,mt]);d(v).bindBuffer(d(v).ARRAY_BUFFER,Te),d(v).bufferSubData(d(v).ARRAY_BUFFER,0,Kt)}function gt(){const Le=d(R).clientWidth,ae=d(R).clientHeight;(d(R).width!==Le||d(R).height!==ae)&&(d(R).width=Le,d(R).height=ae)}function wt(Le,ae){const Ge=nt(d(v).VERTEX_SHADER,Le),mt=nt(d(v).FRAGMENT_SHADER,ae),Kt=d(v).createProgram();if(d(v).attachShader(Kt,Ge),d(v).attachShader(Kt,mt),d(v).linkProgram(Kt),!d(v).getProgramParameter(Kt,d(v).LINK_STATUS))throw new Error(`Shader link error: ${d(v).getProgramInfoLog(Kt)}`);return d(v).useProgram(Kt),Kt}function nt(Le,ae){const Ge=d(v).createShader(Le);if(!Ge)throw new Error("Failed to create shader.");if(d(v).shaderSource(Ge,ae),d(v).compileShader(Ge),!d(v).getShaderParameter(Ge,d(v).COMPILE_STATUS))throw new Error(`Shader compile error: ${d(v).getShaderInfoLog(Ge)}`);return Ge}function pe(Le,ae,Ge=0){const mt=d(v).createTexture();if(!mt)throw new Error("Failed to create texture.");const Kt=Ge==0?d(v).NEAREST:d(v).LINEAR;return d(v).bindTexture(d(v).TEXTURE_2D,mt),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_WRAP_S,d(v).CLAMP_TO_EDGE),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_WRAP_T,d(v).CLAMP_TO_EDGE),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_MIN_FILTER,Kt),d(v).texParameteri(d(v).TEXTURE_2D,d(v).TEXTURE_MAG_FILTER,Kt),d(v).texImage2D(d(v).TEXTURE_2D,0,d(v).RGBA,Le,ae,0,d(v).RGBA,d(v).UNSIGNED_BYTE,null),mt}function ge(Le){const ae=d(v).createBuffer();return d(v).bindBuffer(d(v).ARRAY_BUFFER,ae),d(v).bufferData(d(v).ARRAY_BUFFER,Le,d(v).STATIC_DRAW),ae}function ht(Le,ae){const Ge=d(v).getAttribLocation(Le,ae);d(v).enableVertexAttribArray(Ge),d(v).vertexAttribPointer(Ge,2,d(v).FLOAT,!1,0,0)}function Zt(){gt(),cn(),i().wakeUp()}function cn(){const Le=qr,ae=zr;if(i().poweredOff()){const Ge=u().noise();Y=oe,oe=!Y;const mt=new Uint8Array(l().HEAPU8.buffer,Ge,Le*ae*4);oe?(d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,ne),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Le,ae,d(v).RGBA,d(v).UNSIGNED_BYTE,mt)):(d(v).activeTexture(d(v).TEXTURE1),d(v).bindTexture(d(v).TEXTURE_2D,se),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Le,ae,d(v).RGBA,d(v).UNSIGNED_BYTE,mt))}else{const Ge=u().getEmulatorTexture();if(Y=Ge.prevLof,oe=Ge.currLof,Ge.frameNr!=Z+1&&Ge.frameNr==Z)return;Z=Ge.frameNr;const mt=new Uint8Array(l().HEAPU8.buffer,Ge.data,Le*ae*4);oe?(d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,ne),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Le,ae,d(v).RGBA,d(v).UNSIGNED_BYTE,mt)):(d(v).activeTexture(d(v).TEXTURE1),d(v).bindTexture(d(v).TEXTURE_2D,se),d(v).texSubImage2D(d(v).TEXTURE_2D,0,0,0,Le,ae,d(v).RGBA,d(v).UNSIGNED_BYTE,mt))}X(!0)}function Mn(){X()&&(ln(),fn(),X(!1))}function ln(){oe==Y?oe?(d(v).useProgram(Ee),d(v).uniform1i(Pe,0),d(v).uniform1i(ue,0)):(d(v).useProgram(Ee),d(v).uniform1i(Pe,1),d(v).uniform1i(ue,1)):(d(v).useProgram(Ee),d(v).uniform1i(Pe,1),d(v).uniform1i(ue,0));const Le=d(v).createFramebuffer();d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,ne),d(v).activeTexture(d(v).TEXTURE1),d(v).bindTexture(d(v).TEXTURE_2D,se),d(v).bindFramebuffer(d(v).FRAMEBUFFER,Le),d(v).viewport(0,0,qr,2*zr),d(v).framebufferTexture2D(d(v).FRAMEBUFFER,d(v).COLOR_ATTACHMENT0,d(v).TEXTURE_2D,ce,0),d(v).drawArrays(d(v).TRIANGLE_STRIP,0,4)}function fn(){if(d(v).bindFramebuffer(d(v).FRAMEBUFFER,null),d(v).viewport(0,0,d(v).canvas.width,d(v).canvas.height),d(v).activeTexture(d(v).TEXTURE0),d(v).bindTexture(d(v).TEXTURE_2D,ce),d(v).useProgram(Ve),d(v).uniform1f(Ie,1),d(v).uniform1f(Ne,1),oe!=Y){let Le=h().getNum(w.FLICKER_WEIGHT);if(Le>0&&_()){const ae=1-Le/100;d(v).uniform1f(Ie,ve%4>=2?1:ae),d(v).uniform1f(Ne,ve%4>=2?ae:1),ve+=1}}d(v).drawArrays(d(v).TRIANGLE_STRIP,0,4)}sr(()=>{console.log("GLCanvas::onMount()"),document.addEventListener("pointerlockchange",en,!1),Me(),tt(I(),G(),k(),U())}),qd(()=>{document.removeEventListener("pointerlockchange",en)});function jt(Le,ae){let Ge;switch(ae==1&&m()==tn.keyset1&&(Ge=b()[Le]),ae==1&&m()==tn.keyset2&&(Ge=T()[Le]),ae==2&&p()==tn.keyset1&&(Ge=b()[Le]),ae==2&&p()==tn.keyset2&&(Ge=T()[Le]),Ge){case void 0:return[];case l().PULL_UP:return ye=!0,[l().PULL_UP];case l().PULL_DOWN:return de=!0,[l().PULL_DOWN];case l().PULL_LEFT:return xe=!0,[l().PULL_LEFT];case l().PULL_RIGHT:return we=!0,[l().PULL_RIGHT];case l().PRESS_FIRE:return[l().PRESS_FIRE];case l().PRESS_FIRE2:return[l().PRESS_FIRE2];case l().PRESS_FIRE3:return[l().PRESS_FIRE3]}}function Kn(Le,ae){let Ge;switch(ae==1&&m()==tn.keyset1&&(Ge=b()[Le]),ae==1&&m()==tn.keyset2&&(Ge=T()[Le]),ae==2&&p()==tn.keyset1&&(Ge=b()[Le]),ae==2&&p()==tn.keyset2&&(Ge=T()[Le]),Ge){case void 0:return[];case l().PULL_UP:return ye=!1,de?[l().PULL_DOWN]:[l().RELEASE_Y];case l().PULL_DOWN:return de=!1,ye?[l().PULL_UP]:[l().RELEASE_Y];case l().PULL_LEFT:return xe=!1,we?[l().PULL_RIGHT]:[l().RELEASE_X];case l().PULL_RIGHT:return we=!1,xe?[l().PULL_LEFT]:[l().RELEASE_X];case l().PRESS_FIRE:return[l().RELEASE_FIRE];case l().PRESS_FIRE2:return[l().RELEASE_FIRE2];case l().PRESS_FIRE3:return[l().RELEASE_FIRE3]}}function An(Le){if(Le.repeat)return;let ae=jt(Le.code,1);if(ae?.length){ae?.forEach(mt=>A().trigger(mt));return}if(ae=jt(Le.code,2),ae?.length){ae?.forEach(mt=>y().trigger(mt));return}const Ge=Rl[Le.code];Ge!==void 0&&(E().pressKey(Ge),Le.preventDefault(),Le.stopPropagation())}function Qn(Le){let ae=Kn(Le.code,1);if(ae?.length){ae?.forEach(mt=>A().trigger(mt));return}if(ae=Kn(Le.code,2),ae?.length){ae?.forEach(mt=>y().trigger(mt));return}const Ge=Rl[Le.code];Ge!==void 0&&E().releaseKey(Ge)}function en(){document.pointerLockElement===d(R)?document.addEventListener("mousemove",Qt,!1):document.removeEventListener("mousemove",Qt)}async function dn(){J()||await d(R).requestPointerLock()}function Tn(){J()&&document.exitPointerLock()}function vn(){return m()==tn.mouse?x():p()==tn.mouse?M():null}function Qt(Le){const ae=Le.movementX/2,Ge=Le.movementY/2;x().detectShakeRel(ae,Ge),vn()?.setDxDy(ae,Ge)}let Be=Qe(()=>h().getNum(w.RENDER_MODE)==Da.smooth?"image-rendering: auto":"image-rendering: pixelated");xi(()=>{d(v)&&tt(I(),G(),k(),U())}),xi(()=>{P()&&h().getBool(w.SHAKING)&&Tn()});var Ht=fm();Ht.__keydown=An,Ht.__keyup=Qn,Ht.__mousedown=[cm,J,dn,vn,l],Ht.__mouseup=[lm,vn,l],Ut(Ht,Le=>He(R,Le),()=>d(R)),lt(()=>Ns(Ht,d(Be))),ie(a,Ht);var In=ot({update:Zt,render:Mn,get tx1(){return I()},set tx1(Le){I(Le)},get tx2(){return k()},set tx2(Le){k(Le)},get ty1(){return G()},set ty1(Le){G(Le)},get ty2(){return U()},set ty2(Le){U(Le)},get needsDisplay(){return X()},set needsDisplay(Le){X(Le)}});return s(),In}on(["keydown","keyup","mousedown","mouseup"]);var vm=Re('<div class="relative flex h-full grow flex-col justify-center"><div class="flex h-full items-center justify-center"><div><!></div></div></div>');function gm(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(zo,"$canvasWidth",n),u=()=>O(qo,"$canvasHeight",n),l=()=>O(pi,"$aspectWidth",n),h=()=>O(_i,"$aspectHeight",n),_=()=>O(On,"$amiga",n),m=()=>O(rn,"$wasm",n),b=()=>O(sa,"$poweredOn",n),T=()=>O(Yo,"$gamepadManager",n),p=()=>O(Ta,"$layout",n),A=()=>O(an,"$config",n);let y=Ot(void 0),E=Ot(0),x=Ot(0),M=Ot(0),P=Ot(0),R=Ot(0),v=Ot(0),I=Ot(0),G=Ot(0),k=he(r,"textureRect",23,()=>new um),U=new Xr(0),X=new Xr(0),oe=Ot(0),Y=Ot(0);sr(()=>{console.log("Emulator::onMount()"),k().zoomIn()});function Z(ne){if(ne=="full")U.set(i()),X.set(u());else if(ne=="aspect")U.set(l()),X.set(h());else if(ne=="fit"){const se=k().x1.current*k().texW,ce=k().y1.current*k().texH,Ee=k().x2.current*k().texW,Ie=k().y2.current*k().texH;U.set(Ee-se+2),X.set(2*(Ie-ce+2))}}function J(ne,se){for(;;){let ce=_().readMessage();if(ce.type==m().Msg.NONE)break;m().processMsg(ce)}b()&&(ye(),d(y)?.render())}function ye(ne){let se=k().animates(),ce=U.animates()||X.animates();T().pollState(),se&&(k().move(),He(R,k().x1.current,!0),He(v,k().y1.current,!0),He(I,k().x2.current,!0),He(G,k().y2.current,!0),He(E,k().x1.current*k().texW),He(x,k().y1.current*k().texH),He(M,k().x2.current*k().texW),He(P,k().y2.current*k().texH),p()=="fit"&&(He(oe,U.current=U.target=d(M)-d(E)+2,!0),He(Y,X.current=X.target=2*(d(P)-d(x)+2),!0)),d(y)&&(d(y).needsDisplay=!0)),ce&&(U.move(),X.move(),He(oe,U.current,!0),He(Y,X.current,!0),d(y)&&(d(y).needsDisplay=!0)),d(y)?.update()}let de=Qe(()=>A()?.getBool(w.CANVAS_BORDER)?"border-2 border-primary border-opacity-100":"");xi(()=>{const ne=p();if(ne==="full")U.set(i()),X.set(u());else if(ne==="aspect")U.set(l()),X.set(h());else if(ne==="fit"){const se=k().x1.current*k().texW,ce=k().y1.current*k().texH,Ee=k().x2.current*k().texW,Ie=k().y2.current*k().texH;U.set(Ee-se+2),X.set(2*(Ie-ce+2))}});var xe=Et(),we=ze(xe);{var ve=ne=>{var se=vm(),ce=W(se),Ee=W(ce),Ie=W(Ee);Ut(dm(Ie,{get x1(){return d(E)},get x2(){return d(M)},get y1(){return d(x)},get y2(){return d(P)},get tx1(){return d(R)},get tx2(){return d(I)},get ty1(){return d(v)},get ty2(){return d(G)}}),Ne=>He(y,Ne,!0),()=>d(y)),j(Ee),j(ce),j(se),lt(()=>{We(Ee,1,_r(d(de))),Ns(Ee,`height:${d(Y)??""}px; width:${d(oe)??""}px`)}),xt(3,se,()=>Pt),ie(ne,se)};Xe(we,ne=>{b()&&ne(ve)})}ie(a,xe);var Te=ot({updateRect:Z,doAnimationFrame:J,get textureRect(){return k()},set textureRect(ne){k(ne)}});return s(),Te}var hm=Re("<button> </button>");function Sa(a,r){let n=he(r,"name",3,""),s=he(r,"active",3,""),i=he(r,"style",3,"text-3xl");var u=hm();u.__click=function(...h){r.onclick?.apply(this,h)};var l=W(u,!0);j(u),lt(()=>{We(u,1,`btn btn-ghost p-0 font-thin ${s()===n()?"btn-active":""} ${i()??""}`),At(l,n())}),ie(a,u)}on(["click"]);var mm=Re('<div class="px-0 py-0.5"><div class="w-full flex"><div class="text-xl text-base-content"> </div></div> <!></div>');function Mt(a,r){let n=he(r,"name",3,"");var s=mm(),i=W(s),u=W(i),l=W(u,!0);j(u),j(i);var h=Q(i,2);zn(h,()=>r.children??En),j(s),lt(()=>At(l,n())),ie(a,s)}var pm=Xt('<path d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path>');function _m(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 14 16"},()=>n,{children:(s,i)=>{var u=pm();ie(s,u)},$$slots:{default:!0}}))}var ym=Xt('<path d="M254.28 17.313c-81.048 0-146.624 65.484-146.624 146.406V236h49.594v-69.094c0-53.658 43.47-97.187 97.03-97.187 53.563 0 97.032 44.744 97.032 97.186V236h49.594v-72.28c0-78.856-65.717-146.407-146.625-146.407zM85.157 254.688c-14.61 22.827-22.844 49.148-22.844 76.78 0 88.358 84.97 161.5 191.97 161.5 106.998 0 191.968-73.142 191.968-161.5 0-27.635-8.26-53.95-22.875-76.78H85.155zM254 278.625c22.34 0 40.875 17.94 40.875 40.28 0 16.756-10.6 31.23-25.125 37.376l32.72 98.126h-96.376l32.125-98.125c-14.526-6.145-24.532-20.62-24.532-37.374 0-22.338 17.972-40.28 40.312-40.28z"></path>');function bm(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 512 512"},()=>n,{children:(s,i)=>{var u=ym();ie(s,u)},$$slots:{default:!0}}))}var wm=(a,r)=>r(!0),Em=(a,r)=>r(a),Sm=Re('<ul tabindex="0" class="dropdown-content menu bg-base-100 text-base-content mt-1 w-full"><input type="range" class="range range-accent h-12 rounded-none px-4"/></ul>'),Am=Re('<div class="dropdown dropdown-bottom"><button type="button" tabindex="0"><!></button> <!></div>');function Tm(a,r){it(r,!0);let n=he(r,"tag",3,0),s=he(r,"value",7,0),i=he(r,"locked",3,!1),u=he(r,"min",3,0),l=he(r,"max",3,0),h=he(r,"open",7,!0),_=he(r,"select",3,()=>{});function m(E){E.preventDefault(),s(Number(E.target.value)),console.log("tag",n(),"value",s()),_()(s())}var b=Am(),T=W(b);T.__click=[wm,h];var p=W(T);zn(p,()=>r.children??En),j(T);var A=Q(T,2);{var y=E=>{var x=Sm(),M=W(x);fv(M),M.__input=[Em,m],j(x),lt(()=>{$t(M,"min",u()),$t(M,"max",l()),dv(M,s())}),ie(E,x)};Xe(A,E=>{h()&&E(y)})}j(b),lt(()=>We(T,1,_r(i()?"pointer-events-none":""))),ie(a,b),ot()}on(["click","input"]);var Rm=Re('<div class="w-4">&#10003</div>'),xm=Re('<div class="w-4"></div>');function Pm(a,r){var n=Et(),s=ze(n);{var i=u=>{var l=Et(),h=ze(l);{var _=b=>{var T=Rm();ie(b,T)},m=b=>{var T=xm();ie(b,T)};Xe(h,b=>{r.visible?b(_):b(m,!1)})}ie(u,l)};Xe(s,u=>{u(i)})}ie(a,n)}var Dm=Re('<li class="divider"></li>'),km=(a,r,n)=>r(a,d(n).tag),Om=Re("<li><button><!> </button></li>"),Cm=Re('<div><label tabindex="0"><!></label>  <ul tabindex="0"><!></ul></div>');function nu(a,r){it(r,!0);let n=he(r,"tag",3,0),s=he(r,"items",19,()=>[]),i=he(r,"isEnabled",3,!0),u=he(r,"checkmarks",3,!1),l=he(r,"dropdownStyle",3,""),h=he(r,"listStyle",3,""),_=he(r,"select",3,()=>{});const m=(E,x)=>{E.preventDefault(),document.activeElement&&document.activeElement.blur(),_()(x)};var b=Cm(),T=W(b),p=W(T);zn(p,()=>r.children??En),j(T);var A=Q(T,2),y=W(A);Di(y,s,E=>{var x=Et(),M=ze(x);ta(M,17,s,ea,(P,R)=>{var v=Et(),I=ze(v);{var G=U=>{var X=Dm();ie(U,X)},k=(U,X)=>{{var oe=Y=>{var Z=Om(),J=W(Z);J.__click=[km,m,R];var ye=W(J);{var de=we=>{Pm(we,{get visible(){return d(R).isSelected}})};Xe(ye,we=>{u()&&we(de)})}var xe=Q(ye);j(J),j(Z),lt(we=>{$t(Z,"id",we),J.disabled=!d(R).isEnabled,We(J,1,_r(d(R).isEnabled?"":"hover:bg-base-100 opacity-40")),At(xe,` ${d(R).title??""}`)},[()=>n().toString()]),ie(Y,Z)};Xe(U,Y=>{d(R).isHidden||Y(oe)},X)}};Xe(I,U=>{d(R)instanceof Jd?U(G):U(k,!1)})}ie(P,v)}),ie(E,x)}),j(A),j(b),lt(()=>{We(b,1,`dropdown ${l()??""}`),We(T,1,_r(i()?"":"pointer-events-none")),We(A,1,`dropdown-content menu bg-base-100 ${h()??""}`)}),ie(a,b),ot()}on(["click"]);function Kf(a,r){let n=he(r,"tag",3,0),s=he(r,"items",19,()=>[]),i=he(r,"isEnabled",3,!0),u=he(r,"dropdownStyle",3,""),l=he(r,"listStyle",3,""),h=he(r,"selectedTag",3,0),_=he(r,"select",3,()=>{}),m=Qe(()=>{let p=s(),A=h();for(const y of p)y.isSelected=y.tag==A;return p});var b=Et(),T=ze(b);Di(T,s,p=>{var A=Et(),y=ze(A);Di(y,h,E=>{nu(E,{get tag(){return n()},get items(){return d(m)},get isEnabled(){return i()},checkmarks:!0,get dropdownStyle(){return u()},get listStyle(){return l()},select:_(),children:(x,M)=>{var P=Et(),R=ze(P);zn(R,()=>r.children??En),ie(x,P)},$$slots:{default:!0}})}),ie(p,A)}),ie(a,b)}var Mm=Xt('<path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"></path>');function Im(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 448 512"},()=>n,{children:(s,i)=>{var u=Mm();ie(s,u)},$$slots:{default:!0}}))}var $m=Re('<div class="flex w-full items-center justify-between"><div class="flex grow justify-center"><!></div> <div class="h-4 w-4"><!></div></div>');function Nm(a,r){var n=$m(),s=W(n),i=W(s);zn(i,()=>r.children??En),j(s);var u=Q(s,2),l=W(u);Im(l,{}),j(u),j(n),ie(a,n)}const Lm=a=>{console.log("infoAction",a),a.preventDefault()};var Um=Re("<button> </button>"),Fm=Re('<button class="btn btn-primary w-[18rem] rounded-none border-0 text-xl font-normal"><!></button>'),Bm=Re("<button> </button>"),Km=Re('<div class="px-0 py-0.5"><div class="flex w-full items-center justify-between space-x-1 text-xl"><div class="bg-primary flex h-12 w-full grow overflow-hidden border-0"><div><div class="mx-2 flex grow overflow-hidden border-0 whitespace-nowrap"> </div></div></div> <div><button><!></button></div> <div><button><!></button></div> <div class="bg-primary h-12 border-0"><!></div></div></div>');function je(a,r){it(r,!0);let n=he(r,"name",3,""),s=he(r,"min",3,0),i=he(r,"max",3,0),u=he(r,"locked",3,!1),l=he(r,"tag",3,0),h=he(r,"selectedTag",7,0),_=he(r,"items",19,()=>[]),m=he(r,"select",3,()=>{}),b=he(r,"info",3,void 0);const T=Qe(()=>u()?"opacity-50":""),p=Qe(()=>{for(const J of _())if(J.tag==h())return J.title;return"???"});var A=Km(),y=W(A),E=W(y),x=W(E),M=W(x),P=W(M,!0);j(M),j(x),j(E);var R=Q(E,2),v=W(R),I=W(v);bm(I,{}),j(v),j(R);var G=Q(R,2),k=W(G);k.__click=[Lm];var U=W(k);_m(U,{}),j(k),j(G);var X=Q(G,2),oe=W(X);{var Y=J=>{const ye=Qe(()=>!u());Kf(J,{get isEnabled(){return d(ye)},get items(){return _()},select:de=>{h(de),m()(h())},get tag(){return l()},get selectedTag(){return h()},listStyle:"w-[18rem] mt-2 text-xl bg-accent text-accent-content",children:(de,xe)=>{var we=Et(),ve=ze(we);{var Te=se=>{var ce=Um(),Ee=W(ce,!0);j(ce),lt(()=>{We(ce,1,`btn btn-primary ${d(T)??""} w-[18rem] rounded-none border-0 text-xl font-normal`),At(Ee,d(p))}),ie(se,ce)},ne=se=>{var ce=Fm(),Ee=W(ce);Nm(Ee,{children:(Ie,Ne)=>{xs();var ue=Yd();lt(()=>At(ue,d(p))),ie(Ie,ue)}}),j(ce),ie(se,ce)};Xe(ve,se=>{u()?se(Te):se(ne,!1)})}ie(de,we)},$$slots:{default:!0}})},Z=J=>{Tm(J,{get min(){return s()},get max(){return i()},get locked(){return u()},get tag(){return l()},select:m(),children:(ye,de)=>{var xe=Bm(),we=W(xe,!0);j(xe),lt(()=>{We(xe,1,`btn btn-primary ${d(T)??""} w-[18rem] rounded-none border-0 text-xl font-normal`),At(we,h())}),ie(ye,xe)},$$slots:{default:!0}})};Xe(oe,J=>{s()===i()?J(Y):J(Z,!1)})}j(X),j(y),j(A),lt(()=>{We(x,1,`w-full border-0 text-xl ${d(T)??""} text-primary-content flex items-center justify-between`),At(P,n()),We(R,1,`bg-primary flex h-12 w-20 items-center justify-center border-0 ${u()?"":"hidden"}`),We(v,1,`text-primary-content h-7 w-7 ${d(T)??""}`),We(G,1,`bg-primary flex h-12 w-20 items-center justify-center border-0 ${b()?"":"hidden"}`),We(k,1,`text-primary-content h-7 w-7 ${d(T)??""}`)}),ie(a,A),ot()}on(["click"]);var Vm=Re("<!> <!>",1),Hm=Re("<div><!> <!> <!></div>");function Gm(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(an,"$config",n);Bt();var u=Hm(),l=W(u);Mt(l,{name:"Warp mode",children:(m,b)=>{const T=_e(()=>[new re("During Disk Accesses",0),new re("Never",1),new re("Always",2)]),p=_e(()=>i().getNum(w.WARP_MODE));je(m,{get items(){return d(T)},name:"Enable warp mode",select:A=>i().setNum(w.WARP_MODE,A),get selectedTag(){return d(p)}})},$$slots:{default:!0}});var h=Q(l,2);Mt(h,{name:"Appearance",children:(m,b)=>{var T=Vm(),p=ze(T);const A=_e(()=>[new re("Default",Ct.default),new re("Light",Ct.light),new re("Dark",Ct.dark),new re("Coffee",Ct.coffee),new re("Cupcake",Ct.cupcake),new re("Forest",Ct.forest),new re("Aqua",Ct.aqua),new re("Garden",Ct.garden),new re("Pastel",Ct.pastel)]),y=_e(()=>i().getNum(w.THEME));je(p,{get items(){return d(A)},name:"Color theme",select:P=>i().setNum(w.THEME,P),get selectedTag(){return d(y)}});var E=Q(p,2);const x=_e(()=>[new re("Yes",1),new re("No",0)]),M=_e(()=>i().getNum(w.CANVAS_BORDER));je(E,{get items(){return d(x)},name:"Draw Canvas Border",select:P=>i().setNum(w.CANVAS_BORDER,P),get selectedTag(){return d(M)}}),ie(m,T)},$$slots:{default:!0}});var _=Q(h,2);Mt(_,{name:"Peripherals",children:(m,b)=>{const T=_e(()=>[new re("Yes",1),new re("No",0)]),p=_e(()=>i().getNum(w.SHAKING));je(m,{get items(){return d(T)},name:"Release Mouse by Shaking",select:A=>i().setNum(w.SHAKING,A),get selectedTag(){return d(p)}})},$$slots:{default:!0}}),j(u),xt(1,u,()=>Pt),ie(a,u),ot(),s()}var jm=Re("<!> <!>",1),Wm=Re("<!> <!> <!>",1),zm=Re("<!> <!> <!> <!> <!> <!> <!> <!>",1),qm=Re("<!> <!> <!> <!>",1),Ym=Re("<!> <!> <!> <!>",1),Xm=Re("<div> </div> <!> <!> <!> <!> <!>",1),Zm=Re("<div><!></div>");function Qm(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Xo,"$MsgConfig",n),u=()=>O(rn,"$wasm",n),l=()=>O(an,"$config",n),h=()=>O(sa,"$poweredOn",n);Bt();var _=Zm(),m=W(_);Di(m,i,b=>{var T=Xm(),p=ze(T),A=W(p);j(p);var y=Q(p,2);Mt(y,{name:"CPU",children:(R,v)=>{var I=jm(),G=ze(I);const k=_e(()=>[new re("68000",u().CPU_68000),new re("68010",u().CPU_68010),new re("68020",u().CPU_68EC020)]),U=_e(()=>l().getNum(w.CPU_REVISION));je(G,{name:"CPU",get items(){return d(k)},get selectedTag(){return d(U)},select:Z=>l().setNum(w.CPU_REVISION,Z)});var X=Q(G,2);const oe=_e(()=>[new re("7 Mhz",0),new re("14 Mhz",2),new re("21 Mhz",3),new re("28 Mhz",4),new re("35 Mhz",5),new re("42 Mhz",6),new re("84 Mhz",12)]),Y=_e(()=>l().getNum(w.CPU_SPEED));je(X,{name:"Frequency",get items(){return d(oe)},get selectedTag(){return d(Y)},select:Z=>l().setNum(w.CPU_SPEED,Z)}),ie(R,I)},$$slots:{default:!0}});var E=Q(y,2);Mt(E,{name:"Custom Chipset",children:(R,v)=>{var I=Wm(),G=ze(I);const k=_e(()=>[new re("Early OCS",u().AGNUS_OCS_OLD),new re("OCS",u().AGNUS_OCS),new re("ECS (1MB)",u().AGNUS_ECS_1MB),new re("ECS (2MB)",u().AGNUS_ECS_2MB)]),U=_e(()=>l().getNum(w.AGNUS_REVISION));je(G,{name:"Agnus Revision",get items(){return d(k)},get selectedTag(){return d(U)},select:de=>l().setNum(w.AGNUS_REVISION,de),get locked(){return h()}});var X=Q(G,2);const oe=_e(()=>[new re("OCS",u().DENISE_OCS),new re("ECS",u().DENISE_ECS)]),Y=_e(()=>l().getNum(w.DENISE_REVISION));je(X,{name:"Denise Revision",get items(){return d(oe)},get selectedTag(){return d(Y)},select:de=>l().setNum(w.DENISE_REVISION,de),get locked(){return h()}});var Z=Q(X,2);const J=_e(()=>[new re("NONE",u().RTC_NONE),new re("OKI",u().RTC_OKI),new re("RICOH",u().RTC_RICOH)]),ye=_e(()=>l().getNum(w.RTC_MODEL));je(Z,{name:"Real-time Clock",get items(){return d(J)},get selectedTag(){return d(ye)},select:de=>l().setNum(w.RTC_MODEL,de),get locked(){return h()}}),ie(R,I)},$$slots:{default:!0}});var x=Q(E,2);Mt(x,{name:"Memory",children:(R,v)=>{var I=zm(),G=ze(I);const k=_e(()=>[new re("256 KB",256),new re("512 KB",512),new re("1024 KB",1024),new re("2048 KB",2048)]),U=_e(()=>l().getNum(w.CHIP_RAM));je(G,{name:"Chip RAM",get items(){return d(k)},get selectedTag(){return d(U)},select:z=>l().setNum(w.CHIP_RAM,z),get locked(){return h()}});var X=Q(G,2);const oe=_e(()=>[new re("0 KB",0),new re("512 KB",512),new re("1 MB",1024),new re("1.5 MB",1536)]),Y=_e(()=>l().getNum(w.SLOW_RAM));je(X,{name:"Slow RAM",get items(){return d(oe)},get selectedTag(){return d(Y)},select:z=>l().setNum(w.SLOW_RAM,z),get locked(){return h()}});var Z=Q(X,2);const J=_e(()=>[new re("0 KB",0),new re("64 KB",64),new re("128 KB",128),new re("256 KB",256),new re("512 KB",512),new re("1 MB",1024),new re("2 MB",2048),new re("4 MB",4096),new re("8 MB",8192)]),ye=_e(()=>l().getNum(w.FAST_RAM));je(Z,{name:"Fast RAM",get items(){return d(J)},get selectedTag(){return d(ye)},select:z=>l().setNum(w.FAST_RAM,z),get locked(){return h()}});var de=Q(Z,2);const xe=_e(()=>[new re("Amiga 500",u().BANK_MAP_A500),new re("Amiga 1000",u().BANK_MAP_A1000),new re("Amiga 2000A",u().BANK_MAP_A2000A),new re("Amiga 2000B",u().BANK_MAP_A2000B)]),we=_e(()=>l().getNum(w.BANK_MAP));je(de,{name:"Memory Layout",get items(){return d(xe)},get selectedTag(){return d(we)},select:z=>l().setNum(w.BANK_MAP,z),get locked(){return h()}});var ve=Q(de,2);const Te=_e(()=>[new re("All Zeroes",u().RAM_INIT_ALL_ZEROES),new re("All Ones",u().RAM_INIT_ALL_ONES),new re("Random",u().RAM_INIT_RANDOMIZED)]),ne=_e(()=>l().getNum(w.INIT_PATTERN));je(ve,{name:"Memory Startup Pattern",get items(){return d(Te)},get selectedTag(){return d(ne)},select:z=>l().setNum(w.INIT_PATTERN,z),get locked(){return h()}});var se=Q(ve,2);const ce=_e(()=>[new re("Floating",u().UNMAPPED_FLOATING),new re("All Zeroes",u().UNMAPPED_ALL_ZEROES),new re("All Ones",u().UNMAPPED_ALL_ONES)]),Ee=_e(()=>l().getNum(w.UNMAPPED));je(se,{name:"Unmapped Memory Area",get items(){return d(ce)},get selectedTag(){return d(Ee)},select:z=>l().setNum(w.UNMAPPED,z),get locked(){return h()}});var Ie=Q(se,2);const Ne=_e(()=>[new re("Yes",1),new re("No",0)]),ue=_e(()=>l().getNum(w.SLOW_RAM_MIRROR));je(Ie,{name:"Emulate Slow RAM Mirror",get items(){return d(Ne)},get selectedTag(){return d(ue)},select:z=>l().setNum(w.SLOW_RAM_MIRROR,z)});var Pe=Q(Ie,2);const Ve=_e(()=>[new re("Yes",1),new re("No",0)]),me=_e(()=>l().getNum(w.SLOW_RAM_DELAY));je(Pe,{name:"Emulate Slow RAM Bus Delays",get items(){return d(Ve)},get selectedTag(){return d(me)},select:z=>l().setNum(w.SLOW_RAM_DELAY,z)}),ie(R,I)},$$slots:{default:!0}});var M=Q(x,2);Mt(M,{name:"Floppy Drives",children:(R,v)=>{var I=qm(),G=ze(I);const k=_e(()=>[new re("Internal Drive",1)]),U=_e(()=>l().getNum(w.DF0));je(G,{name:"DF0",get items(){return d(k)},tag:0,get selectedTag(){return d(U)},select:ne=>l().setNum(w.DF0,ne),get locked(){return h()}});var X=Q(G,2);const oe=_e(()=>[new re("None",0),new re("A1010",1)]),Y=_e(()=>l().getNum(w.DF1));je(X,{name:"DF1",get items(){return d(oe)},tag:1,get selectedTag(){return d(Y)},select:ne=>l().setNum(w.DF1,ne),get locked(){return h()}});var Z=Q(X,2);const J=_e(()=>[new re("None",0),new re("A1010",1)]),ye=_e(()=>l().getNum(w.DF2)),de=_e(()=>h()||!l().getBool(w.DF1));je(Z,{name:"DF2",get items(){return d(J)},tag:2,get selectedTag(){return d(ye)},select:ne=>l().setNum(w.DF2,ne),get locked(){return d(de)}});var xe=Q(Z,2);const we=_e(()=>[new re("None",0),new re("A1010",1)]),ve=_e(()=>l().getNum(w.DF3)),Te=_e(()=>h()||!l().getBool(w.DF2));je(xe,{name:"DF3",get items(){return d(we)},tag:3,get selectedTag(){return d(ve)},select:ne=>l().setNum(w.DF3,ne),get locked(){return d(Te)}}),ie(R,I)},$$slots:{default:!0}});var P=Q(M,2);Mt(P,{name:"Hard Drives",children:(R,v)=>{var I=Ym(),G=ze(I);const k=_e(()=>[new re("None",0),new re("Zorro Board",1)]),U=_e(()=>l().getNum(w.HD0));je(G,{name:"HD0",get items(){return d(k)},tag:0,get selectedTag(){return d(U)},select:ve=>l().setNum(w.HD0,ve),get locked(){return h()}});var X=Q(G,2);const oe=_e(()=>[new re("None",0),new re("Zorro Board",1)]),Y=_e(()=>l().getNum(w.HD1));je(X,{name:"HD1",get items(){return d(oe)},tag:1,get selectedTag(){return d(Y)},select:ve=>l().setNum(w.HD1,ve),get locked(){return h()}});var Z=Q(X,2);const J=_e(()=>[new re("None",0),new re("Zorro Board",1)]),ye=_e(()=>l().getNum(w.HD2));je(Z,{name:"HD2",get items(){return d(J)},tag:2,get selectedTag(){return d(ye)},select:ve=>l().setNum(w.HD2,ve),get locked(){return h()}});var de=Q(Z,2);const xe=_e(()=>[new re("None",0),new re("Zorro Board",1)]),we=_e(()=>l().getNum(w.HD3));je(de,{name:"HD3",get items(){return d(xe)},tag:3,get selectedTag(){return d(we)},select:ve=>l().setNum(w.HD3,ve),get locked(){return h()}}),ie(R,I)},$$slots:{default:!0}}),lt(()=>At(A,`Huhu ${i()??""}`)),ie(b,T)}),j(_),xt(1,_,()=>Pt),ie(a,_),ot(),s()}var Jm=Re("<!> <!>",1),ep=Re("<!> <!> <!>",1),tp=Re("<div><!> <!> <!> <!> <!> <!></div>");function np(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(an,"$config",n);Bt();var u=tp(),l=W(u);Mt(l,{name:"Blitter",children:(p,A)=>{const y=_e(()=>[new re("Low",0),new re("Medium",1),new re("High",2)]),E=_e(()=>i().getNum(w.BLITTER_ACCURACY));je(p,{name:"Accuracy",get items(){return d(y)},select:x=>i().setNum(w.BLITTER_ACCURACY,x),get selectedTag(){return d(E)}})},$$slots:{default:!0}});var h=Q(l,2);Mt(h,{name:"Chipset Features",children:(p,A)=>{var y=Jm(),E=ze(y);const x=_e(()=>[new re("Yes",1),new re("No",0)]),M=_e(()=>i().getNum(w.TODBUG));je(E,{name:"Emulate TOD Bug",get items(){return d(x)},select:I=>i().setNum(w.TODBUG,I),get selectedTag(){return d(M)}});var P=Q(E,2);const R=_e(()=>[new re("Yes",1),new re("No",0)]),v=_e(()=>i().getNum(w.PTR_DROPS));je(P,{name:"Emulate Dropped Register Writes",get items(){return d(R)},select:I=>i().setNum(w.PTR_DROPS,I),get selectedTag(){return d(v)}}),ie(p,y)},$$slots:{default:!0}});var _=Q(h,2);Mt(_,{name:"Timing",children:(p,A)=>{const y=_e(()=>[new re("Yes",1),new re("No",0)]),E=_e(()=>i().getNum(w.ECLOCK_SYNCING));je(p,{name:"Sync CIA Accesses With E-Clock",get items(){return d(y)},select:x=>i().setNum(w.ECLOCK_SYNCING,x),get selectedTag(){return d(E)}})},$$slots:{default:!0}});var m=Q(_,2);Mt(m,{name:"Floppy Drives",children:(p,A)=>{const y=_e(()=>[new re("Original",1),new re("Accelerated (2 x)",2),new re("Accelerated (4 x)",4),new re("Accelerated (8 x)",8),new re("Infinite",-1)]),E=_e(()=>i().getNum(w.DRIVE_SPEED));je(p,{name:"Drive Speed",get items(){return d(y)},select:x=>i().setNum(w.DRIVE_SPEED,x),get selectedTag(){return d(E)}})},$$slots:{default:!0}});var b=Q(m,2);Mt(b,{name:"Sprites",children:(p,A)=>{var y=ep(),E=ze(y);const x=_e(()=>[new re("Yes",1),new re("No",0)]),M=_e(()=>i().getNum(w.CLX_SPR_SPR));je(E,{name:"Sprite-Sprite Collision Detection",get items(){return d(x)},select:U=>i().setNum(w.CLX_SPR_SPR,U),get selectedTag(){return d(M)}});var P=Q(E,2);const R=_e(()=>[new re("Yes",1),new re("No",0)]),v=_e(()=>i().getNum(w.CLX_SPR_PLF));je(P,{name:"Sprite-Playfield Collision Detection",get items(){return d(R)},select:U=>i().setNum(w.CLX_SPR_PLF,U),get selectedTag(){return d(v)}});var I=Q(P,2);const G=_e(()=>[new re("Yes",1),new re("No",0)]),k=_e(()=>i().getNum(w.CLX_PLF_PLF));je(I,{name:"Playfield-Playfield Collision Detection",get items(){return d(G)},select:U=>i().setNum(w.CLX_PLF_PLF,U),get selectedTag(){return d(k)}}),ie(p,y)},$$slots:{default:!0}});var T=Q(b,2);Mt(T,{name:"Keyboard",children:(p,A)=>{const y=_e(()=>[new re("Yes",1),new re("No",0)]),E=_e(()=>i().getNum(w.ACCURATE_KEYBOARD));je(p,{name:"Transmit Keycodes Bit by Bit",get items(){return d(y)},select:x=>i().setNum(w.ACCURATE_KEYBOARD,x),get selectedTag(){return d(E)},tag:1})},$$slots:{default:!0}}),j(u),xt(1,u,()=>Pt),ie(a,u),ot(),s()}var rp=Re("<!> <!> <!> <!>",1),ap=Re("<div><!> <!> <!></div>");function ip(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(an,"$config",n),u=()=>O(rn,"$wasm",n);function l(x){i().set(w.RENDER_MODE,x),update()}function h(x){i().set(w.PALETTE,x),update()}function _(x){i().set(w.BRIGHTNESS,x),update()}function m(x){i().set(w.CONTRAST,x),update()}function b(x){i().set(w.SATURATION,x),update()}function T(x){i().set(w.FLICKER_WEIGHT,x),update()}Bt();var p=ap(),A=W(p);Mt(A,{name:"WebGL",children:(x,M)=>{const P=_e(()=>[new re("Smooth",Da.smooth),new re("Pixelated",Da.pixelated)]),R=_e(()=>i().getNum(w.RENDER_MODE));je(x,{name:"Render Mode",get items(){return d(P)},get selectedTag(){return d(R)},select:l})},$$slots:{default:!0}});var y=Q(A,2);Mt(y,{name:"Colors",children:(x,M)=>{var P=rp(),R=ze(P);const v=_e(()=>[new re("Color",u().PALETTE_COLOR),new re("Black and White",u().PALETTE_BLACK_WHITE),new re("Paper White",u().PALETTE_PAPER_WHITE),new re("Green",u().PALETTE_GREEN),new re("Amber",u().PALETTE_AMBER),new re("Sepia",u().PALETTE_SEPIA)]),I=_e(()=>i().getNum(w.PALETTE));je(R,{name:"Palette",get items(){return d(v)},get selectedTag(){return d(I)},select:h});var G=Q(R,2);const k=_e(()=>i().getNum(w.BRIGHTNESS));je(G,{name:"Brightness",min:0,max:100,get tag(){return u().OPT_BRIGHTNESS},get selectedTag(){return d(k)},select:_});var U=Q(G,2);const X=_e(()=>i().getNum(w.CONTRAST));je(U,{name:"Contrast",min:0,max:100,get tag(){return u().OPT_CONTRAST},get selectedTag(){return d(X)},select:m});var oe=Q(U,2);const Y=_e(()=>i().getNum(w.SATURATION));je(oe,{name:"Saturation",min:0,max:100,get tag(){return u().OPT_SATURATION},get selectedTag(){return d(Y)},select:b}),ie(x,P)},$$slots:{default:!0}});var E=Q(y,2);Mt(E,{name:"Interlace",children:(x,M)=>{const P=_e(()=>i().getNum(w.FLICKER_WEIGHT));je(x,{name:"Flicker Weight",min:0,max:100,tag:1e3,get selectedTag(){return d(P)},select:T})},$$slots:{default:!0}}),j(p),xt(1,p,()=>Pt),ie(a,p),ot(),s()}var op=Re("<!> <!>",1),sp=Re("<!> <!> <!> <!> <!> <!>",1),up=Re("<!> <!> <!> <!>",1),cp=Re("<div><!> <!> <!></div>");function lp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(an,"$config",n),u=()=>O(rn,"$wasm",n);Bt();var l=cp(),h=W(l);Mt(h,{name:"Sound Synthesis",children:(b,T)=>{var p=op(),A=ze(p);const y=_e(()=>[new re("None",0),new re("Nearest",1),new re("Linear",2)]),E=_e(()=>i().getNum(w.SAMPLING_METHOD));je(A,{name:"Interpolation Method",get items(){return d(y)},select:R=>i().setNum(w.SAMPLING_METHOD,R),get selectedTag(){return d(E)}});var x=Q(A,2);const M=_e(()=>[new re("None",0),new re("A500",1),new re("A1000",2),new re("A1200",3),new re("Legacy Filter",4),new re("Low-pass only",5),new re("LED filter only",6),new re("High-pass only",7)]),P=_e(()=>i().get(w.FILTER_TYPE));je(x,{name:"Audio Filter",get items(){return d(M)},select:R=>i().set(w.FILTER_TYPE,R),get selectedTag(){return d(P)}}),ie(b,p)},$$slots:{default:!0}});var _=Q(h,2);Mt(_,{name:"Speakers",children:(b,T)=>{var p=sp(),A=ze(p);const y=_e(()=>i().get(w.AUDVOLL));je(A,{name:"Left Speaker Volume",get tag(){return u().OPT_AUDVOLL},get selectedTag(){return d(y)},select:X=>i().set(w.AUDVOLL,X),min:0,max:100});var E=Q(A,2);const x=_e(()=>i().get(w.AUDVOLR));je(E,{name:"Right Speaker Volume",get tag(){return u().OPT_AUDVOLR},get selectedTag(){return d(x)},select:X=>i().set(w.AUDVOLR,X),min:0,max:100});var M=Q(E,2);const P=_e(()=>i().get(w.AUDVOL0));je(M,{name:"Paula Channel 0 Volume",tag:0,get selectedTag(){return d(P)},select:X=>i().set(w.AUDVOL0,X),min:0,max:100});var R=Q(M,2);const v=_e(()=>i().get(w.AUDVOL1));je(R,{name:"Paula Channel 1 Volume",tag:1,get selectedTag(){return d(v)},select:X=>i().set(w.AUDVOL1,X),min:0,max:100});var I=Q(R,2);const G=_e(()=>i().get(w.AUDVOL2));je(I,{name:"Paula Channel 2 Volume",tag:2,get selectedTag(){return d(G)},select:X=>i().set(w.AUDVOL2,X),min:0,max:100});var k=Q(I,2);const U=_e(()=>i().get(w.AUDVOL3));je(k,{name:"Paula Channel 3 Volume",tag:3,get selectedTag(){return d(U)},select:X=>i().set(w.AUDVOL3,X),min:0,max:100}),ie(b,p)},$$slots:{default:!0}});var m=Q(_,2);Mt(m,{name:"Drive Sounds",children:(b,T)=>{var p=up(),A=ze(p);const y=_e(()=>i().get(w.STEP_VOLUME));je(A,{name:"Head Step Volume",get tag(){return u().OPT_STEP_VOLUME},get selectedTag(){return d(y)},select:I=>i().set(w.STEP_VOLUME,I),min:0,max:100});var E=Q(A,2);const x=_e(()=>i().get(w.POLL_VOLUME));je(E,{name:"Poll Disk Volume",get tag(){return u().OPT_POLL_VOLUME},get selectedTag(){return d(x)},select:I=>i().set(w.POLL_VOLUME,I),min:0,max:100});var M=Q(E,2);const P=_e(()=>i().get(w.INSERT_VOLUME));je(M,{name:"Insert Disk Volume",get tag(){return u().OPT_INSERT_VOLUME},get selectedTag(){return d(P)},select:I=>i().set(w.INSERT_VOLUME,I),min:0,max:100});var R=Q(M,2);const v=_e(()=>i().get(w.EJECT_VOLUME));je(R,{name:"Eject Disk Volume",get tag(){return u().OPT_EJECT_VOLUME},get selectedTag(){return d(v)},select:I=>i().set(w.EJECT_VOLUME,I),min:0,max:100}),ie(b,p)},$$slots:{default:!0}}),j(l),xt(1,l,()=>Pt),ie(a,l),ot(),s()}var fp=Re('<div class="absolute top-0 left-0 w-full h-full flex overflow-auto text-base-content"><div class="w-16 mr-1"></div> <div class="bg-base-100/75 opacity-100 mt-0 p-4 grow h-full overflow-auto"><div class="font-sofia-extra"><div class="flex border-0 border-red-500 justify-between"><div class="text-5xl">SETTINGS</div></div> <div class="flex border-0 border-red-500 justify-between"><div class="float space-x-4 mb-6 border-0"><!> <!> <!> <!> <!></div> <div class="flex justify-between mb-6 border-0 w-[18rem]"><button class="btn btn-outline text-2xl font-normal w-[8.5rem]">Save</button> <button class="btn btn-outline text-2xl font-normal w-[8.5rem]">Reset</button></div></div></div> <!></div></div>');function dp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(an,"$config",n),u=()=>O(Ft,"$layer",n);let l=Rt("GENERAL");function h(){switch(d(l)){case"GENERAL":i().saveGeneralSettings();break;case"MACHINE":i().saveMachineSettings();break;case"COMPATIBILITY":i().saveCompatibilitySettings();break;case"AUDIO":i().saveAudioSettings();break;case"VIDEO":i().saveVideoSettings();break}}function _(){switch(d(l)){case"GENERAL":i().restoreGeneralDefaults();break;case"MACHINE":i().restoreMachineDefaults();break;case"COMPATIBILITY":i().restoreCompatibilityDefaults();break;case"AUDIO":i().restoreAudioDefaults();break;case"VIDEO":i().restoreVideoDefaults();break}}Bt();var m=Et(),b=ze(m);{var T=p=>{var A=fp(),y=Q(W(A),2),E=W(y),x=Q(W(E),2),M=W(x),P=W(M);Sa(P,{name:"GENERAL",get active(){return d(l)},onclick:()=>He(l,"GENERAL")});var R=Q(P,2);Sa(R,{name:"MACHINE",get active(){return d(l)},onclick:()=>He(l,"MACHINE")});var v=Q(R,2);Sa(v,{name:"COMPATIBILITY",get active(){return d(l)},onclick:()=>He(l,"COMPATIBILITY")});var I=Q(v,2);Sa(I,{name:"VIDEO",get active(){return d(l)},onclick:()=>He(l,"VIDEO")});var G=Q(I,2);Sa(G,{name:"AUDIO",get active(){return d(l)},onclick:()=>He(l,"AUDIO")}),j(M);var k=Q(M,2),U=W(k),X=Q(U,2);j(k),j(x),j(E);var oe=Q(E,2);{var Y=J=>{Gm(J,{})},Z=(J,ye)=>{{var de=we=>{Qm(we,{})},xe=(we,ve)=>{{var Te=se=>{np(se,{})},ne=(se,ce)=>{{var Ee=Ne=>{ip(Ne,{})},Ie=(Ne,ue)=>{{var Pe=Ve=>{lp(Ve,{})};Xe(Ne,Ve=>{d(l)==="AUDIO"&&Ve(Pe)},ue)}};Xe(se,Ne=>{d(l)==="VIDEO"?Ne(Ee):Ne(Ie,!1)},ce)}};Xe(we,se=>{d(l)==="COMPATIBILITY"?se(Te):se(ne,!1)},ve)}};Xe(J,we=>{d(l)==="MACHINE"?we(de):we(xe,!1)},ye)}};Xe(oe,J=>{d(l)==="GENERAL"?J(Y):J(Z,!1)})}j(y),j(A),Sn("click",U,h),Sn("click",X,_),xt(3,A,()=>Pt),ie(p,A)};Xe(b,p=>{u()===dt.settings&&p(T)})}ie(a,m),ot(),s()}var vp=Re('<div class="flex h-8"><div><!></div> <div class="h-full w-1 bg-black"></div></div>');function ru(a,r){let n=he(r,"bg",3,"");var s=vp(),i=W(s),u=W(i);zn(u,()=>r.children??En),j(i),xs(2),j(s),lt(()=>We(i,1,`flex h-full w-16 items-center justify-center ${n()??""}`)),ie(a,s)}var gp=Re('<img alt="Floppy icon"/> <div> </div>',1);function hp(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(wn,"$darkTheme",n),u=()=>O(xn,"$invert",n);let l=he(r,"tag",3,0),h=he(r,"cyl",3,0),_=he(r,"disk",3,!0),m=he(r,"motor",3,!1),b=he(r,"writing",3,!1),T=he(r,"unsaved",3,!1),p=he(r,"wp",3,!1),A=he(r,"select",3,()=>{});const y="",E="bg-gradient-to-b from-green-700 to-green-500",x="bg-gradient-to-b from-red-700 to-red-500",M=Qe(()=>p()?"icons/disk-protected.png":"icons/disk.png"),P="icons/floppy-drive.png",R=Qe(()=>_()?d(M):P),v=Qe(()=>m()?b()?x:E:y),I=Qe(()=>T()?"opacity-40":"opacity-70"),G=Qe(()=>i()?"text-gray-300":"text-black"),k=Qe(()=>{let U=[new re("Insert",0),new re("Eject",1)];return U[0].isEnabled=!0,U[0]=U[0],U[1].isEnabled=_(),U[1]=U[1],U});nu(a,{get items(){return d(k)},get tag(){return l()},select:A(),listStyle:"menu menu-compact rounded p-0 text-sm w-32",children:(U,X)=>{ru(U,{get bg(){return d(v)},children:(oe,Y)=>{var Z=gp(),J=ze(Z),ye=Q(J,2),de=W(ye,!0);j(ye),lt(()=>{We(J,1,`h-full border-0 object-scale-down py-1.5 pr-1 ${u()??""} ${d(I)??""}`),$t(J,"src",d(R)),We(ye,1,`w-6 items-center border-0 pl-1 text-left text-sm leading-none ${d(G)??""}`),At(de,h())}),ie(oe,Z)},$$slots:{default:!0}})},$$slots:{default:!0}}),ot(),s()}var mp=Re('<img alt="Floppy icon"/> <div> </div>',1);function pp(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(wn,"$darkTheme",n),u=()=>O(sa,"$poweredOn",n),l=()=>O(xn,"$invert",n);let h=he(r,"tag",3,0),_=he(r,"cyl",3,0),m=he(r,"reading",3,!1),b=he(r,"writing",3,!1),T=he(r,"unsaved",3,!1),p=he(r,"select",3,()=>{});const A="",y="bg-gradient-to-b from-green-700 to-green-500",E="bg-gradient-to-b from-red-700 to-red-500",x="icons/hard-drive.png",M=Qe(()=>x),P=Qe(()=>m()?y:b()?E:A),R=Qe(()=>T()?"opacity-40":"opacity-70"),v=Qe(()=>i()?"text-gray-300":"text-black"),I=Qe(()=>{let G=[new re("Attach",0)];return G[0].isEnabled=!u(),G[0]=G[0],G});nu(a,{get items(){return d(I)},get tag(){return h()},select:p(),listStyle:"menu menu-compact rounded p-0 text-sm w-32",children:(G,k)=>{ru(G,{get bg(){return d(P)},children:(U,X)=>{var oe=mp(),Y=ze(oe);$t(Y,"src",d(M));var Z=Q(Y,2),J=W(Z,!0);j(Z),lt(()=>{We(Y,1,`h-full border-0 object-scale-down py-1.5 pr-1 ${l()??""} ${d(R)??""}`),We(Z,1,`w-6 items-center border-0 pl-1 text-left text-sm leading-none ${d(v)??""}`),At(J,_())}),ie(U,oe)},$$slots:{default:!0}})},$$slots:{default:!0}}),ot(),s()}var _p=Re('<div class="text-primary-content flex h-full w-20 items-center justify-center text-xs"> </div>'),yp=Re('<div class="flex h-8"><div class="h-full w-1 bg-black"></div> <!></div>');function bp(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(Vl,"$cpu",n),u=()=>O(Hl,"$agnus",n),l=()=>O(On,"$amiga",n),h=()=>O(rn,"$wasm",n),_=()=>O(Cs,"$audioPort",n);let m=he(r,"acceleration",15,1),b=he(r,"mhz",15,0),T=he(r,"emuFps",15,0),p=he(r,"gpuFps",15,0),A=he(r,"latchedTimestamp",15,0),y=he(r,"latchedCycle",15,0),E=he(r,"latchedEmuFrame",15,0),x=he(r,"latchedGpuFrame",15,0),M=Ot(0),P=Ot(""),R=Ot(Bi([new re("Amiga Frequency",0),new re("Amiga Refresh Rate",1),new re("Host CPU Load",2),new re("Host GPU Refresh Rate",3),new re("Audio Buffer Fill Level",4)]));sr(()=>{A(Date.now()),d(R)[0].isSelected=!0});function v(oe,Y){if(oe%10!=0)return;let Z=Date.now(),J=(Z-A())/1e3,ye=i().getClock(),de=u().frameCount(),xe=oe;if(ye>=y()){const we=(ye-y())/1e6,ve=.5;b(ve*(we/J)+(1-ve)*b())}if(oe%25==0&&de>=E()){const we=de-E(),ve=.9;T(ve*(we/J)+(1-ve)*T())}if(oe%25==0&&xe>=x()){const we=xe-x(),ve=.9;p(ve*(we/J)+(1-ve)*p())}oe%25==0&&I(),A(Z),y(ye),E(de),x(xe)}function I(){switch(d(M)){case 0:m(l().getConfig(h().OPT_CPU_OVERCLOCKING)),m()==0&&m(1),He(P,(b()*m()).toFixed(2)+" MHz");break;case 1:He(P,T().toFixed(0)+" Hz");break;case 2:He(P,l().cpuLoad()+"%");break;case 3:He(P,p().toFixed(0)+" Hz");break;case 4:He(P,_().audioFillLevel()+"%");break;default:He(P,"---");break}}function G(oe){He(M,oe,!0),d(R).forEach(function(Y){Y.isSelected=Y.tag==d(M)}),He(R,d(R),!0),I()}var k=yp(),U=Q(W(k),2);Kf(U,{get items(){return d(R)},get selectedTag(){return d(M)},select:G,dropdownStyle:"dropdown-end",listStyle:"menu menu-compact rounded text-sm w-64",children:(oe,Y)=>{var Z=_p(),J=W(Z,!0);j(Z),lt(()=>At(J,d(P))),ie(oe,Z)},$$slots:{default:!0}}),j(k),ie(a,k);var X=ot({update:v});return s(),X}var wp=Re('<button type="button"><img alt="Status bar icon"/></button> <!>',1);function Ti(a,r){const[n,s]=vt(),i=()=>O(wn,"$darkTheme",n);let u=he(r,"src",3,""),l=he(r,"onclick",3,()=>{});var h=wp(),_=ze(h);_.__click=function(...T){l()?.apply(this,T)};var m=W(_);j(_);var b=Q(_,2);zn(b,()=>r.children??En),lt(()=>{We(m,1,`h-8 w-8 border-0 object-scale-down p-1.5 ${i()?"invert":""} opacity-70`),$t(m,"src",u())}),ie(a,h),s()}on(["click"]);function Ep(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Gl,"$warpMode",n),u=()=>O(Pi,"$warp",n),l=()=>O(an,"$config",n),h=()=>O(Mr,"$proxy",n),_=Rt();function m(T,p){switch(T){case 0:return p?"icons/warp-auto-on.png":"icons/warp-auto-off.png";case 1:return"icons/warp-never.png";case 2:return"icons/warp-always.png";default:return""}}function b(){let T=l().get(w.WARP_MODE);l().set(w.WARP_MODE,(T+1)%3),h().updateStateVariables()}jn(()=>(i(),u()),()=>{He(_,m(i(),u()))}),oa(),Bt(),Ti(a,{get src(){return d(_)},onclick:b}),ot(),s()}function Sp(a,r,n,s){a.preventDefault(),r().setup(),fe(Ki,!n()),n()||fe(Ft,dt.none)}var Ap=Re('<button type="button" class="flex h-full w-16 justify-center" id="vamigaButton"><img class="h-full" src="icons/vamigaIcon.png" alt="vAmiga Icon"/></button>'),Tp=Re('<!> <div><!> <div class="flex grow border-0 border-red-500"><!> <!></div> <!> <!> <!> <!> <!></div>',1);function Rp(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(jl,"$muted",n),u=()=>O(Pi,"$warp",n),l=()=>O(Wl,"$track",n),h=()=>O(zl,"$halted",n),_=()=>O(Jr,"$audio",n),m=()=>O(Ki,"$showSidebar",n),b=()=>O(Ft,"$layer",n),T=()=>O(On,"$amiga",n),p=()=>O(Ms,"$dfConnected",n),A=()=>O(Is,"$dfHasDisk",n),y=()=>O(Ql,"$dfCylinder",n),E=()=>O(Zl,"$dfMotor",n),x=()=>O(Xl,"$dfWriting",n),M=()=>O(Yl,"$dfUnsaved",n),P=()=>O(ql,"$dfProtected",n),R=()=>O($s,"$hdConnected",n),v=()=>O(tf,"$hdCylinder",n),I=()=>O(ef,"$hdReading",n),G=()=>O(Jl,"$hdWriting",n),k=()=>O(ev,"$hdUnsaved",n);let U,X,oe=Qe(()=>i()||u()),Y=Qe(l),Z=Qe(h);function J(Ce,be){U?.update(Ce,be)}function ye(Ce,be){switch(be){case 0:X.open().then(function(Me){T().insertDisk(Me,Ce),T().running||T().run()},function(Me){console.log("error",Me)});break;case 1:T().ejectDisk(Ce);break;default:console.warn("Invalid menu item",be)}}function de(Ce,be){switch(be){case 0:X.open().then(function(Me){console.log("Attaching hard drive",Me),T().attachHardDrive(Me,Ce)},function(Me){console.log("error",Me)});break;default:console.warn("Invalid menu item",be)}}var xe=Tp(),we=ze(xe);Ut(df(we,{}),Ce=>X=Ce,()=>X);var ve=Q(we,2);We(ve,1,"relative z-50 mb-1 flex h-8 bg-gradient-to-t from-primary to-primary/80");var Te=W(ve);ru(Te,{children:(Ce,be)=>{var Me=Ap();Me.__click=[Sp,_,m,b],ie(Ce,Me)},$$slots:{default:!0}});var ne=Q(Te,2),se=W(ne);ta(se,16,()=>Array(4),ea,(Ce,be,Me)=>{var tt=Et(),gt=ze(tt);{var wt=nt=>{hp(nt,{tag:Me,get disk(){return A()[Me]},get cyl(){return y()[Me]},get motor(){return E()[Me]},get writing(){return x()[Me]},get unsaved(){return M()[Me]},get wp(){return P()[Me]},select:pe=>ye(Me,pe)})};Xe(gt,nt=>{p()[Me]&&nt(wt)})}ie(Ce,tt)});var ce=Q(se,2);ta(ce,16,()=>Array(4),ea,(Ce,be,Me)=>{var tt=Et(),gt=ze(tt);{var wt=nt=>{pp(nt,{tag:Me,get cyl(){return v()[Me]},get reading(){return I()[Me]},get writing(){return G()[Me]},get unsaved(){return k()[Me]},select:pe=>de(Me,pe)})};Xe(gt,nt=>{R()[Me]&&nt(wt)})}ie(Ce,tt)}),j(ne);var Ee=Q(ne,2);{var Ie=Ce=>{Ti(Ce,{src:"icons/halt.png"})};Xe(Ee,Ce=>{d(Z)&&Ce(Ie)})}var Ne=Q(Ee,2);{var ue=Ce=>{Ti(Ce,{src:"icons/debug.png"})};Xe(Ne,Ce=>{d(Y)&&Ce(ue)})}var Pe=Q(Ne,2);{var Ve=Ce=>{Ti(Ce,{src:"icons/mute.png"})};Xe(Pe,Ce=>{d(oe)&&Ce(Ve)})}var me=Q(Pe,2);Ep(me,{});var z=Q(me,2);Ut(bp(z,{}),Ce=>U=Ce,()=>U),j(ve),ie(a,xe);var ct=ot({update:J});return s(),ct}on(["click"]);var xp=Re('<div class="absolute top-0 left-0 w-full h-full flex overflow-auto"><div class="w-16 mr-1"></div> <div class="bg-gray-500/75 grow h-full overflow-auto"><textarea readonly="" style="resize: none; font-variant-ligatures: none" class="font-azeret text-base focus:border-transparent focus:outline-none focus:ring-0 text-white bg-transparent w-full h-full p-2"></textarea></div></div>');function Pp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Zo,"$MsgConsoleClose",n),u=()=>O(Ft,"$layer",n),l=()=>O(Qo,"$MsgConsoleUpdate",n),h=()=>O(nf,"$retroShell",n);let _=Rt();function m(A){if(A.preventDefault(),A.ctrlKey){switch(A.key){case"k":h().pressCut();break;case"a":h().pressHome();break}return}switch(A.key){case"ArrowUp":h().pressUp();break;case"ArrowDown":h().pressDown();break;case"ArrowLeft":h().pressLeft();break;case"ArrowRight":h().pressRight();break;case"Home":h().pressHome();break;case"End":h().pressEnd();break;case"Backspace":h().pressBackspace();break;case"Delete":h().pressDelete();break;case"Enter":A.shiftKey?h().pressShiftReturn():h().pressReturn();break;case"Tab":h().pressTab();break;default:A.key.length==1&&h().pressKey(A.key.charCodeAt(0))}}jn(()=>(i(),dt),()=>{i()&&fe(Ft,dt.none)}),jn(()=>(l(),h(),d(_)),()=>{if(l()){let A=h().getCursorRel();d(_)&&(Go(_,d(_).value=h().getText()),d(_).focus(),d(_).setSelectionRange(d(_).value.length+A-1,d(_).value.length+A),Go(_,d(_).scrollTop=d(_).scrollHeight))}}),oa(),Bt();var b=Et(),T=ze(b);{var p=A=>{var y=xp(),E=Q(W(y),2),x=W(E);Ut(x,M=>He(_,M),()=>d(_)),j(E),j(y),Sn("keydown",x,m),xt(3,y,()=>Pt),ie(A,y)};Xe(T,A=>{u(),Un(dt),Wn(()=>u()===dt.shell)&&A(p)})}ie(a,b),ot(),s()}var Dp=Re('<div class="flex h-screen w-screen flex-grow flex-col overflow-clip" role="region"><!></div>');function kp(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(rn,"$wasm",n),u=()=>O(On,"$amiga",n),l=()=>O(Mr,"$proxy",n),h=()=>O(Pa,"$initialized",n);function _(P){P.preventDefault(),P.dataTransfer}function m(P){P.preventDefault()}function b(P){}async function T(P){if(P.preventDefault(),!P.dataTransfer||!P.dataTransfer.items||P.dataTransfer.items.length!==1)return;let R=P.dataTransfer.items[0];if(R.kind!=="file")return;const v=R.getAsFile();if(!v)return;const I=v.name;console.log("Dropped file:",I);let G=await v.arrayBuffer(),k=new Uint8Array(G);await v.arrayBuffer();let U=I;switch(console.log("tmp name:",U),console.log("WASM.FS",i().FS),i().FS.writeFile(U,k),console.log("Checking type..."),u().getFileType(U)){case i().FILETYPE_ROM:await p(k);return;case i().FILETYPE_ADF:case i().FILETYPE_EADF:case i().FILETYPE_DMS:case i().FILETYPE_EXE:A(k);return;case i().FILETYPE_HDF:y(k);return;default:console.warn("Unsupported file format");return}}async function p(P){l().addRom(P)}function A(P){fe(Jo,P),fe(es,"floppy"),fe(Ft,dt.dropzone)}function y(P){fe(Jo,P),fe(es,"harddrive"),fe(Ft,dt.dropzone)}var E=Dp(),x=W(E);{var M=P=>{var R=Et(),v=ze(R);zn(v,()=>r.children??En),ie(P,R)};Xe(x,P=>{h()&&P(M)})}j(E),Sn("dragenter",E,_),Sn("dragleave",E,b),Sn("dragover",E,m),Sn("drop",E,T),ie(a,E),ot(),s()}var Op=Xt('<path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path>');function Cp(a,r){const n=Nt(r,["children","$$slots","$$events","$$legacy"]);un(a,sn({viewBox:"0 0 352 512"},()=>n,{children:(s,i)=>{var u=Op();ie(s,u)},$$slots:{default:!0}}))}async function Mp(a,r,n,s){a.preventDefault(),await r().setup(),n()(s.name)}var Ip=Re('<div class="text-primary-content h-full w-full opacity-50"><!></div>'),$p=Re('<img alt="Icon"/>'),Np=Re('<img alt="Icon"/>'),Lp=Re('<div class="bg-primary/90 rounded-xl p-4"><div class="flex flex-col items-center"><div role="button" tabindex="0"><!></div> <div class="font-azaret text-primary-content text-xl"> </div></div></div>');function gr(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(Jr,"$audio",n),u=()=>O(xn,"$invert",n);let l=he(r,"enabled",3,!1),h=he(r,"selected",7,!1),_=he(r,"icon1",3,"icons/disk.png"),m=he(r,"icon2",3,"icons/disk.png");he(r,"opacity",3,"opacity-50");let b=he(r,"select",3,()=>{}),T=Qe(()=>h()?"opacity-100":"opacity-50"),p=Qe(()=>l()?"opacity-100":"opacity-50");function A(k){k.preventDefault(),l()&&h(!0)}function y(k){k.preventDefault(),h(!1)}var E=Lp(),x=W(E),M=W(x);M.__mousedown=[Mp,i,b,r];var P=W(M);{var R=k=>{var U=Ip(),X=W(U);Cp(X,{}),j(U),ie(k,U)},v=(k,U)=>{{var X=Y=>{var Z=$p();lt(()=>{We(Z,1,`${u()??""} ${d(T)??""}`),$t(Z,"src",_())}),ie(Y,Z)},oe=(Y,Z)=>{{var J=ye=>{var de=Np();lt(()=>{We(de,1,`${u()??""} ${d(T)??""}`),$t(de,"src",m())}),ie(ye,de)};Xe(Y,ye=>{m()!==""&&ye(J)},Z)}};Xe(k,Y=>{h()?Y(X):Y(oe,!1)},U)}};Xe(P,k=>{l()?k(v,!1):k(R)})}j(M);var I=Q(M,2),G=W(I,!0);j(I),j(x),j(E),lt(()=>{We(M,1,`border-primary-content h-32 w-32 rounded-xl border-2 p-5 ${d(p)??""}`),At(G,r.name)}),Sn("mouseenter",M,A),Sn("mouseleave",M,y),ie(a,E),ot(),s()}on(["mousedown"]);var Up=Re("<!> <!> <!> <!>",1),Fp=Re("<!> <!> <!> <!>",1),Bp=Re('<div class="absolute top-10 left-0 flex w-screen justify-center"><div class="relative flex items-center justify-center space-x-4 rounded-xl p-4"><!></div></div>');function Kp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Jo,"$dragItem",n),u=()=>O(On,"$amiga",n),l=()=>O(Ft,"$layer",n),h=()=>O(es,"$dragType",n),_=()=>O(Is,"$dfHasDisk",n),m=()=>O(Ms,"$dfConnected",n),b=()=>O($s,"$hdConnected",n);function T(x){i()&&(u().insertDisk(i(),x),u().running||u().run()),fe(Ft,dt.none)}function p(x){i()&&(u().attachHardDrive(i(),x),u().running||u().run()),fe(Ft,dt.none)}Bt();var A=Et(),y=ze(A);{var E=x=>{var M=Bp(),P=W(M),R=W(P);{var v=G=>{var k=Up(),U=ze(k);const X=_e(()=>_()[0]?"icons/disk.png":"");gr(U,{id:0,icon1:"icons/disk.png",get icon2(){return d(X)},name:"DF0",get enabled(){return m()[0]},select:()=>T(0)});var oe=Q(U,2);const Y=_e(()=>_()[1]?"icons/disk.png":"");gr(oe,{id:1,icon1:"icons/disk.png",get icon2(){return d(Y)},name:"DF1",get enabled(){return m()[1]},select:()=>T(1)});var Z=Q(oe,2);const J=_e(()=>_()[1]?"icons/disk.png":"");gr(Z,{id:2,icon1:"icons/disk.png",get icon2(){return d(J)},name:"DF2",get enabled(){return m()[2]},select:()=>T(2)});var ye=Q(Z,2);const de=_e(()=>_()[1]?"icons/disk.png":"");gr(ye,{id:3,icon1:"icons/disk.png",get icon2(){return d(de)},name:"DF3",get enabled(){return m()[3]},select:()=>T(3)}),ie(G,k)},I=G=>{var k=Fp(),U=ze(k);gr(U,{id:0,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD0",get enabled(){return b()[0]},select:()=>p(0)});var X=Q(U,2);gr(X,{id:1,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD1",get enabled(){return b()[1]},select:()=>p(1)});var oe=Q(X,2);gr(oe,{id:2,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD2",get enabled(){return b()[2]},select:()=>p(2)});var Y=Q(oe,2);gr(Y,{id:3,icon1:"icons/hard-drive.png",icon2:"icons/hard-drive.png",name:"HD3",get enabled(){return b()[3]},select:()=>p(3)}),ie(G,k)};Xe(R,G=>{h()==="floppy"?G(v):G(I,!1)})}j(P),j(M),xt(3,M,()=>Pt),ie(x,M)};Xe(y,x=>{l()===dt.dropzone&&x(E)})}ie(a,A),ot(),s()}var Vp=Re('<div><div class="h-24 w-full border-none flex flex-col justify-center text-lg font-azeret text-center"><p class="p-1"> </p> <p class="p-1"> </p></div></div>');function Hp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(rn,"$wasm",n),u=()=>O(ts,"$errno",n),l=()=>O(rf,"$enums",n),h=()=>O(ns,"$what",n),_=Rt(),m=Rt();let b=Rt(!1),T=Rt(!0);jn(()=>i(),()=>{He(_,i()!=null)}),jn(()=>(u(),d(_),d(b),d(T)),()=>{u()&&d(_)&&!d(b)&&(He(b,!0),setInterval(()=>{He(T,!d(T))},800))}),jn(()=>d(T),()=>{He(m,d(T)?"border-red-600":"border-black")}),oa(),Bt();var p=Et(),A=ze(p);{var y=E=>{var x=Vp(),M=W(x),P=W(M),R=W(P);j(P);var v=Q(P,2),I=W(v,!0);j(v),j(M),j(x),lt(G=>{We(x,1,`relative flex justify-center bg-black text-red-600 border-[10px] ${d(m)??""}`),At(R,`Emulator failure. Uncaught exception ${u()??""} (${G??""})`),At(I,h())},[()=>(l(),u(),Wn(()=>l().ErrorCodeKey(u())))],_e),ie(E,x)};Xe(A,E=>{d(b)&&E(y)})}ie(a,p),ot(),s()}function Gp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(rn,"$wasm",n),u=()=>O(Jr,"$audio",n),l=()=>O(On,"$amiga",n),h=()=>O(an,"$config",n),_=()=>O(jo,"$memory",n),m=()=>O(Mu,"$df0",n),b=()=>O(Iu,"$df1",n),T=()=>O($u,"$df2",n),p=()=>O(Nu,"$df3",n),A=()=>O(Lu,"$diskController",n),y=()=>O(Uu,"$hd0",n),E=()=>O(Fu,"$hd1",n),x=()=>O(Bu,"$hd2",n),M=()=>O(Ku,"$hd3",n),P=()=>O(Vu,"$paula",n),R=()=>O(Pa,"$initialized",n),v=()=>O(Pi,"$warp",n),I=()=>O(el,"$MsgNone",n),G=()=>O(Xo,"$MsgConfig",n),k=()=>O(Jc,"$MsgPower",n),U=()=>O(Qc,"$MsgRun",n),X=()=>O(Zc,"$MsgPause",n),oe=()=>O(Xc,"$MsgStep",n),Y=()=>O(Yc,"$MsgReset",n),Z=()=>O(qc,"$MsgShutdown",n),J=()=>O(zc,"$MsgAbort",n),ye=()=>O(Wc,"$MsgWarp",n),de=()=>O(jc,"$MsgTrack",n),xe=()=>O(Gc,"$MsgMute",n),we=()=>O(Hc,"$MsgPowerLedOn",n),ve=()=>O(Vc,"$MsgPowerLedDim",n),Te=()=>O(Kc,"$MsgPowerLedOff",n),ne=()=>O(Zo,"$MsgConsoleClose",n),se=()=>O(Qo,"$MsgConsoleUpdate",n),ce=()=>O(Bc,"$MsgConsoleDebugger",n),Ee=()=>O(Fc,"$MsgScriptDone",n),Ie=()=>O(Uc,"$MsgScriptPause",n),Ne=()=>O(Lc,"$MsgScriptAbort",n),ue=()=>O(Nc,"$MsgScriptWakeup",n),Pe=()=>O($c,"$MsgVideoFormat",n),Ve=()=>O(Ic,"$MsgOverclocking",n),me=()=>O(Mc,"$MsgBreakpointReached",n),z=()=>O(Cc,"$MsgBreakpointUpdated",n),ct=()=>O(Oc,"$MsgWatchpointReached",n),Ce=()=>O(kc,"$MsgWatchpointUpdated",n),be=()=>O(Dc,"$MsgCatchpointReached",n),Me=()=>O(Pc,"$MsgCatchpointUpdated",n),tt=()=>O(xc,"$MsgSwTrapReached",n),gt=()=>O(Rc,"$MsgCpuHalt",n),wt=()=>O(Tc,"$MsgCopperBpReached",n),nt=()=>O(Ac,"$MsgCopperBpUpdated",n),pe=()=>O(Sc,"$MsgCopperWpReached",n),ge=()=>O(Ec,"$MsgCopperWpUpdated",n),ht=()=>O(wc,"$MsgViewport",n),Zt=()=>O(bc,"$MsgMemLayout",n),cn=()=>O(yc,"$MsgDriveConnect",n),Mn=()=>O(_c,"$MsgDriveSelect",n),ln=()=>O(pc,"$MsgDriveRead",n),fn=()=>O(mc,"$MsgDriveWrite",n),jt=()=>O(hc,"$MsgDriveLed",n),Kn=()=>O(gc,"$MsgDriveMotor",n),An=()=>O(vc,"$MsgDriveStep",n),Qn=()=>O(dc,"$MsgDrivePoll",n),en=()=>O(fc,"$MsgDiskInsert",n),dn=()=>O(lc,"$MsgDiskEject",n),Tn=()=>O(cc,"$MsgDiskProtected",n),vn=()=>O(uc,"$MsgHdcConnect",n),Qt=()=>O(sc,"$MsgHdcState",n),Be=()=>O(oc,"$MsgHdrStep",n),Ht=()=>O(ic,"$MsgHdrRead",n),In=()=>O(ac,"$MsgHdrWrite",n),Le=()=>O(rc,"$MsgHdrIdle",n),ae=()=>O(nc,"$MsgCtrlAmigaAmiga",n),Ge=()=>O(Wo,"$MsgShaking",n),mt=()=>O(tc,"$MsgSerIn",n),Kt=()=>O(ec,"$MsgSerOut",n),za=()=>O(Ju,"$MsgAutoSnapshotTaken",n),la=()=>O(Qu,"$MsgUserSnapshotTaken",n),Ji=()=>O(Zu,"$MsgSnapshotRestored",n),eo=()=>O(Xu,"$MsgRecordingStarted",n),ur=()=>O(Yu,"$MsgRecordingStopped",n),cr=()=>O(qu,"$MsgRecordingAborted",n),fa=()=>O(zu,"$MsgDmaDebug",n),Ur=()=>O(Wu,"$MsgSrvState",n),_t=()=>O(ju,"$MsgSrvReceive",n),Dt=()=>O(Gu,"$MsgSrvSend",n),to=()=>O(Hu,"$MsgAlarm",n);sr(()=>{console.log("Proxy::onMount()"),Qd(rn,Wn(i).processMsg=Nn,Wn(i)),hn()});async function Ar(qe){await u().setup();try{console.log("Showcase:",qe.title),l().powerOff(),gn(qe.roms),h().set(w.CHIP_RAM,qe.memory[0]),h().set(w.SLOW_RAM,qe.memory[1]),h().set(w.FAST_RAM,qe.memory[2]),h().set(w.DF1,qe.adf.length>1);for(let Ke=0;Ke<qe.adf.length;Ke++)await Vn(qe.adf[Ke],Ke);h().set(w.WARP_MODE,qe.warp),console.log("Launchine emulator..."),l().run(),qe.title=="Absolute Inebriation"&&(console.log("Scheduling disk change (inebriation)"),l().setAlarmAbs(3e3,1)),qe.title=="Eon"&&(console.log("Scheduling disk change (eon)"),l().setAlarmAbs(7600,2)),console.log("Done")}catch(Ke){throw console.log("CATCHED "+Ke),Ke}}function lr(){console.error("Exception "+l().errorCode()+": "+l().what())}async function Vn(qe,Ke){try{console.log("Fetching adf/"+qe);let mn=await(await fetch("adf/"+qe)).arrayBuffer(),Xa=new Uint8Array(mn);l().insertDisk(Xa,Ke),console.log("Disk inserted")}catch{lr()}}async function Tr(qe){if(qe==0)return _().deleteRom(),_().deleteExt(),fe(tl,qe),!0;try{const Ke=await Dn.roms.get(qe);return Ke?(Ke?.rom?(_().loadRom(Ke.rom,Ke.rom.length),fe(tl,qe)):_().deleteRom(),Ke?.ext?_().loadExt(Ke.ext,Ke.ext.length):_().deleteExt(),!0):!1}catch(Ke){return console.log("installRom failed: ",Ke),!1}}async function gn(qe){for(const Ke of qe)if(await Tr(Ke))return!0;return!1}async function Jn(qe){let Ke=_().analyzeRom(qe,qe.byteLength);if(Ke.crc32){try{const kt=Ke.title,mn=await Dn.roms.add({crc32:Ke.crc32,title:Ke.title,version:Ke.version,released:Ke.released,model:Ke.model,isAros:Ke.vendor==i().RomVendor.AROS,isDiag:Ke.vendor==i().RomVendor.DIAG,isCommodore:Ke.vendor==i().RomVendor.COMMODORE,isHyperion:Ke.vendor==i().RomVendor.HYPERION,isUnknown:Ke.vendor==i().RomVendor.UNKNOWN,isPatched:Ke.isPatched,rom:qe,ext:null,extStart:0});console.log(`${kt} successfully added with id ${mn}`)}catch(kt){throw console.log("Failed to add Kickstart",kt),kt}fe(Ft,dt.kickstart)}}async function $n(){await Tr(ft.Aros)}async function Rr(){await Tr(ft.DiagROM)}function qa(){hn()}function hn(){console.log("Creating proxies..."),fe(Hl,new(i()).AgnusProxy),fe(Cs,new(i()).AudioPortProxy),fe(Vl,new(i()).CPUProxy),fe(Ll,new(i()).DeniseProxy),fe(Mu,new(i()).DriveProxy(0)),fe(Iu,new(i()).DriveProxy(1)),fe($u,new(i()).DriveProxy(2)),fe(Nu,new(i()).DriveProxy(3)),fe(Lu,new(i()).DiskControllerProxy),fe(rf,new(i()).EnumProxy),fe(Uu,new(i()).HardDriveProxy(0)),fe(Fu,new(i()).HardDriveProxy(1)),fe(Bu,new(i()).HardDriveProxy(2)),fe(Ku,new(i()).HardDriveProxy(3)),fe(ks,new(i()).JoystickProxy(1)),fe(Os,new(i()).JoystickProxy(2)),fe(Ul,new(i()).KeyboardProxy),fe(jo,new(i()).MemoryProxy),fe(Nl,new(i()).MouseProxy(1)),fe(Fl,new(i()).MouseProxy(2)),fe(Vu,new(i()).PaulaProxy),fe(nf,new(i()).RetroShellProxy),fe(On,new(i()).AmigaProxy),console.log("Launching the emulator..."),l().launch(),console.log("Configuring the emulator..."),l().configure(i().OPT_AGNUS_REVISION,i().AGNUS_ECS_2MB),fe(Bl,{ArrowLeft:i().PULL_LEFT,ArrowRight:i().PULL_RIGHT,ArrowUp:i().PULL_UP,ArrowDown:i().PULL_DOWN,ControlRight:i().PRESS_FIRE,Space:i().PRESS_FIRE}),fe(Kl,{KeyS:i().PULL_LEFT,KeyD:i().PULL_RIGHT,KeyE:i().PULL_UP,KeyX:i().PULL_DOWN,KeyC:i().RELEASE_FIRE}),(async()=>(console.log("Installing Roms..."),gn([3304125791,2798523958,3283989056,1062194186]),console.log("Initialization completed"),fe(Pa,!0)))()}function pt(){if(!R())return;const qe=A().getState(),Ke=A().getSelected(),kt=qe==i().DRIVE_DMA_WRITE;fe(sa,l().poweredOn()),fe(Ps,l().isRunning()),fe(Pi,l().isWarping()),fe(Gl,h().getNum(w.WARP_MODE)),fe(Wl,l().isTracking()),fe(jl,P().isMuted()||v()),fe(zl,l().isHalted()),fe(Ms,[m().isConnected(),b().isConnected(),T().isConnected(),p().isConnected()]),fe(Is,[m().hasDisk(),b().hasDisk(),T().hasDisk(),p().hasDisk()]),fe(Zl,[m().motor(),b().motor(),T().motor(),p().motor()]),fe(Xl,[Ke==0&&kt,Ke==1&&kt,Ke==2&&kt,Ke==3&&kt]),fe(Yl,[m().hasModifiedDisk(),b().hasModifiedDisk(),T().hasModifiedDisk(),p().hasModifiedDisk()]),fe(ql,[m().hasProtectedDisk(),b().hasProtectedDisk(),T().hasProtectedDisk(),p().hasProtectedDisk()]),fe(Ql,[m().currentCyl(),b().currentCyl(),T().currentCyl(),p().currentCyl()]),fe($s,[y().isConnected(),E().isConnected(),x().isConnected(),M().isConnected()]),fe(tf,[y().currentCyl(),E().currentCyl(),x().currentCyl(),M().currentCyl()]),fe(ef,[y().isReading(),E().isReading(),x().isReading(),M().isReading()]),fe(Jl,[y().isWriting(),E().isWriting(),x().isWriting(),M().isWriting()])}function Nn(qe){switch(qe.type?.value){case i().MSG_NONE:Ue(el,I());break;case i().MSG_CONFIG:Ue(Xo,G());break;case i().MSG_POWER:Ue(Jc,k()),pt();break;case i().MSG_RUN:Ue(Qc,U()),pt();break;case i().MSG_PAUSE:Ue(Zc,X()),pt();break;case i().MSG_STEP:Ue(Xc,oe());break;case i().MSG_RESET:Ue(Yc,Y()),pt();break;case i().MSG_SHUTDOWN:Ue(qc,Z());break;case i().MSG_ABORT:Ue(zc,J());break;case i().MSG_WARP:Ue(Wc,ye()),pt();break;case i().MSG_TRACK:Ue(jc,de()),pt();break;case i().MSG_MUTE:Ue(Gc,xe()),pt();break;case i().MSG_POWER_LED_ON:Ue(Hc,we());break;case i().MSG_POWER_LED_DIM:Ue(Vc,ve());break;case i().MSG_POWER_LED_OFF:Ue(Kc,Te());break;case i().MSG_CONSOLE_CLOSE:Ue(Zo,ne());break;case i().MSG_CONSOLE_UPDATE:Ue(Qo,se());break;case i().MSG_CONSOLE_DEBUGGER:Ue(Bc,ce());break;case i().MSG_SCRIPT_DONE:Ue(Fc,Ee());break;case i().MSG_SCRIPT_PAUSE:Ue(Uc,Ie());break;case i().MSG_SCRIPT_ABORT:Ue(Lc,Ne());break;case i().MSG_SCRIPT_WAKEUP:Ue(Nc,ue());break;case i().MSG_VIDEO_FORMAT:Ue($c,Pe());break;case i().MSG_OVERCLOCKING:Ue(Ic,Ve());break;case i().MSG_BREAKPOINT_REACHED:Ue(Mc,me());break;case i().MSG_BREAKPOINT_UPDATED:Ue(Cc,z());break;case i().MSG_WATCHPOINT_REACHED:Ue(Oc,ct());break;case i().MSG_WATCHPOINT_UPDATED:Ue(kc,Ce());break;case i().MSG_CATCHPOINT_REACHED:Ue(Dc,be());break;case i().MSG_CATCHPOINT_UPDATED:Ue(Pc,Me());break;case i().MSG_SWTRAP_REACHED:Ue(xc,tt());break;case i().MSG_CPU_HALT:Ue(Rc,gt()),pt();break;case i().MSG_COPPERBP_REACHED:Ue(Tc,wt());break;case i().MSG_COPPERBP_UPDATED:Ue(Ac,nt());break;case i().MSG_COPPERWP_REACHED:Ue(Sc,pe());break;case i().MSG_COPPERWP_UPDATED:Ue(Ec,ge());break;case i().MSG_VIEWPORT:Ue(wc,ht());break;case i().MSG_MEM_LAYOUT:Ue(bc,Zt());break;case i().MSG_DRIVE_CONNECT:Ue(yc,cn()),pt();break;case i().MSG_DRIVE_SELECT:Ue(_c,Mn());break;case i().MSG_DRIVE_READ:Ue(pc,ln());break;case i().MSG_DRIVE_WRITE:Ue(mc,fn()),pt();break;case i().MSG_DRIVE_LED:Ue(hc,jt());break;case i().MSG_DRIVE_MOTOR:Ue(gc,Kn()),pt();break;case i().MSG_DRIVE_STEP:Ue(vc,An()),pt(),u().playStepSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DRIVE_POLL:Ue(dc,Qn()),pt(),u().playStepSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DISK_INSERT:Ue(fc,en()),pt(),u().playInsertSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DISK_EJECT:Ue(lc,dn()),pt(),u().playEjectSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_DISK_PROTECTED:Ue(cc,Tn()),pt();break;case i().MSG_HDC_CONNECT:Ue(uc,vn()),pt();break;case i().MSG_HDC_STATE:Ue(sc,Qt()),pt();break;case i().MSG_HDR_STEP:Ue(oc,Be()),u().playClickSound(qe.drive.volume,qe.drive.pan);break;case i().MSG_HDR_READ:Ue(ic,Ht()),pt();break;case i().MSG_HDR_WRITE:Ue(ac,In()),pt();break;case i().MSG_HDR_IDLE:Ue(rc,Le()),pt();break;case i().MSG_CTRL_AMIGA_AMIGA:Ue(nc,ae());break;case i().MSG_SHAKING:Ue(Wo,Ge());break;case i().MSG_SER_IN:Ue(tc,mt());break;case i().MSG_SER_OUT:Ue(ec,Kt());break;case i().MSG_AUTO_SNAPSHOT_TAKEN:Ue(Ju,za());break;case i().MSG_USER_SNAPSHOT_TAKEN:Ue(Qu,la());break;case i().MSG_SNAPSHOT_RESTORED:Ue(Zu,Ji()),pt();break;case i().MSG_RECORDING_STARTED:Ue(Xu,eo());break;case i().MSG_RECORDING_STOPPED:Ue(Yu,ur());break;case i().MSG_RECORDING_ABORTED:Ue(qu,cr());break;case i().MSG_DMA_DEBUG:Ue(zu,fa()),fe($l,qe.value);break;case i().MSG_SRV_STATE:Ue(Wu,Ur());break;case i().MSG_SRV_RECEIVE:Ue(ju,_t());break;case i().MSG_SRV_SEND:Ue(Gu,Dt());break;case i().MSG_ALARM:Ue(Hu,to()),console.log("Alarm received: ",qe.value),qe.value==1&&(console.log("Inserting disk 2..."),Vn("AbsoluteInebriation2.adf",0)),qe.value==2&&(console.log("Inserting disk 2..."),Vn("Eon2.adf",0));break}}Bt(),Ye(r,"runShowcase",Ar),Ye(r,"reportException",lr),Ye(r,"insert",Vn),Ye(r,"installRom",Tr),Ye(r,"installRoms",gn),Ye(r,"addRom",Jn),Ye(r,"installAros",$n),Ye(r,"installDiagRom",Rr),Ye(r,"runtimeInitialized",qa),Ye(r,"onRuntimeInitialized",hn),Ye(r,"updateStateVariables",pt),Ye(r,"processMsg",Nn);var Ya=ot({runShowcase:Ar,reportException:lr,insert:Vn,installRom:Tr,installRoms:gn,addRom:Jn,installAros:$n,installDiagRom:Rr,runtimeInitialized:qa,onRuntimeInitialized:hn,updateStateVariables:pt,processMsg:Nn});return s(),Ya}function jp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Cs,"$audioPort",n),u=()=>O(rn,"$wasm",n);let l,h,_,m,b,T=0;async function p(){if(l)return;console.log("Setting up audio..."),l=new AudioContext,l.onstatechange=()=>console.log("Audio Context: state = "+l.state);let I=l.createGain();I.gain.value=1,I.connect(l.destination),console.log("Audio context: ",l.state),i().setSampleRate(l.sampleRate),await l.audioWorklet.addModule("js/audio-processor.js"),console.log("Audio Worklet module loaded");const G=new AudioWorkletNode(l,"audio-processor",{outputChannelCount:[2],processorOptions:{pointers:[i().leftChannelBuffer(),i().rightChannelBuffer()],buffer:u().HEAPF32.buffer,length:2048}});console.log("Audio Worklet Node created"),G.port.onmessage=k=>{i().updateAudio(k.data)},G.connect(I),l.state==="suspended"&&await l.resume(),await A()}async function A(){console.log("Loading sounds..."),h||(h=await R("sounds/insert.mp3")),_||(_=await R("sounds/eject.mp3")),m||(m=await R("sounds/step.mp3")),b||(b=await R("sounds/stephd.mp3"))}function y(I,G){P(h,I)}function E(I,G){P(_,I)}function x(I,G){P(m,I)}function M(I,G){P(b,I)}async function P(I,G,k){if(I==null||T>=3)return;const U=l.createGain();U.gain.value=.004*G,U.connect(l.destination);const X=l.createBufferSource();X.buffer=I,X.addEventListener("ended",()=>{T--}),X.connect(U),X.start(),T++}async function R(I){let k=await(await fetch(I)).arrayBuffer();return await l.decodeAudioData(k)}Bt(),Ye(r,"setup",p),Ye(r,"playInsertSound",y),Ye(r,"playEjectSound",E),Ye(r,"playStepSound",x),Ye(r,"playClickSound",M);var v=ot({setup:p,playInsertSound:y,playEjectSound:E,playStepSound:x,playClickSound:M});return s(),v}function Wp(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(On,"$amiga",n),u=()=>O(rn,"$wasm",n),l=()=>O(an,"$config",n);let h=[{opt:w.WARP_MODE,default:[Lt.auto].toString()},{opt:w.THEME,default:Ct.default.toString()},{opt:w.CANVAS_BORDER,default:"0"},{opt:w.SHAKING,default:"1"}],_=[{opt:w.CPU_REVISION,default:"0"},{opt:w.AGNUS_REVISION,default:"0"},{opt:w.DENISE_REVISION,default:"0"},{opt:w.RTC_MODEL,default:"0"},{opt:w.CHIP_RAM,default:"512"},{opt:w.SLOW_RAM,default:"512"},{opt:w.FAST_RAM,default:"0"},{opt:w.BANK_MAP,default:"0"},{opt:w.INIT_PATTERN,default:"0"},{opt:w.UNMAPPED,default:"0"},{opt:w.SLOW_RAM_MIRROR,default:"1"},{opt:w.SLOW_RAM_DELAY,default:"1"},{opt:w.DF0,default:"1"},{opt:w.DF1,default:"1"},{opt:w.DF2,default:"0"},{opt:w.DF3,default:"0"},{opt:w.HD0,default:"1"},{opt:w.HD1,default:"0"},{opt:w.HD2,default:"0"},{opt:w.HD3,default:"0"}],m=[{opt:w.BLITTER_ACCURACY,default:"2"},{opt:w.TODBUG,default:"1"},{opt:w.PTR_DROPS,default:"1"},{opt:w.ECLOCK_SYNCING,default:"1"},{opt:w.DRIVE_SPEED,default:"1"},{opt:w.DRIVE_MECHANICS,default:"1"},{opt:w.OPT_LOCK_DSKSYNC,default:"0"},{opt:w.OPT_AUTO_DSKSYNC,default:"0"},{opt:w.CLX_SPR_SPR,default:"0"},{opt:w.CLX_SPR_PLF,default:"0"},{opt:w.CLX_PLF_PLF,default:"0"},{opt:w.ACCURATE_KEYBOARD,default:"1"}],b=[{opt:w.ASR,default:"0"},{opt:w.BUFFER_SIZE,default:"16384"},{opt:w.AUDVOL0,default:"100"},{opt:w.AUDVOL1,default:"100"},{opt:w.AUDVOL2,default:"100"},{opt:w.AUDVOL3,default:"100"},{opt:w.AUDVOLL,default:"50"},{opt:w.AUDVOLR,default:"50"},{opt:w.STEP_VOLUME,default:"50"},{opt:w.POLL_VOLUME,default:"50"},{opt:w.INSERT_VOLUME,default:"50"},{opt:w.EJECT_VOLUME,default:"50"}],T=[{opt:w.RENDER_MODE,default:Da.smooth.toString()},{opt:w.FLICKER_WEIGHT,default:"0"},{opt:w.PALETTE,default:"0"},{opt:w.BRIGHTNESS,default:"50"},{opt:w.CONTRAST,default:"100"},{opt:w.SATURATION,default:"50"}],p=Ct.default,A=0,y=1,E=Da.smooth,x=50;Fs(()=>Dn.opts.toArray()).subscribe(pe=>{}),sr(()=>{console.log("Config::onMount()"),P(),xe()});async function P(){await R(),await v(),await I(),await G(),await k()}async function R(){for(const pe of h)await U(pe.opt,pe.default)}async function v(){for(const pe of _)await U(pe.opt,pe.default)}async function I(){for(const pe of m)await U(pe.opt,pe.default)}async function G(){for(const pe of b)await U(pe.opt,pe.default)}async function k(){for(const pe of T)await U(pe.opt,pe.default)}async function U(pe,ge){try{await Dn.opts.add({key:pe,value:ge})}catch{}}async function X(){await oe(),await Y(),await Z(),await J(),await ye()}async function oe(){for(const pe of h)await de(pe.opt);await R(),await we()}async function Y(){for(const pe of _)await de(pe.opt);await v(),await ve()}async function Z(){for(const pe of m)await de(pe.opt);await I(),await Te()}async function J(){for(const pe of b)await de(pe.opt);await G(),await ne()}async function ye(){for(const pe of T)await de(pe.opt);await k(),await se()}async function de(pe){try{const ge=await Dn.opts.delete(pe)}catch{console.log("Failed to remove entry",pe)}}async function xe(){console.log("Loading settings..."),await we(),await ve(),await Te(),await ne(),await se()}async function we(){for(const pe of h)await ce(pe.opt)}async function ve(){for(const pe of _)await ce(pe.opt)}async function Te(){for(const pe of m)await ce(pe.opt)}async function ne(){for(const pe of b)await ce(pe.opt)}async function se(){for(const pe of T)await ce(pe.opt)}async function ce(pe){try{const ge=await Dn.opts.get(pe);ge!==void 0&&Me(pe,ge.value)}catch{}}async function Ee(){await Ie(),await Ne(),await ue(),await Pe(),await Ve()}async function Ie(){for(const pe of h)await me(pe.opt)}async function Ne(){for(const pe of _)await me(pe.opt)}async function ue(){for(const pe of m)await me(pe.opt)}async function Pe(){for(const pe of b)await me(pe.opt)}async function Ve(){for(const pe of T)await me(pe.opt)}async function me(pe){const ge=ct(pe);try{const ht=await Dn.opts.put({key:pe,value:ge})}catch{}}function z(pe){if(pe==null)throw console.warn("Value is undefined or null"),new Error("Value is undefined or null");return pe}function ct(pe){switch(pe){case w.THEME:return[p].toString();case w.CANVAS_BORDER:return A.toString();case w.SHAKING:return y.toString();case w.CPU_REVISION:return i().getConfig(z(u().OPT_CPU_REVISION)).toString();case w.CPU_SPEED:return i().getConfig(z(u().OPT_CPU_OVERCLOCKING)).toString();case w.WARP_MODE:return i().getConfig(z(u().OPT_AMIGA_WARP_MODE)).toString();case w.AGNUS_REVISION:return i().getConfig(z(u().OPT_AGNUS_REVISION)).toString();case w.DENISE_REVISION:return i().getConfig(z(u().OPT_DENISE_REVISION)).toString();case w.RTC_MODEL:return i().getConfig(z(u().OPT_RTC_MODEL)).toString();case w.CHIP_RAM:return i().getConfig(z(u().OPT_MEM_CHIP_RAM)).toString();case w.SLOW_RAM:return i().getConfig(z(u().OPT_MEM_SLOW_RAM)).toString();case w.FAST_RAM:return i().getConfig(z(u().OPT_MEM_FAST_RAM)).toString();case w.BANK_MAP:return i().getConfig(z(u().OPT_MEM_BANKMAP)).toString();case w.INIT_PATTERN:return i().getConfig(z(u().OPT_MEM_RAM_INIT_PATTERN)).toString();case w.UNMAPPED:return i().getConfig(z(u().OPT_MEM_UNMAPPING_TYPE)).toString();case w.SLOW_RAM_MIRROR:return i().getConfig(z(u().OPT_MEM_SLOW_RAM_MIRROR)).toString();case w.SLOW_RAM_DELAY:return i().getConfig(z(u().OPT_MEM_SLOW_RAM_DELAY)).toString();case w.DF0:return i().getConfigId(z(u().OPT_DRIVE_CONNECT),0).toString();case w.DF1:return i().getConfigId(z(u().OPT_DRIVE_CONNECT),1).toString();case w.DF2:return i().getConfigId(z(u().OPT_DRIVE_CONNECT),2).toString();case w.DF3:return i().getConfigId(z(u().OPT_DRIVE_CONNECT),3).toString();case w.HD0:return i().getConfigId(z(u().OPT_HDC_CONNECT)).toString();case w.HD1:return i().getConfigId(z(u().OPT_HDC_CONNECT)).toString();case w.HD2:return i().getConfigId(z(u().OPT_HDC_CONNECT)).toString();case w.HD3:return i().getConfigId(z(u().OPT_HDC_CONNECT)).toString();case w.BLITTER_ACCURACY:return i().getConfig(z(u().OPT_BLITTER_ACCURACY)).toString();case w.TODBUG:return i().getConfig(z(u().OPT_CIA_TODBUG)).toString();case w.PTR_DROPS:return i().getConfig(z(u().OPT_AGNUS_PTR_DROPS)).toString();case w.ECLOCK_SYNCING:return i().getConfig(z(u().OPT_CIA_ECLOCK_SYNCING)).toString();case w.DRIVE_SPEED:return i().getConfig(z(u().OPT_DC_SPEED)).toString();case w.DRIVE_MECHANICS:return i().getConfig(z(u().OPT_DRIVE_MECHANICS)).toString();case w.OPT_LOCK_DSKSYNC:return i().getConfig(z(u().OPT_DC_LOCK_DSKSYNC)).toString();case w.OPT_AUTO_DSKSYNC:return i().getConfig(z(u().OPT_DC_AUTO_DSKSYNC)).toString();case w.CLX_SPR_SPR:return i().getConfig(z(u().OPT_DENISE_CLX_SPR_SPR)).toString();case w.CLX_SPR_PLF:return i().getConfig(z(u().OPT_DENISE_CLX_SPR_PLF)).toString();case w.CLX_PLF_PLF:return i().getConfig(z(u().OPT_DENISE_CLX_PLF_PLF)).toString();case w.ACCURATE_KEYBOARD:return i().getConfig(z(u().OPT_KBD_ACCURACY)).toString();case w.SAMPLING_METHOD:return i().getConfig(z(u().OPT_AUD_SAMPLING_METHOD)).toString();case w.FILTER_TYPE:return i().getConfig(z(u().OPT_AUD_FILTER_TYPE)).toString();case w.BUFFER_SIZE:return i().getConfig(z(u().OPT_AUD_BUFFER_SIZE)).toString();case w.ASR:return i().getConfig(z(u().OPT_AUD_ASR)).toString();case w.AUDVOL0:return i().getConfig(z(u().OPT_AUD_VOL0)).toString();case w.AUDVOL1:return i().getConfig(z(u().OPT_AUD_VOL1)).toString();case w.AUDVOL2:return i().getConfig(z(u().OPT_AUD_VOL2)).toString();case w.AUDVOL3:return i().getConfig(z(u().OPT_AUD_VOL3)).toString();case w.AUDVOLL:return i().getConfig(z(u().OPT_AUD_VOLL)).toString();case w.AUDVOLR:return i().getConfig(z(u().OPT_AUD_VOLR)).toString();case w.STEP_VOLUME:return 0;case w.POLL_VOLUME:return 0;case w.INSERT_VOLUME:return 0;case w.EJECT_VOLUME:return 0;case w.RENDER_MODE:return E.toString();case w.PALETTE:return i().getConfig(z(u().OPT_MON_PALETTE)).toString();case w.BRIGHTNESS:return i().getConfig(z(u().OPT_MON_BRIGHTNESS)).toString();case w.CONTRAST:return i().getConfig(z(u().OPT_MON_CONTRAST)).toString();case w.SATURATION:return i().getConfig(z(u().OPT_MON_SATURATION)).toString();case w.FLICKER_WEIGHT:return x.toString();default:return console.warn("get: Invalid option: ",pe),"???"}}function Ce(pe){return Number(ct(pe))}function be(pe){return Ce(pe)!=0}function Me(pe,ge){switch(pe){case w.THEME:wt(Number(ge));break;case w.CANVAS_BORDER:A=Number(ge);break;case w.SHAKING:y=Number(ge);break;case w.CPU_REVISION:i().configure(z(u().OPT_CPU_REVISION),Number(ge));break;case w.CPU_SPEED:i().configure(z(u().OPT_CPU_OVERCLOCKING),Number(ge));break;case w.WARP_MODE:i().configure(z(u().OPT_AMIGA_WARP_MODE),Number(ge));break;case w.AGNUS_REVISION:i().configure(z(u().OPT_AGNUS_REVISION),Number(ge));break;case w.DENISE_REVISION:i().configure(z(u().OPT_DENISE_REVISION),Number(ge));break;case w.RTC_MODEL:i().configure(z(u().OPT_RTC_MODEL),Number(ge));break;case w.CHIP_RAM:i().configure(z(u().OPT_MEM_CHIP_RAM),Number(ge));break;case w.SLOW_RAM:i().configure(z(u().OPT_MEM_SLOW_RAM),Number(ge));break;case w.FAST_RAM:i().configure(z(u().OPT_MEM_FAST_RAM),Number(ge));break;case w.BANK_MAP:i().configure(z(u().OPT_MEM_BANKMAP),Number(ge));break;case w.INIT_PATTERN:i().configure(z(u().OPT_MEM_RAM_INIT_PATTERN),Number(ge));break;case w.UNMAPPED:i().configure(z(u().OPT_MEM_UNMAPPING_TYPE),Number(ge));break;case w.SLOW_RAM_MIRROR:i().configure(z(u().OPT_MEM_SLOW_RAM_MIRROR),Number(ge));break;case w.SLOW_RAM_DELAY:i().configure(z(u().OPT_MEM_SLOW_RAM_DELAY),Number(ge));break;case w.DF0:break;case w.DF1:i().configureId(z(u().OPT_DRIVE_CONNECT),Number(ge),1),Number(ge)==0&&i().configureId(z(u().OPT_DRIVE_CONNECT),0,2),Number(ge)==0&&i().configureId(z(u().OPT_DRIVE_CONNECT),0,3);break;case w.DF2:Number(ge)==1&&i().configureId(z(u().OPT_DRIVE_CONNECT),1,1),i().configureId(z(u().OPT_DRIVE_CONNECT),Number(ge),2),Number(ge)==0&&i().configureId(z(u().OPT_DRIVE_CONNECT),0,3);break;case w.DF3:Number(ge)==1&&i().configureId(z(u().OPT_DRIVE_CONNECT),1,1),Number(ge)==1&&i().configureId(z(u().OPT_DRIVE_CONNECT),1,2),i().configureId(z(u().OPT_DRIVE_CONNECT),Number(ge),3);break;case w.HD0:i().configureId(z(u().OPT_HDC_CONNECT),0,ge);break;case w.HD1:i().configureId(z(u().OPT_HDC_CONNECT),1,ge);break;case w.HD2:i().configureId(z(u().OPT_HDC_CONNECT),2,ge);break;case w.HD3:i().configureId(z(u().OPT_HDC_CONNECT),3,ge);break;case w.BLITTER_ACCURACY:i().configure(z(u().OPT_BLITTER_ACCURACY),Number(ge));break;case w.TODBUG:i().configure(z(u().OPT_CIA_TODBUG),Number(ge));break;case w.PTR_DROPS:i().configure(z(u().OPT_AGNUS_PTR_DROPS),Number(ge));break;case w.ECLOCK_SYNCING:i().configure(z(u().OPT_CIA_ECLOCK_SYNCING),Number(ge));break;case w.DRIVE_SPEED:i().configure(z(u().OPT_DC_SPEED),Number(ge));break;case w.DRIVE_MECHANICS:i().configureId(z(u().OPT_DRIVE_MECHANICS),0,Number(ge)),i().configureId(z(u().OPT_DRIVE_MECHANICS),1,Number(ge)),i().configureId(z(u().OPT_DRIVE_MECHANICS),2,Number(ge)),i().configureId(z(u().OPT_DRIVE_MECHANICS),3,Number(ge));break;case w.OPT_LOCK_DSKSYNC:i().configure(z(u().OPT_DC_LOCK_DSKSYNC),Number(ge));break;case w.OPT_AUTO_DSKSYNC:i().configure(z(u().OPT_DC_AUTO_DSKSYNC),Number(ge));break;case w.CLX_SPR_SPR:i().configure(z(u().OPT_DENISE_CLX_SPR_SPR),Number(ge));break;case w.CLX_SPR_PLF:i().configure(z(u().OPT_DENISE_CLX_SPR_PLF),Number(ge));break;case w.CLX_PLF_PLF:i().configure(z(u().OPT_DENISE_CLX_PLF_PLF),Number(ge));break;case w.ACCURATE_KEYBOARD:i().configure(z(u().OPT_KBD_ACCURACY),Number(ge));break;case w.SAMPLING_METHOD:i().configure(z(u().OPT_AUD_SAMPLING_METHOD),Number(ge));break;case w.FILTER_TYPE:i().configure(z(u().OPT_AUD_FILTER_TYPE),Number(ge));break;case w.BUFFER_SIZE:i().configure(z(u().OPT_AUD_BUFFER_SIZE),Number(ge));break;case w.ASR:i().configure(z(u().OPT_AUD_ASR),Number(ge));break;case w.AUDVOL0:i().configure(z(u().OPT_AUD_VOL0),Number(ge));break;case w.AUDVOL1:i().configure(z(u().OPT_AUD_VOL1),Number(ge));break;case w.AUDVOL2:i().configure(z(u().OPT_AUD_VOL2),Number(ge));break;case w.AUDVOL3:i().configure(z(u().OPT_AUD_VOL3),Number(ge));break;case w.AUDVOLL:i().configure(z(u().OPT_AUD_VOLL),Number(ge));break;case w.AUDVOLR:i().configure(z(u().OPT_AUD_VOLR),Number(ge));break;case w.STEP_VOLUME:break;case w.POLL_VOLUME:break;case w.INSERT_VOLUME:break;case w.EJECT_VOLUME:break;case w.RENDER_MODE:E=Number(ge);break;case w.PALETTE:i().configure(z(u().OPT_MON_PALETTE),Number(ge));break;case w.BRIGHTNESS:i().configure(z(u().OPT_MON_BRIGHTNESS),Number(ge));break;case w.CONTRAST:i().configure(z(u().OPT_MON_CONTRAST),Number(ge));break;case w.SATURATION:i().configure(z(u().OPT_MON_SATURATION),Number(ge));break;case w.FLICKER_WEIGHT:x=Number(ge);break;default:console.warn("set: Invalid option: ",pe)}fe(an,l())}function tt(pe,ge){Me(pe,ge.toString())}function gt(pe,ge){Me(pe,ge?"true":"false")}function wt(pe){p=pe;let ge="";switch(p){case Ct.default:ge="mytheme",fe(wn,!0),fe(xn,"invert");break;case Ct.light:ge="light",fe(wn,!0),fe(xn,"invert");break;case Ct.dark:ge="dark",fe(wn,!0),fe(xn,"invert");break;case Ct.coffee:ge="coffee",fe(wn,!1),fe(xn,"");break;case Ct.cupcake:ge="cupcake",fe(wn,!1),fe(xn,"");break;case Ct.forest:ge="forest",fe(wn,!0),fe(xn,"invert");break;case Ct.aqua:ge="aqua",fe(wn,!1),fe(xn,"");break;case Ct.garden:ge="garden",fe(wn,!0),fe(xn,"invert");break;case Ct.pastel:ge="pastel",fe(wn,!1),fe(xn,"");break;default:console.warn("Invalid theme")}document.querySelector("html")?.setAttribute("data-theme",ge)}Bt(),Ye(r,"restoreDefaults",X),Ye(r,"restoreGeneralDefaults",oe),Ye(r,"restoreMachineDefaults",Y),Ye(r,"restoreCompatibilityDefaults",Z),Ye(r,"restoreAudioDefaults",J),Ye(r,"restoreVideoDefaults",ye),Ye(r,"loadSettings",xe),Ye(r,"loadGeneralSettings",we),Ye(r,"loadMachineSettings",ve),Ye(r,"loadCompatibilitySettings",Te),Ye(r,"loadAudioSettings",ne),Ye(r,"loadVideoSettings",se),Ye(r,"saveSettings",Ee),Ye(r,"saveGeneralSettings",Ie),Ye(r,"saveMachineSettings",Ne),Ye(r,"saveCompatibilitySettings",ue),Ye(r,"saveAudioSettings",Pe),Ye(r,"saveVideoSettings",Ve),Ye(r,"get",ct),Ye(r,"getNum",Ce),Ye(r,"getBool",be),Ye(r,"set",Me),Ye(r,"setNum",tt),Ye(r,"setBool",gt);var nt=ot({restoreDefaults:X,restoreGeneralDefaults:oe,restoreMachineDefaults:Y,restoreCompatibilityDefaults:Z,restoreAudioDefaults:J,restoreVideoDefaults:ye,loadSettings:xe,loadGeneralSettings:we,loadMachineSettings:ve,loadCompatibilitySettings:Te,loadAudioSettings:ne,loadVideoSettings:se,saveSettings:Ee,saveGeneralSettings:Ie,saveMachineSettings:Ne,saveCompatibilitySettings:ue,saveAudioSettings:Pe,saveVideoSettings:Ve,get:ct,getNum:Ce,getBool:be,set:Me,setNum:tt,setBool:gt});return s(),nt}function zp(a,r){it(r,!0);const[n,s]=vt(),i=()=>O(yn,"$port1",n),u=()=>O(ks,"$joystick1",n),l=()=>O(bn,"$port2",n),h=()=>O(Os,"$joystick2",n),_=()=>O(rn,"$wasm",n);let m=he(r,"gamepads",31,()=>Bi({}));sr(()=>{console.log("GamePadManager::onMount()"),window.addEventListener("gamepadconnected",A=>{m(m()[A.gamepad.index]=A.gamepad,!0)},!1),window.addEventListener("gamepaddisconnected",A=>{delete m()[A.gamepad.index]},!1)});function b(){return i()==tn.gamepad1||i()==tn.gamepad2?u():l()==tn.gamepad1||l()==tn.gamepad2?h():null}function T(){const A=navigator.getGamepads();if(A.length==0)return;const y=A[0];if(!y)return;const E=y.buttons[0].pressed,x=y.axes[0].valueOf(),M=y.axes[1].valueOf();E?b()?.trigger(_().PRESS_FIRE):b()?.trigger(_().RELEASE_FIRE),x<-.5?b()?.trigger(_().PULL_LEFT):x>.5?b()?.trigger(_().PULL_RIGHT):b()?.trigger(_().RELEASE_X),M<-.5?b()?.trigger(_().PULL_UP):M>.5?b()?.trigger(_().PULL_DOWN):b()?.trigger(_().RELEASE_Y)}var p=ot({pollState:T});return s(),p}var qp=Re('<!> <div class="box relative grow border-none border-green-300 overflow-auto"><!> <!> <!> <!> <!> <!></div>',1),Yp=Re("<!> <!> <!> <!>",1),Xp=Re('<div class="h-screen overflow-y-auto scroll-smooth bg-black text-white"><!> <!> <!></div>');function v0(a,r){it(r,!1);const[n,s]=vt(),i=()=>O(Pa,"$initialized",n),u=()=>O(zo,"$canvasWidth",n),l=()=>O(qo,"$canvasHeight",n),h=()=>O(pi,"$aspectWidth",n),_=()=>O(_i,"$aspectHeight",n),m=()=>O(On,"$amiga",n),b=()=>O(Ft,"$layer",n),T=()=>O(rn,"$wasm",n),p=()=>O(yn,"$port1",n),A=()=>O(bn,"$port2",n),y=()=>O(Mr,"$proxy",n),E=()=>O(an,"$config",n),x=()=>O(Jr,"$audio",n),M=()=>O(Yo,"$gamepadManager",n);let P=0,R=Rt(),v=Rt(),I=Rt(),G;Fs(()=>Dn.roms.orderBy("title").toArray()).subscribe(se=>{fe(Ds,se)}),sr(()=>{console.log("+page::onMount()"),window.addEventListener("resize",function(){clearTimeout(G),G=setTimeout(oe,250)}),window.addEventListener("error",Y),window.addEventListener("unhandledrejection",Z)});function U(se){P++,d(R)&&d(R).doAnimationFrame(P,se),d(I)&&d(I).update(P,se),window.requestAnimationFrame(U)}function X(){d(v)!=null&&(fe(zo,d(v).clientWidth),fe(qo,d(v).clientHeight),fe(pi,u()),fe(_i,h()*3/4),_()>l()&&(fe(_i,l()),fe(pi,_()*4/3)))}function oe(){X()}function Y(se){m().what()!==0&&(fe(ns,m().what()),fe(ts,m().errorCode()))}function Z(se){m().what()!==0&&(fe(ns,m().what()),fe(ts,m().errorCode()))}function J(se,ce){switch(se){case"shell":fe(Ft,b()==dt.shell?dt.none:dt.shell);break;case"settings":fe(Ft,b()==dt.settings?dt.none:dt.settings);break;case"monitor":m().getConfig(T().OPT_DMA_DEBUG_ENABLE)?(d(R).textureRect.zoomIn(),m().configure(T().OPT_DMA_DEBUG_ENABLE,0)):(d(R).textureRect.zoomOut(),m().configure(T().OPT_DMA_DEBUG_ENABLE,1));break;case"pause":try{m().isRunning()?(console.log("Pausing..."),m().pause()):(console.log("Running..:"),m().run())}catch(Ee){console.log(Ee),T().reportException()}break;case"power":try{m().poweredOn()?(m().powerOff(),m().hardReset()):m().run()}catch(Ee){console.log(Ee),T().reportException()}break;case"reset":try{m().hardReset()}catch(Ee){console.log(Ee),T().reportException()}break;case"fit":fe(Ta,"fit");break;case"aspect":fe(Ta,"aspect");break;case"full":fe(Ta,"full");break;case"empty1":fe(yn,0);break;case"mouse1":fe(yn,1),A()==1&&fe(bn,0);break;case"keyset11":fe(yn,2),A()==2&&fe(bn,0);break;case"keyset12":fe(yn,3),A()==3&&fe(bn,0);break;case"gamepad11":fe(yn,4),A()==4&&fe(bn,0);break;case"empty2":fe(bn,0);break;case"mouse2":fe(bn,1),p()==1&&fe(yn,0);break;case"keyset21":fe(bn,2),p()==2&&fe(yn,0);break;case"keyset22":fe(bn,3),p()==3&&fe(yn,0);break;case"gamepad21":fe(bn,4),p()==4&&fe(yn,0);break;default:console.log("Unhandled sender: "+se)}}function ye(se){}jn(()=>d(v),()=>{d(v)&&X()}),jn(()=>i(),()=>{i()&&window.requestAnimationFrame(U)}),oa(),Bt();var de=Xp();Xd(se=>{Zd.title="vAmiga.net"});var xe=W(de);Hp(xe,{});var we=Q(xe,2);{var ve=se=>{Ut(Gp(se,{$$legacy:!0}),ce=>fe(Mr,ce),()=>y())};Xe(we,se=>{T()&&se(ve)})}var Te=Q(we,2);{var ne=se=>{var ce=Yp(),Ee=ze(ce);Ut(Wp(Ee,{$$legacy:!0}),Pe=>fe(an,Pe),()=>E());var Ie=Q(Ee,2);Ut(jp(Ie,{$$legacy:!0}),Pe=>fe(Jr,Pe),()=>x());var Ne=Q(Ie,2);Ut(zp(Ne,{$$legacy:!0}),Pe=>fe(Yo,Pe),()=>M());var ue=Q(Ne,2);kp(ue,{children:(Pe,Ve)=>{var me=qp(),z=ze(me);Ut(Rp(z,{$$events:{push:ye},$$legacy:!0}),nt=>He(I,nt),()=>d(I));var ct=Q(z,2),Ce=W(ct);sm(Ce,{});var be=Q(Ce,2);Ut(gm(be,{$$legacy:!0}),nt=>He(R,nt),()=>d(R));var Me=Q(be,2);Pp(Me,{});var tt=Q(Me,2);dp(tt,{});var gt=Q(tt,2);Kp(gt,{});var wt=Q(gt,2);Mv(wt,{action:J}),j(ct),Ut(ct,nt=>He(v,nt),()=>d(v)),ie(Pe,me)},$$slots:{default:!0}}),ie(se,ce)};Xe(Te,se=>{i()&&se(ne)})}j(de),ie(a,de),ot(),s()}export{v0 as component};
